var gX=Object.defineProperty;var hX=(Ko,Yo,bs)=>Yo in Ko?gX(Ko,Yo,{enumerable:!0,configurable:!0,writable:!0,value:bs}):Ko[Yo]=bs;var Xe=(Ko,Yo,bs)=>hX(Ko,typeof Yo!="symbol"?Yo+"":Yo,bs);function pX(Ko){return Ko&&Ko.__esModule&&Object.prototype.hasOwnProperty.call(Ko,"default")?Ko.default:Ko}var mX={exports:{}};(function(Ko){(function(){var Yo=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},bs=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},jo=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},as=function(e,n){return ds(function(o,r){return e.eq(n(o),n(r))})},ds=function(e){return{eq:e}},ls=ds(function(e,n){return e===n}),Nt=ls,vn=function(e){return ds(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,a=0;a<r;a++)if(!e.eq(n[a],o[a]))return!1;return!0})},zt=function(e,n){return as(vn(e),function(o){return jo(o,n)})},ts=function(e){return ds(function(n,o){var r=Object.keys(n),a=Object.keys(o);if(!zt(Nt).eq(r,a))return!1;for(var u=r.length,f=0;f<u;f++){var h=r[f];if(!e.eq(n[h],o[h]))return!1}return!0})},Go=ds(function(e,n){if(e===n)return!0;var o=Yo(e),r=Yo(n);return o!==r?!1:bs(o)?e===n:o==="array"?vn(Go).eq(e,n):o==="object"?ts(Go).eq(e,n):!1});const cn=Object.getPrototypeOf,Fn=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)==null?void 0:r.name)===n.name},Eo=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&Fn(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},qn=e=>n=>Eo(n)===e,dt=e=>n=>typeof n===e,Fo=e=>n=>e===n,nn=(e,n)=>En(e)&&Fn(e,n,(o,r)=>cn(o)===r),re=qn("string"),En=qn("object"),Vo=e=>nn(e,Object),je=qn("array"),G=Fo(null),St=dt("boolean"),ro=Fo(void 0),pn=e=>e==null,xe=e=>!pn(e),le=dt("function"),vs=dt("number"),qe=(e,n)=>{if(je(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},rt=()=>{},k=(e,n)=>(...o)=>e(n.apply(null,o)),ho=(e,n)=>o=>e(n(o)),tt=e=>()=>e,No=e=>e,ln=(e,n)=>e===n;function He(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const Je=e=>n=>!e(n),Bt=e=>()=>{throw new Error(e)},Be=e=>e(),xt=e=>{e()},Ae=tt(!1),Ve=tt(!0),Id=class Id{constructor(n,o){Xe(this,"tag");Xe(this,"value");this.tag=n,this.value=o}static some(n){return new Id(!0,n)}static none(){return Id.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?Id.some(n(this.value)):Id.none()}bind(n){return this.tag?n(this.value):Id.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:Id.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return xe(n)?Id.some(n):Id.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};Xe(Id,"singletonNone",new Id(!1));let F=Id;const Fs=Array.prototype.slice,jn=Array.prototype.indexOf,Xn=Array.prototype.push,co=(e,n)=>jn.call(e,n),ms=(e,n)=>{const o=co(e,n);return o===-1?F.none():F.some(o)},De=(e,n)=>co(e,n)>-1,ve=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const a=e[o];if(n(a,o))return!0}return!1},ae=(e,n)=>{const o=e.length,r=new Array(o);for(let a=0;a<o;a++){const u=e[a];r[a]=n(u,a)}return r},te=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const a=e[o];n(a,o)}},Dt=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},Ee=(e,n)=>{const o=[],r=[];for(let a=0,u=e.length;a<u;a++){const f=e[a];(n(f,a)?o:r).push(f)}return{pass:o,fail:r}},Ce=(e,n)=>{const o=[];for(let r=0,a=e.length;r<a;r++){const u=e[r];n(u,r)&&o.push(u)}return o},_t=(e,n)=>{if(e.length===0)return[];{let o=n(e[0]);const r=[];let a=[];for(let u=0,f=e.length;u<f;u++){const h=e[u],v=n(h);v!==o&&(r.push(a),a=[]),o=v,a.push(h)}return a.length!==0&&r.push(a),r}},bn=(e,n,o)=>(Dt(e,(r,a)=>{o=n(o,r,a)}),o),$e=(e,n,o)=>(te(e,(r,a)=>{o=n(o,r,a)}),o),et=(e,n,o)=>{for(let r=0,a=e.length;r<a;r++){const u=e[r];if(n(u,r))return F.some(u);if(o(u,r))break}return F.none()},Xt=(e,n)=>et(e,n,Ae),oo=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const a=e[o];if(n(a,o))return F.some(o)}return F.none()},vo=(e,n)=>{for(let o=e.length-1;o>=0;o--)if(n(e[o],o))return F.some(o);return F.none()},Lo=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!je(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);Xn.apply(n,e[o])}return n},zn=(e,n)=>Lo(ae(e,n)),ns=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const a=e[o];if(n(a,o)!==!0)return!1}return!0},ko=e=>{const n=Fs.call(e,0);return n.reverse(),n},mo=(e,n)=>Ce(e,o=>!De(n,o)),Ns=(e,n)=>{const o={};for(let r=0,a=e.length;r<a;r++){const u=e[r];o[String(u)]=n(u,r)}return o},Ls=(e,n)=>{const o=Fs.call(e,0);return o.sort(n),o},Uo=(e,n)=>n>=0&&n<e.length?F.some(e[n]):F.none(),Wo=e=>Uo(e,0),Js=e=>Uo(e,e.length-1),Xo=le(Array.from)?Array.from:e=>Fs.call(e),Os=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return F.none()},Hr=(e,n)=>{const o=[],r=le(n)?a=>ve(o,u=>n(u,a)):a=>De(o,a);for(let a=0,u=e.length;a<u;a++){const f=e[a];r(f)||o.push(f)}return o},on=Object.keys,So=Object.hasOwnProperty,yo=(e,n)=>{const o=on(e);for(let r=0,a=o.length;r<a;r++){const u=o[r],f=e[u];n(f,u)}},Nc=(e,n)=>nc(e,(o,r)=>({k:r,v:n(o,r)})),nc=(e,n)=>{const o={};return yo(e,(r,a)=>{const u=n(r,a);o[u.k]=u.v}),o},qt=e=>(n,o)=>{e[o]=n},Dr=(e,n,o,r)=>{yo(e,(a,u)=>{(n(a,u)?o:r)(a,u)})},Ue=(e,n)=>{const o={},r={};return Dr(e,n,qt(o),qt(r)),{t:o,f:r}},Ot=(e,n)=>{const o={};return Dr(e,n,qt(o),rt),o},an=(e,n)=>{const o=[];return yo(e,(r,a)=>{o.push(n(r,a))}),o},tn=e=>an(e,No),dn=(e,n)=>Jt(e,n)?F.from(e[n]):F.none(),Jt=(e,n)=>So.call(e,n),lo=(e,n)=>Jt(e,n)&&e[n]!==void 0&&e[n]!==null,zr=(e,n,o=Go)=>ts(o).eq(e,n),dc={generate:e=>{if(!je(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return te(e,(r,a)=>{const u=on(r);if(u.length!==1)throw new Error("one and only one name per case");const f=u[0],h=r[f];if(o[f]!==void 0)throw new Error("duplicate key detected:"+f);if(f==="cata")throw new Error("cannot have a case named cata (sorry)");if(!je(h))throw new Error("case arguments must be an array");n.push(f),o[f]=(...v)=>{const w=v.length;if(w!==h.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+h.length+" ("+h+"), got "+w);return{fold:(...R)=>{if(R.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+R.length);return R[a].apply(null,v)},match:R=>{const M=on(R);if(n.length!==M.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+M.join(","));if(!ns(n,K=>De(M,K)))throw new Error("Not all branches were specified when using match. Specified: "+M.join(", ")+`
Required: `+n.join(", "));return R[f].apply(null,v)},log:R=>{console.log(R,{constructors:n,constructor:f,params:v})}}}}),o}},Yt=e=>{let n=e;return{get:()=>n,set:a=>{n=a}}},Or=e=>{const n=u=>u(e),o=tt(e),r=()=>a,a={tag:!0,inner:e,fold:(u,f)=>f(e),isValue:Ve,isError:Ae,map:u=>_s.value(u(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>F.some(e)};return a},wr=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,a)=>r(e),isValue:Ae,isError:Ve,map:n,mapError:r=>_s.error(r(e)),bind:n,exists:Ae,forall:Ve,getOr:No,or:No,getOrThunk:Be,orThunk:Be,getOrDie:Bt(String(e)),each:rt,toOptional:F.none};return o},_s={value:Or,error:wr,fromOption:(e,n)=>e.fold(()=>wr(n),Or)},me=typeof window<"u"?window:Function("return this;")(),ne=()=>{const e=window.crypto.getRandomValues(new Uint8Array(16));return e[6]=e[6]&15|64,e[8]=e[8]&63|128,e},Te=()=>{const e=ne(),n=(o,r)=>{let a="";for(let u=o;u<=r;++u){const f=e[u].toString(16).padStart(2,"0");a+=f}return a};return`${n(0,3)}-${n(4,5)}-${n(6,7)}-${n(8,9)}-${n(10,15)}`},Tt=(e,n,o)=>Math.min(Math.max(e,n),o),Wn=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let kn=0;const Jn=e=>{const o=new Date().getTime(),r=Math.floor(Wn()*1e9);return kn++,e+"_"+r+kn+String(o)},cr=()=>window.isSecureContext?window.crypto.randomUUID():Te(),Kn=(e,n)=>n,nt=(e,n)=>Vo(e)&&Vo(n)?fe(e,n):n,ue=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const a=n[r];for(const u in a)Jt(a,u)&&(o[u]=e(o[u],a[u]))}return o},fe=ue(nt),Qe=ue(Kn),ht=(e,n,o=ln)=>e.exists(r=>o(r,n)),It=(e,n,o=ln)=>Qt(e,n,o).getOr(e.isNone()&&n.isNone()),An=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},Qt=(e,n,o)=>e.isSome()&&n.isSome()?F.some(o(e.getOrDie(),n.getOrDie())):F.none(),Cn=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?F.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):F.none(),Co=e=>e.bind(No),To=(e,n)=>e?F.some(n):F.none(),Po=(e,n)=>{let o=n??me;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},qs=(e,n)=>{const o=e.split(".");return Po(o,n)};dc.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const _r=e=>{const n=[],o=[];return te(e,r=>{r.fold(a=>{n.push(a)},a=>{o.push(a)})}),{errors:n,values:o}},bi=e=>{const n=Yt(F.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(F.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:h=>{o(),n.set(F.some(h))}}},$i=e=>{const n=Yt(F.none()),o=()=>n.get().each(h=>clearInterval(h));return{clear:()=>{o(),n.set(F.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:h=>{o(),n.set(F.some(setInterval(h,e)))}}},fs=()=>{const e=bi(rt);return{...e,on:o=>e.get().each(o)}},gs=(e,n)=>e.substring(n),Hs=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,Aa=(e,n)=>Ln(e,n)?gs(e,n.length):e,zs=(e,n,o=0,r)=>{const a=e.indexOf(n,o);return a!==-1?ro(r)?!0:a+n.length<=r:!1},Ln=(e,n)=>Hs(e,n,0),vc=(e,n)=>Hs(e,n,e.length-n.length),Ac=e=>n=>n.replace(e,""),dr=Ac(/^\s+|\s+$/g),ed=Ac(/^\s+/g),mu=Ac(/\s+$/g),Qs=e=>e.length>0,vi=e=>!Qs(e),ei=(e,n)=>n<=0?"":new Array(n+1).join(e),td=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?F.none():F.some(o)},Pt=(e,n)=>{let o=null;return{cancel:()=>{G(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{G(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},n))}}},La=(e,n)=>{let o=null;const r=()=>{G(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},n)}}},Pc=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},Yc="\uFEFF",mr=" ",fu="…",Xc=e=>e===Yc,ka=e=>e.replace(/\uFEFF/g,""),Pl=e=>{const n={};return te(e,o=>{n[o]={}}),on(n)},nd=e=>e.length!==void 0,Ii=Array.isArray,gu=e=>{if(Ii(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},$l=(e,n,o)=>{if(!e)return!1;if(o=o||e,nd(e)){for(let r=0,a=e.length;r<a;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(Jt(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},Li=(e,n)=>{const o=[];return $l(e,(r,a)=>{o.push(n(r,a,e))}),o},Il=(e,n)=>{const o=[];return $l(e,(r,a)=>{(!n||n(r,a,e))&&o.push(r)}),o},At=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},dl=(e,n,o,r)=>{let a=ro(o)?e[0]:o;for(let u=0;u<e.length;u++)a=n.call(r,a,e[u],u);return a},od=(e,n,o)=>{for(let r=0,a=e.length;r<a;r++)if(n.call(o,e[r],r,e))return r;return-1},Nr=e=>e[e.length-1],H=(e,n,o,r)=>{const a=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!a,f=e.isiOS()||e.isAndroid(),h=f||r("(pointer:coarse)"),v=a||!u&&f&&r("(min-device-width:768px)"),w=u||f&&!v,D=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,R=!w&&!v&&!D;return{isiPad:tt(a),isiPhone:tt(u),isTablet:tt(v),isPhone:tt(w),isTouch:tt(h),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:tt(D),isDesktop:tt(R)}},ce=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},ye=(e,n)=>{const o=ce(e,n);if(!o)return{major:0,minor:0};const r=a=>Number(n.replace(o,"$"+a));return en(r(1),r(2))},Ke=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?kt():ye(e,o)},kt=()=>en(0,0),en=(e,n)=>({major:e,minor:n}),Dn={nu:en,detect:Ke,unknown:kt},ar=(e,n)=>Os(n.brands,o=>{const r=o.brand.toLowerCase();return Xt(e,a=>{var u;return r===((u=a.brand)==null?void 0:u.toLowerCase())}).map(a=>({current:a.name,version:Dn.nu(parseInt(o.version,10),0)}))}),Ao=(e,n)=>{const o=String(n).toLowerCase();return Xt(e,r=>r.search(o))},N=(e,n)=>Ao(e,n).map(o=>{const r=Dn.detect(o.versionRegexes,n);return{current:o.name,version:r}}),V=(e,n)=>Ao(e,n).map(o=>{const r=Dn.detect(o.versionRegexes,n);return{current:o.name,version:r}}),se=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Pe=e=>n=>zs(n,e),fn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>zs(e,"edge/")&&zs(e,"chrome")&&zs(e,"safari")&&zs(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,se],search:e=>zs(e,"chrome")&&!zs(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>zs(e,"msie")||zs(e,"trident")},{name:"Opera",versionRegexes:[se,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Pe("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Pe("firefox")},{name:"Safari",versionRegexes:[se,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(zs(e,"safari")||zs(e,"mobile/"))&&zs(e,"applewebkit")}],po=[{name:"Windows",search:Pe("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>zs(e,"iphone")||zs(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Pe("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Pe("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Pe("linux"),versionRegexes:[]},{name:"Solaris",search:Pe("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Pe("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Pe("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Us={browsers:tt(fn),oses:tt(po)},qr="Edge",la="Chromium",Jo="IE",ua="Opera",Ll="Firefox",Hi="Safari",gg=()=>Pm({current:void 0,version:Dn.unknown()}),Pm=e=>{const n=e.current,o=e.version,r=a=>()=>n===a;return{current:n,version:o,isEdge:r(qr),isChromium:r(la),isIE:r(Jo),isOpera:r(ua),isFirefox:r(Ll),isSafari:r(Hi)}},sd={unknown:gg,nu:Pm},Da="Windows",rd="iOS",vf="Android",hg="Linux",pg="macOS",Hh="Solaris",yf="FreeBSD",zi="ChromeOS",zh=()=>Vh({current:void 0,version:Dn.unknown()}),Vh=e=>{const n=e.current,o=e.version,r=a=>()=>n===a;return{current:n,version:o,isWindows:r(Da),isiOS:r(rd),isAndroid:r(vf),isMacOS:r(pg),isLinux:r(hg),isSolaris:r(Hh),isFreeBSD:r(yf),isChromeOS:r(zi)}},Ha={unknown:zh,nu:Vh},oe={detect:(e,n,o)=>{const r=Us.browsers(),a=Us.oses(),u=n.bind(v=>ar(r,v)).orThunk(()=>N(r,e)).fold(sd.unknown,sd.nu),f=V(a,e).fold(Ha.unknown,Ha.nu),h=H(f,u,e,o);return{browser:u,os:f,deviceType:h}}},Oe=e=>window.matchMedia(e).matches;let st=Pc(()=>oe.detect(window.navigator.userAgent,F.from(window.navigator.userAgentData),Oe));const wn=()=>st(),Qo=(e,n)=>qs(e,n),Pr=(e,n)=>{const o=Qo(e,n);if(o==null)throw new Error(e+" not available on this browser");return o},Jc=Object.getPrototypeOf,yc=e=>Pr("HTMLElement",e),yi=e=>{const n=qs("ownerDocument.defaultView",e);return En(e)&&(yc(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Jc(e).constructor.name))},Hl=window.navigator.userAgent,Qc=wn(),Oa=Qc.browser,$c=Qc.os,hu=Qc.deviceType,bg=Hl.indexOf("Windows Phone")!==-1,wo={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Oa.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Oa.isIE(),windowsPhone:bg,browser:{current:Oa.current,version:Oa.version,isChromium:Oa.isChromium,isEdge:Oa.isEdge,isFirefox:Oa.isFirefox,isIE:Oa.isIE,isOpera:Oa.isOpera,isSafari:Oa.isSafari},os:{current:$c.current,version:$c.version,isAndroid:$c.isAndroid,isChromeOS:$c.isChromeOS,isFreeBSD:$c.isFreeBSD,isiOS:$c.isiOS,isLinux:$c.isLinux,isMacOS:$c.isMacOS,isSolaris:$c.isSolaris,isWindows:$c.isWindows},deviceType:{isDesktop:hu.isDesktop,isiPad:hu.isiPad,isiPhone:hu.isiPhone,isPhone:hu.isPhone,isTablet:hu.isTablet,isTouch:hu.isTouch,isWebView:hu.isWebView}},pu=/^\s*|\s*$/g,cd=e=>pn(e)?"":(""+e).replace(pu,""),jr=(e,n)=>n?n==="array"&&Ii(e)?!0:typeof e===n:e!==void 0,nS=(e,n,o={})=>{const r=re(e)?e.split(n||","):e||[];let a=r.length;for(;a--;)o[r[a]]={};return o},t1=Jt,oS=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const a in r)if(Jt(r,a)){const u=r[a];u!==void 0&&(e[a]=u)}}return e},gb=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),$l(e,(a,u)=>n.call(r,a,u,o)===!1?!1:(gb(a,n,o,r),!0)))},Ct={trim:cd,isArray:Ii,is:jr,toArray:gu,makeMap:nS,each:$l,map:Li,grep:Il,inArray:At,hasOwn:t1,extend:oS,walk:gb,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,a=o.length;r<a&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>je(e)?e:e===""?[]:Li(e.split(n||","),cd),_addCacheSuffix:e=>{const n=wo.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},Ci=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const a="HTML does not have a single root node";throw console.error(a,e),new Error(a)}return Cf(r.childNodes[0])},vg=(e,n)=>{const r=(n||document).createElement(e);return Cf(r)},ml=(e,n)=>{const r=(n||document).createTextNode(e);return Cf(r)},Cf=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},ee={fromHtml:Ci,fromTag:vg,fromText:ml,fromDom:Cf,fromPoint:(e,n,o)=>F.from(e.dom.elementFromPoint(n,o)).map(Cf)},ti=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},zd=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},o1=(e,n,o)=>{const r=e.document.createRange();return ti(r,n),zd(r,o),r},wf=(e,n,o,r,a)=>{const u=e.document.createRange();return u.setStart(n.dom,o),u.setEnd(r.dom,a),u},da=dc.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),ni=(e,n,o)=>n(ee.fromDom(o.startContainer),o.startOffset,ee.fromDom(o.endContainer),o.endOffset),s1=(e,n)=>n.match({domRange:o=>({ltr:tt(o),rtl:F.none}),relative:(o,r)=>({ltr:Pc(()=>o1(e,o,r)),rtl:Pc(()=>F.some(o1(e,r,o)))}),exact:(o,r,a,u)=>({ltr:Pc(()=>wf(e,o,r,a,u)),rtl:Pc(()=>F.some(wf(e,a,u,o,r)))})}),r1=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(a=>a.collapsed===!1).map(a=>da.rtl(ee.fromDom(a.endContainer),a.endOffset,ee.fromDom(a.startContainer),a.startOffset)).getOrThunk(()=>ni(e,da.ltr,o)):ni(e,da.ltr,o)},yg=(e,n)=>{const o=s1(e,n);return r1(e,o)};da.ltr,da.rtl;const oi=8,c1=9,bu=11,Cg=1,a1=3,wi=(e,n)=>{const o=e.dom;if(o.nodeType!==Cg)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},i1=e=>e.nodeType!==Cg&&e.nodeType!==c1&&e.nodeType!==bu||e.childElementCount===0,zl=(e,n)=>{const o=n===void 0?document:n.dom;return i1(o)?[]:ae(o.querySelectorAll(e),ee.fromDom)},Vd=(e,n)=>{const o=n===void 0?document:n.dom;return i1(o)?F.none():F.from(o.querySelector(e)).map(ee.fromDom)},Io=(e,n)=>e.dom===n.dom,za=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},Sf=wi,hb=(e,n)=>{const o=[],r=u=>(o.push(u),n(u));let a=n(e);do a=a.bind(r);while(a.isSome());return o},xo=e=>e.dom.nodeName.toLowerCase(),ad=e=>e.dom.nodeType,oc=e=>n=>ad(n)===e,Vl=e=>ad(e)===oi||xo(e)==="#comment",Ul=e=>Rr(e)&&yi(e.dom),Rr=oc(Cg),ys=oc(a1),Jy=oc(c1),Qy=oc(bu),sc=e=>n=>Rr(n)&&xo(n)===e,fl=e=>ee.fromDom(e.dom.ownerDocument),gl=e=>Jy(e)?e:fl(e),rc=e=>ee.fromDom(gl(e).dom.documentElement),Wl=e=>ee.fromDom(gl(e).dom.defaultView),Va=e=>F.from(e.dom.parentNode).map(ee.fromDom),Si=e=>F.from(e.dom.parentElement).map(ee.fromDom),ma=(e,n)=>{const o=le(n)?n:Ae;let r=e.dom;const a=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,f=ee.fromDom(u);if(a.push(f),o(f)===!0)break;r=u}return a},Es=e=>{const n=o=>Ce(o,r=>!Io(e,r));return Va(e).map(Er).map(n).getOr([])},Vi=e=>F.from(e.dom.previousSibling).map(ee.fromDom),Ua=e=>F.from(e.dom.nextSibling).map(ee.fromDom),Ic=e=>ko(hb(e,Vi)),kc=e=>hb(e,Ua),Er=e=>ae(e.dom.childNodes,ee.fromDom),hl=(e,n)=>{const o=e.dom.childNodes;return F.from(o[n]).map(ee.fromDom)},Dc=e=>hl(e,0),Kr=e=>hl(e,e.dom.childNodes.length-1),Ud=e=>e.dom.childNodes.length,l1=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return ee.fromDom(n)},Uh=e=>Qy(e)&&xe(e.dom.host),Oc=e=>ee.fromDom(e.dom.getRootNode()),u1=e=>Uh(e)?e:l1(gl(e)),pb=e=>Uh(e)?e:ee.fromDom(gl(e).dom.body),Im=e=>{const n=Oc(e);return Uh(n)?F.some(n):F.none()},$n=e=>ee.fromDom(e.dom.host),d1=e=>{if(xe(e.target)){const n=ee.fromDom(e.target);if(Rr(n)&&Cc(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return Wo(o)}}return F.from(e.target)},Cc=e=>xe(e.dom.shadowRoot),Lc=(e,n,o,r,a,u,f)=>({target:e,x:n,y:o,stop:r,prevent:a,kill:u,raw:f}),Hc=e=>{const n=ee.fromDom(d1(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),a=k(r,o);return Lc(n,e.clientX,e.clientY,o,r,a,e)},ir=(e,n)=>o=>{e(o)&&n(Hc(o))},Wd=(e,n,o,r,a)=>{const u=ir(o,r);return e.dom.addEventListener(n,u,a),{unbind:He(Ui,e,n,u,a)}},Wh=(e,n,o,r)=>Wd(e,n,o,r,!1),Ui=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},Zl=Ve,wg=(e,n,o)=>Wh(e,n,Zl,o),Zh=()=>ee.fromDom(document),Sg=(e,n=!1)=>e.dom.focus({preventScroll:n}),vu=e=>{const n=Oc(e).dom;return e.dom===n.activeElement},pl=(e=Zh())=>F.from(e.dom.activeElement).map(ee.fromDom),m1=e=>pl(Oc(e)).filter(n=>e.dom.contains(n.dom)),ea=(e,n)=>{Va(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},Wi=(e,n)=>{Ua(e).fold(()=>{Va(e).each(a=>{is(a,n)})},r=>{ea(r,n)})},yu=(e,n)=>{Dc(e).fold(()=>{is(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},is=(e,n)=>{e.dom.appendChild(n.dom)},xi=(e,n)=>{ea(e,n),is(n,e)},bb=(e,n)=>{te(n,o=>{ea(e,o)})},xg=(e,n)=>{te(n,(o,r)=>{const a=r===0?e:n[r-1];Wi(a,o)})},Zi=(e,n)=>{te(n,o=>{is(e,o)})},Vn=(e,n,o)=>{if(re(o)||St(o)||vs(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},Sr=(e,n,o)=>{Vn(e.dom,n,o)},zc=(e,n)=>{const o=e.dom;yo(n,(r,a)=>{Vn(o,a,r)})},lr=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},ji=(e,n)=>F.from(lr(e,n)),fr=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},cc=(e,n)=>{e.dom.removeAttribute(n)},xf=e=>{const n=e.dom.attributes;return n==null||n.length===0},Ro=e=>$e(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),bl=e=>{e.dom.textContent="",te(Er(e),n=>{Ws(n)})},Ws=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},si=e=>{const n=Er(e);n.length>0&&xg(e,n),Ws(e)},ac=(e,n)=>ee.fromDom(e.dom.cloneNode(n)),ic=e=>ac(e,!1),Cu=e=>ac(e,!0),Ef=(e,n)=>{const o=ee.fromTag(n),r=Ro(e);return zc(o,r),o},id=(e,n)=>{const o=Ef(e,n);Wi(e,o);const r=Er(e);return Zi(o,r),Ws(e),o},Zd=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,Er(ee.fromDom(r))},jd=e=>ae(e,ee.fromDom),ta=e=>e.dom.innerHTML,ld=(e,n)=>{const r=fl(e).dom,a=ee.fromDom(r.createDocumentFragment()),u=Zd(n,r);Zi(a,u),bl(e),is(e,a)},e2=e=>{const n=ee.fromTag("div"),o=ee.fromDom(e.dom.cloneNode(!0));return is(n,o),ta(n)},Gd=e=>e.style!==void 0&&le(e.style.getPropertyValue),Ts=e=>{const n=ys(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return Im(ee.fromDom(n)).fold(()=>o.body.contains(n),ho(Ts,$n))},f1=(e,n,o)=>{if(!re(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);Gd(e)&&e.style.setProperty(n,o)},Tf=(e,n)=>{Gd(e)&&e.style.removeProperty(n)},fa=(e,n,o)=>{const r=e.dom;f1(r,n,o)},ri=(e,n)=>{const o=e.dom;yo(n,(r,a)=>{f1(o,a,r)})},$r=(e,n)=>{const o=e.dom,a=window.getComputedStyle(o).getPropertyValue(n);return a===""&&!Ts(e)?ud(o,n):a},ud=(e,n)=>Gd(e)?e.style.getPropertyValue(n):"",Yr=(e,n)=>{const o=e.dom,r=ud(o,n);return F.from(r).filter(a=>a.length>0)},Af=e=>{const n={},o=e.dom;if(Gd(o))for(let r=0;r<o.style.length;r++){const a=o.style.item(r);n[a]=o.style[a]}return n},jh=(e,n)=>{const o=e.dom;Tf(o,n),ht(ji(e,"style").map(dr),"")&&cc(e,"style")},g1=e=>e.dom.offsetWidth,jl=((e,n)=>{const o=(h,v)=>{if(!vs(v)&&!v.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+v);const w=h.dom;Gd(w)&&(w.style[e]=v+"px")},r=h=>{const v=n(h);if(v<=0||v===null){const w=$r(h,e);return parseFloat(w)||0}return v},a=r,u=(h,v)=>$e(v,(w,D)=>{const R=$r(h,D),M=R===void 0?0:parseInt(R,10);return isNaN(M)?w:w+M},0);return{set:o,get:r,getOuter:a,aggregate:u,max:(h,v,w)=>{const D=u(h,w);return v>D?v-D:0}}})("height",e=>{const n=e.dom;return Ts(e)?n.getBoundingClientRect().height:n.offsetHeight}),t2=e=>jl.get(e),h1=(e,n)=>({left:e,top:n,translate:(r,a)=>h1(e+r,n+a)}),Gl=h1,vb=e=>{const n=e.getBoundingClientRect();return Gl(n.left,n.top)},kf=(e,n)=>e!==void 0?e:n!==void 0?n:0,Eg=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,a=n.documentElement;if(o===e.dom)return Gl(o.offsetLeft,o.offsetTop);const u=kf(r==null?void 0:r.pageYOffset,a.scrollTop),f=kf(r==null?void 0:r.pageXOffset,a.scrollLeft),h=kf(a.clientTop,o.clientTop),v=kf(a.clientLeft,o.clientLeft);return Tg(e).translate(f-v,u-h)},Tg=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?Gl(r.offsetLeft,r.offsetTop):Ts(e)?vb(n):Gl(0,0)},p1=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return Gl(o,r)},yb=(e,n,o)=>{const a=(o!==void 0?o.dom:document).defaultView;a&&a.scrollTo(e,n)},vl=(e,n)=>{wn().browser.isSafari()&&le(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},n2=(e,n)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+n+" value of a "+n+" node");return r(u).getOr("")},r=u=>e(u)?F.from(u.dom.nodeValue):F.none();return{get:o,getOption:r,set:(u,f)=>{if(!e(u))throw new Error("Can only set raw "+n+" value of a "+n+" node");u.dom.nodeValue=f}}},qd=(e,n)=>{const r=document.createDocumentFragment();return te(e,a=>{r.appendChild(a.dom)}),ee.fromDom(r)},As=n2(ys,"text"),ga=e=>As.get(e),wu=e=>As.getOption(e),b1=(e,n)=>As.set(e,n),Kd=(e,n)=>{const o=lr(e,n);return o===void 0||o===""?[]:o.split(" ")},v1=(e,n,o)=>{const a=Kd(e,n).concat([o]);return Sr(e,n,a.join(" ")),!0},Cb=(e,n,o)=>{const r=Ce(Kd(e,n),a=>a!==o);return r.length>0?Sr(e,n,r.join(" ")):cc(e,n),!1};var Su=(e,n,o,r,a)=>e(o,r)?F.some(o):le(a)&&a(o)?F.none():n(o,r,a);const xu=(e,n,o)=>{let r=e.dom;const a=le(o)?o:Ae;for(;r.parentNode;){r=r.parentNode;const u=ee.fromDom(r);if(n(u))return F.some(u);if(a(u))break}return F.none()},Ps=(e,n,o)=>Su((a,u)=>u(a),xu,e,n,o),wb=(e,n)=>{const o=e.dom;return o.parentNode?Tr(ee.fromDom(o.parentNode),r=>!Io(e,r)&&n(r)):F.none()},Tr=(e,n)=>{const o=a=>n(ee.fromDom(a));return Xt(e.dom.childNodes,o).map(ee.fromDom)},Df=(e,n)=>{const o=r=>{for(let a=0;a<r.childNodes.length;a++){const u=ee.fromDom(r.childNodes[a]);if(n(u))return F.some(u);const f=o(r.childNodes[a]);if(f.isSome())return f}return F.none()};return o(e.dom)},Xr=(e,n,o)=>xu(e,r=>wi(r,n),o),Eu=(e,n)=>Vd(n,e),ha=(e,n,o)=>Su((a,u)=>wi(a,u),Xr,e,n,o),dd=e=>e.dom.classList!==void 0,Gh=e=>Kd(e,"class"),y1=(e,n)=>v1(e,"class",n),C1=(e,n)=>Cb(e,"class",n),o2=(e,n)=>De(Gh(e),n)?C1(e,n):y1(e,n),ci=(e,n)=>{dd(e)?e.dom.classList.add(n):y1(e,n)},ql=e=>{(dd(e)?e.dom.classList:Gh(e)).length===0&&cc(e,"class")},Jr=(e,n)=>{dd(e)?e.dom.classList.remove(n):C1(e,n),ql(e)},_c=(e,n)=>{const o=dd(e)?e.dom.classList.toggle(n):o2(e,n);return ql(e),o},qh=(e,n)=>dd(e)&&e.dom.classList.contains(n),Ag=(e,n)=>{te(n,o=>{ci(e,o)})},Kh=(e,n)=>{te(n,o=>{Jr(e,o)})},Sb=e=>ha(e,"[contenteditable]"),yl=(e,n=!1)=>Ts(e)?e.dom.isContentEditable:Sb(e).fold(tt(n),o=>rS(o)==="true"),rS=e=>e.dom.contentEditable,pa=(e,n)=>{e.dom.contentEditable=n?"true":"false"},x=(e,n,o)=>Ce(ma(e,o),n),A=(e,n)=>Ce(Er(e),n),$=(e,n)=>{let o=[];return te(Er(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat($(r,n))}),o},q=(e,n,o)=>x(e,r=>wi(r,n),o),ge=(e,n)=>zl(n,e),Ye=(e,n,o)=>xu(e,n,o).isSome(),Ht=(e,n)=>wb(e,n).isSome(),un=(e,n)=>Df(e,n).isSome(),fo=(e,n)=>Ye(e,He(Io,n)),Oo=(e,n,o)=>Xr(e,n,o).isSome(),Zs=e=>le(e)?e:Ae,Br=(e,n,o)=>{let r=e.dom;const a=Zs(o);for(;r.parentNode;){r=r.parentNode;const u=ee.fromDom(r),f=n(u);if(f.isSome())return f;if(a(u))break}return F.none()},Wr=(e,n,o)=>{const r=n(e),a=Zs(o);return r.orThunk(()=>a(e)?F.none():Br(e,n,a))},Ei=e=>wu(e).filter(n=>n.trim().length!==0||n.indexOf(mr)>-1).isSome(),md=e=>Ul(e)&&lr(e,"contenteditable")==="false",Gi=["img","br"],Lm=e=>Ei(e)||De(Gi,xo(e))||md(e),kg=e=>Df(e,Lm),Hm={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},Yd=dc.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),S1=(e,n,o,r)=>e.fold(n,o,r),Yh=e=>e.fold(No,No,No),Xh=Yd.before,s2=Yd.on,Jh=Yd.after,Ho={before:Xh,on:s2,after:Jh,cata:S1,getStart:Yh},er=dc.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ba=e=>er.exact(e.start,e.soffset,e.finish,e.foffset),Wa=e=>e.match({domRange:n=>ee.fromDom(n.startContainer),relative:(n,o)=>Ho.getStart(n),exact:(n,o,r,a)=>n}),Dg=er.domRange,r2=er.relative,Qh=er.exact,Og=e=>{const n=Wa(e);return Wl(n)},zm=Hm.create,Xd={domRange:Dg,relative:r2,exact:Qh,exactFromRange:ba,getWin:Og,range:zm},c2=(e,n,o)=>{var r;return F.from((r=e.caretPositionFromPoint)==null?void 0:r.call(e,n,o)).bind(a=>{if(a.offsetNode===null)return F.none();const u=e.createRange();return u.setStart(a.offsetNode,a.offset),u.collapse(),F.some(u)})},A4=(e,n,o)=>{var r;return F.from((r=e.caretRangeFromPoint)==null?void 0:r.call(e,n,o))},wc=(e,n,o)=>e.caretPositionFromPoint?c2(e,n,o):e.caretRangeFromPoint?A4(e,n,o):F.none(),mc=(e,n,o)=>{const r=e.document;return wc(r,n,o).map(a=>Hm.create(ee.fromDom(a.startContainer),a.startOffset,ee.fromDom(a.endContainer),a.endOffset))},fd=(e,n)=>{const o=xo(e);return o==="input"?Ho.after(e):De(["br","img"],o)?n===0?Ho.before(e):Ho.after(e):Ho.on(e,n)},ep=(e,n)=>{const o=e.fold(Ho.before,fd,Ho.after),r=n.fold(Ho.before,fd,Ho.after);return Xd.relative(o,r)},xb=(e,n,o,r)=>{const a=fd(e,n),u=fd(o,r);return Xd.relative(a,u)},Za=e=>e.match({domRange:n=>{const o=ee.fromDom(n.startContainer),r=ee.fromDom(n.endContainer);return xb(o,n.startOffset,r,n.endOffset)},relative:ep,exact:xb}),a2=e=>{const n=Xd.getWin(e).dom,o=(a,u,f,h)=>wf(n,a,u,f,h),r=Za(e);return yg(n,r).match({ltr:o,rtl:o})},Of=(e,n,o)=>mc(e,n,o),Eb=e=>{const n=e===void 0?window:e;return wn().browser.isFirefox()?F.none():F.from(n.visualViewport)},qi=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),i2=e=>{const n=e===void 0?window:e,o=n.document,r=p1(ee.fromDom(o));return Eb(n).fold(()=>{const a=n.document.documentElement,u=a.clientWidth,f=a.clientHeight;return qi(r.left,r.top,u,f)},a=>qi(Math.max(a.pageLeft,r.left),Math.max(a.pageTop,r.top),a.width,a.height))};class tr{constructor(n,o){Xe(this,"rootNode");Xe(this,"node");this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,a){if(n){if(!a&&n[o])return n[o];if(n!==this.rootNode){let u=n[r];if(u)return u;for(let f=n.parentNode;f&&f!==this.rootNode;f=f.parentNode)if(u=f[r],u)return u}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const a=n.parentNode;if(a&&a!==this.rootNode)return a}}}const tp=/^[ \t\r\n]*$/,Vm=e=>tp.test(e),k4=e=>{for(const n of e)if(!Xc(n))return!1;return!0},cS=e=>" \f	\v".indexOf(e)!==-1,Tb=e=>e===`
`||e==="\r",D4=(e,n)=>n<e.length&&n>=0?Tb(e[n]):!1,l2=(e,n=4,o=!0,r=!0)=>{const a=ei(" ",n),u=e.replace(/\t/g,a);return $e(u,(h,v)=>cS(v)||v===mr?h.pcIsSpace||h.str===""&&o||h.str.length===u.length-1&&r||D4(u,h.str.length+1)?{pcIsSpace:!1,str:h.str+mr}:{pcIsSpace:!0,str:h.str+" "}:{pcIsSpace:Tb(v),str:h.str+v},{pcIsSpace:!1,str:""}).str},Um=e=>n=>!!n&&n.nodeType===e,u2=e=>!!e&&!Object.getPrototypeOf(e),gn=Um(1),gr=e=>gn(e)&&Ul(ee.fromDom(e)),np=e=>gn(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",_g=e=>{const n=e.toLowerCase();return o=>xe(o)&&o.nodeName.toLowerCase()===n},na=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return De(n,r)}return!1}},op=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(gn(r)){const a=r.ownerDocument.defaultView;if(a)for(let u=0;u<o.length;u++){const f=a.getComputedStyle(r,null);if((f?f.getPropertyValue(e):null)===o[u])return!0}}return!1}},O4=e=>n=>gn(n)&&n.hasAttribute(e),Rg=e=>gn(e)&&e.hasAttribute("data-mce-bogus"),aS=e=>gn(e)&&e.getAttribute("data-mce-bogus")==="all",Jd=e=>gn(e)&&e.tagName==="TABLE",_f=e=>n=>!!(gr(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),d2=na(["textarea","input"]),pt=Um(3),m2=Um(4),f2=Um(7),Zr=Um(8),_o=Um(9),Bg=Um(11),Ar=_g("br"),g2=_g("img"),Tu=_g("a"),ai=_f("true"),hr=_f("false"),Ab=e=>gr(e)&&e.isContentEditable&&xe(e.parentElement)&&!e.parentElement.isContentEditable,Qd=na(["td","th"]),h2=na(["td","th","caption"]),kb=_g("template"),Au=na(["video","audio","object","embed"]),p2=_g("li"),Db=_g("details"),b2=_g("summary"),iS={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},_4=(e,n,o)=>{const r=ee.fromDom(n),a=ee.fromDom(e),u=o.getWhitespaceElements();return Ye(a,h=>Jt(u,xo(h)),He(Io,r))},v2=e=>gn(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),lS=(e,n)=>gn(e)&&Jt(n.getNonEmptyElements(),e.nodeName),Ob=O4("data-mce-bookmark"),R4=e=>Si(ee.fromDom(e)).exists(n=>!yl(n)),B4=(e,n,o)=>Vm(e.data)&&!_4(e,n,o),y2=(e,n,o,r)=>pt(e)&&!B4(e,n,o)&&(!r.includeZwsp||!k4(e.data)),C2=(e,n,o,r)=>le(r.isContent)&&r.isContent(n)||lS(n,e)||Ob(n)||v2(n)||y2(n,o,e,r)||hr(n)||ai(n)&&R4(n),Kl=(e,n,o)=>{const r={...iS,...o};if(r.checkRootAsContent&&C2(e,n,n,r))return!1;let a=n.firstChild,u=0;if(!a)return!0;const f=new tr(a,n);do{if(r.skipBogus&&gn(a)){const h=a.getAttribute("data-mce-bogus");if(h){a=f.next(h==="all");continue}}if(Zr(a)){a=f.next(!0);continue}if(Ar(a)){u++,a=f.next();continue}if(C2(e,a,n,r))return!1;a=f.next()}while(a);return u<=1},ii=(e,n,o)=>Kl(e,n.dom,{checkRootAsContent:!0,...o}),Cl=(e,n,o)=>C2(e,n,n,{includeZwsp:iS.includeZwsp,...o}),Un=e=>{const n=e.toLowerCase();return n==="svg"?"svg":n==="math"?"math":"html"},li=e=>Un(e)!=="html",Mg=e=>li(e.nodeName),uS=e=>Un(e.nodeName),M4=["svg","math"],_b=()=>{const e=fs(),n=()=>e.get().map(uS).getOr("html");return{track:a=>(Mg(a)?e.set(a):e.get().exists(u=>!u.contains(a))&&e.clear(),n()),current:n,reset:()=>{e.clear()}}},x1="data-mce-block",Fg=e=>Ce(on(e),n=>!/[A-Z]/.test(n)),Rb=e=>ae(Fg(e),n=>{const o=CSS.escape(n);return`${o}:`+ae(M4,r=>`not(${r} ${o})`).join(":")}).join(","),Rf=(e,n)=>xe(n.querySelector(e))?(n.setAttribute(x1,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(x1),!1),w2=(e,n)=>{const o=Rb(e.getTransparentElements()),r=Rb(e.getBlockElements());return Ce(n.querySelectorAll(o),a=>Rf(r,a))},dS=(e,n,o)=>{var a;const r=o?"lastChild":"firstChild";for(let u=n[r];u;u=u[r])if(Kl(e,u,{checkRootAsContent:!0})){(a=u.parentNode)==null||a.removeChild(u);return}},Ir=(e,n,o)=>{const r=document.createRange(),a=n.parentNode;if(a){r.setStartBefore(n),r.setEndBefore(o);const u=r.extractContents();dS(e,u,!0),r.setStartAfter(o),r.setEndAfter(n);const f=r.extractContents();dS(e,f,!1),Kl(e,u,{checkRootAsContent:!0})||a.insertBefore(u,n),Kl(e,o,{checkRootAsContent:!0})||a.insertBefore(o,n),Kl(e,f,{checkRootAsContent:!0})||a.insertBefore(f,n),a.removeChild(n)}},ku=(e,n,o)=>{const r=e.getBlockElements(),a=ee.fromDom(n),u=h=>xo(h)in r,f=h=>Io(h,a);te(jd(o),h=>{xu(h,u,f).each(v=>{const w=A(h,D=>u(D)&&!e.isValidChild(xo(v),xo(D)));if(w.length>0){const D=Si(v);te(w,R=>{xu(R,u,f).each(M=>{Ir(e,M.dom,R.dom)})}),D.each(R=>w2(e,R.dom))}})})},Ti=(e,n,o)=>{te([...o,...ct(e,n)?[n]:[]],r=>te(ge(ee.fromDom(r),r.nodeName.toLowerCase()),a=>{wl(e,a.dom)&&si(a)}))},Bf=(e,n)=>{const o=w2(e,n);ku(e,n,o),Ti(e,n,o)},ui=(e,n)=>{if(sp(e,n)){const o=Rb(e.getBlockElements());Rf(o,n)}},Ng=(e,n,o)=>{const r=u=>Io(u,ee.fromDom(n)),a=ma(ee.fromDom(o),r);Uo(a,a.length-2).filter(Rr).fold(()=>Bf(e,n),u=>Bf(e,u.dom))},Vc=e=>e.hasAttribute(x1),_a=(e,n)=>Jt(e.getTransparentElements(),n),sp=(e,n)=>gn(n)&&_a(e,n.nodeName),ct=(e,n)=>sp(e,n)&&Vc(n),wl=(e,n)=>sp(e,n)&&!Vc(n),E1=(e,n)=>n.type===1&&_a(e,n.name)&&re(n.attr(x1)),Rc=wn().browser,Yl=e=>Xt(e,Rr),Xl=e=>Rc.isFirefox()&&xo(e)==="table"?Yl(Er(e)).filter(n=>xo(n)==="caption").bind(n=>Yl(kc(n)).map(o=>{const r=o.dom.offsetTop,a=n.dom.offsetTop,u=n.dom.offsetHeight;return r<=a?-u:0})).getOr(0):0,mS=(e,n)=>e.children&&De(e.children,n),Wm=(e,n,o)=>{let r=0,a=0;const u=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&$r(ee.fromDom(e),"position")==="static"){const h=n.getBoundingClientRect();return r=h.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,a=h.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:a}}let f=n;for(;f&&f!==o&&f.nodeType&&!mS(f,o);){const h=f;r+=h.offsetLeft||0,a+=h.offsetTop||0,f=h.offsetParent}for(f=n.parentNode;f&&f!==o&&f.nodeType&&!mS(f,o);)r-=f.scrollLeft||0,a-=f.scrollTop||0,f=f.parentNode;a+=Xl(ee.fromDom(n))}return{x:r,y:a}},fS=(e,n)=>{const o=n.crossOrigin;return n.contentCssCors?"anonymous":le(o)?o(e):void 0},Ai=(e,n={})=>{let o=0;const r={},a=ee.fromDom(e),u=gl(a),f=be=>{n.referrerPolicy=be},h=be=>{n.contentCssCors=be},v=be=>{n.crossOrigin=be},w=be=>{is(u1(a),be)},D=be=>{const Se=u1(a);Eu(Se,"#"+be).each(Ws)},R=be=>dn(r,be).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),M=be=>new Promise((Se,Ze)=>{let it;const $t=Ct._addCacheSuffix(be),yt=R($t);r[$t]=yt,yt.count++;const Ge=(bo,Zo)=>{te(bo,xt),yt.status=Zo,yt.passed=[],yt.failed=[],it&&(it.onload=null,it.onerror=null,it=null)},ze=()=>Ge(yt.passed,2),lt=()=>Ge(yt.failed,3);if(Se&&yt.passed.push(Se),Ze&&yt.failed.push(Ze),yt.status===1)return;if(yt.status===2){ze();return}if(yt.status===3){lt();return}yt.status=1;const sn=ee.fromTag("link",u.dom);zc(sn,{rel:"stylesheet",type:"text/css",id:yt.id});const Nn=fS(be,n);Nn!==void 0&&Sr(sn,"crossOrigin",Nn),n.referrerPolicy&&Sr(sn,"referrerpolicy",n.referrerPolicy),it=sn.dom,it.onload=ze,it.onerror=lt,w(sn),Sr(sn,"href",$t)}),L=(be,Se)=>{const Ze=R(be);r[be]=Ze,Ze.count++;const it=ee.fromTag("style",u.dom);zc(it,{rel:"stylesheet",type:"text/css",id:Ze.id,"data-mce-key":be}),it.dom.innerHTML=Se,w(it)},K=be=>Promise.allSettled(ae(be,Ze=>M(Ze).then(tt(Ze)))).then(Ze=>{const it=Ee(Ze,$t=>$t.status==="fulfilled");return it.fail.length>0?Promise.reject(ae(it.fail,$t=>$t.reason)):ae(it.pass,$t=>$t.value)}),W=be=>{const Se=Ct._addCacheSuffix(be);dn(r,Se).each(Ze=>{--Ze.count===0&&(delete r[Se],D(Ze.id))})};return{load:M,loadRawCss:L,loadAll:K,unload:W,unloadRawCss:be=>{dn(r,be).each(Se=>{--Se.count===0&&(delete r[be],D(Se.id))})},unloadAll:be=>{te(be,Se=>{W(Se)})},_setReferrerPolicy:f,_setContentCssCors:h,_setCrossOrigin:v}},Du=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=Oc(o).dom;return F.from(e.get(u)).getOrThunk(()=>{const f=Ai(u,r);return e.set(u,f),f})}}})(),T1=e=>e.nodeName.toLowerCase()==="span",Gr=(e,n)=>xe(e)&&(Cl(n,e)||n.isInline(e.nodeName.toLowerCase())),gS=(e,n,o)=>{const r=new tr(e,n).prev(!1),a=new tr(e,n).next(!1),u=ro(r)||Gr(r,o),f=ro(a)||Gr(a,o);return u&&f},Bb=e=>T1(e)&&e.getAttribute("data-mce-type")==="bookmark",gd=(e,n,o)=>pt(e)&&e.data.length>0&&gS(e,n,o),S2=e=>gn(e)?e.childNodes.length>0:!1,Ki=e=>Bg(e)||_o(e),x2=(e,n,o,r)=>{var f;const a=r||n;if(gn(n)&&Bb(n))return n;const u=n.childNodes;for(let h=u.length-1;h>=0;h--)x2(e,u[h],o,a);if(gn(n)){const h=n.childNodes;h.length===1&&Bb(h[0])&&((f=n.parentNode)==null||f.insertBefore(h[0],n))}return!Ki(n)&&!Cl(o,n)&&!S2(n)&&!gd(n,a,o)&&e.remove(n),n},Re=Ct.makeMap,di=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,rp=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Lr=/[<>&\"\']/g,Sl=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,va={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},Rs={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},hS={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Mf=e=>{const n=ee.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},E2=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let a=0;a<r.length;a+=2){const u=String.fromCharCode(parseInt(r[a],n));if(!Rs[u]){const f="&"+r[a+1]+";";o[u]=f,o[f]=u}}return o}else return},Ff=E2("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),cp=(e,n)=>e.replace(n?di:rp,o=>Rs[o]||o),pS=e=>(""+e).replace(Lr,n=>Rs[n]||n),bS=(e,n)=>e.replace(n?di:rp,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":Rs[o]||"&#"+o.charCodeAt(0)+";"),Zm=(e,n,o)=>{const r=o||Ff;return e.replace(n?di:rp,a=>Rs[a]||r[a]||a)},Pg={encodeRaw:cp,encodeAllRaw:pS,encodeNumeric:bS,encodeNamed:Zm,getEncodeFunc:(e,n)=>{const o=E2(n)||Ff,r=(f,h)=>f.replace(h?di:rp,v=>Rs[v]!==void 0?Rs[v]:o[v]!==void 0?o[v]:v.length>1?"&#"+((v.charCodeAt(0)-55296)*1024+(v.charCodeAt(1)-56320)+65536)+";":"&#"+v.charCodeAt(0)+";"),a=(f,h)=>Zm(f,h,o),u=Re(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?n?a:Zm:u.numeric?bS:cp},decode:e=>e.replace(Sl,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):va[o]||String.fromCharCode(o)):hS[n]||Ff[n]||Mf(n))},ya=(e,n)=>(e=Ct.trim(e),e?e.split(n||" "):[]),oa=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),jm=e=>En(e)&&e.source&&Object.prototype.toString.call(e)==="[object RegExp]",Gm=e=>{const n=o=>je(o)?ae(o,n):jm(o)?new RegExp(o.source,o.flags):En(o)?Nc(o,n):o;return n(e)},$g=e=>{const n=/^(~)?(.+)$/;return zn(ya(e,","),o=>{const r=n.exec(o);if(r){const u=r[1]==="~"?"span":"div",f=r[2];return[{cloneName:u,name:f}]}else return[]})},ap=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),mi=e=>{let n,o;n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(n+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",o+=" audio canvas command data datalist mark meter output picture progress template time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(o=[o,"acronym applet basefont big font strike tt"].join(" "),n=[n,"center dir isindex noframes"].join(" "));const r=[n,o].join(" ");return{blockContent:n,phrasingContent:o,flowContent:r}},Nf=e=>{const{blockContent:n,phrasingContent:o,flowContent:r}=mi(e),a=u=>Object.freeze(u.split(" "));return Object.freeze({blockContent:a(n),phrasingContent:a(o),flowContent:a(r)})},Bc={html4:Pc(()=>Nf("html4")),html5:Pc(()=>Nf("html5")),"html5-strict":Pc(()=>Nf("html5-strict"))},Mb=(e,n)=>{const{blockContent:o,phrasingContent:r,flowContent:a}=Bc[e]();return n==="blocks"?F.some(o):n==="phrasing"?F.some(r):n==="flow"?F.some(a):F.none()},Ou=e=>{const n=ap(e),{phrasingContent:o,flowContent:r}=mi(e),a={},u=(v,w,D)=>{a[v]={attributes:Ns(w,tt({})),attributesOrder:w,children:Ns(D,tt({}))}},f=(v,w="",D="")=>{const R=ya(D),M=ya(v);let L=M.length;const K=[...n,...ya(w)];for(;L--;)u(M[L],K.slice(),R)},h=(v,w)=>{const D=ya(v),R=ya(w);let M=D.length;for(;M--;){const L=a[D[M]];for(let K=0,W=R.length;K<W;K++)L.attributes[R[K]]={},L.attributesOrder.push(R[K])}};return e!=="html5-strict"&&(te(ya("acronym applet basefont big font strike tt"),D=>{f(D,"",o)}),te(ya("center dir isindex noframes"),D=>{f(D,"",r)})),f("html","manifest","head body"),f("head","","base command link meta noscript script style title"),f("title hr noscript br"),f("base","href target"),f("link","href rel media hreflang type sizes hreflang"),f("meta","name http-equiv content charset property"),f("style","media type scoped"),f("script","src async defer type charset"),f("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),f("dd div","",r),f("address dt caption","",e==="html4"?o:r),f("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),f("blockquote","cite",r),f("ol","reversed start type","li"),f("ul","","li"),f("li","value",r),f("dl","","dt dd"),f("a","href target rel media hreflang type",e==="html4"?o:r),f("q","cite",o),f("ins del","cite datetime",r),f("img","src sizes srcset alt usemap ismap width height"),f("iframe","src name width height",r),f("embed","src type width height"),f("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),f("param","name value"),f("map","name",[r,"area"].join(" ")),f("area","alt coords shape href target rel media hreflang type"),f("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),f("colgroup","span","col"),f("col","span"),f("tbody thead tfoot","","tr"),f("tr","","td th"),f("td","colspan rowspan headers",r),f("th","colspan rowspan headers scope abbr",r),f("form","accept-charset action autocomplete enctype method name novalidate target",r),f("fieldset","disabled form name",[r,"legend"].join(" ")),f("label","form for",o),f("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),f("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),f("select","disabled form multiple name required size","option optgroup"),f("optgroup","disabled label","option"),f("option","disabled label selected value"),f("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),f("menu","type label",[r,"li"].join(" ")),f("noscript","",r),e!=="html4"&&(f("wbr"),f("ruby","",[o,"rt rp"].join(" ")),f("figcaption","",r),f("mark rt rp bdi","",o),f("summary","",[o,"h1 h2 h3 h4 h5 h6"].join(" ")),f("canvas","width height",r),f("data","value",o),f("video","src crossorigin poster preload autoplay mediagroup loop controlslist disablepictureinpicture disableremoteplayback playsinline muted controls width height buffered",[r,"track source"].join(" ")),f("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),f("picture","","img source"),f("source","src srcset type media sizes"),f("track","kind src srclang label default"),f("datalist","",[o,"option"].join(" ")),f("article section nav aside main header footer","",r),f("hgroup","","h1 h2 h3 h4 h5 h6"),f("figure","",[r,"figcaption"].join(" ")),f("time","datetime",o),f("dialog","open",r),f("command","type label icon disabled checked radiogroup command"),f("output","for form name",o),f("progress","value max",o),f("meter","value min max low high optimum",o),f("details","open",[r,"summary"].join(" ")),f("keygen","autofocus challenge disabled form keytype name"),u("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(h("script","language xml:space"),h("style","xml:space"),h("object","declare classid code codebase codetype archive standby align border hspace vspace"),h("embed","align name hspace vspace"),h("param","valuetype type"),h("a","charset name rev shape coords"),h("br","clear"),h("applet","codebase archive code object alt name width height align hspace vspace"),h("img","name longdesc align border hspace vspace"),h("iframe","longdesc frameborder marginwidth marginheight scrolling align"),h("font basefont","size color face"),h("input","usemap align"),h("select"),h("textarea"),h("h1 h2 h3 h4 h5 h6 div p legend caption","align"),h("ul","type compact"),h("li","type"),h("ol dl menu dir","compact"),h("pre","width xml:space"),h("hr","align noshade size width"),h("isindex","prompt"),h("table","summary width frame rules cellspacing cellpadding align bgcolor"),h("col","width align char charoff valign"),h("colgroup","width align char charoff valign"),h("thead","align char charoff valign"),h("tr","align char charoff valign bgcolor"),h("th","axis align char charoff valign nowrap bgcolor width height"),h("form","accept"),h("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),h("tfoot","align char charoff valign"),h("tbody","align char charoff valign"),h("area","nohref"),h("body","background bgcolor text link vlink alink")),e!=="html4"&&(h("input button select textarea","autofocus"),h("input textarea","placeholder"),h("a","download"),h("link script img","crossorigin"),h("img","loading"),h("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),e!=="html4"&&te([a.video,a.audio],v=>{delete v.children.audio,delete v.children.video}),te(ya("a form meter progress dfn"),v=>{a[v]&&delete a[v].children[v]}),delete a.caption.children.table,delete a.script,a},_u=e=>e==="-"?"remove":"add",Fb=e=>{const n=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return F.from(n.exec(e)).map(o=>({preset:o[1]==="@",name:o[2]}))},Uc=e=>{const n=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return zn(ya(e,","),o=>{const r=n.exec(o);if(r){const a=r[1],u=a?_u(a):"replace",f=r[2],h=zn(ya(r[3],"|"),v=>Fb(v).toArray());return[{operation:u,name:f,validChildren:h}]}else return[]})},ip=(e,n)=>{const o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,r=/[*?+]/,{attributes:a,attributesOrder:u}=n;return te(ya(e,"|"),f=>{const h=o.exec(f);if(h){const v={},w=h[1],D=h[2].replace(/[\\:]:/g,":"),R=h[3],M=h[4];if(w==="!"&&(n.attributesRequired=n.attributesRequired||[],n.attributesRequired.push(D),v.required=!0),w==="-"){delete a[D],u.splice(Ct.inArray(u,D),1);return}if(R&&(R==="="?(n.attributesDefault=n.attributesDefault||[],n.attributesDefault.push({name:D,value:M}),v.defaultValue=M):R==="~"?(n.attributesForced=n.attributesForced||[],n.attributesForced.push({name:D,value:M}),v.forcedValue=M):R==="<"&&(v.validValues=Ct.makeMap(M,"?"))),r.test(D)){const L=v;n.attributePatterns=n.attributePatterns||[],L.pattern=oa(D),n.attributePatterns.push(L)}else a[D]||u.push(D),a[D]=v}})},qm=(e,n)=>{yo(e.attributes,(o,r)=>{n.attributes[r]=o}),n.attributesOrder.push(...e.attributesOrder)},Ig=(e,n)=>{const o=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return zn(ya(n,","),r=>{const a=o.exec(r);if(a){const u=a[1],f=a[2],h=a[3],v=a[4],w=a[5],D={attributes:{},attributesOrder:[]};if(e.each(R=>qm(R,D)),u==="#"?D.paddEmpty=!0:u==="-"&&(D.removeEmpty=!0),v==="!"&&(D.removeEmptyAttrs=!0),w&&ip(w,D),h&&(D.outputName=f),f==="@")if(e.isNone())e=F.some(D);else return[];return[h?{name:f,element:D,aliasName:h}:{name:f,element:D}]}else return[]})},em={},k1=Ct.makeMap,xl=Ct.each,Lg=Ct.extend,vS=Ct.explode,Qr=(e,n={})=>{const o=k1(e," ",k1(e.toUpperCase()," "));return Lg(o,n)},yS=e=>Qr("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),tm=(e,n)=>{if(e){const o={};return re(e)&&(e={"*":e}),xl(e,(r,a)=>{o[a]=o[a.toUpperCase()]=n==="map"?k1(r,/[, ]/):vS(r,/[, ]/)}),o}else return},Ru=(e={})=>{const n={},o={};let r=[];const a={},u={},f={},h=(Gn,cs,pc)=>{const xr=e[Gn];if(xr)return k1(xr,/[, ]/,k1(xr.toUpperCase(),/[, ]/));{let Ys=em[Gn];return Ys||(Ys=Qr(cs,pc),em[Gn]=Ys),Ys}},v=e.schema??"html5",w=Ou(v);e.verify_html===!1&&(e.valid_elements="*[*]");const D=tm(e.valid_styles),R=tm(e.invalid_styles,"map"),M=tm(e.valid_classes,"map"),L=h("whitespace_elements","pre script noscript style textarea video audio iframe object code"),K=h("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),W=h("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),J=h("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),pe="td th iframe video audio object script code",be=h("non_empty_elements",pe+" pre svg textarea summary",W),Se=h("move_caret_before_on_enter_elements",pe+" table",W),Ze="h1 h2 h3 h4 h5 h6",it=h("text_block_elements",Ze+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),$t=h("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing colgroup col",it),yt=h("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),Ge=h("transparent_elements","a ins del canvas map"),ze=h("wrap_block_elements","pre "+Ze);xl("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Gn=>{u[Gn]=new RegExp("</"+Gn+"[^>]*>","gi")});const lt=Gn=>{const cs=F.from(n["@"]),pc=/[*?+]/;te(Ig(cs,Gn??""),({name:xr,element:Ys,aliasName:uc})=>{if(uc&&(n[uc]=Ys),pc.test(xr)){const du=Ys;du.pattern=oa(xr),r.push(du)}else n[xr]=Ys})},sn=Gn=>{r=[],te(on(n),cs=>{delete n[cs]}),lt(Gn)},Nn=(Gn,cs)=>{delete em.text_block_elements,delete em.block_elements;const pc=cs.extends?!Nl(cs.extends):!1,xr=cs.extends;if(o[Gn]=xr?o[xr]:{},a[Gn]=xr??Gn,be[Gn.toUpperCase()]={},be[Gn]={},pc||($t[Gn.toUpperCase()]={},$t[Gn]={}),xr&&!n[Gn]&&n[xr]){const Ys=Gm(n[xr]);delete Ys.removeEmptyAttrs,delete Ys.removeEmpty,n[Gn]=Ys}else n[Gn]={attributesOrder:[],attributes:{}};if(je(cs.attributes)){const Ys=du=>{uc.attributesOrder.push(du),uc.attributes[du]={}},uc=n[Gn]??{};delete uc.attributesDefault,delete uc.attributesForced,delete uc.attributePatterns,delete uc.attributesRequired,uc.attributesOrder=[],uc.attributes={},te(cs.attributes,du=>{const ll=ap(v);Fb(du).each(({preset:Hd,name:Ih})=>{Hd?Ih==="global"&&te(ll,Ys):Ys(Ih)})}),n[Gn]=uc}if(St(cs.padEmpty)){const Ys=n[Gn]??{};Ys.paddEmpty=cs.padEmpty,n[Gn]=Ys}if(je(cs.children)){const Ys={},uc=ll=>{Ys[ll]={}},du=ll=>{Mb(v,ll).each(Hd=>{te(Hd,uc)})};te(cs.children,ll=>{Fb(ll).each(({preset:Hd,name:Ih})=>{Hd?du(Ih):uc(Ih)})}),o[Gn]=Ys}xr&&yo(o,(Ys,uc)=>{Ys[xr]&&(o[uc]=Ys=Lg({},o[uc]),Ys[Gn]=Ys[xr])})},bo=Gn=>{te($g(Gn??""),({name:cs,cloneName:pc})=>{Nn(cs,{extends:pc})})},Zo=(Gn,cs)=>{f[Gn]=cs},rr=Gn=>{En(Gn)?yo(Gn,(cs,pc)=>{const xr=cs.componentUrl;re(xr)&&Zo(pc,xr),Nn(pc,cs)}):re(Gn)&&bo(Gn)},yr=Gn=>{te(Uc(Gn??""),({operation:cs,name:pc,validChildren:xr})=>{const Ys=cs==="replace"?{"#comment":{}}:o[pc],uc=ll=>{cs==="remove"?delete Ys[ll]:Ys[ll]={}},du=ll=>{Mb(v,ll).each(Hd=>{te(Hd,uc)})};te(xr,({preset:ll,name:Hd})=>{ll?du(Hd):uc(Hd)}),o[pc]=Ys})},Tc=Gn=>{const cs=n[Gn];if(cs)return cs;let pc=r.length;for(;pc--;){const xr=r[pc];if(xr.pattern.test(Gn))return xr}},Kc=()=>{e.valid_elements?(sn(e.valid_elements),xl(w,(Gn,cs)=>{o[cs]=Gn.children})):(xl(w,(Gn,cs)=>{n[cs]={attributes:Gn.attributes,attributesOrder:Gn.attributesOrder},o[cs]=Gn.children}),xl(ya("strong/b em/i"),Gn=>{const cs=ya(Gn,"/");n[cs[1]].outputName=cs[0]}),xl(yt,(Gn,cs)=>{n[cs]&&(e.padd_empty_block_inline_children&&(n[cs].paddInEmptyBlock=!0),n[cs].removeEmpty=!0)}),xl(ya("ol ul blockquote a table tbody"),Gn=>{n[Gn]&&(n[Gn].removeEmpty=!0)}),xl(ya("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),Gn=>{n[Gn]&&(n[Gn].paddEmpty=!0)}),xl(ya("span"),Gn=>{n[Gn].removeEmptyAttrs=!0})),delete n.svg,rr(e.custom_elements),yr(e.valid_children),lt(e.extended_valid_elements),yr("+ol[ul|ol],+ul[ul|ol]"),xl({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Gn,cs)=>{n[cs]&&(n[cs].parentsRequired=ya(Gn))}),e.invalid_elements&&xl(vS(e.invalid_elements),Gn=>{n[Gn]&&delete n[Gn]}),Tc("span")||lt("span[!data-mce-type|*]")},Ld=tt(D),Vt=tt(R),Rn=tt(M),ks=tt(J),Ds=tt($t),Tn=tt(it),wt=tt(yt),Ut=tt(Object.seal(W)),Pn=tt(K),io=tt(be),rs=tt(Se),Cr=tt(L),hf=tt(Ge),Qa=tt(ze),pf=tt(Object.seal(u)),bf=(Gn,cs)=>{const pc=o[Gn.toLowerCase()];return!!(pc&&pc[cs.toLowerCase()])},uu=(Gn,cs)=>{const pc=Tc(Gn);if(pc)if(cs){if(pc.attributes[cs])return!0;const xr=pc.attributePatterns;if(xr){let Ys=xr.length;for(;Ys--;)if(xr[Ys].pattern.test(cs))return!0}}else return!0;return!1},Nl=Gn=>Jt(Ds(),Gn),Fm=Gn=>!Ln(Gn,"#")&&uu(Gn)&&!Nl(Gn),Gy=Gn=>Jt(Qa(),Gn)||Fm(Gn),qy=tt(a),C4=tt(f);return Kc(),{type:v,children:o,elements:n,getValidStyles:Ld,getValidClasses:Rn,getBlockElements:Ds,getInvalidStyles:Vt,getVoidElements:Ut,getTextBlockElements:Tn,getTextInlineElements:wt,getBoolAttrs:ks,getElementRule:Tc,getSelfClosingElements:Pn,getNonEmptyElements:io,getMoveCaretBeforeOnEnterElements:rs,getWhitespaceElements:Cr,getTransparentElements:hf,getSpecialElements:pf,getComponentUrls:C4,isValidChild:bf,isValid:uu,isBlock:Nl,isInline:Fm,isWrapper:Gy,getCustomElements:qy,addValidElements:lt,setValidElements:sn,addCustomElements:rr,addValidChildren:yr}},T2=e=>({value:Hg(e)}),Hg=e=>Aa(e,"#").toUpperCase(),Yi=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},zg=e=>{const n=Yi(e.red)+Yi(e.green)+Yi(e.blue);return T2(n)},Vg=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,A2=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Nb=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),Pb=(e,n,o,r)=>{const a=parseInt(e,10),u=parseInt(n,10),f=parseInt(o,10),h=parseFloat(r);return Nb(a,u,f,h)},$b=e=>Vg.test(e)?"rgb":A2.test(e)?"rgba":"other",k2=e=>{const n=Vg.exec(e);if(n!==null)return F.some(Pb(n[1],n[2],n[3],"1"));const o=A2.exec(e);return o!==null?F.some(Pb(o[1],o[2],o[3],o[4])):F.none()},CS=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,Ug=e=>k2(e).map(zg).map(n=>"#"+n.value).getOr(e),Wg=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,a=/\s+$/,u={};let f,h;const v=Yc;n&&(f=n.getValidStyles(),h=n.getInvalidStyles());const w=(`\\" \\' \\; \\: ; : `+v).split(" ");for(let R=0;R<w.length;R++)u[w[R]]=v+R,u[v+R]=w[R];const D={parse:R=>{const M={};let L=!1;const K=e.url_converter,W=e.url_converter_scope||D,J=(Ge,ze,lt)=>{const sn=M[Ge+"-top"+ze];if(!sn)return;const Nn=M[Ge+"-right"+ze];if(!Nn)return;const bo=M[Ge+"-bottom"+ze];if(!bo)return;const Zo=M[Ge+"-left"+ze];if(!Zo)return;const rr=[sn,Nn,bo,Zo];let yr=rr.length-1;for(;yr--&&rr[yr]===rr[yr+1];);yr>-1&&lt||(M[Ge+ze]=yr===-1?rr[0]:rr.join(" "),delete M[Ge+"-top"+ze],delete M[Ge+"-right"+ze],delete M[Ge+"-bottom"+ze],delete M[Ge+"-left"+ze])},pe=Ge=>{const ze=M[Ge];if(!ze)return;const lt=ze.indexOf(",")>-1?[ze]:ze.split(" ");let sn=lt.length;for(;sn--;)if(lt[sn]!==lt[0])return!1;return M[Ge]=lt[0],!0},be=(Ge,ze,lt,sn)=>{pe(ze)&&pe(lt)&&pe(sn)&&(M[Ge]=M[ze]+" "+M[lt]+" "+M[sn],delete M[ze],delete M[lt],delete M[sn])},Se=Ge=>(L=!0,u[Ge]),Ze=(Ge,ze)=>(L&&(Ge=Ge.replace(/\uFEFF[0-9]/g,lt=>u[lt])),ze||(Ge=Ge.replace(/\\([\'\";:])/g,"$1")),Ge),it=Ge=>String.fromCharCode(parseInt(Ge.slice(1),16)),$t=Ge=>Ge.replace(/\\[0-9a-f]+/gi,it),yt=(Ge,ze,lt,sn,Nn,bo)=>{if(Nn=Nn||bo,Nn)return Nn=Ze(Nn),"'"+Nn.replace(/\'/g,"\\'")+"'";if(ze=Ze(ze||lt||sn||""),!e.allow_script_urls){const Zo=ze.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Zo)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(Zo))return""}return K&&(ze=K.call(W,ze,"style")),"url('"+ze.replace(/\'/g,"\\'")+"')"};if(R){R=R.replace(/[\u0000-\u001F]/g,""),R=R.replace(/\\[\"\';:\uFEFF]/g,Se).replace(/\"[^\"]+\"|\'[^\']+\'/g,ze=>ze.replace(/[;:]/g,Se));let Ge;for(;Ge=r.exec(R);){r.lastIndex=Ge.index+Ge[0].length;let ze=Ge[1].replace(a,"").toLowerCase(),lt=Ge[2].replace(a,"");if(ze&&lt){if(ze=$t(ze),lt=$t(lt),ze.indexOf(v)!==-1||ze.indexOf('"')!==-1||!e.allow_script_urls&&(ze==="behavior"||/expression\s*\(|\/\*|\*\//.test(lt)))continue;ze==="font-weight"&&lt==="700"?lt="bold":(ze==="color"||ze==="background-color")&&(lt=lt.toLowerCase()),$b(lt)==="rgb"&&k2(lt).each(sn=>{lt=Ug(CS(sn)).toLowerCase()}),lt=lt.replace(o,yt),M[ze]=L?Ze(lt,!0):lt}}J("border","",!0),J("border","-width"),J("border","-color"),J("border","-style"),J("padding",""),J("margin",""),be("border","border-width","border-style","border-color"),M.border==="medium none"&&delete M.border,M["border-image"]==="none"&&delete M["border-image"]}return M},serialize:(R,M)=>{let L="";const K=(J,pe)=>{const be=pe[J];if(be)for(let Se=0,Ze=be.length;Se<Ze;Se++){const it=be[Se],$t=R[it];$t&&(L+=(L.length>0?" ":"")+it+": "+$t+";")}},W=(J,pe)=>{if(!h||!pe)return!0;let be=h["*"];return be&&be[J]?!1:(be=h[pe],!(be&&be[J]))};return M&&f?(K("*",f),K(M,f)):yo(R,(J,pe)=>{J&&W(pe,M)&&(L+=(L.length>0?" ":"")+pe+": "+J+";")}),L}};return D},hd={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Km=e=>e instanceof Event||le(e.initEvent),Zg=e=>e.isDefaultPrevented===Ve||e.isDefaultPrevented===Ae,wS=e=>pn(e.preventDefault)||Km(e),D1=(e,n)=>{const o=n??{};for(const r in e)Jt(hd,r)||(o[r]=e[r]);return xe(e.composedPath)&&(o.composedPath=()=>e.composedPath()),xe(e.getModifierState)&&(o.getModifierState=r=>e.getModifierState(r)),xe(e.getTargetRanges)&&(o.getTargetRanges=()=>e.getTargetRanges()),o},O1=(e,n,o,r)=>{const a=D1(n,r);return a.type=e,pn(a.target)&&(a.target=a.srcElement??o),wS(n)&&(a.preventDefault=()=>{a.defaultPrevented=!0,a.isDefaultPrevented=Ve,le(n.preventDefault)&&n.preventDefault()},a.stopPropagation=()=>{a.cancelBubble=!0,a.isPropagationStopped=Ve,le(n.stopPropagation)&&n.stopPropagation()},a.stopImmediatePropagation=()=>{a.isImmediatePropagationStopped=Ve,a.stopPropagation()},Zg(a)||(a.isDefaultPrevented=a.defaultPrevented===!0?Ve:Ae,a.isPropagationStopped=a.cancelBubble===!0?Ve:Ae,a.isImmediatePropagationStopped=Ae)),a},SS="mce-data-",xS=/^(?:mouse|contextmenu)|click/,Ib=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},jg=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},Lb=e=>xe(e)&&xS.test(e.type),Jl=(e,n)=>{const o=O1(e.type,e,document,n);if(Lb(e)&&ro(e.pageX)&&!ro(e.clientX)){const r=o.target.ownerDocument||document,a=r.documentElement,u=r.body,f=o;f.pageX=e.clientX+(a&&a.scrollLeft||u&&u.scrollLeft||0)-(a&&a.clientLeft||u&&u.clientLeft||0),f.pageY=e.clientY+(a&&a.scrollTop||u&&u.scrollTop||0)-(a&&a.clientTop||u&&u.clientTop||0)}return o},ES=(e,n,o)=>{const r=e.document,a={type:"ready"};if(o.domLoaded){n(a);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,f=()=>{jg(e,"DOMContentLoaded",f),jg(e,"load",f),o.domLoaded||(o.domLoaded=!0,n(a)),e=null};u()?f():Ib(e,"DOMContentLoaded",f),o.domLoaded||Ib(e,"load",f)},jy=class jy{constructor(){Xe(this,"domLoaded",!1);Xe(this,"events",{});Xe(this,"expando");Xe(this,"hasFocusIn");Xe(this,"count",1);this.expando=SS+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,a){const u=this;let f;const h=window,v=M=>{u.executeHandlers(Jl(M||h.event),w)};if(!n||pt(n)||Zr(n))return r;let w;n[u.expando]?w=n[u.expando]:(w=u.count++,n[u.expando]=w,u.events[w]={}),a=a||n;const D=o.split(" ");let R=D.length;for(;R--;){let M=D[R],L=v,K=!1,W=!1;if(M==="DOMContentLoaded"&&(M="ready"),u.domLoaded&&M==="ready"&&n.readyState==="complete"){r.call(a,Jl({type:M}));continue}!u.hasFocusIn&&(M==="focusin"||M==="focusout")&&(K=!0,W=M==="focusin"?"focus":"blur",L=J=>{const pe=Jl(J||h.event);pe.type=pe.type==="focus"?"focusin":"focusout",u.executeHandlers(pe,w)}),f=u.events[w][M],f?M==="ready"&&u.domLoaded?r(Jl({type:M})):f.push({func:r,scope:a}):(u.events[w][M]=f=[{func:r,scope:a}],f.fakeName=W,f.capture=K,f.nativeHandler=L,M==="ready"?ES(n,L,u):Ib(n,W||M,L,K))}return n=f=null,r}unbind(n,o,r){if(!n||pt(n)||Zr(n))return this;const a=n[this.expando];if(a){let u=this.events[a];if(o){const f=o.split(" ");let h=f.length;for(;h--;){const v=f[h],w=u[v];if(w){if(r){let D=w.length;for(;D--;)if(w[D].func===r){const R=w.nativeHandler,M=w.fakeName,L=w.capture,K=w.slice(0,D).concat(w.slice(D+1));K.nativeHandler=R,K.fakeName=M,K.capture=L,u[v]=K}}(!r||w.length===0)&&(delete u[v],jg(n,w.fakeName||v,w.nativeHandler,w.capture))}}}else yo(u,(f,h)=>{jg(n,f.fakeName||h,f.nativeHandler,f.capture)}),u={};for(const f in u)if(Jt(u,f))return this;delete this.events[a];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||pt(n)||Zr(n))return this;const a=Jl({type:o,target:n},r);do{const u=n[this.expando];u&&this.executeHandlers(a,u),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!a.isPropagationStopped());return this}clean(n){if(!n||pt(n)||Zr(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],a=r&&r[n.type];if(a)for(let u=0,f=a.length;u<f;u++){const h=a[u];if(h&&h.func.call(h.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}};Xe(jy,"Event",new jy);let Bu=jy;const _1=Ct.each,TS=Ct.grep,AS="data-mce-style",Xi=Ct.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),R1=(e,n,o)=>{pn(o)||o===""?cc(e,n):Sr(e,n,o)},kS=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),Pf=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,a=e.previousSibling;a;a=a.previousSibling){const u=a.nodeType;n&&pt(a)&&(u===r||!a.data.length)||(o++,r=u)}return o},F4=(e,n)=>{const o=lr(n,"style"),r=e.serialize(e.parse(o),xo(n));R1(n,AS,r)},N4=(e,n)=>vs(e)?Jt(Xi,n)?e+"":e+"px":e,D2=(e,n,o)=>{const r=kS(n);pn(o)||o===""?jh(e,r):fa(e,r,N4(o,r))},P4=(e,n,o)=>{const r=n.keep_values,a={set:(f,h,v)=>{const w=ee.fromDom(f);le(n.url_converter)&&xe(h)&&(h=n.url_converter.call(n.url_converter_scope||o(),String(h),v,f));const D="data-mce-"+v;R1(w,D,h),R1(w,v,h)},get:(f,h)=>{const v=ee.fromDom(f);return lr(v,"data-mce-"+h)||lr(v,h)}},u={style:{set:(f,h)=>{const v=ee.fromDom(f);r&&R1(v,AS,h),cc(v,"style"),re(h)&&ri(v,e.parse(h))},get:f=>{const h=ee.fromDom(f),v=lr(h,AS)||lr(h,"style");return e.serialize(e.parse(v),xo(h))}}};return r&&(u.href=u.src=a),u},Bs=(e,n={})=>{const o={},r=window,a={};let u=0;const f=!0,h=!0,v=Du.forElement(ee.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy,crossOrigin:_e=>{const Ne=n.crossOrigin;if(le(Ne))return Ne(_e,"stylesheet")}}),w=[],D=n.schema?n.schema:Ru({}),R=Wg({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),M=n.ownEvents?new Bu:Bu.Event,L=D.getBlockElements(),K=_e=>re(_e)?Jt(L,_e):gn(_e)&&(Jt(L,_e.nodeName)||ct(D,_e)),W=_e=>_e&&e&&re(_e)?e.getElementById(_e):_e,J=_e=>{const Ne=W(_e);return xe(Ne)?ee.fromDom(Ne):null},pe=(_e,Ne,Wt="")=>{let Ft;const no=J(_e);if(xe(no)&&Rr(no)){const xs=II[Ne];xs&&xs.get?Ft=xs.get(no.dom,Ne):Ft=lr(no,Ne)}return xe(Ft)?Ft:Wt},be=_e=>{const Ne=W(_e);return pn(Ne)?[]:Ne.attributes},Se=(_e,Ne,Wt)=>{Rn(_e,Ft=>{if(gn(Ft)){const no=ee.fromDom(Ft),xs=Wt===""?null:Wt,bc=lr(no,Ne),Lh=II[Ne];Lh&&Lh.set?Lh.set(no.dom,xs,Ne):R1(no,Ne,xs),bc!==xs&&n.onSetAttrib&&n.onSetAttrib({attrElm:no.dom,attrName:Ne,attrValue:xs})}})},Ze=(_e,Ne)=>_e.cloneNode(Ne),it=()=>n.root_element||e.body,$t=_e=>{const Ne=i2(_e);return{x:Ne.x,y:Ne.y,w:Ne.width,h:Ne.height}},yt=(_e,Ne)=>Wm(e.body,W(_e),Ne),Ge=(_e,Ne,Wt)=>{Rn(_e,Ft=>{const no=ee.fromDom(Ft);D2(no,Ne,Wt),n.update_styles&&F4(R,no)})},ze=(_e,Ne)=>{Rn(_e,Wt=>{const Ft=ee.fromDom(Wt);yo(Ne,(no,xs)=>{D2(Ft,xs,no)}),n.update_styles&&F4(R,Ft)})},lt=(_e,Ne,Wt)=>{const Ft=W(_e);if(!(pn(Ft)||!gr(Ft)&&!np(Ft)))return Wt?$r(ee.fromDom(Ft),kS(Ne)):(Ne=Ne.replace(/-(\D)/g,(no,xs)=>xs.toUpperCase()),Ne==="float"&&(Ne="cssFloat"),Ft.style?Ft.style[Ne]:void 0)},sn=_e=>{const Ne=W(_e);if(!Ne)return{w:0,h:0};let Wt=lt(Ne,"width"),Ft=lt(Ne,"height");return(!Wt||Wt.indexOf("px")===-1)&&(Wt="0"),(!Ft||Ft.indexOf("px")===-1)&&(Ft="0"),{w:parseInt(Wt,10)||Ne.offsetWidth||Ne.clientWidth,h:parseInt(Ft,10)||Ne.offsetHeight||Ne.clientHeight}},Nn=_e=>{const Ne=W(_e),Wt=yt(Ne),Ft=sn(Ne);return{x:Wt.x,y:Wt.y,w:Ft.w,h:Ft.h}},bo=(_e,Ne)=>{if(!_e)return!1;const Wt=je(_e)?_e:[_e];return ve(Wt,Ft=>wi(ee.fromDom(Ft),Ne))},Zo=(_e,Ne,Wt,Ft)=>{const no=[];let xs=W(_e);Ft=Ft===void 0;const bc=Wt||(it().nodeName!=="BODY"?it().parentNode:null);if(re(Ne))if(Ne==="*")Ne=gn;else{const Lh=Ne;Ne=fg=>bo(fg,Lh)}for(;xs&&!(xs===bc||pn(xs.nodeType)||_o(xs)||Bg(xs));){if(!Ne||Ne(xs))if(Ft)no.push(xs);else return[xs];xs=xs.parentNode}return Ft?no:null},rr=(_e,Ne,Wt)=>{const Ft=Zo(_e,Ne,Wt,!1);return Ft&&Ft.length>0?Ft[0]:null},yr=(_e,Ne,Wt)=>{let Ft=Ne;if(_e){re(Ne)&&(Ft=no=>bo(no,Ne));for(let no=_e[Wt];no;no=no[Wt])if(le(Ft)&&Ft(no))return no}return null},Tc=(_e,Ne)=>yr(_e,Ne,"nextSibling"),Kc=(_e,Ne)=>yr(_e,Ne,"previousSibling"),Ld=_e=>le(_e.querySelectorAll),Vt=(_e,Ne)=>{const Wt=W(Ne)??n.root_element??e;return Ld(Wt)?Xo(Wt.querySelectorAll(_e)):[]},Rn=function(_e,Ne,Wt){const Ft=Wt??this;if(je(_e)){const no=[];return _1(_e,(xs,bc)=>{const Lh=W(xs);Lh&&no.push(Ne.call(Ft,Lh,bc))}),no}else{const no=W(_e);return no?Ne.call(Ft,no):!1}},ks=(_e,Ne)=>{Rn(_e,Wt=>{yo(Ne,(Ft,no)=>{Se(Wt,no,Ft)})})},Ds=(_e,Ne)=>{Rn(_e,Wt=>{const Ft=ee.fromDom(Wt);ld(Ft,Ne)})},Tn=(_e,Ne,Wt,Ft,no)=>Rn(_e,xs=>{const bc=re(Ne)?e.createElement(Ne):Ne;return xe(Wt)&&ks(bc,Wt),Ft&&(!re(Ft)&&Ft.nodeType?bc.appendChild(Ft):re(Ft)&&Ds(bc,Ft)),no?bc:xs.appendChild(bc)}),wt=(_e,Ne,Wt)=>Tn(e.createElement(_e),_e,Ne,Wt,!0),Ut=Pg.decode,Pn=Pg.encodeAllRaw,io=(_e,Ne,Wt="")=>{let Ft="<"+_e;for(const no in Ne)lo(Ne,no)&&(Ft+=" "+no+'="'+Pn(Ne[no])+'"');return vi(Wt)&&Jt(D.getVoidElements(),_e)?Ft+" />":Ft+">"+Wt+"</"+_e+">"},rs=_e=>{const Ne=e.createElement("div"),Wt=e.createDocumentFragment();Wt.appendChild(Ne),_e&&(Ne.innerHTML=_e);let Ft;for(;Ft=Ne.firstChild;)Wt.appendChild(Ft);return Wt.removeChild(Ne),Wt},Cr=(_e,Ne)=>Rn(_e,Wt=>{const Ft=ee.fromDom(Wt);return Ne&&te(Er(Ft),no=>{ys(no)&&no.dom.length===0?Ws(no):ea(Ft,no)}),Ws(Ft),Ft.dom}),hf=_e=>Rn(_e,Ne=>{const Wt=Ne.attributes;for(let Ft=Wt.length-1;Ft>=0;Ft--)Ne.removeAttributeNode(Wt.item(Ft))}),Qa=_e=>R.parse(_e),pf=(_e,Ne)=>R.serialize(_e,Ne),bf=_e=>{if(Yy!==Bs.DOM&&e===document){if(o[_e])return;o[_e]=!0}let Ne=e.getElementById("mceDefaultStyles");if(!Ne){Ne=e.createElement("style"),Ne.id="mceDefaultStyles",Ne.type="text/css";const Wt=e.head;Wt.firstChild?Wt.insertBefore(Ne,Wt.firstChild):Wt.appendChild(Ne)}Ne.styleSheet?Ne.styleSheet.cssText+=_e:Ne.appendChild(e.createTextNode(_e))},uu=_e=>{_e||(_e=""),te(_e.split(","),Ne=>{a[Ne]=!0,v.load(Ne).catch(rt)})},Nl=(_e,Ne,Wt)=>{Rn(_e,Ft=>{if(gn(Ft)){const no=ee.fromDom(Ft),xs=Ne.split(" ");te(xs,bc=>{xe(Wt)?(Wt?ci:Jr)(no,bc):_c(no,bc)})}})},Fm=(_e,Ne)=>{Nl(_e,Ne,!0)},Gy=(_e,Ne)=>{Nl(_e,Ne,!1)},qy=(_e,Ne)=>{const Wt=J(_e),Ft=Ne.split(" ");return xe(Wt)&&ns(Ft,no=>qh(Wt,no))},C4=_e=>{Rn(_e,Ne=>jh(ee.fromDom(Ne),"display"))},Gn=_e=>{Rn(_e,Ne=>fa(ee.fromDom(Ne),"display","none"))},cs=_e=>{const Ne=J(_e);return xe(Ne)&&ht(Yr(Ne,"display"),"none")},pc=_e=>(_e||"mce_")+u++,xr=_e=>{const Ne=J(_e);return xe(Ne)?gn(Ne.dom)?Ne.dom.outerHTML:e2(Ne):""},Ys=(_e,Ne)=>{Rn(_e,Wt=>{gn(Wt)&&(Wt.outerHTML=Ne)})},uc=(_e,Ne)=>{const Wt=W(Ne);return Rn(_e,Ft=>{const no=Wt==null?void 0:Wt.parentNode,xs=Wt==null?void 0:Wt.nextSibling;return no&&(xs?no.insertBefore(Ft,xs):no.appendChild(Ft)),Ft})},du=(_e,Ne,Wt)=>Rn(Ne,Ft=>{var xs;const no=je(Ne)?_e.cloneNode(!0):_e;return Wt&&_1(TS(Ft.childNodes),bc=>{no.appendChild(bc)}),(xs=Ft.parentNode)==null||xs.replaceChild(no,Ft),Ft}),ll=(_e,Ne)=>{if(_e.nodeName!==Ne.toUpperCase()){const Wt=wt(Ne);return _1(be(_e),Ft=>{Se(Wt,Ft.nodeName,pe(_e,Ft.nodeName))}),du(Wt,_e,!0),Wt}else return _e},Hd=(_e,Ne)=>{let Wt=_e;for(;Wt;){let Ft=Ne;for(;Ft&&Wt!==Ft;)Ft=Ft.parentNode;if(Wt===Ft)break;Wt=Wt.parentNode}return!Wt&&_e.ownerDocument?_e.ownerDocument.documentElement:Wt},Ih=(_e,Ne,Wt)=>Vo(Ne)?Kl(D,_e,{...Wt,isContent:no=>{const xs=no.nodeName.toLowerCase();return!!Ne[xs]}}):Kl(D,_e,Wt),w4=()=>e.createRange(),S4=(_e,Ne,Wt)=>{let Ft=w4(),no,xs;if(_e&&Ne&&_e.parentNode&&Ne.parentNode){const bc=_e.parentNode;return Ft.setStart(bc,Pf(_e)),Ft.setEnd(Ne.parentNode,Pf(Ne)),no=Ft.extractContents(),Ft=w4(),Ft.setStart(Ne.parentNode,Pf(Ne)+1),Ft.setEnd(bc,Pf(_e)+1),xs=Ft.extractContents(),bc.insertBefore(x2(Yy,no,D),_e),Wt?bc.insertBefore(Wt,_e):bc.insertBefore(Ne,_e),bc.insertBefore(x2(Yy,xs,D),_e),Cr(_e),Wt||Ne}else return},tS=(_e,Ne,Wt,Ft)=>{if(je(_e)){let no=_e.length;const xs=[];for(;no--;)xs[no]=tS(_e[no],Ne,Wt,Ft);return xs}else return n.collect&&(_e===e||_e===r)&&w.push([_e,Ne,Wt,Ft]),M.bind(_e,Ne,Wt,Ft||Yy)},mg=(_e,Ne,Wt)=>{if(je(_e)){let Ft=_e.length;const no=[];for(;Ft--;)no[Ft]=mg(_e[Ft],Ne,Wt);return no}else{if(w.length>0&&(_e===e||_e===r)){let Ft=w.length;for(;Ft--;){const[no,xs,bc]=w[Ft];_e===no&&(!Ne||Ne===xs)&&(!Wt||Wt===bc)&&M.unbind(no,xs,bc)}}return M.unbind(_e,Ne,Wt)}},Ky=(_e,Ne,Wt)=>M.dispatch(_e,Ne,Wt),T5=(_e,Ne,Wt)=>M.dispatch(_e,Ne,Wt),x4=_e=>{if(_e&&gr(_e)){const Ne=_e.getAttribute("data-mce-contenteditable");return Ne&&Ne!=="inherit"?Ne:_e.contentEditable!=="inherit"?_e.contentEditable:null}else return null},Yy={doc:e,settings:n,win:r,files:a,stdMode:f,boxModel:h,styleSheetLoader:v,boundEvents:w,styles:R,schema:D,events:M,isBlock:K,root:null,clone:Ze,getRoot:it,getViewPort:$t,getRect:Nn,getSize:sn,getParent:rr,getParents:Zo,get:W,getNext:Tc,getPrev:Kc,select:Vt,is:bo,add:Tn,create:wt,createHTML:io,createFragment:rs,remove:Cr,setStyle:Ge,getStyle:lt,setStyles:ze,removeAllAttribs:hf,setAttrib:Se,setAttribs:ks,getAttrib:pe,getPos:yt,parseStyle:Qa,serializeStyle:pf,addStyle:bf,loadCSS:uu,addClass:Fm,removeClass:Gy,hasClass:qy,toggleClass:Nl,show:C4,hide:Gn,isHidden:cs,uniqueId:pc,setHTML:Ds,getOuterHTML:xr,setOuterHTML:Ys,decode:Ut,encode:Pn,insertAfter:uc,replace:du,rename:ll,findCommonAncestor:Hd,run:Rn,getAttribs:be,isEmpty:Ih,createRng:w4,nodeIndex:Pf,split:S4,bind:tS,unbind:mg,fire:T5,dispatch:Ky,getContentEditable:x4,getContentEditableParent:_e=>{const Ne=it();let Wt=null;for(let Ft=_e;Ft&&Ft!==Ne&&(Wt=x4(Ft),Wt===null);Ft=Ft.parentNode);return Wt},isEditable:_e=>{if(xe(_e)){const Ne=gn(_e)?_e:_e.parentElement;return xe(Ne)&&gr(Ne)&&yl(ee.fromDom(Ne))}else return!1},destroy:()=>{if(w.length>0){let _e=w.length;for(;_e--;){const[Ne,Wt,Ft]=w[_e];M.unbind(Ne,Wt,Ft)}}yo(a,(_e,Ne)=>{v.unload(Ne),delete a[Ne]})},isChildOf:(_e,Ne)=>_e===Ne||Ne.contains(_e),dumpRng:_e=>"startContainer: "+_e.startContainer.nodeName+", startOffset: "+_e.startOffset+", endContainer: "+_e.endContainer.nodeName+", endOffset: "+_e.endOffset},II=P4(R,n,tt(Yy));return Yy};Bs.DOM=Bs(document),Bs.nodeIndex=Pf;const DS=Bs.DOM,OS=0,Ql=1,Gg=2,os=3,eS=class eS{constructor(n={}){Xe(this,"settings");Xe(this,"states",{});Xe(this,"queue",[]);Xe(this,"scriptLoadedCallbacks",{});Xe(this,"queueLoadedCallbacks",[]);Xe(this,"loading",!1);this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}_setCrossOrigin(n){this.settings.crossOrigin=n}loadScript(n){return new Promise((o,r)=>{const a=DS,u=document;let f;const h=()=>{a.remove(D),f&&(f.onerror=f.onload=f=null)},v=()=>{h(),o()},w=()=>{h(),r("Failed to load script: "+n)},D=a.uniqueId();f=u.createElement("script"),f.id=D,f.type="text/javascript",f.src=Ct._addCacheSuffix(n),this.settings.referrerPolicy&&a.setAttrib(f,"referrerpolicy",this.settings.referrerPolicy);const R=this.settings.crossOrigin;if(le(R)){const M=R(n);M!==void 0&&a.setAttrib(f,"crossorigin",M)}f.onload=v,f.onerror=w,(u.head||u.body).appendChild(f)})}isDone(n){return this.states[n]===Gg}markDone(n){this.states[n]=Gg}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=OS),new Promise((a,u)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:a,reject:u})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(v,w)=>{dn(o.scriptLoadedCallbacks,w).each(D=>{te(D,R=>R[v](w))}),delete o.scriptLoadedCallbacks[w]},a=v=>{const w=Ce(v,D=>D.status==="rejected");return w.length>0?Promise.reject(zn(w,({reason:D})=>je(D)?D:[D])):Promise.resolve()},u=v=>Promise.allSettled(ae(v,w=>o.states[w]===Gg?(r("resolve",w),Promise.resolve()):o.states[w]===os?(r("reject",w),Promise.reject(w)):(o.states[w]=Ql,o.loadScript(w).then(()=>{o.states[w]=Gg,r("resolve",w);const D=o.queue;return D.length>0?(o.queue=[],u(D).then(a)):Promise.resolve()},()=>(o.states[w]=os,r("reject",w),Promise.reject(w)))))),f=v=>(o.loading=!0,u(v).then(w=>{o.loading=!1;const D=o.queueLoadedCallbacks.shift();return F.from(D).each(xt),a(w)})),h=Pl(n);return o.loading?new Promise((v,w)=>{o.queueLoadedCallbacks.push(()=>{f(h).then(v,w)})}):f(h)}getScriptAttributes(n){const o={};this.settings.referrerPolicy&&(o.referrerpolicy=this.settings.referrerPolicy);const r=this.settings.crossOrigin;if(le(r)){const a=r(n);re(a)&&(o.crossorigin=a)}return o}};Xe(eS,"ScriptLoader",new eS);let fc=eS;const B1=(e,n)=>{const o=e.indexOf(n);return o!==-1&&e.indexOf(n,o+1)>o},Hb=e=>En(e)&&Jt(e,"raw"),pr=e=>je(e)&&e.length>1,lp={},zb=Yt("en"),_S=()=>dn(lp,zb.get()),Mu={getData:()=>Nc(lp,e=>({...e})),setCode:e=>{e&&zb.set(e)},getCode:()=>zb.get(),add:(e,n)=>{let o=lp[e];o||(lp[e]=o={});const r=ae(on(n),a=>a.toLowerCase());yo(n,(a,u)=>{const f=u.toLowerCase();f!==u&&B1(r,f)?(Jt(n,f)||(o[f]=a),o[u]=a):o[f]=a})},translate:e=>{const n=_S().getOr({}),o=h=>le(h)?Object.prototype.toString.call(h):r(h)?"":""+h,r=h=>h===""||h===null||h===void 0,a=h=>{const v=o(h);return Jt(n,v)?o(n[v]):dn(n,v.toLowerCase()).map(o).getOr(v)},u=h=>h.replace(/{context:\w+}$/,""),f=h=>h.replaceAll("...",fu);if(r(e))return"";if(Hb(e))return f(o(e.raw));if(pr(e)){const h=e.slice(1),v=a(e[0]).replace(/\{([0-9]+)\}/g,(w,D)=>Jt(h,D)?o(h[D]):w);return f(u(v))}return f(u(a(e)))},isRtl:()=>_S().bind(e=>dn(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>Jt(lp,e)},Ra=()=>{const e=[],n={},o={},r=[],a=(W,J)=>{const pe=Ce(r,be=>be.name===W&&be.state===J);te(pe,be=>be.resolve())},u=W=>Jt(n,W),f=W=>Jt(o,W),h=W=>{if(o[W])return o[W].instance},v=(W,J)=>{const pe=Mu.getCode(),be=","+(J||"")+",";!pe||J&&be.indexOf(","+pe+",")===-1||fc.ScriptLoader.add(n[W]+"/langs/"+pe+".js")},w=(W,J)=>{Ra.languageLoad!==!1&&(u(W)?v(W,J):K(W,"loaded").then(()=>v(W,J)))},D=(W,J)=>(e.push(J),o[W]={instance:J},a(W,"added"),J),R=W=>{delete n[W],delete o[W]},M=(W,J)=>re(J)?re(W)?{prefix:"",resource:J,suffix:""}:{prefix:W.prefix,resource:J,suffix:W.suffix}:J,L=(W,J)=>{if(n[W])return Promise.resolve();let pe=re(J)?J:J.prefix+J.resource+J.suffix;pe.indexOf("/")!==0&&pe.indexOf("://")===-1&&(pe=Ra.baseURL+"/"+pe),n[W]=pe.substring(0,pe.lastIndexOf("/"));const be=()=>(a(W,"loaded"),Promise.resolve());return o[W]?be():fc.ScriptLoader.add(pe).then(be)},K=(W,J="added")=>J==="added"&&f(W)||J==="loaded"&&u(W)?Promise.resolve():new Promise(pe=>{r.push({name:W,state:J,resolve:pe})});return{items:e,urls:n,lookup:o,get:h,requireLangPack:w,add:D,remove:R,createUrl:M,load:L,waitFor:K}};Ra.languageLoad=!0,Ra.baseURL="",Ra.PluginManager=Ra(),Ra.ThemeManager=Ra(),Ra.ModelManager=Ra();const Fu=tt("mce-annotation"),pd=tt("data-mce-annotation"),bd=tt("data-mce-annotation-uid"),$f=tt("data-mce-annotation-active"),nm=tt("data-mce-annotation-classes"),Ym=tt("data-mce-annotation-attrs"),O2=e=>n=>Io(n,e),_2=(e,n)=>{const o=e.selection.getRng(),r=ee.fromDom(o.startContainer),a=ee.fromDom(e.getBody()),u=n.fold(()=>"."+Fu(),v=>`[${pd()}="${v}"]`),f=hl(r,o.startOffset).getOr(r);return ha(f,u,O2(a)).bind(v=>ji(v,`${bd()}`).bind(w=>ji(v,`${pd()}`).map(D=>{const R=Vb(e,w);return{uid:w,name:D,elements:R}})))},R5=e=>Rr(e)&&qh(e,Fu()),L4=(e,n)=>fr(e,"data-mce-bogus")||Oo(e,'[data-mce-bogus="all"]',O2(n)),Vb=(e,n)=>{const o=ee.fromDom(e.getBody()),r=ge(o,`[${bd()}="${n}"]`);return Ce(r,a=>!L4(a,o))},Ub=(e,n)=>{const o=ee.fromDom(e.getBody()),r=ge(o,`[${pd()}="${n}"]`),a={};return te(r,u=>{if(!L4(u,o)){const f=lr(u,bd()),h=dn(a,f).getOr([]);a[f]=h.concat([u])}}),a},NS=(e,n)=>{const o=Yt({}),r=()=>({listeners:[],previous:fs()}),a=(R,M)=>{u(R,L=>(M(L),L))},u=(R,M)=>{const L=o.get(),K=dn(L,R).getOrThunk(r),W=M(K);L[R]=W,o.set(L)},f=(R,M,L)=>{a(R,K=>{te(K.listeners,W=>W(!0,R,{uid:M,nodes:ae(L,J=>J.dom)}))})},h=R=>{a(R,M=>{te(M.listeners,L=>L(!1,R))})},v=(R,M)=>{te(Vb(e,R),L=>{M?Sr(L,$f(),"true"):cc(L,$f())})},w=La(()=>{const R=Ls(n.getNames());te(R,M=>{u(M,L=>{const K=L.previous.get();return _2(e,F.some(M)).fold(()=>{K.each(W=>{h(M),L.previous.clear(),v(W,!1)})},({uid:W,name:J,elements:pe})=>{ht(K,W)||(K.each(be=>v(be,!1)),f(J,W,pe),L.previous.set(W),v(W,!0))}),{previous:L.previous,listeners:L.listeners}})})},30);return e.on("remove",()=>{w.cancel()}),e.on("NodeChange",()=>{w.throttle()}),{addListener:(R,M)=>{u(R,L=>({previous:L.previous,listeners:L.listeners.concat([M])}))}}},Wb=(e,n)=>{const o=pd(),r=u=>F.from(u.attr(o)).bind(n.lookup),a=u=>{var D;u.attr(bd(),null),u.attr(pd(),null),u.attr($f(),null);const f=F.from(u.attr(Ym())).map(R=>R.split(",")).getOr([]),h=F.from(u.attr(nm())).map(R=>R.split(",")).getOr([]);te(f,R=>u.attr(R,null));const v=((D=u.attr("class"))==null?void 0:D.split(" "))??[],w=mo(v,[Fu()].concat(h));u.attr("class",w.length>0?w.join(" "):null),u.attr(nm(),null),u.attr(Ym(),null)};e.serializer.addTempAttr($f()),e.serializer.addAttributeFilter(o,u=>{for(const f of u)r(f).each(h=>{h.persistent===!1&&(f.name==="span"?f.unwrap():a(f))})})},If=()=>{const e={};return{register:(a,u)=>{e[a]={name:a,settings:u}},lookup:a=>dn(e,a).map(u=>u.settings),getNames:()=>on(e)}},M1=(e,n,o=Ae)=>{const r=new tr(e,n),a=u=>{let f;do f=r[u]();while(f&&!pt(f)&&!o(f));return F.from(f).filter(pt)};return{current:()=>F.from(r.current()).filter(pt),next:()=>a("next"),prev:()=>a("prev"),prev2:()=>a("prev2")}},vd=(e,n)=>{const o=n||(f=>e.isBlock(f)||Ar(f)||hr(f)),r=(f,h,v,w)=>{if(pt(f)){const D=w(f,h,f.data);if(D!==-1)return F.some({container:f,offset:D})}return v().bind(D=>r(D.container,D.offset,v,w))};return{backwards:(f,h,v,w)=>{const D=M1(f,w??e.getRoot(),o);return r(f,h,()=>D.prev().map(R=>({container:R,offset:R.length})),v).getOrNull()},forwards:(f,h,v,w)=>{const D=M1(f,w??e.getRoot(),o);return r(f,h,()=>D.next().map(R=>({container:R,offset:0})),v).getOrNull()}}},Zb=["td","th"],H4=["thead","tbody","tfoot"],jb=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],Gb=["li","dd","dt"],PS=["ul","ol","dl"],z4=["pre","script","textarea","style"],up=e=>{let n;return o=>(n=n||Ns(e,Ve),Jt(n,xo(o)))},$S=e=>xo(e)==="table",om=e=>Rr(e)&&xo(e)==="br",dp=up(jb),qb=up(PS),sm=up(Gb),fi=up(H4),Ji=up(Zb),Qi=up(z4),Kb=e=>{const n=[];let o=e.dom;for(;o;)n.push(ee.fromDom(o)),o=o.lastChild;return n},R2=e=>{const n=ge(e,"br"),o=Ce(Kb(e).slice(-1),om);n.length===o.length&&te(o,Ws)},mp=()=>{const e=ee.fromTag("br");return Sr(e,"data-mce-bogus","1"),e},rm=e=>{bl(e),is(e,mp())},V4=(e,n)=>{Kr(e).each(o=>{Vi(o).each(r=>{n.isBlock(xo(e))&&om(o)&&n.isBlock(xo(r))&&Ws(o)})})},Sc=Yc,Yb=Xc,ki=ka,IS=e=>e.insertContent(Sc,{preserve_zwsp:!0}),LS=gn,Lf=pt,Xm=e=>(Lf(e)&&(e=e.parentNode),LS(e)&&e.hasAttribute("data-mce-caret")),Cs=e=>Lf(e)&&Yb(e.data),ja=e=>Xm(e)||Cs(e),F1=e=>e.firstChild!==e.lastChild||!Ar(e.firstChild),Xb=(e,n)=>{const r=(e.ownerDocument??document).createTextNode(Sc),a=e.parentNode;if(n){const u=e.previousSibling;if(Lf(u)){if(ja(u))return u;if(Hf(u))return u.splitText(u.data.length-1)}a==null||a.insertBefore(r,e)}else{const u=e.nextSibling;if(Lf(u)){if(ja(u))return u;if(cm(u))return u.splitText(1),u}e.nextSibling?a==null||a.insertBefore(r,e.nextSibling):a==null||a.appendChild(r)}return r},Jb=e=>{const n=e.container();return pt(n)?n.data.charAt(e.offset())===Sc||e.isAtStart()&&Cs(n.previousSibling):!1},N1=e=>{const n=e.container();return pt(n)?n.data.charAt(e.offset()-1)===Sc||e.isAtEnd()&&Cs(n.nextSibling):!1},HS=(e,n,o)=>{const a=(n.ownerDocument??document).createElement(e);a.setAttribute("data-mce-caret",o?"before":"after"),a.setAttribute("data-mce-bogus","all"),a.appendChild(mp().dom);const u=n.parentNode;return o?u==null||u.insertBefore(a,n):n.nextSibling?u==null||u.insertBefore(a,n.nextSibling):u==null||u.appendChild(a),a},cm=e=>Lf(e)&&e.data[0]===Sc,Hf=e=>Lf(e)&&e.data[e.data.length-1]===Sc,B2=e=>{var r;const n=e.getElementsByTagName("br"),o=n[n.length-1];Rg(o)&&((r=o.parentNode)==null||r.removeChild(o))},El=e=>e&&e.hasAttribute("data-mce-caret")?(B2(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,fp=e=>Xm(e.startContainer),gc=Math.round,Di=e=>e?{left:gc(e.left),top:gc(e.top),bottom:gc(e.bottom),right:gc(e.right),width:gc(e.width),height:gc(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Qb=(e,n)=>(e=Di(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),zS=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,M2=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,zf=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:M2(n.top-e.bottom,e,n)},qg=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:M2(n.bottom-e.top,e,n),F2=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,N2=e=>$e(e,(n,o)=>n.fold(()=>F.some(o),r=>{const a=Math.min(o.left,r.left),u=Math.min(o.top,r.top),f=Math.max(o.right,r.right),h=Math.max(o.bottom,r.bottom);return F.some({top:u,right:f,bottom:h,left:a,width:f-a,height:h-u})}),F.none()),P1=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),a=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-a)*(o-a))},P2=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),Vf=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},Jm=(e,n)=>{if(gn(e)&&e.hasChildNodes()){const o=e.childNodes,r=Tt(n,0,o.length-1);return o[r]}else return e},VS=(e,n)=>{if(!(n<0&&gn(e)&&e.hasChildNodes()))return Jm(e,n)},Ca=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),US=e=>re(e)&&e.charCodeAt(0)>=768&&Ca.test(e),Uf=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},WS=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},ev=ai,$2=hr,$1=Ar,I2=pt,ZS=na(["script","style","textarea"]),jS=na(["img","input","textarea","hr","iframe","video","audio","object","embed"]),I1=na(["table"]),xc=ja,br=e=>xc(e)?!1:I2(e)?!ZS(e.parentNode):jS(e)||$1(e)||I1(e)||Mc(e),wa=e=>gn(e)&&e.getAttribute("unselectable")==="true",Mc=e=>!wa(e)&&$2(e),Wc=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(Mc(o))return!1;if(ev(o))return!0}return!0},hc=e=>Mc(e)?!$e(Xo(e.getElementsByTagName("*")),(n,o)=>n||ev(o),!1):!1,tv=e=>jS(e)||hc(e),nv=(e,n)=>br(e)&&Wc(e,n),ov=gn,GS=br,sv=op("display","block table"),qS=op("float","left right"),Kg=WS(ov,GS,Je(qS)),L2=Je(op("white-space","pre pre-line pre-wrap")),Yg=pt,rv=Ar,H2=Bs.nodeIndex,cv=VS,yd=e=>e?e.createRange():Bs.DOM.createRng(),L1=e=>re(e)&&/[\r\n\t ]/.test(e),z2=e=>!!e.setStart&&!!e.setEnd,gp=e=>{const n=e.startContainer,o=e.startOffset;if(L1(e.toString())&&L2(n.parentNode)&&pt(n)){const r=n.data;if(L1(r[o-1])||L1(r[o+1]))return!0}return!1},H1=e=>{const n=e.ownerDocument,o=yd(n),r=n.createTextNode(mr),a=e.parentNode;a.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=Di(o.getBoundingClientRect());return a.removeChild(r),u},av=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,a=e.endOffset;if(n===o&&pt(o)&&r===0&&a===1){const u=e.cloneRange();return u.setEndAfter(o),Nu(u)}else return null},V2=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Nu=e=>{let n;const o=e.getClientRects();return o.length>0?n=Di(o[0]):n=Di(e.getBoundingClientRect()),!z2(e)&&rv(e)&&V2(n)?H1(e):V2(n)&&z2(e)?av(e)??n:n},am=(e,n)=>{const o=Qb(e,n);return o.width=1,o.right=o.left+1,o},hp=e=>{const n=[],o=f=>{f.height!==0&&(n.length>0&&zS(f,n[n.length-1])||n.push(f))},r=(f,h)=>{const v=yd(f.ownerDocument);if(h<f.data.length){if(US(f.data[h]))return;if(US(f.data[h-1])&&(v.setStart(f,h),v.setEnd(f,h+1),!gp(v))){o(am(Nu(v),!1));return}}h>0&&(v.setStart(f,h-1),v.setEnd(f,h),gp(v)||o(am(Nu(v),!1))),h<f.data.length&&(v.setStart(f,h),v.setEnd(f,h+1),gp(v)||o(am(Nu(v),!0)))},a=e.container(),u=e.offset();if(Yg(a))return r(a,u),n;if(ov(a))if(e.isAtEnd()){const f=cv(a,u);Yg(f)&&r(f,f.data.length),Kg(f)&&!rv(f)&&o(am(Nu(f),!1))}else{const f=cv(a,u);if(Yg(f)&&r(f,0),Kg(f)&&e.isAtEnd())return o(am(Nu(f),!1)),n;const h=cv(e.container(),e.offset()-1);Kg(h)&&!rv(h)&&(sv(h)||sv(f)||!Kg(f))&&o(am(Nu(h),!1)),Kg(f)&&o(am(Nu(f),!0))}return n},Le=(e,n,o)=>{const r=()=>(Yg(e),n===0),a=()=>Yg(e)?n>=e.data.length:n>=e.childNodes.length,u=()=>{const D=yd(e.ownerDocument);return D.setStart(e,n),D.setEnd(e,n),D},f=()=>(o||(o=hp(Le(e,n))),o),h=()=>f().length>0,v=D=>D&&e===D.container()&&n===D.offset(),w=D=>cv(e,D?n-1:n);return{container:tt(e),offset:tt(n),toRange:u,getClientRects:f,isVisible:h,isAtStart:r,isAtEnd:a,isEqual:v,getNode:w}};Le.fromRangeStart=e=>Le(e.startContainer,e.startOffset),Le.fromRangeEnd=e=>Le(e.endContainer,e.endOffset),Le.after=e=>Le(e.parentNode,H2(e)+1),Le.before=e=>Le(e.parentNode,H2(e)),Le.isAbove=(e,n)=>Qt(Wo(n.getClientRects()),Js(e.getClientRects()),zf).getOr(!1),Le.isBelow=(e,n)=>Qt(Js(n.getClientRects()),Wo(e.getClientRects()),qg).getOr(!1),Le.isAtStart=e=>e?e.isAtStart():!1,Le.isAtEnd=e=>e?e.isAtEnd():!1,Le.isTextPosition=e=>e?pt(e.container()):!1,Le.isElementPosition=e=>!Le.isTextPosition(e);const Oi=(e,n)=>{pt(n)&&n.data.length===0&&e.remove(n)},pp=(e,n,o)=>{n.insertNode(o),Oi(e,o.previousSibling),Oi(e,o.nextSibling)},z1=(e,n,o)=>{const r=F.from(o.firstChild),a=F.from(o.lastChild);n.insertNode(o),r.each(u=>Oi(e,u.previousSibling)),a.each(u=>Oi(e,u.nextSibling))},iv=(e,n,o)=>{Bg(o)?z1(e,n,o):pp(e,n,o)},Cd=pt,Ga=Rg,V1=Bs.nodeIndex,KS=e=>{const n=e.parentNode;return Ga(n)?KS(n):n},lv=e=>e?dl(e.childNodes,(n,o)=>(Ga(o)&&o.nodeName!=="BR"?n=n.concat(lv(o)):n.push(o),n),[]):[],YS=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&Cd(o);)n+=o.data.length;return n},Xg=e=>n=>e===n,U2=e=>{let n,o;n=lv(KS(e)),o=od(n,Xg(e),e),n=n.slice(0,o+1);const r=dl(n,(a,u,f)=>(Cd(u)&&Cd(n[f-1])&&a++,a),0);return n=Il(n,na([e.nodeName])),o=od(n,Xg(e),e),o-r},im=e=>(Cd(e)?"text()":e.nodeName.toLowerCase())+"["+U2(e)+"]",W2=(e,n,o)=>{const r=[];for(let a=n.parentNode;a&&a!==e;a=a.parentNode)r.push(a);return r},XS=(e,n)=>{let o=[],r=n.container(),a=n.offset(),u;if(Cd(r))u=YS(r,a);else{const h=r.childNodes;a>=h.length?(u="after",a=h.length-1):u="before",r=h[a]}o.push(im(r));let f=W2(e,r);return f=Il(f,Je(Rg)),o=o.concat(Li(f,h=>im(h))),o.reverse().join("/")+","+u},qa=(e,n,o)=>{let r=lv(e);return r=Il(r,(a,u)=>!Cd(a)||!Cd(r[u-1])),r=Il(r,na([n])),r[o]},wd=(e,n)=>{let o=e,r=0;for(;Cd(o);){const a=o.data.length;if(n>=r&&n<=r+a){e=o,n=n-r;break}if(!Cd(o.nextSibling)){e=o,n=a;break}r+=a,o=o.nextSibling}return Cd(e)&&n>e.data.length&&(n=e.data.length),Le(e,n)},el=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),a=o.length>1?o[1]:"before",u=dl(r,(f,h)=>{const v=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(h);return v?(v[1]==="text()"&&(v[1]="#text"),qa(f,v[1],parseInt(v[2],10))):null},e);if(!u)return null;if(!Cd(u)&&u.parentNode){let f;return a==="after"?f=V1(u)+1:f=V1(u),Le(u.parentNode,f)}return wd(u,parseInt(a,10))},uv=hr,bp=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let a=n.previousSibling;a&&pt(a);a=a.previousSibling)r+=e(a.data).length;return r},JS=(e,n,o,r,a)=>{const u=a?r.startContainer:r.endContainer;let f=a?r.startOffset:r.endOffset;const h=[],v=e.getRoot();if(pt(u))h.push(o?bp(n,u,f):f);else{let w=0;const D=u.childNodes;f>=D.length&&D.length&&(w=1,f=Math.max(0,D.length-1)),h.push(e.nodeIndex(D[f],o)+w)}for(let w=u;w&&w!==v;w=w.parentNode)h.push(e.nodeIndex(w,o));return h},U4=(e,n,o,r)=>{const a=n.dom,u=JS(a,e,o,r,!0),f=n.isForward(),h=fp(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:u,forward:f,...h};{const v=JS(a,e,o,r,!1);return{start:u,end:v,forward:f,...h}}},Z2=(e,n,o)=>{let r=0;return Ct.each(e.select(n),a=>{if(a.getAttribute("data-mce-bogus")!=="all"){if(a===o)return!1;r++;return}}),r},QS=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(gn(o)&&o.nodeName==="TR"){const a=o.childNodes;o=a[Math.min(n?r:r-1,a.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},Do=e=>(QS(e,!0),QS(e,!1),e),On=(e,n)=>{if(gn(e)&&(e=Jm(e,n),uv(e)))return e;if(ja(e)){pt(e)&&Xm(e)&&(e=e.parentNode);let o=e.previousSibling;if(uv(o)||(o=e.nextSibling,uv(o)))return o}},U1=e=>On(e.startContainer,e.startOffset)||On(e.endContainer,e.endOffset),dv=(e,n,o)=>{const r=o.getNode(),a=o.getRng();if(r.nodeName==="IMG"||uv(r)){const f=r.nodeName;return{name:f,index:Z2(o.dom,f,r)}}const u=U1(a);if(u){const f=u.tagName;return{name:f,index:Z2(o.dom,f,u)}}return U4(e,o,n,a)},j2=e=>{const n=e.getRng();return{start:XS(e.dom.getRoot(),Le.fromRangeStart(n)),end:XS(e.dom.getRoot(),Le.fromRangeEnd(n)),forward:e.isForward()}},W4=e=>({rng:e.getRng(),forward:e.isForward()}),G2=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},vr=(e,n)=>{const o=e.dom;let r=e.getRng();const a=o.uniqueId(),u=e.isCollapsed(),f=e.getNode(),h=f.nodeName,v=e.isForward();if(h==="IMG")return{name:h,index:Z2(o,h,f)};const w=Do(r.cloneRange());if(!u){w.collapse(!1);const R=G2(o,a+"_end",n);iv(o,w,R)}r=Do(r),r.collapse(!0);const D=G2(o,a+"_start",n);return iv(o,r,D),e.moveToBookmark({id:a,keep:!0,forward:v}),{id:a,forward:v}},mv=(e,n,o=!1)=>n===2?dv(ki,o,e):n===3?j2(e):n?W4(e):vr(e,!1),W1=He(dv,No,!0),Jg=e=>e===1,We=e=>e===-1,fv=e=>e.type==="inline-command"||e.type==="inline-format",ex=e=>e.type==="block-command"||e.type==="block-format",gv=(e,n)=>(e.type==="block-command"||e.type==="block-format")&&e.trigger===n,tx=e=>{const n=r=>_s.error({message:r,pattern:e}),o=(r,a,u)=>{if(e.format!==void 0){let f;if(je(e.format)){if(!ns(e.format,re))return n(r+" pattern has non-string items in the `format` array");f=e.format}else if(re(e.format))f=[e.format];else return n(r+" pattern has non-string `format` parameter");return _s.value(a(f))}else return e.cmd!==void 0?re(e.cmd)?_s.value(u(e.cmd,e.value)):n(r+" pattern has non-string `cmd` parameter"):n(r+" pattern is missing both `format` and `cmd` parameters")};if(!En(e))return n("Raw pattern is not an object");if(!re(e.start))return n("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!re(e.end))return n("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return n("Inline pattern has empty `start` and `end` parameters");let r=e.start,a=e.end;return a.length===0&&(a=r,r=""),o("Inline",u=>({type:"inline-format",start:r,end:a,format:u}),(u,f)=>({type:"inline-command",start:r,end:a,cmd:u,value:f}))}else{if(e.replacement!==void 0)return re(e.replacement)?e.start.length===0?n("Replacement pattern has empty `start` parameter"):_s.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):n("Replacement pattern has non-string `replacement` parameter");{const r=e.trigger??"space";return e.start.length===0?n("Block pattern has empty `start` parameter"):o("Block",a=>({type:"block-format",start:e.start,format:a[0],trigger:r}),(a,u)=>({type:"block-command",start:e.start,cmd:a,value:u,trigger:r}))}}},Qm=e=>Ce(e,ex),Qg=e=>Ce(e,fv),eh=(e,n)=>({inlinePatterns:Qg(e),blockPatterns:Qm(e),dynamicPatternsLookup:n}),q2=(e,n)=>({...e,blockPatterns:Ce(e.blockPatterns,o=>gv(o,n))}),th=e=>{const n=_r(ae(e,tx));return te(n.errors,o=>console.error(o.message,o.pattern)),n.values},ur=e=>n=>{const o=e(n);return th(o)},Sd=(e,n)=>e.dispatch("PreProcess",n),nx=(e,n)=>e.dispatch("PostProcess",n),ef=e=>{e.dispatch("remove")},Pu=e=>{e.dispatch("detach")},Z4=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},j4=(e,n,o,r,a)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:a})},K2=(e,n,o,r,a)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:a})},G4=e=>{e.dispatch("PreInit")},q4=e=>{e.dispatch("PostRender")},K4=e=>{e.dispatch("Init")},Y4=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},Y2=(e,n,o)=>{e.dispatch(n,o)},Et=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},ox=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},sa=(e,n)=>e.dispatch("BeforeSetContent",n),sx=(e,n)=>e.dispatch("SetContent",n),rx=(e,n)=>e.dispatch("BeforeGetContent",n),cx=(e,n)=>e.dispatch("GetContent",n),X4=(e,n)=>{e.dispatch("AutocompleterStart",n)},Qn=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},X2=(e,n)=>{e.dispatch("AutocompleterUpdateActiveRange",n)},ax=e=>{e.dispatch("AutocompleterEnd")},B5=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),J4=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),ix=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),M5=(e,n)=>e.dispatch("EditableRootStateChange",{state:n}),Q4=(e,n)=>e.dispatch("DisabledStateChange",{state:n}),lx=e=>e.dispatch("CloseActiveTooltips"),J2=wn().deviceType,to=J2.isTouch(),Q2=Bs.DOM,tf=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return $e(n,(o,r)=>{const a=r.split("="),u=a[0],f=a.length>1?a[1]:u;return o[dr(u)]=dr(f),o},{})},Tl=e=>nn(e,RegExp),Kt=e=>n=>n.options.get(e),Ka=e=>re(e)||En(e),Z1=(e,n="")=>o=>{const r=re(o);if(r)if(o.indexOf("=")!==-1){const a=tf(o);return{value:dn(a,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},j1=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("crossorigin",{processor:"function",default:tt(void 0)}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.editorManager.documentBaseURL}),n("body_id",{processor:Z1(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:Z1(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=re(o)&&Qs(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=De(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>St(o)?{valid:!0,value:o}:re(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||re(o)||qe(o,re);return r?re(o)?{value:ae(o.split(","),dr),valid:r}:je(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:vv(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=re(o)||qe(o,re);return r?{value:je(o)?o:ae(o.split(","),dr),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("extended_mathml_attributes",{processor:"string[]"}),n("extended_mathml_elements",{processor:"string[]"}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=St(o)||re(o);return r?o===!1||J2.isiPhone()||J2.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!to}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"string"}),n("service_message",{processor:"string"}),n("onboarding",{processor:"boolean",default:!0}),n("tiny_cloud_entry_url",{processor:"string"}),n("theme",{processor:o=>o===!1||re(o)||le(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||re(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("disabled",{processor:o=>St(o)?(e.initialized&&a0(e)!==o&&Promise.resolve().then(()=>{Q4(e,o)}),{valid:!0,value:o}):{valid:!1,message:"The value must be a boolean."},default:!1}),n("readonly",{processor:"boolean",default:!1}),n("editable_root",{processor:"boolean",default:!0}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area".concat(e.hasPlugin("help")?". Press ALT-0 for help.":"")}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_html_in_comments",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("allow_mathml_annotation_encodings",{processor:o=>{const r=qe(o,re);return r?{value:o,valid:r}:{valid:!1,message:"Must be an array of strings."}},default:[]}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean",default:!0}),n("pad_empty_with_br",{processor:"boolean",default:!1}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:Ka}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:Ka}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:Ka}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:Ka}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>re(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("license_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>qe(o,En)||o===!1?{value:th(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),n("text_patterns_lookup",{processor:o=>le(o)?{value:ur(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>qe(o,Tl)?{value:o,valid:!0}:Tl(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!0}),n("xss_sanitization",{processor:"boolean",default:!0}),n("details_initial_state",{processor:o=>{const r=De(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("details_serialized_state",{processor:o=>{const r=De(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("init_content_sync",{processor:"boolean",default:!1}),n("newdocument_content",{processor:"string",default:""}),n("sandbox_iframes",{processor:"boolean",default:!0}),n("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),n("convert_unsafe_embeds",{processor:"boolean",default:!0}),n("user_id",{processor:"string",default:"Anonymous"}),n("fetch_users",{processor:o=>o===void 0?{valid:!0,value:void 0}:le(o)?{valid:!0,value:o}:{valid:!1,message:"fetch_users must be a function that returns a Promise<ExpectedUser[]>"}}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:Mu.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:Q2.getAttrib(e.getElement(),"placeholder")})}),n("lists_indent_on_tab",{processor:"boolean",default:!0}),n("list_max_depth",{processor:o=>{const r=vs(o);if(r){if(o<0)throw new Error("list_max_depth cannot be set to lower than 0");return{value:o,valid:r}}else return{valid:!1,message:"Must be a number"}}})},hv=Kt("iframe_attrs"),vp=Kt("doctype"),G1=Kt("document_base_url"),nf=Kt("body_id"),Ba=Kt("body_class"),lm=Kt("content_security_policy"),e3=Kt("br_in_pre"),Sa=Kt("forced_root_block"),yp=Kt("forced_root_block_attrs"),t3=Kt("newline_behavior"),es=Kt("br_newline_selector"),xd=Kt("no_newline_selector"),nh=Kt("keep_styles"),F5=Kt("end_container_on_empty_block"),oh=Kt("automatic_uploads"),ss=Kt("images_reuse_filename"),N5=Kt("images_replace_blob_uris"),ux=Kt("icons"),P5=Kt("icons_url"),$5=Kt("images_upload_url"),q1=Kt("images_upload_base_path"),n3=Kt("images_upload_credentials"),I5=Kt("images_upload_handler"),pv=Kt("content_css_cors"),eC=Kt("referrer_policy"),K1=Kt("crossorigin"),dx=Kt("language"),o3=Kt("language_url"),Y1=Kt("indent_use_margin"),tC=Kt("indentation"),nC=Kt("content_css"),mx=Kt("content_style"),fx=Kt("font_css"),gx=Kt("directionality"),oC=Kt("inline_boundaries_selector"),sC=Kt("object_resizing"),hs=Kt("resize_img_proportional"),hx=Kt("placeholder"),bv=Kt("event_root"),rC=Kt("service_message"),eu=Kt("theme"),px=Kt("theme_url"),cC=Kt("model"),s3=Kt("model_url"),um=Kt("inline_boundaries"),r3=Kt("formats"),X1=Kt("preview_styles"),J1=Kt("format_empty_lines"),c3=Kt("format_noneditable_selector"),Wf=Kt("custom_ui_selector"),vv=Kt("inline"),bx=Kt("hidden_input"),a3=Kt("submit_patch"),vx=Kt("add_form_submit_trigger"),L5=Kt("add_unload_trigger"),yx=Kt("custom_undo_redo_levels"),Cx=Kt("disable_nodechange"),Q1=Kt("readonly"),e0=Kt("editable_root"),t0=Kt("content_css_cors"),sh=Kt("plugins"),yv=Kt("external_plugins"),n0=Kt("block_unsupported_drop"),of=Kt("visual"),o0=Kt("visual_table_class"),aC=Kt("visual_anchor_class"),Cv=Kt("iframe_aria_text"),wx=Kt("setup"),Sx=Kt("init_instance_callback"),xx=Kt("urlconverter_callback"),i3=Kt("auto_focus"),wv=Kt("browser_spellcheck"),Cp=Kt("protect"),rh=Kt("paste_block_drop"),ch=Kt("paste_data_images"),Ex=Kt("paste_preprocess"),Tx=Kt("paste_postprocess"),Ax=Kt("newdocument_content"),Sv=Kt("paste_webkit_styles"),kx=Kt("paste_remove_styles_if_webkit"),l3=Kt("paste_merge_formats"),Dx=Kt("smart_paste"),xv=Kt("paste_as_text"),iC=Kt("paste_tab_spaces"),Ev=Kt("allow_html_data_urls"),lC=Kt("text_patterns"),u3=Kt("text_patterns_lookup"),uC=Kt("noneditable_class"),Ox=Kt("editable_class"),_x=Kt("noneditable_regexp"),s0=Kt("preserve_cdata"),d3=Kt("highlight_on_focus"),dC=Kt("xss_sanitization"),mC=Kt("init_content_sync"),m3=e=>e.options.isSet("text_patterns_lookup"),f3=e=>Ct.explode(e.options.get("font_size_style_values")),ah=e=>Ct.explode(e.options.get("font_size_classes")),Rx=e=>e.options.get("encoding")==="xml",Bx=e=>Ct.explode(e.options.get("images_file_types")),g3=Kt("table_tab_navigation"),h3=Kt("details_initial_state"),p3=Kt("details_serialized_state"),Tv=Kt("sandbox_iframes"),r0=e=>e.options.get("sandbox_iframes_exclusions"),fC=Kt("convert_unsafe_embeds"),c0=Kt("license_key"),Mx=Kt("api_key"),a0=Kt("disabled"),b3=Kt("user_id"),Av=Kt("fetch_users"),v3=Kt("lists_indent_on_tab"),Fx=e=>F.from(e.options.get("list_max_depth")),H5=gn,y3=pt,ih=e=>{const n=e.parentNode;n&&n.removeChild(e)},kv=e=>{const n=ki(e);return{count:e.length-n.length,text:n}},Dv=e=>{let n;for(;(n=e.data.lastIndexOf(Sc))!==-1;)e.deleteData(n,1)},Nx=(e,n)=>(dm(e),n),C3=(e,n)=>{const o=kv(e.data.substr(0,n.offset())),r=kv(e.data.substr(n.offset()));return(o.text+r.text).length>0?(Dv(e),Le(e,n.offset()-o.count)):n},Ov=(e,n)=>{const o=n.container(),r=ms(Xo(o.childNodes),e).map(a=>a<n.offset()?Le(o,n.offset()-1):n).getOr(n);return dm(e),r},Px=(e,n)=>y3(e)&&n.container()===e?C3(e,n):Nx(e,n),$x=(e,n)=>n.container()===e.parentNode?Ov(e,n):Nx(e,n),_v=(e,n)=>Le.isTextPosition(n)?Px(e,n):$x(e,n),dm=e=>{H5(e)&&ja(e)&&(F1(e)?e.removeAttribute("data-mce-caret"):ih(e)),y3(e)&&(Dv(e),e.data.length===0&&ih(e))},Ix=hr,w3=Au,S3=Qd,x3="*[contentEditable=false],video,audio,embed,object",wp=(e,n,o)=>{const r=Qb(n.getBoundingClientRect(),o);let a,u;if(e.tagName==="BODY"){const h=e.ownerDocument.documentElement;a=e.scrollLeft||h.scrollLeft,u=e.scrollTop||h.scrollTop}else{const h=e.getBoundingClientRect();a=e.scrollLeft-h.left,u=e.scrollTop-h.top}r.left+=a,r.right+=a,r.top+=u,r.bottom+=u,r.width=1;let f=n.offsetWidth-n.clientWidth;return f>0&&(o&&(f*=-1),r.left+=f,r.right+=f),r},Lx=e=>{var o,r;const n=ge(ee.fromDom(e),x3);for(let a=0;a<n.length;a++){const u=n[a].dom;let f=u.previousSibling;if(Hf(f)){const h=f.data;h.length===1?(o=f.parentNode)==null||o.removeChild(f):f.deleteData(h.length-1,1)}f=u.nextSibling,cm(f)&&(f.data.length===1?(r=f.parentNode)==null||r.removeChild(f):f.deleteData(0,1))}},gC=(e,n,o,r)=>{const a=fs();let u,f;const h=Sa(e),v=e.dom,w=(W,J)=>{let pe;if(D(),S3(J))return null;if(o(J)){const be=HS(h,J,W),Se=wp(n,J,W);v.setStyle(be,"top",Se.top),v.setStyle(be,"caret-color","transparent"),f=be;const Ze=v.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});v.setStyles(Ze,{...Se}),v.add(n,Ze),a.set({caret:Ze,element:J,before:W}),W&&v.addClass(Ze,"mce-visual-caret-before"),R(),pe=J.ownerDocument.createRange(),pe.setStart(be,0),pe.setEnd(be,0)}else return f=Xb(J,W),pe=J.ownerDocument.createRange(),Ed(f.nextSibling)?(pe.setStart(f,0),pe.setEnd(f,0)):(pe.setStart(f,1),pe.setEnd(f,1)),pe;return pe},D=()=>{Lx(n),f&&(dm(f),f=null),a.on(W=>{v.remove(W.caret),a.clear()}),u&&(clearInterval(u),u=void 0)},R=()=>{u=window.setInterval(()=>{a.on(W=>{r()?v.toggleClass(W.caret,"mce-visual-caret-hidden"):v.addClass(W.caret,"mce-visual-caret-hidden")})},500)},M=()=>{a.on(W=>{const J=wp(n,W.element,W.before);v.setStyles(W.caret,{...J})})},L=()=>clearInterval(u),K=()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}";return{isShowing:a.isSet,show:w,hide:D,getCss:K,reposition:M,destroy:L}},Rv=()=>wo.browser.isFirefox(),Ed=e=>Ix(e)||w3(e),i0=e=>(Ed(e)||Jd(e)&&Rv())&&Si(ee.fromDom(e)).exists(yl),mm=ai,Bv=hr,Hx=Au,zx=op("display","block table table-cell table-row table-caption list-item"),E3=ja,Vx=Xm,T3=gn,A3=pt,k3=br,Sp=(e,n)=>{let o;for(;o=e(n);)if(!Vx(o))return o;return null},l0=(e,n,o,r,a)=>{const u=new tr(e,r),f=Bv(e)||Vx(e);let h;if(We(n)){if(f&&(h=Sp(u.prev.bind(u),!0),o(h)))return h;for(;h=Sp(u.prev.bind(u),a);)if(o(h))return h}if(Jg(n)){if(f&&(h=Sp(u.next.bind(u),!0),o(h)))return h;for(;h=Sp(u.next.bind(u),a);)if(o(h))return h}return null},Ux=(e,n)=>{const o=a=>mm(a.dom),r=a=>a.dom===n;return xu(ee.fromDom(e),o,r).map(a=>a.dom).getOr(n)},u0=e=>gn(e)&&$r(ee.fromDom(e),"position")==="absolute",D3=(e,n)=>e.parentNode!==n,O3=(e,n)=>Bv(e)&&u0(e)&&D3(e,n),fm=(e,n)=>{for(;e&&e!==n;){if(zx(e)&&!O3(e,n))return e;e=e.parentNode}return null},Td=(e,n,o)=>fm(e.container(),o)===fm(n.container(),o),Sn=(e,n)=>{if(!n)return F.none();const o=n.container(),r=n.offset();return T3(o)?F.from(o.childNodes[r+e]):F.none()},d0=(e,n)=>{const r=(n.ownerDocument??document).createRange();return e?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),r},Wx=(e,n,o)=>fm(n,e)===fm(o,e),Zx=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let a=o;for(;a&&a!==n;){let u=a[r];if(u&&E3(u)&&(u=u[r]),Bv(u)||Hx(u)){if(Wx(n,u,a))return u;break}if(k3(u))break;a=a.parentNode}return null},lh=He(d0,!0),sf=He(d0,!1),m0=(e,n,o)=>{let r;const a=He(Zx,!0,n),u=He(Zx,!1,n),f=o.startContainer,h=o.startOffset;if(Xm(f)){const v=A3(f)?f.parentNode:f,w=v.getAttribute("data-mce-caret");if(w==="before"&&(r=v.nextSibling,i0(r)))return lh(r);if(w==="after"&&(r=v.previousSibling,i0(r)))return sf(r)}if(!o.collapsed)return o;if(pt(f)){if(E3(f)){if(e===1){if(r=u(f),r)return lh(r);if(r=a(f),r)return sf(r)}if(e===-1){if(r=a(f),r)return sf(r);if(r=u(f),r)return lh(r)}return o}if(Hf(f)&&h>=f.data.length-1)return e===1&&(r=u(f),r)?lh(r):o;if(cm(f)&&h<=1)return e===-1&&(r=a(f),r)?sf(r):o;if(h===f.data.length)return r=u(f),r?lh(r):o;if(h===0)return r=a(f),r?sf(r):o}return o},xp=(e,n)=>Sn(e?0:-1,n).filter(Bv),Ad=(e,n,o)=>{const r=m0(e,n,o);return e===-1?Le.fromRangeStart(r):Le.fromRangeEnd(r)},Ep=e=>F.from(e.getNode()).map(ee.fromDom),hC=e=>F.from(e.getNode(!0)).map(ee.fromDom),Mv=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},f0=(e,n)=>{const o=Td(e,n);return!o&&Ar(e.getNode())?!0:o},jx=hr,tl=pt,gm=gn,uh=Ar,$u=br,hm=tv,g0=nv,h0=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},pm=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,pC=(e,n)=>{if(Jg(e)){if($u(n.previousSibling)&&!tl(n.previousSibling))return Le.before(n);if(tl(n))return Le(n,0)}if(We(e)){if($u(n.nextSibling)&&!tl(n.nextSibling))return Le.after(n);if(tl(n))return Le(n,n.data.length)}return We(e)?uh(n)?Le.before(n):Le.after(n):Le.before(n)},Gx=(e,n)=>{const o=n.nextSibling;return o&&$u(o)?tl(o)?Le(o,0):Le.before(o):p0(1,Le.after(n),e)},p0=(e,n,o)=>{let r,a,u,f;if(!gm(o)||!n)return null;if(n.isEqual(Le.after(o))&&o.lastChild){if(f=Le.after(o.lastChild),We(e)&&$u(o.lastChild)&&gm(o.lastChild))return uh(o.lastChild)?Le.before(o.lastChild):f}else f=n;const h=f.container();let v=f.offset();if(tl(h)){if(We(e)&&v>0)return Le(h,--v);if(Jg(e)&&v<h.length)return Le(h,++v);r=h}else{if(We(e)&&v>0&&(a=pm(h,v-1),$u(a)))return!hm(a)&&(u=l0(a,e,g0,a),u)?tl(u)?Le(u,u.data.length):Le.after(u):tl(a)?Le(a,a.data.length):Le.before(a);if(Jg(e)&&v<h.childNodes.length&&(a=pm(h,v),$u(a)))return uh(a)?Gx(o,a):!hm(a)&&(u=l0(a,e,g0,a),u)?tl(u)?Le(u,0):Le.before(u):tl(a)?Le(a,0):Le.after(a);r=a||f.getNode()}if(r&&(Jg(e)&&f.isAtEnd()||We(e)&&f.isAtStart())&&(r=l0(r,e,Ve,o,!0),g0(r,o)))return pC(e,r);a=r&&l0(r,e,g0,o);const w=Nr(Ce(h0(h,o),jx));return w&&(!a||!w.contains(a))?(Jg(e)?f=Le.after(w):f=Le.before(w),f):a?pC(e,a):null},kd=e=>({next:n=>p0(1,n,e),prev:n=>p0(-1,n,e)}),qx=(e,n,o)=>{const r=e?Le.before(o):Le.after(o);return nl(e,n,r)},_3=e=>Ar(e)?Le.before(e):Le.after(e),R3=e=>Le.isTextPosition(e)?e.offset()===0:br(e.getNode()),Kx=e=>{if(Le.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return br(e.getNode(!0))},dh=(e,n)=>!Le.isTextPosition(e)&&!Le.isTextPosition(n)&&e.getNode()===n.getNode(!0),Yx=e=>!Le.isTextPosition(e)&&Ar(e.getNode()),Xx=(e,n,o)=>e?!dh(n,o)&&!Yx(n)&&Kx(n)&&R3(o):!dh(o,n)&&R3(n)&&Kx(o),nl=(e,n,o)=>{const r=kd(n);return F.from(e?r.next(o):r.prev(o))},Zf=(e,n,o)=>nl(e,n,o).bind(r=>Td(o,r,n)&&Xx(e,o,r)?nl(e,n,r):F.some(r)),Fv=(e,n,o,r)=>Zf(e,n,o).bind(a=>r(a)?Fv(e,n,a,r):F.some(a)),Tp=(e,n)=>{const o=e?n.firstChild:n.lastChild;return pt(o)?F.some(Le(o,e?0:o.data.length)):o?br(o)?F.some(e?Le.before(o):_3(o)):qx(e,n,o):F.none()},_i=He(nl,!0),ra=He(nl,!1),ca=He(Tp,!0),ol=He(Tp,!1),Nv="_mce_caret",Iu=e=>gn(e)&&e.id===Nv,jf=(e,n)=>{let o=n;for(;o&&o!==e;){if(Iu(o))return o;o=o.parentNode}return null},so=e=>re(e.start),bC=e=>Jt(e,"rng"),bm=e=>Jt(e,"id"),Jx=e=>Jt(e,"name"),Qx=e=>Ct.isArray(e.start),Pv=e=>!Jx(e)&&St(e.forward)?e.forward:!0,eE=(e,n)=>(gn(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),tE=(e,n)=>{const o=F.from(el(e.getRoot(),n.start)),r=F.from(el(e.getRoot(),n.end));return Qt(o,r,(a,u)=>{const f=e.createRng();return f.setStart(a.container(),a.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:Pv(n)}})},nE=(e,n)=>{const r=(e.ownerDocument??document).createTextNode(Sc);e.appendChild(r),n.setStart(r,0),n.setEnd(r,0)},$v=e=>!e.hasChildNodes(),Dd=(e,n)=>ol(e).fold(Ae,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),mh=(e,n,o)=>$v(n)&&jf(e,n)?(nE(n,o),!0):!1,oE=(e,n,o,r)=>{const a=o[n?"start":"end"],u=e.getRoot();if(a){let f=u,h=a[0];for(let v=a.length-1;f&&v>=1;v--){const w=f.childNodes;if(mh(u,f,r))return!0;if(a[v]>w.length-1)return mh(u,f,r)?!0:Dd(f,r);f=w[a[v]]}pt(f)&&(h=Math.min(a[0],f.data.length)),gn(f)&&(h=Math.min(a[0],f.childNodes.length)),n?r.setStart(f,h):r.setEnd(f,h)}return!0},Ap=e=>pt(e)&&e.data.length>0,sE=(e,n,o)=>{const r=e.get(o.id+"_"+n),a=r==null?void 0:r.parentNode,u=o.keep;if(r&&a){let f,h;if(n==="start"?u?r.hasChildNodes()?(f=r.firstChild,h=1):Ap(r.nextSibling)?(f=r.nextSibling,h=0):Ap(r.previousSibling)?(f=r.previousSibling,h=r.previousSibling.data.length):(f=a,h=e.nodeIndex(r)+1):(f=a,h=e.nodeIndex(r)):u?r.hasChildNodes()?(f=r.firstChild,h=1):Ap(r.previousSibling)?(f=r.previousSibling,h=r.previousSibling.data.length):(f=a,h=e.nodeIndex(r)):(f=a,h=e.nodeIndex(r)),!u){const v=r.previousSibling,w=r.nextSibling;Ct.each(Ct.grep(r.childNodes),R=>{pt(R)&&(R.data=R.data.replace(/\uFEFF/g,""))});let D;for(;D=e.get(o.id+"_"+n);)e.remove(D,!0);if(pt(w)&&pt(v)&&!wo.browser.isOpera()){const R=v.data.length;v.appendData(w.data),e.remove(w),f=v,h=R}}return F.some(Le(f,h))}else return F.none()},Iv=(e,n)=>{const o=e.createRng();return oE(e,!0,n,o)&&oE(e,!1,n,o)?F.some({range:o,forward:Pv(n)}):F.none()},aa=(e,n)=>{const o=sE(e,"start",n),r=sE(e,"end",n);return Qt(o,r.or(o),(a,u)=>{const f=e.createRng();return f.setStart(eE(e,a.container()),a.offset()),f.setEnd(eE(e,u.container()),u.offset()),{range:f,forward:Pv(n)}})},B3=(e,n)=>F.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),vC=(e,n)=>{const o=e.dom;if(n){if(Qx(n))return Iv(o,n);if(so(n))return tE(o,n);if(bm(n))return aa(o,n);if(Jx(n))return B3(o,n);if(bC(n))return F.some({range:n.rng,forward:Pv(n)})}return F.none()},M3=(e,n,o)=>mv(e,n,o),F3=(e,n)=>{vC(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},tu=e=>gn(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",Lv=(e=>n=>e===n)(mr),rf=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,yC=e=>!rf(e)&&!Lv(e)&&!Xc(e),kp=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},rE=e=>zn(e,n=>{const o=Vf(n);return o?[ee.fromDom(o)]:[]}),CC=e=>kp(e).length>1,wC=e=>Ce(rE(e),Ji),cE=e=>ge(e,"td[data-mce-selected],th[data-mce-selected]"),Hv=(e,n)=>{const o=cE(n);return o.length>0?o:wC(e)},fh=e=>Hv(kp(e.selection.getSel()),ee.fromDom(e.getBody())),Lu=(e,n)=>Xr(e,"table",n),aE=e=>{const n=e.startContainer,o=e.startOffset;return pt(n)?o===0?F.some(ee.fromDom(n)):F.none():F.from(n.childNodes[o]).map(ee.fromDom)},N3=e=>{const n=e.endContainer,o=e.endOffset;return pt(n)?o===n.data.length?F.some(ee.fromDom(n)):F.none():F.from(n.childNodes[o-1]).map(ee.fromDom)},SC=e=>Dc(e).fold(tt([e]),n=>[e].concat(SC(n))),zv=e=>Kr(e).fold(tt([e]),n=>xo(n)==="br"?Vi(n).map(o=>[e].concat(zv(o))).getOr([]):[e].concat(zv(n))),xC=(e,n)=>Qt(aE(n),N3(n),(o,r)=>{const a=Xt(SC(e),He(Io,o)),u=Xt(zv(e),He(Io,r));return a.isSome()&&u.isSome()}).getOr(!1),Dp=(e,n,o,r)=>{const a=o,u=new tr(o,a),f=Ot(e.schema.getMoveCaretBeforeOnEnterElements(),(v,w)=>!De(["td","th","table"],w.toLowerCase()));let h=o;do{if(pt(h)&&Ct.trim(h.data).length!==0){r?n.setStart(h,0):n.setEnd(h,h.data.length);return}if(f[h.nodeName]){r?n.setStartBefore(h):h.nodeName==="BR"?n.setEndBefore(h):n.setEndAfter(h);return}}while(h=r?u.next():u.prev());a.nodeName==="BODY"&&(r?n.setStart(a,0):n.setEnd(a,a.childNodes.length))},Vv=e=>{const n=e.selection.getSel();return xe(n)&&n.rangeCount>0},EC=(e,n)=>{const o=fh(e);o.length>0?te(o,r=>{const a=r.dom,u=e.dom.createRng();u.setStartBefore(a),u.setEndAfter(a),n(u,!0)}):n(e.selection.getRng(),!1)},iE=(e,n,o)=>{const r=vr(e,n);o(r),e.moveToBookmark(r)},b0=(e,n)=>e.startContainer===e.endContainer&&e.endOffset-e.startOffset===1&&n(e.startContainer.childNodes[e.startOffset]),P3=e=>b0(e,gr),$3=e=>b0(e,pt),lE=e=>b0(e,Tu),gh=e=>vs(e==null?void 0:e.nodeType),TC=e=>gn(e)&&!tu(e)&&!Iu(e)&&!Rg(e),I3=(e,n)=>{if(TC(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},uE=(e,n,o)=>{const{selection:r,dom:a}=e,u=r.getNode(),f=hr(u);iE(r,!0,()=>{n()}),f&&hr(u)&&a.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&L3(a,r)},L3=(e,n)=>{const o=n.getRng(),{startContainer:r,startOffset:a}=o,u=n.getNode();if(!I3(e,u)&&gn(r)){const f=r.childNodes,h=e.getRoot();let v;if(a<f.length){const w=f[a];v=new tr(w,e.getParent(w,e.isBlock)??h)}else{const w=f[f.length-1];v=new tr(w,e.getParent(w,e.isBlock)??h),v.next(!0)}for(let w=v.current();w;w=v.next()){if(e.getContentEditable(w)==="false")return;if(pt(w)&&!AC(w)){o.setStart(w,0),n.setRng(o);return}}}},dE=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=e[r];e;e=e[r])if(gn(e)||!AC(e))return e}},nr=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||ct(e,n),hh=(e,n,o)=>e.schema.isValidChild(n,o),AC=(e,n=!1)=>{if(xe(e)&&pt(e)){const o=n?e.data.replace(/ /g," "):e.data;return Vm(o)}else return!1},Hu=e=>xe(e)&&pt(e)&&e.length===0,l=(e,n)=>{const o="[data-mce-cef-wrappable]",r=c3(e),a=vi(r)?o:`${o},${r}`;return wi(ee.fromDom(n),a)},m=(e,n)=>{const o=e.dom;return TC(n)&&o.getContentEditable(n)==="false"&&l(e,n)&&o.select('[contenteditable="true"]',n).length===0},b=(e,n)=>le(e)?e(n):(xe(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),y=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),T=(e,n)=>{if(pn(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=Ug(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},_=(e,n,o)=>{const r=e.getStyle(n,o);return T(r,o)},P=(e,n)=>{let o;return e.getParent(n,r=>gn(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},z=(e,n,o)=>e.getParents(n,o,e.getRoot()),Y=(e,n,o)=>{const r=e.formatter.get(n);return xe(r)&&ve(r,o)},de=(e,n)=>Y(e,n,r=>{const a=u=>le(u)||u.length>1&&u.charAt(0)==="%";return ve(["styles","attributes"],u=>dn(r,u).exists(f=>{const h=je(f)?f:tn(f);return ve(h,a)}))}),ke=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],a=u=>Ot(u,(f,h)=>ve(r,v=>v===h));return Y(e,n,u=>{const f=a(u);return Y(e,o,h=>{const v=a(h);return zr(f,v)})})},ft=e=>lo(e,"block"),Gt=e=>ft(e)&&e.wrapper===!0,Zt=e=>ft(e)&&e.wrapper!==!0,ut=e=>lo(e,"selector"),bt=e=>lo(e,"inline"),mt=e=>ut(e)&&bt(e)&&ht(dn(e,"mixed"),!0),Bn=e=>ut(e)&&e.expand!==!1&&!bt(e),go=e=>{const n=[];let o=e;for(;o;){if(pt(o)&&o.data!==Sc||o.childNodes.length>1)return[];gn(o)&&n.push(o),o=o.firstChild}return n},rn=e=>go(e).length>0,ws=e=>Iu(e.dom)&&rn(e.dom),eo=tu,Ms=z,ec=AC,Al=nr,ph=e=>Ar(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,cf=(e,n)=>{let o=n;for(;o;){if(gn(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},Gf=(e,n,o,r)=>{const a=n.data;if(e){for(let u=o;u>0;u--)if(r(a.charAt(u-1)))return u}else for(let u=o;u<a.length;u++)if(r(a.charAt(u)))return u;return-1},js=(e,n,o)=>Gf(e,n,o,r=>Lv(r)||rf(r)),gi=(e,n,o)=>Gf(e,n,o,yC),Ya=(e,n,o,r,a,u)=>{let f;const h=e.getParent(o,R=>Ab(R)||e.isBlock(R)),v=xe(h)?h:n,w=(R,M,L)=>{const K=vd(e),W=a?K.backwards:K.forwards;return F.from(W(R,M,(J,pe)=>eo(J.parentNode)?-1:(f=J,L(a,J,pe)),v))};return w(o,r,js).bind(R=>u?w(R.container,R.offset+(a?-1:0),gi):F.some(R)).orThunk(()=>f?F.some({container:f,offset:a?0:f.length}):F.none())},sl=(e,n,o,r,a)=>{const u=r[a];pt(r)&&vi(r.data)&&u&&(r=u);const f=Ms(e,r);for(let h=0;h<f.length;h++)for(let v=0;v<n.length;v++){const w=n[v];if(!(xe(w.collapsed)&&w.collapsed!==o.collapsed)&&ut(w)&&e.is(f[h],w.selector))return f[h]}return r},Ri=(e,n,o,r)=>{let a=o;const u=e.getRoot(),f=n[0];if(ft(f)&&(a=f.wrapper?null:e.getParent(o,f.block,u)),!a){const h=e.getParent(o,"LI,TD,TH,SUMMARY")??u;a=e.getParent(pt(o)?o.parentNode:o,v=>v!==u&&Al(e.schema,v),h)}if(a&&ft(f)&&f.wrapper&&(a=Ms(e,a,"ul,ol").reverse()[0]||a),!a)for(a=o;a&&a[r]&&!e.isBlock(a[r])&&(a=a[r],!y(a,"br")););return a||o},qf=(e,n,o,r)=>{const a=o.parentNode;return xe(o[r])?!1:a===n||pn(a)||e.isBlock(a)?!0:qf(e,n,a,r)},Ma=(e,n,o,r,a,u)=>{let f=o;const h=a?"previousSibling":"nextSibling",v=e.getRoot();if(pt(o)&&!ec(o)&&(a?r>0:r<o.data.length))return o;for(;f;){if(Ab(f))return o;if(!n[0].block_expand&&e.isBlock(f))return u?f:o;for(let w=f[h];w;w=w[h]){const D=pt(w)&&!qf(e,v,w,h);if(!eo(w)&&!ph(w)&&!ec(w,D))return f}if(f===v||f.parentNode===v){o=f;break}f=f.parentNode}return o},Uv=e=>eo(e.parentNode)||eo(e),vm=(e,n,o,r={})=>{const{includeTrailingSpace:a=!1,expandToBlock:u=!0}=r,f=e.getParent(n.commonAncestorContainer,L=>Ab(L)),h=xe(f)?f:e.getRoot();let{startContainer:v,startOffset:w,endContainer:D,endOffset:R}=n;const M=o[0];return gn(v)&&v.hasChildNodes()&&(v=Jm(v,w),pt(v)&&(w=0)),gn(D)&&D.hasChildNodes()&&(D=Jm(D,n.collapsed?R:R-1),pt(D)&&(R=D.data.length)),v=cf(e,v),D=cf(e,D),Uv(v)&&(v=eo(v)?v:v.parentNode,n.collapsed?v=v.previousSibling||v:v=v.nextSibling||v,pt(v)&&(w=n.collapsed?v.length:0)),Uv(D)&&(D=eo(D)?D:D.parentNode,n.collapsed?D=D.nextSibling||D:D=D.previousSibling||D,pt(D)&&(R=n.collapsed?0:D.length)),n.collapsed&&(Ya(e,h,v,w,!0,a).each(({container:W,offset:J})=>{v=W,w=J}),Ya(e,h,D,R,!1,a).each(({container:W,offset:J})=>{D=W,R=J})),(bt(M)||M.block_expand)&&((!bt(M)||!pt(v)||w===0)&&(v=Ma(e,o,v,w,!0,u)),(!bt(M)||!pt(D)||R===D.data.length)&&(D=Ma(e,o,D,R,!1,u))),Bn(M)&&(v=sl(e,o,n,v,"previousSibling"),D=sl(e,o,n,D,"nextSibling")),(ft(M)||ut(M))&&(v=Ri(e,o,v,"previousSibling"),D=Ri(e,o,D,"nextSibling"),ft(M)&&(e.isBlock(v)||(v=Ma(e,o,v,w,!0,u),pt(v)&&(w=0)),e.isBlock(D)||(D=Ma(e,o,D,R,!1,u),pt(D)&&(R=D.data.length)))),gn(v)&&v.parentNode&&(w=e.nodeIndex(v),v=v.parentNode),gn(D)&&D.parentNode&&(R=e.nodeIndex(D)+1,D=D.parentNode),{startContainer:v,startOffset:w,endContainer:D,endOffset:R}},nu=(e,n,o)=>{const r=n.startOffset,a=Jm(n.startContainer,r),u=n.endOffset,f=Jm(n.endContainer,u-1),h=W=>{const J=W[0];pt(J)&&J===a&&r>=J.data.length&&W.splice(0,1);const pe=W[W.length-1];return u===0&&W.length>0&&pe===f&&pt(pe)&&W.splice(W.length-1,1),W},v=(W,J,pe)=>{const be=[];for(;W&&W!==pe;W=W[J])be.push(W);return be},w=(W,J)=>e.getParent(W,pe=>pe.parentNode===J,J),D=(W,J,pe)=>{const be=pe?"nextSibling":"previousSibling";for(let Se=W,Ze=Se.parentNode;Se&&Se!==J;Se=Ze){Ze=Se.parentNode;const it=v(Se===W?Se:Se[be],be);it.length&&(pe||it.reverse(),o(h(it)))}};if(a===f)return o(h([a]));const R=e.findCommonAncestor(a,f)??e.getRoot();if(e.isChildOf(a,f))return D(a,R,!0);if(e.isChildOf(f,a))return D(f,R);const M=w(a,R)||a,L=w(f,R)||f;D(a,M,!0);const K=v(M===a?M:M.nextSibling,"nextSibling",L===f?L.nextSibling:L);K.length&&o(h(K)),D(f,L)},Fa=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]","div.mce-footnotes"],H3=e=>ys(e)&&ga(e)===Sc,yn=(e,n,o,r)=>Si(n).fold(()=>"skipping",a=>r==="br"||H3(n)?"valid":R5(n)?"existing":Iu(n.dom)?"caret":ve(Fa,u=>wi(n,u))?"valid-block":!hh(e,o,r)||!hh(e,xo(a),o)?"invalid-child":"valid"),zu=(e,n)=>{const o=vm(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},mE=(e,n,o,r,a,u)=>{const{uid:f=n,...h}=o;ci(e,Fu()),Sr(e,`${bd()}`,f),Sr(e,`${pd()}`,r);const{attributes:v={},classes:w=[]}=a(f,h);if(zc(e,v),Ag(e,w),u){w.length>0&&Sr(e,`${nm()}`,w.join(","));const D=on(v);D.length>0&&Sr(e,`${Ym()}`,D.join(","))}},fE=e=>{Jr(e,Fu()),cc(e,`${bd()}`),cc(e,`${pd()}`),cc(e,`${$f()}`);const n=ji(e,`${Ym()}`).map(r=>r.split(",")).getOr([]),o=ji(e,`${nm()}`).map(r=>r.split(",")).getOr([]);te(n,r=>cc(e,r)),Kh(e,o),cc(e,`${nm()}`),cc(e,`${Ym()}`)},Wv=(e,n,o,r,a)=>{const u=ee.fromTag("span",e);return mE(u,n,o,r,a,!1),u},z3=(e,n,o,r,a,u)=>{const f=[],h=Wv(e.getDoc(),o,u,r,a),v=fs(),w=()=>{v.clear()},D=()=>v.get().getOrThunk(()=>{const K=ic(h);return f.push(K),v.set(K),K}),R=K=>{te(K,M)},M=K=>{switch(yn(e,K,"span",xo(K))){case"invalid-child":{w();const J=Er(K);R(J),w();break}case"valid-block":{w(),mE(K,o,u,r,a,!0);break}case"valid":{const J=D();xi(K,J);break}}},L=K=>{const W=ae(K,ee.fromDom);R(W)};return nu(e.dom,n,K=>{w(),L(K)}),f},v0=(e,n,o,r)=>{e.undoManager.transact(()=>{const a=e.selection,u=a.getRng(),f=fh(e).length>0,h=Jn("mce-annotation");if(u.collapsed&&!f&&zu(e,u),a.getRng().collapsed&&!f){const v=Wv(e.getDoc(),h,r,n,o.decorate);ld(v,mr),a.getRng().insertNode(v.dom),a.select(v.dom)}else iE(a,!1,()=>{EC(e,v=>{z3(e,v,h,n,o.decorate,r)})})})},V3=e=>{const n=If();Wb(e,n);const o=NS(e,n),r=sc("span"),a=u=>{te(u,f=>{r(f)?si(f):fE(f)})};return{register:(u,f)=>{n.register(u,f)},annotate:(u,f)=>{n.lookup(u).each(h=>{v0(e,u,h,f)})},annotationChanged:(u,f)=>{o.addListener(u,f)},remove:u=>{_2(e,F.some(u)).each(({elements:f})=>{const h=e.selection.getBookmark();a(f),e.selection.moveToBookmark(h)})},removeAll:u=>{const f=e.selection.getBookmark();yo(Ub(e,u),(h,v)=>{a(h)}),e.selection.moveToBookmark(f)},getAll:u=>{const f=Ub(e,u);return Nc(f,h=>ae(h,v=>v.dom))}}},y0=e=>({getBookmark:He(M3,e),moveToBookmark:He(F3,e)});y0.isBookmarkNode=tu;const gE=(e,n,o)=>o.collapsed?!1:ve(o.getClientRects(),r=>F2(r,e,n)),hE=(e,n)=>{const o=ys(n)?ga(n).length:Er(n).length+1;return e>o?o:e<0?0:e},U3=e=>Xd.range(e.start,hE(e.soffset,e.start),e.finish,hE(e.foffset,e.finish)),V5=(e,n)=>!u2(n.dom)&&(za(e,n)||Io(e,n)),U5=e=>n=>V5(e,n.start)&&V5(e,n.finish),LI=e=>e.inline||wo.browser.isFirefox(),HI=e=>Xd.range(ee.fromDom(e.startContainer),e.startOffset,ee.fromDom(e.endContainer),e.endOffset),W3=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?F.none():F.from(n.getRangeAt(0))).map(HI)},W5=e=>{const n=Wl(e);return W3(n.dom).filter(U5(e))},zI=(e,n)=>F.from(n).filter(U5(e)).map(U3),Z5=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),F.some(n)}catch{return F.none()}},pE=e=>{const n=LI(e)?W5(ee.fromDom(e.getBody())):F.none();e.bookmark=n.isSome()?n:e.bookmark},kC=e=>(e.bookmark?e.bookmark:F.none()).bind(o=>zI(ee.fromDom(e.getBody()),o)).bind(Z5),VI=e=>{kC(e).each(n=>e.selection.setRng(n))},j5={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},UI=(e,n)=>(vs(n)||(n=0),window.setTimeout(e,n)),WI=(e,n)=>(vs(n)||(n=0),window.setInterval(e,n)),Vu={setEditorTimeout:(e,n,o)=>UI(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=WI(()=>{e.removed?window.clearInterval(r):n()},o);return r}},Z3=e=>e.type==="nodechange"&&e.selectionChange,G5=(e,n)=>{const o=()=>{n.throttle()};Bs.DOM.bind(document,"mouseup",o),e.on("remove",()=>{Bs.DOM.unbind(document,"mouseup",o)})},q5=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},ZI=(e,n)=>{q5(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{Z3(o)||pE(e)})},jI=e=>{const n=Pt(()=>{pE(e)},0);e.on("init",()=>{e.inline&&G5(e,n),ZI(e,n)}),e.on("remove",()=>{n.cancel()})};let Zv;const jv=Bs.DOM,K5=e=>gn(e)&&j5.isEditorUIElement(e),bE=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},vE=(e,n)=>{const o=Wf(e);return jv.getParent(n,a=>K5(a)||(o?e.dom.is(a,o):!1))!==null},j3=e=>{try{const n=Oc(ee.fromDom(e.getElement()));return pl(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},lY=(e,n)=>{const o=n.editor;jI(o);const r=(a,u)=>{if(d3(a)&&a.inline!==!0){const f=ee.fromDom(a.getContainer());u(f,"tox-edit-focus")}};o.on("focusin",()=>{const a=e.focusedEditor;bE(j3(o))&&r(o,ci),a!==o&&(a&&a.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:a}),o.focus(!0))}),o.on("focusout",()=>{Vu.setEditorTimeout(o,()=>{const a=e.focusedEditor;(!bE(j3(o))||a!==o)&&r(o,Jr),!vE(o,j3(o))&&a===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),Zv||(Zv=a=>{const u=e.activeEditor;u&&d1(a).each(f=>{const h=f;h.ownerDocument===document&&h!==document.body&&!vE(u,h)&&e.focusedEditor===u&&(u.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},jv.bind(document,"focusin",Zv))},uY=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&Zv&&(jv.unbind(document,"focusin",Zv),Zv=null)},dY=e=>{e.on("AddEditor",He(lY,e)),e.on("RemoveEditor",He(uY,e))},GI=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),mY=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="false")!==null,qI=e=>e.collapsed?F.from(Jm(e.startContainer,e.startOffset)).map(ee.fromDom):F.none(),KI=(e,n)=>qI(n).bind(o=>fi(o)?F.some(o):za(e,o)?F.none():F.some(e)),YI=(e,n)=>{KI(ee.fromDom(e.getBody()),n).bind(o=>ca(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},yE=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},Mr=e=>vu(e)||m1(e).isSome(),G3=e=>xe(e.iframeElement)&&vu(ee.fromDom(e.iframeElement)),CE=e=>{const n=e.getBody();return n&&Mr(ee.fromDom(n))},wE=e=>{const n=Oc(ee.fromDom(e.getElement()));return pl(n).filter(o=>!bE(o.dom)&&vE(e,o.dom)).isSome()},Uu=e=>e.inline?CE(e):G3(e),Gv=e=>Uu(e)||wE(e),qv=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable();const a=f=>{kC(f).each(h=>{f.selection.setRng(h),r=h})};!Uu(e)&&e.hasEditableRoot()&&a(e);const u=GI(e,n.getNode());if(u&&e.dom.isChildOf(u,o)){mY(e,u)||yE(o),yE(u),e.hasEditableRoot()||a(e),YI(e,r),SE(e);return}e.inline||(wo.browser.isOpera()||yE(o),e.getWin().focus()),(wo.browser.isFirefox()||e.inline)&&(yE(o),YI(e,r)),SE(e)},SE=e=>e.editorManager.setActive(e),XI=(e,n)=>{e.removed||(n?SE(e):qv(e))},jt={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||jt.metaKeyPressed(e),metaKeyPressed:e=>wo.os.isMacOS()||wo.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},q3="uc-video",Y5=e=>e.nodeName.toLowerCase()===q3,bh="data-mce-selected",xE=`table,img,figure.image,hr,video,span.mce-preview-object,details,${q3}`,vh=Math.abs,Kf=Math.round,EE={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},JI=e=>e.type==="longpress"||e.type.indexOf("touch")===0,X5=(e,n)=>{const o=n.dom,r=n.getDoc(),a=document,u=n.getBody();let f,h,v,w,D,R,M,L,K,W,J,pe,be,Se,Ze;const it=Tn=>xe(Tn)&&(g2(Tn)||o.is(Tn,"figure.image")),$t=Tn=>Au(Tn)||o.hasClass(Tn,"mce-preview-object"),yt=(Tn,wt)=>{if(JI(Tn)){const Ut=Tn.touches[0];return it(Tn.target)&&!gE(Ut.clientX,Ut.clientY,wt)}else return it(Tn.target)&&!gE(Tn.clientX,Tn.clientY,wt)},Ge=Tn=>{const wt=Tn.target;yt(Tn,n.selection.getRng())&&!Tn.isDefaultPrevented()&&n.selection.select(wt)},ze=Tn=>o.hasClass(Tn,"mce-preview-object")&&xe(Tn.firstElementChild)?[Tn,Tn.firstElementChild]:o.is(Tn,"figure.image")?[Tn.querySelector("img")]:[Tn],lt=Tn=>{const wt=sC(n);return!wt||n.mode.isReadOnly()||Tn.getAttribute("data-mce-resize")==="false"||Tn===n.getBody()?!1:o.hasClass(Tn,"mce-preview-object")&&xe(Tn.firstElementChild)?wi(ee.fromDom(Tn.firstElementChild),wt):wi(ee.fromDom(Tn),wt)},sn=(Tn,wt)=>{if($t(wt))return Tn.create("img",{src:wo.transparentSrc});if(Jd(wt)){const Pn=Ln(w.name,"n")?Wo:Js,io=wt.cloneNode(!0);return Pn(Tn.select("tr",io)).each(rs=>{const Cr=Tn.select("td,th",rs);Tn.setStyle(rs,"height",null),te(Cr,hf=>Tn.setStyle(hf,"height",null))}),io}else return wt.cloneNode(!0)},Nn=(Tn,wt,Ut)=>{if(xe(Ut)){const Pn=ze(Tn);te(Pn,io=>{if(io.style[wt]||!n.schema.isValid(io.nodeName.toLowerCase(),wt))o.setStyle(io,wt,Ut);else if(Y5(io)){io[wt]=Ut;const rs=400;if(io.width>rs&&!(wt==="width"&&Ut<rs))io[wt]=Ut,o.setAttrib(io,wt,""+Ut);else{const Cr=wt==="height"?rs*W:rs;io[wt]=Cr,o.setAttrib(io,wt,""+Cr)}}else o.setAttrib(io,wt,""+Ut)})}},bo=(Tn,wt,Ut)=>{Nn(Tn,"width",wt),Nn(Tn,"height",Ut)},Zo=Tn=>{let wt,Ut,Pn,io,rs;wt=Tn.screenX-R,Ut=Tn.screenY-M,pe=wt*w[2]+L,be=Ut*w[3]+K,pe=pe<5?5:pe,be=be<5?5:be,(it(f)||$t(f)||Y5(f))&&hs(n)!==!1?Pn=!jt.modifierPressed(Tn):Pn=jt.modifierPressed(Tn),Pn&&(vh(wt)>vh(Ut)?(be=Kf(pe*W),pe=Kf(be/W)):(pe=Kf(be/W),be=Kf(pe*W))),bo(h,pe,be),io=w.startPos.x+wt,rs=w.startPos.y+Ut,io=io>0?io:0,rs=rs>0?rs:0,o.setStyles(v,{left:io,top:rs,display:"block"}),v.innerHTML=pe+" &times; "+be,wt=u.scrollWidth-Se,Ut=u.scrollHeight-Ze,wt+Ut!==0&&o.setStyles(v,{left:io-wt,top:rs-Ut}),J||(j4(n,f,L,K,"corner-"+w.name),J=!0)},rr=()=>{const Tn=J;J=!1,Tn&&(Nn(f,"width",pe),Nn(f,"height",be)),o.unbind(r,"mousemove",Zo),o.unbind(r,"mouseup",rr),a!==r&&(o.unbind(a,"mousemove",Zo),o.unbind(a,"mouseup",rr)),o.remove(h),o.remove(v),o.remove(D),yr(f),Tn&&(K2(n,f,pe,be,"corner-"+w.name),o.setAttrib(f,"style",o.getAttrib(f,"style"))),n.nodeChanged()},yr=Tn=>{Rn();const wt=o.getPos(Tn,u),Ut=wt.x,Pn=wt.y,io=Tn.getBoundingClientRect(),rs=io.width||io.right-io.left,Cr=io.height||io.bottom-io.top;f!==Tn&&(Kc(),f=Tn,pe=be=0);const hf=n.dispatch("ObjectSelected",{target:Tn});lt(Tn)&&!hf.isDefaultPrevented()?yo(EE,(Qa,pf)=>{const bf=Nl=>{const Fm=ze(f)[0];R=Nl.screenX,M=Nl.screenY,L=Fm.clientWidth,K=Fm.clientHeight,W=K/L,w=Qa,w.name=pf,w.startPos={x:rs*Qa[0]+Ut,y:Cr*Qa[1]+Pn},Se=u.scrollWidth,Ze=u.scrollHeight,D=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(D,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),h=sn(o,f),o.addClass(h,"mce-clonedresizable"),o.setAttrib(h,"data-mce-bogus","all"),h.contentEditable="false",o.setStyles(h,{left:Ut,top:Pn,margin:0}),bo(h,rs,Cr),h.removeAttribute(bh),u.appendChild(h),o.bind(r,"mousemove",Zo),o.bind(r,"mouseup",rr),a!==r&&(o.bind(a,"mousemove",Zo),o.bind(a,"mouseup",rr)),v=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},L+" &times; "+K)};let uu=o.get("mceResizeHandle"+pf);uu&&o.remove(uu),uu=o.add(u,"div",{id:"mceResizeHandle"+pf,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+pf+"-resize; margin:0; padding:0"}),o.bind(uu,"mousedown",Nl=>{Nl.stopImmediatePropagation(),Nl.preventDefault(),bf(Nl)}),Qa.elm=uu,o.setStyles(uu,{left:rs*Qa[0]+Ut-uu.offsetWidth/2,top:Cr*Qa[1]+Pn-uu.offsetHeight/2})}):Kc(!1)},Tc=Pt(yr,0),Kc=(Tn=!0)=>{Tc.cancel(),Rn(),f&&Tn&&f.removeAttribute(bh),yo(EE,(wt,Ut)=>{const Pn=o.get("mceResizeHandle"+Ut);Pn&&(o.unbind(Pn),o.remove(Pn))})},Ld=(Tn,wt)=>o.isChildOf(Tn,wt),Vt=Tn=>{if(J||n.removed||n.composing)return;const wt=Tn.type==="mousedown"?Tn.target:e.getNode(),Ut=ha(ee.fromDom(wt),xE).map(io=>io.dom).filter(io=>o.isEditable(io.parentElement)||io.nodeName==="IMG"&&o.isEditable(io)).getOrUndefined(),Pn=xe(Ut)?o.getAttrib(Ut,bh,"1"):"1";if(te(o.select(`img[${bh}],hr[${bh}]`),io=>{io.removeAttribute(bh)}),xe(Ut)&&Ld(Ut,u)&&Gv(n)){ks();const io=e.getStart(!0);if(Ld(io,Ut)&&Ld(e.getEnd(!0),Ut)){o.setAttrib(Ut,bh,Pn),Tc.throttle(Ut);return}}Kc()},Rn=()=>{yo(EE,Tn=>{Tn.elm&&(o.unbind(Tn.elm),delete Tn.elm)})},ks=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{ks(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Vt),n.on("keyup compositionend",Tn=>{f&&f.nodeName==="TABLE"&&Vt(Tn)}),n.on("hide blur",Kc),n.on("contextmenu longpress",Ge,!0)}),n.on("remove",Rn),{isResizable:lt,showResizeRect:yr,hideResizeRect:Kc,updateResizeRect:Vt,destroy:()=>{Tc.cancel(),f=h=D=null}}},J5=(e,n,o)=>{const r=Wl(ee.fromDom(o));return Of(r.dom,e,n).map(a=>{const u=o.createRange();return u.setStart(a.start.dom,a.soffset),u.setEnd(a.finish.dom,a.foffset),u}).getOrUndefined()},K3=(e,n)=>xe(e)&&xe(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,QI=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},Q5=(e,n,o)=>QI(e,n,o)!==null,eB=(e,n,o)=>Q5(e,n,r=>r.nodeName===o),eL=(e,n)=>ja(e)&&!Q5(e,n,Iu),tB=(e,n,o)=>{const r=n.parentNode;if(r){const a=new tr(n,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=a[o?"prev":"next"]();)if(Ar(u))return!0}return!1},tL=(e,n)=>{var o;return((o=e.previousSibling)==null?void 0:o.nodeName)===n},fY=(e,n)=>{let o=n;for(;o&&o!==e;){if(hr(o))return!0;o=o.parentNode}return!1},Y3=(e,n,o,r,a)=>{const u=e.getRoot(),f=e.schema.getNonEmptyElements(),h=a.parentNode;let v,w;if(!h)return F.none();const D=e.getParent(h,e.isBlock)||u;if(r&&Ar(a)&&n&&e.isEmpty(D))return F.some(Le(h,e.nodeIndex(a)));const R=new tr(a,D);for(;w=R[r?"prev":"next"]();){if(e.getContentEditableParent(w)==="false"||eL(w,u))return F.none();if(pt(w)&&w.data.length>0)return eB(w,u,"A")?F.none():F.some(Le(w,r?w.data.length:0));if(e.isBlock(w)||f[w.nodeName.toLowerCase()])return F.none();v=w}return Zr(v)?F.none():o&&v?F.some(Le(v,0)):F.none()},xa=(e,n,o,r)=>{const a=e.getRoot();let u,f=!1,h=o?r.startContainer:r.endContainer,v=o?r.startOffset:r.endOffset;const w=gn(h)&&v===h.childNodes.length,D=e.schema.getNonEmptyElements();let R=o;if(ja(h))return F.none();if(gn(h)&&v>h.childNodes.length-1&&(R=!1),_o(h)&&(h=a,v=0),h===a){if(R&&(u=h.childNodes[v>0?v-1:0],u&&(ja(u)||D[u.nodeName]||Jd(u))))return F.none();if(h.hasChildNodes()){if(v=Math.min(!R&&v>0?v-1:v,h.childNodes.length-1),h=h.childNodes[v],v=pt(h)&&w?h.data.length:0,!n&&h===a.lastChild&&Jd(h)||fY(a,h)||ja(h)||Db(h))return F.none();if(h.hasChildNodes()&&!Jd(h)){u=h;const M=new tr(h,a);do{if(hr(u)||ja(u)){f=!1;break}if(pt(u)&&u.data.length>0){v=R?0:u.data.length,h=u,f=!0;break}if(D[u.nodeName.toLowerCase()]&&!h2(u)){v=e.nodeIndex(u),h=u.parentNode,R||v++,f=!0;break}}while(u=R?M.next():M.prev())}}}return n&&(pt(h)&&v===0&&Y3(e,w,n,!0,h).each(M=>{h=M.container(),v=M.offset(),f=!0}),gn(h)&&(u=h.childNodes[v],u||(u=h.childNodes[v-1]),u&&Ar(u)&&!tL(u,"A")&&!tB(e,u,!1)&&!tB(e,u,!0)&&Y3(e,w,n,!0,u).each(M=>{h=M.container(),v=M.offset(),f=!0}))),R&&!n&&pt(h)&&v===h.data.length&&Y3(e,w,n,!1,h).each(M=>{h=M.container(),v=M.offset(),f=!0}),f&&h?F.some(Le(h,v)):F.none()},C0=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),a=Le.fromRangeStart(n);return xa(e,o,!0,r).each(u=>{(!o||!Le.isAbove(a,u))&&r.setStart(u.container(),u.offset())}),o||xa(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),K3(n,r)?F.none():F.some(r)},ia=(e,n)=>e.splitText(n),ou=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,a=e.endOffset;if(n===r&&pt(n)){if(o>0&&o<n.data.length)if(r=ia(n,o),n=r.previousSibling,a>o){a=a-o;const u=ia(r,a).previousSibling;n=r=u,a=u.data.length,o=0}else a=0}else if(pt(n)&&o>0&&o<n.data.length&&(n=ia(n,o),o=0),pt(r)&&a>0&&a<r.data.length){const u=ia(r,a).previousSibling;r=u,a=u.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:a}},Yf=e=>({walk:(u,f)=>nu(e,u,f),split:ou,expand:(u,f={type:"word"})=>{if(f.type==="word"){const h=vm(e,u,[{inline:"span"}],{includeTrailingSpace:!1,expandToBlock:!1}),v=e.createRng();return v.setStart(h.startContainer,h.startOffset),v.setEnd(h.endContainer,h.endOffset),v}return u},normalize:u=>C0(e,u).fold(Ae,f=>(u.setStart(f.startContainer,f.startOffset),u.setEnd(f.endContainer,f.endOffset),!0))});Yf.compareRanges=K3,Yf.getCaretRangeFromPoint=J5,Yf.getSelectedNode=Vf,Yf.getNode=Jm;const X3=(e,n)=>e.view(n).fold(tt([]),r=>{const a=e.owner(r),u=X3(e,a);return[r].concat(u)}),nL=(e,n)=>{const o=n.owner(e);return X3(n,o)};var oB=Object.freeze({__proto__:null,view:e=>{var o;return(e.dom===document?F.none():F.from((o=e.dom.defaultView)==null?void 0:o.frameElement)).map(ee.fromDom)},owner:e=>gl(e)});const oL=e=>{const n=Zh(),o=p1(n),r=nL(e,oB),a=Tg(e),u=bn(r,(f,h)=>{const v=Tg(h);return{left:f.left+v.left,top:f.top+v.top}},{left:0,top:0});return Gl(u.left+a.left+o.left,u.top+a.top+o.top)},J3=e=>xo(e)==="textarea",sL=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),Wu=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},rl=(e,n)=>{const o=Er(e);if(o.length===0||J3(e))return{element:e,offset:n};if(n<o.length&&!J3(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return J3(r)?{element:e,offset:n}:xo(r)==="img"?{element:r,offset:1}:ys(r)?{element:r,offset:ga(r).length}:{element:r,offset:Er(r).length}}},rL=(e,n)=>{const o=Eg(e),r=t2(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},af=(e,n)=>{const o=rl(e,n),r=ee.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Sc+"</span>");return ea(o.element,r),rL(r,()=>Ws(r))},Q3=e=>rL(ee.fromDom(e),rt),sB=(e,n,o,r)=>{iB(e,(a,u)=>cB(e,n,o,r),o)},rB=(e,n,o,r,a)=>{const u={elm:r.element.dom,alignToTop:a};if(sL(e,u))return;const f=p1(n).top;o(e,n,f,r,a),Wu(e,u)},cB=(e,n,o,r)=>{const a=ee.fromDom(e.getBody()),u=ee.fromDom(e.getDoc());g1(a);const f=af(ee.fromDom(o.startContainer),o.startOffset);rB(e,u,n,f,r),f.cleanup()},aB=(e,n,o,r)=>{const a=ee.fromDom(e.getDoc());rB(e,a,o,Q3(n),r)},iB=(e,n,o)=>{const r=o.startContainer,a=o.startOffset,u=o.endContainer,f=o.endOffset;n(ee.fromDom(r),ee.fromDom(u));const h=e.dom.createRng();h.setStart(r,a),h.setEnd(u,f),e.selection.setRng(o)},ek=(e,n,o,r,a)=>{const u=n.pos,f=30;if(r)yb(u.left,Math.max(0,u.top-f),a);else{const h=u.top-o+n.height+f;yb(-e.getBody().getBoundingClientRect().left,h,a)}},TE=(e,n,o,r,a,u)=>{const f=r+o,h=a.pos.top,v=a.bottom,w=v-h>=r;h<o?ek(e,a,r,u!==!1,n):h>f?ek(e,a,r,w?u!==!1:u===!0,n):v>f&&!w&&ek(e,a,r,u===!0,n)},lB=(e,n,o,r,a)=>{const u=Wl(n).dom.innerHeight;TE(e,n,o,u,r,a)},uB=(e,n,o,r,a)=>{const u=Wl(n).dom.innerHeight;TE(e,n,o,u,r,a);const f=oL(r.element),h=i2(window);f.top<h.y?vl(r.element,a!==!1):f.top>h.bottom&&vl(r.element,a===!0)},cL=(e,n,o)=>sB(e,lB,n,o),aL=(e,n,o)=>aB(e,n,lB,o),dB=(e,n,o)=>sB(e,uB,n,o),tk=(e,n,o)=>aB(e,n,uB,o),mB=(e,n,o)=>{(e.inline?aL:tk)(e,n,o)},w0=(e,n,o)=>{(e.inline?cL:dB)(e,n,o)},fB=(e,n)=>n.collapsed?e.isEditable(n.startContainer):e.isEditable(n.startContainer)&&e.isEditable(n.endContainer),iL=(e,n,o,r,a)=>{const u=o?n.startContainer:n.endContainer,f=o?n.startOffset:n.endOffset;return F.from(u).map(ee.fromDom).map(h=>!r||!n.collapsed?hl(h,a(h,f)).getOr(h):h).bind(h=>Rr(h)?F.some(h):Va(h).filter(Rr)).map(h=>h.dom).getOr(e)},lL=(e,n,o=!1)=>iL(e,n,!0,o,(r,a)=>Math.min(Ud(r),a)),gB=(e,n,o=!1)=>iL(e,n,!1,o,(r,a)=>a>0?a-1:a),nk=(e,n)=>{const o=e;for(;e&&pt(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},uL=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const a=n.startOffset,u=n.endOffset;let f=n.commonAncestorContainer;n.collapsed||(o===r&&u-a<2&&o.hasChildNodes()&&(f=o.childNodes[a]),pt(o)&&pt(r)&&(o.length===a?o=nk(o.nextSibling,!0):o=o.parentNode,u===0?r=nk(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(f=o)));const h=pt(f)?f.parentNode:f;return gr(h)?h:e},dL=(e,n,o,r)=>{const a=[],u=e.getRoot(),f=e.getParent(o||lL(u,n,n.collapsed),e.isBlock),h=e.getParent(r||gB(u,n,n.collapsed),e.isBlock);if(f&&f!==u&&a.push(f),f&&h&&f!==h){let v;const w=new tr(f,u);for(;(v=w.next())&&v!==h;)e.isBlock(v)&&a.push(v)}return h&&f!==h&&h!==u&&a.push(h),a},mL=(e,n,o)=>F.from(n).bind(r=>F.from(r.parentNode).map(a=>{const u=e.nodeIndex(r),f=e.createRng();return f.setStart(a,u),f.setEnd(a,u+1),o&&(Dp(e,f,r,!0),Dp(e,f,r,!1)),f})),hB=(e,n)=>ae(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),hY={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},DC=(e,n,o)=>{const r=o?"lastChild":"firstChild",a=o?"prev":"next";if(e[r])return e[r];if(e!==n){let u=e[a];if(u)return u;for(let f=e.parent;f&&f!==n;f=f.parent)if(u=f[a],u)return u}},pB=e=>{const n=e.value??"";if(!Vm(n))return!1;const o=e.parent;return!(o&&(o.name!=="span"||o.attr("style"))&&/^[ ]+$/.test(n))},bB=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class hi{constructor(n,o){Xe(this,"name");Xe(this,"type");Xe(this,"attributes");Xe(this,"value");Xe(this,"parent");Xe(this,"firstChild");Xe(this,"lastChild");Xe(this,"next");Xe(this,"prev");Xe(this,"raw");this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}static create(n,o){const r=new hi(n,hY[n]||1);return o&&yo(o,(a,u)=>{r.attr(u,a)}),r}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!re(n))return xe(n)&&yo(n,(u,f)=>{r.attr(f,u)}),r;const a=r.attributes;if(a){if(o!==void 0){if(o===null){if(n in a.map){delete a.map[n];let u=a.length;for(;u--;)if(a[u].name===n)return a.splice(u,1),r}return r}if(n in a.map){let u=a.length;for(;u--;)if(a[u].name===n){a[u].value=o;break}}else a.push({name:n,value:o});return a.map[n]=o,r}return a.map[n]}}clone(){const n=this,o=new hi(n.name,n.type),r=n.attributes;if(r){const a=[];a.map={};for(let u=0,f=r.length;u<f;u++){const h=r[u];h.name!=="id"&&(a[a.length]={name:h.name,value:h.value},a.map[h.name]=h.value)}o.attributes=a}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,a=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):a&&(a.next=r),o.lastChild===n?(o.lastChild=a,a&&(a.next=null)):r&&(r.prev=a),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const a=o.parent||this;return r?(o===a.firstChild?a.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===a.lastChild?a.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=a,n}getAll(n){const o=this,r=[];for(let a=o.firstChild;a;a=DC(a,o))a.name===n&&r.push(a);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let a=n.firstChild;a;a=DC(a,n))o.push(a);let r=o.length;for(;r--;){const a=o[r];a.parent=a.firstChild=a.lastChild=a.next=a.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){const a=this;let u=a.firstChild;if(bB(a))return!1;if(u)do{if(u.type===1){if(u.attr("data-mce-bogus"))continue;if(n[u.name]||bB(u))return!1}if(u.type===8||u.type===3&&!pB(u)||u.type===3&&u.parent&&o[u.parent.name]&&Vm(u.value??"")||r&&r(u))return!1}while(u=DC(u,a));return!0}walk(n){return DC(this,null,n)}}const fL=Ct.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),gL=e=>re(e.nodeValue)&&e.nodeValue.includes(Sc),hL=e=>`${e.length===0?"":`${ae(e,n=>`[${n}]`).join(",")},`}[data-mce-bogus="all"]`,pY=(e,n)=>n.querySelectorAll(hL(e)),vB=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,n=>gL(n)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),pL=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,n=>{if(gL(n)){const o=n.parentNode;return o&&Jt(fL,o.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),bL=e=>vB(e).nextNode()!==null,S0=e=>pL(e).nextNode()!==null,vL=(e,n)=>n.querySelector(hL(e))!==null,yB=(e,n)=>{te(pY(e,n),o=>{const r=ee.fromDom(o);lr(r,"data-mce-bogus")==="all"?Ws(r):te(e,a=>{fr(r,a)&&cc(r,a)})})},ok=e=>{let n=e.nextNode();for(;n!==null;)n.nodeValue=null,n=e.nextNode()},CB=k(ok,vB),wB=k(ok,pL),AE=(e,n)=>{const o=[{condition:He(vL,n),action:He(yB,n)},{condition:bL,action:CB},{condition:S0,action:wB}];let r=e,a=!1;return te(o,({condition:u,action:f})=>{u(r)&&(a||(r=e.cloneNode(!0),a=!0),f(r))}),r},yL=e=>{const n=ge(e,"[data-mce-bogus]");te(n,o=>{lr(o,"data-mce-bogus")==="all"?Ws(o):om(o)?(ea(o,ee.fromText(Yc)),Ws(o)):si(o)})},SB=e=>{const n=ge(e,"input");te(n,o=>{cc(o,"name")})},bY=(e,n)=>{const o=Sa(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},CL=(e,n)=>{const o=e.getDoc(),r=Oc(ee.fromDom(e.getBody())),a=ee.fromTag("div",o);Sr(a,"data-mce-bogus","all"),ri(a,{position:"fixed",left:"-9999999px",top:"0"}),ld(a,n.innerHTML),yL(a),SB(a);const u=pb(r);is(u,a);const f=ki(a.dom.innerText);return Ws(a),f},wL=(e,n,o)=>{let r;return n.format==="raw"?r=Ct.trim(ki(AE(o,e.serializer.getTempAttrs()).innerHTML)):n.format==="text"?r=CL(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=bY(e,e.serializer.serialize(o,n)),n.format!=="text"&&!Qi(ee.fromDom(o))&&re(r)?Ct.trim(r):r},sk=(e,n)=>F.from(e.getBody()).fold(tt(n.format==="tree"?new hi("body",11):""),o=>wL(e,n,o)),rk=Ct.makeMap,SL=e=>{const n=[];e=e||{};const o=e.indent,r=rk(e.indent_before||""),a=rk(e.indent_after||""),u=Pg.getEncodeFunc(e.entity_encoding||"raw",e.entities),f=e.element_format!=="xhtml";return{start:(h,v,w)=>{if(o&&r[h]&&n.length>0){const D=n[n.length-1];D.length>0&&D!==`
`&&n.push(`
`)}if(n.push("<",h),v)for(let D=0,R=v.length;D<R;D++){const M=v[D];n.push(" ",M.name,'="',u(M.value,!0),'"')}if(!w||f?n[n.length]=">":n[n.length]=" />",w&&o&&a[h]&&n.length>0){const D=n[n.length-1];D.length>0&&D!==`
`&&n.push(`
`)}},end:h=>{let v;n.push("</",h,">"),o&&a[h]&&n.length>0&&(v=n[n.length-1],v.length>0&&v!==`
`&&n.push(`
`))},text:(h,v)=>{h.length>0&&(n[n.length]=v?h:u(h))},cdata:h=>{n.push("<![CDATA[",h,"]]>")},comment:h=>{n.push("<!--",h,"-->")},pi:(h,v)=>{v?n.push("<?",h," ",u(v),"?>"):n.push("<?",h,"?>"),o&&n.push(`
`)},doctype:h=>{n.push("<!DOCTYPE",h,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},x0=(e={},n=Ru())=>{const o=SL(e);return e.validate="validate"in e?e.validate:!0,{serialize:a=>{const u=e.validate,f={3:v=>{o.text(v.value??"",v.raw)},8:v=>{o.comment(v.value??"")},7:v=>{o.pi(v.name,v.value)},10:v=>{o.doctype(v.value??"")},4:v=>{o.cdata(v.value??"")},11:v=>{let w=v;if(w=w.firstChild)do h(w);while(w=w.next)}};o.reset();const h=v=>{var D;const w=f[v.type];if(w)w(v);else{const R=v.name,M=R in n.getVoidElements();let L=v.attributes;if(u&&L&&L.length>1){const K=[];K.map={};const W=n.getElementRule(v.name);if(W){for(let J=0,pe=W.attributesOrder.length;J<pe;J++){const be=W.attributesOrder[J];if(be in L.map){const Se=L.map[be];K.map[be]=Se,K.push({name:be,value:Se})}}for(let J=0,pe=L.length;J<pe;J++){const be=L[J].name;if(!(be in K.map)){const Se=L.map[be];K.map[be]=Se,K.push({name:be,value:Se})}}L=K}}if(o.start(R,L,M),li(R))re(v.value)&&o.text(v.value,!0),o.end(R);else if(!M){let K=v.firstChild;if(K){(R==="pre"||R==="textarea")&&K.type===3&&((D=K.value)==null?void 0:D[0])===`
`&&o.text(`
`,!0);do h(K);while(K=K.next)}o.end(R)}}};return a.type===1&&!e.inner?h(a):a.type===3?f[3](a):f[11](a),o.getContent()}}},xL=new Set;te(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{xL.add(n)});const xB=new Set;te(["background-color"],n=>{xB.add(n)});const EL=["font","text-decoration","text-emphasis"],TL=(e,n)=>e.parseStyle(e.getAttrib(n,"style")),E0=(e,n)=>on(TL(e,n)),AL=e=>xL.has(e),EB=e=>xB.has(e),kL=(e,n)=>ve(E0(e,n),o=>AL(o)),DL=(e,n)=>kL(e,n)&&ve(E0(e,n),o=>EB(o)),TB=e=>Ce(e,n=>ve(EL,o=>Ln(n,o))),OL=(e,n,o)=>{const r=E0(e,n),a=E0(e,o),u=f=>{const h=e.getStyle(n,f)??"",v=e.getStyle(o,f)??"";return Qs(h)&&Qs(v)&&h!==v};return ve(r,f=>{const h=v=>ve(v,w=>w===f);if(!h(a)&&h(EL)){const v=TB(a);return ve(v,u)}else return u(f)})},AB=(e,n,o)=>F.from(o.container()).filter(pt).exists(r=>{const a=e?0:-1;return n(r.data.charAt(o.offset()+a))}),ck=He(AB,!0,rf),ak=He(AB,!1,rf),_L=e=>{const n=e.container();return pt(n)&&(n.data.length===0||Yb(n.data)&&y0.isBookmarkNode(n.parentNode))},Op=(e,n)=>o=>Sn(e?0:-1,o).filter(n).isSome(),kB=e=>g2(e)&&$r(ee.fromDom(e),"display")==="block",DB=e=>hr(e)&&!aS(e),RL=Op(!0,kB),BL=Op(!1,kB),OC=Op(!0,Au),_C=Op(!1,Au),OB=Op(!0,Jd),ik=Op(!1,Jd),Lt=Op(!0,DB),cl=Op(!1,DB),vY=e=>e.slice(0,-1),ML=(e,n,o)=>za(n,e)?vY(ma(e,r=>o(r)||Io(r,n))):[],kE=(e,n)=>ML(e,n,Ae),Xf=(e,n)=>[e].concat(kE(e,n)),DE=(e,n,o)=>Fv(e,n,o,_L),lk=e=>n=>e.isBlock(xo(n)),_B=(e,n,o)=>Xt(Xf(ee.fromDom(n.container()),e),lk(o)),uk=(e,n,o,r)=>DE(e,n.dom,o).forall(a=>_B(n,o,r).fold(()=>!Td(a,o,n.dom),u=>!Td(a,o,n.dom)&&za(u,ee.fromDom(a.container())))),RB=(e,n,o,r)=>_B(n,o,r).fold(()=>DE(e,n.dom,o).forall(a=>!Td(a,o,n.dom)),a=>DE(e,a.dom,o).isNone()),dk=He(RB,!1),BB=He(RB,!0),FL=He(uk,!1),NL=He(uk,!0),OE=e=>Ep(e).exists(om),_E=(e,n,o,r)=>{const a=Ce(Xf(ee.fromDom(o.container()),n),f=>r.isBlock(xo(f))),u=Wo(a).getOr(n);return nl(e,u.dom,o).filter(OE)},mk=(e,n,o)=>Ep(n).exists(om)||_E(!0,e,n,o).isSome(),RE=(e,n,o)=>hC(n).exists(om)||_E(!1,e,n,o).isSome(),MB=He(_E,!1),PL=He(_E,!0),fk=e=>Le.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),RC=(e,n,o)=>{const r=Ce(Xf(ee.fromDom(n.container()),e),a=>o.isBlock(xo(a)));return Wo(r).getOr(e)},FB=(e,n,o)=>fk(n)?ak(n):ak(n)||ra(RC(e,n,o).dom,n).exists(ak),NB=(e,n,o)=>fk(n)?ck(n):ck(n)||_i(RC(e,n,o).dom,n).exists(ck),$L=e=>De(["pre","pre-wrap"],e),gk=e=>Ep(e).bind(n=>Ps(n,Rr)).exists(n=>$L($r(n,"white-space"))),IL=(e,n)=>ra(e.dom,n).isNone(),LL=(e,n)=>_i(e.dom,n).isNone(),HL=(e,n,o)=>IL(e,n)||LL(e,n)||dk(e,n,o)||BB(e,n,o)||RE(e,n,o)||mk(e,n,o),zL=e=>xe(e)&&hr(e)&&zx(e),PB=(e,n)=>o=>zL(new tr(o,e)[n]()),VL=(e,n)=>{const o=_i(e.dom,n).getOr(n),r=PB(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},UL=(e,n)=>{const o=ra(e.dom,n).getOr(n),r=PB(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},$B=(e,n,o)=>gk(n)?!1:HL(e,n,o)||FB(e,n,o)||NB(e,n,o),BC=(e,n,o)=>gk(n)?!1:dk(e,n,o)||FL(e,n,o)||RE(e,n,o)||FB(e,n,o)||UL(e,n),WL=e=>{const n=e.container(),o=e.offset();return pt(n)&&o<n.data.length?Le(n,o+1):e},Kv=(e,n,o)=>gk(n)?!1:BB(e,n,o)||NL(e,n,o)||mk(e,n,o)||NB(e,n,o)||VL(e,n),hk=(e,n,o)=>BC(e,n,o)||Kv(e,WL(n),o),IB=(e,n)=>Lv(e.charAt(n)),MC=(e,n)=>rf(e.charAt(n)),T0=e=>{const n=e.container();return pt(n)&&zs(n.data,mr)},BE=e=>{const n=e.split("");return ae(n,(o,r)=>Lv(o)&&r>0&&r<n.length-1&&yC(n[r-1])&&yC(n[r+1])?" ":o).join("")},LB=(e,n,o,r)=>{const a=n.data,u=Le(n,0);return!o&&IB(a,0)&&!hk(e,u,r)?(n.data=" "+a.slice(1),!0):o&&MC(a,0)&&BC(e,u,r)?(n.data=mr+a.slice(1),!0):!1},ZL=e=>{const n=e.data,o=BE(n);return o!==n?(e.data=o,!0):!1},HB=(e,n,o,r)=>{const a=n.data,u=Le(n,a.length-1);return!o&&IB(a,a.length-1)&&!hk(e,u,r)?(n.data=a.slice(0,-1)+" ",!0):o&&MC(a,a.length-1)&&Kv(e,u,r)?(n.data=a.slice(0,-1)+mr,!0):!1},jL=(e,n,o)=>{const r=n.container();if(!pt(r))return F.none();if(T0(n)){const a=LB(e,r,!1,o)||ZL(r)||HB(e,r,!1,o);return To(a,n)}else if(hk(e,n,o)){const a=LB(e,r,!0,o)||HB(e,r,!0,o);return To(a,n)}else return F.none()},zB=e=>{const n=ee.fromDom(e.getBody());e.selection.isCollapsed()&&jL(n,Le.fromRangeStart(e.selection.getRng()),e.schema).each(o=>{e.selection.setRng(o.toRange())})},VB=(e,n,o,r)=>{if(o===0)return;const a=ee.fromDom(e),u=xu(a,w=>r.isBlock(xo(w))).getOr(a),f=e.data.slice(n,n+o),h=n+o>=e.data.length&&Kv(u,Le(e,e.data.length),r),v=n===0&&BC(u,Le(e,0),r);e.replaceData(n,o,l2(f,4,v,h))},ME=(e,n,o)=>{const r=e.data.slice(n),a=r.length-ed(r).length;VB(e,n,a,o)},FE=(e,n,o)=>{const r=e.data.slice(0,n),a=r.length-mu(r).length;VB(e,n-a,a,o)},pk=(e,n,o,r,a=!0)=>{const u=mu(e.data).length,f=a?e:n,h=a?n:e;return a?f.appendData(h.data):f.insertData(0,h.data),Ws(ee.fromDom(h)),r&&ME(f,u,o),f},UB=(e,n)=>{const o=e.container(),r=e.offset();return!Le.isTextPosition(e)&&o===n.parentNode&&r>Le.before(n).offset()},GL=(e,n)=>UB(n,e)?Le(n.container(),n.offset()-1):n,qL=e=>pt(e)?Le(e,0):Le.before(e),KL=e=>pt(e)?Le(e,e.data.length):Le.after(e),bk=e=>br(e.previousSibling)?F.some(KL(e.previousSibling)):e.previousSibling?ol(e.previousSibling):F.none(),NE=e=>br(e.nextSibling)?F.some(qL(e.nextSibling)):e.nextSibling?ca(e.nextSibling):F.none(),WB=(e,n)=>F.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>ra(e,Le.before(o))).orThunk(()=>_i(e,Le.after(n))),YL=(e,n)=>_i(e,Le.after(n)).orThunk(()=>ra(e,Le.before(n))),XL=(e,n)=>bk(n).orThunk(()=>NE(n)).orThunk(()=>WB(e,n)),PE=(e,n)=>NE(n).orThunk(()=>bk(n)).orThunk(()=>YL(e,n)),JL=(e,n,o)=>e?PE(n,o):XL(n,o),ZB=(e,n,o)=>JL(e,n,o).map(He(GL,o)),$E=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},jB=e=>n=>n.dom===e,QL=(e,n)=>n&&Jt(e.schema.getBlockElements(),xo(n)),e9=(e,n,o)=>{if(ii(e,n)){const r=ee.fromHtml('<br data-mce-bogus="1">');return o?te(Er(n),a=>{ws(a)||Ws(a)}):bl(n),is(n,r),F.some(Le.before(r.dom))}else return F.none()},IE=(e,n,o,r)=>{const a=Vi(e).filter(ys),u=Ua(e).filter(ys);return Ws(e),Cn(a,u,n,(f,h,v)=>{const w=f.dom,D=h.dom,R=w.data.length;return pk(w,D,o,r),v.container()===D?Le(w,R):v}).orThunk(()=>(r&&(a.each(f=>FE(f.dom,f.dom.length,o)),u.each(f=>ME(f.dom,0,o))),n))},GB=(e,n)=>Jt(e.schema.getTextInlineElements(),xo(n)),yh=(e,n,o,r=!0,a=!1)=>{const u=ZB(n,e.getBody(),o.dom),f=xu(o,He(QL,e),jB(e.getBody())),h=IE(o,u,e.schema,GB(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):f.bind(v=>e9(e.schema,v,a)).fold(()=>{r&&$E(e,n,h)},v=>{r&&$E(e,n,F.some(v))})},qB=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,KB=e=>qB.test(e),_p=(e,n)=>wi(ee.fromDom(n),oC(e))&&!ct(e.schema,n)&&e.dom.isEditable(n),vk=e=>Bs.DOM.getStyle(e,"direction",!0)==="rtl"||KB(e.textContent??""),YB=(e,n,o)=>Ce(Bs.DOM.getParents(o.container(),"*",n),e),Ch=(e,n,o)=>{const r=YB(e,n,o);return F.from(r[r.length-1])},XB=(e,n,o)=>{const r=fm(n,e),a=fm(o,e);return xe(r)&&r===a},JB=e=>Jb(e)||N1(e),Od=(e,n)=>{const o=n.container(),r=n.offset();return e?Cs(o)?pt(o.nextSibling)?Le(o.nextSibling,0):Le.after(o):Jb(n)?Le(o,r+1):n:Cs(o)?pt(o.previousSibling)?Le(o.previousSibling,o.previousSibling.data.length):Le.before(o):N1(n)?Le(o,r-1):n},QB=He(Od,!0),eM=He(Od,!1),tM=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},t9=e=>{e.execCommand("delete")},LE=e=>tM(e,"Delete"),nM=e=>tM(e,"ForwardDelete"),n9=e=>n=>ht(Va(n),e,Io),o9=e=>dp(e)||sm(e),HE=(e,n)=>za(e,n)?Ps(n,o9,n9(e)):F.none(),zE=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},s9=(e,n,o)=>Qt(ca(o),ol(o),(r,a)=>{const u=Od(!0,r),f=Od(!1,a),h=Od(!1,n);return e?_i(o,h).exists(v=>v.isEqual(f)&&n.isEqual(u)):ra(o,h).exists(v=>v.isEqual(u)&&n.isEqual(f))}).getOr(!0),r9=e=>(Vl(e)?Vi(e):Kr(e)).bind(r9).orThunk(()=>F.some(e)),oM=(e,n,o,r=!0)=>{n.deleteContents();const a=r9(o).getOr(o),u=ee.fromDom(e.dom.getParent(a.dom,e.dom.isBlock)??o.dom);if(u.dom===e.getBody()?zE(e,r):ii(e.schema,u,{checkRootAsContent:!1})&&(rm(u),r&&e.selection.setCursorLocation(u.dom,0)),!Io(o,u)){const f=ht(Va(u),o)?[]:Es(u);te(f.concat(Er(o)),h=>{!Io(h,u)&&!za(h,u)&&ii(e.schema,h)&&Ws(h)})}},yY=e=>n=>Io(e,n),yk=e=>ge(e,"td,th"),Xa=(e,n)=>Lu(ee.fromDom(e),n),c9=e=>Qt(e.startTable,e.endTable,(n,o)=>{const r=un(n,u=>Io(u,o)),a=un(o,u=>Io(u,n));return!r&&!a?e:{...e,startTable:r?F.none():e.startTable,endTable:a?F.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),CY=e=>c9(e),a9=(e,n)=>{const o=Xa(e.startContainer,n),r=Xa(e.endContainer,n),a=o.isSome(),u=r.isSome(),f=Qt(o,r,Io).getOr(!1);return CY({startTable:o,endTable:r,isStartInTable:a,isEndInTable:u,isSameTable:f,isMultiTable:!f&&a&&u})},Ck=(e,n)=>({start:e,end:n}),su=(e,n,o)=>({rng:e,table:n,cells:o}),VE=dc.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),UE=(e,n)=>ha(ee.fromDom(e),"td,th",n),i9=e=>!Io(e.start,e.end),sM=(e,n)=>Lu(e.start,n).bind(o=>Lu(e.end,n).bind(r=>To(Io(o,r),o))),l9=(e,n)=>!i9(e)&&sM(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),wY=(e,n)=>{const o=UE(e.startContainer,n),r=UE(e.endContainer,n);return Qt(o,r,Ck)},u9=e=>n=>Lu(n,e).bind(o=>Js(yk(o)).map(r=>Ck(n,r))),ru=e=>n=>Lu(n,e).bind(o=>Wo(yk(o)).map(r=>Ck(r,n))),WE=e=>n=>sM(n,e).map(o=>su(n,o,yk(o))),wk=(e,n,o,r)=>{if(o.collapsed||!e.forall(i9))return F.none();if(n.isSameTable){const a=e.bind(WE(r));return F.some({start:a,end:a})}else{const a=UE(o.startContainer,r),u=UE(o.endContainer,r),f=a.bind(u9(r)).bind(WE(r)),h=u.bind(ru(r)).bind(WE(r));return F.some({start:f,end:h})}},rM=(e,n)=>oo(e,o=>Io(o,n)),Sk=e=>Qt(rM(e.cells,e.rng.start),rM(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),cM=(e,n,o)=>e.exists(r=>l9(r,o)&&xC(r.start,n)),xk=(e,n)=>{const{startTable:o,endTable:r}=n,a=e.cloneRange();return o.each(u=>a.setStartAfter(u.dom)),r.each(u=>a.setEndBefore(u.dom)),a},d9=(e,n,o,r)=>wk(e,n,o,r).bind(({start:a,end:u})=>a.or(u)).bind(a=>{const{isSameTable:u}=n,f=Sk(a).getOr([]);if(u&&a.cells.length===f.length)return F.some(VE.fullTable(a.table));if(f.length>0){if(u)return F.some(VE.partialTable(f,F.none()));{const h=xk(o,n);return F.some(VE.partialTable(f,F.some({...n,rng:h})))}}else return F.none()}),m9=(e,n,o,r)=>wk(e,n,o,r).bind(({start:a,end:u})=>{const f=a.bind(Sk).getOr([]),h=u.bind(Sk).getOr([]);if(f.length>0&&h.length>0){const v=xk(o,n);return F.some(VE.multiTable(f,h,v))}else return F.none()}),f9=(e,n)=>{const o=yY(e),r=wY(n,o),a=a9(n,o);return cM(r,n,o)?r.map(u=>VE.singleCellTable(n,u.start)):a.isMultiTable?m9(r,a,n,o):d9(r,a,n,o)},aM=e=>te(e,n=>{cc(n,"contenteditable"),rm(n)}),iM=(e,n)=>F.from(e.dom.getParent(n,e.dom.isBlock)).map(ee.fromDom),g9=(e,n,o)=>{o.each(r=>{n?Ws(r):(rm(r),e.selection.setCursorLocation(r.dom,0))})},ZE=(e,n,o,r)=>{const a=o.cloneRange();r?(a.setStart(o.startContainer,o.startOffset),a.setEndAfter(n.dom.lastChild)):(a.setStartBefore(n.dom.firstChild),a.setEnd(o.endContainer,o.endOffset)),Ek(e,a,n,!1).each(u=>u())},lM=e=>{const n=fh(e),o=ee.fromDom(e.selection.getNode());Qd(o.dom)&&ii(e.schema,o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&ve(n,r=>Io(r,o))&&Sr(o,"data-mce-selected","1")},h9=(e,n,o)=>F.some(()=>{const r=e.selection.getRng(),a=o.bind(({rng:u,isStartInTable:f})=>{const h=iM(e,f?u.endContainer:u.startContainer);u.deleteContents(),g9(e,f,h.filter(He(ii,e.schema)));const v=f?n[0]:n[n.length-1];return ZE(e,v,r,f),ii(e.schema,v)?F.none():F.some(f?n.slice(1):n.slice(0,-1))}).getOr(n);aM(a),lM(e)}),p9=(e,n,o,r)=>F.some(()=>{const a=e.selection.getRng(),u=n[0],f=o[o.length-1];ZE(e,u,a,!0),ZE(e,f,a,!1);const h=ii(e.schema,u)?n:n.slice(1),v=ii(e.schema,f)?o:o.slice(0,-1);aM(h.concat(v)),r.deleteContents(),lM(e)}),Ek=(e,n,o,r=!0)=>F.some(()=>{oM(e,n,o,r)}),SY=(e,n)=>F.some(()=>yh(e,!1,n)),b9=(e,n,o)=>f9(n,o).bind(r=>r.fold(He(Ek,e),He(SY,e),He(h9,e),He(p9,e))),us=(e,n)=>Xv(e,n),FC=(e,n,o,r)=>Yv(n,r).fold(()=>b9(e,n,o),a=>us(e,a)),wh=(e,n,o)=>{const r=ee.fromDom(e.getBody()),a=e.selection.getRng();return o.length!==0?h9(e,o,F.none()):FC(e,r,a,n)},Rp=(e,n)=>Xt(Xf(n,e),Ji),Yv=(e,n)=>Xt(Xf(n,e),sc("caption")),Tk=(e,n,o,r,a)=>Zf(o,e.getBody(),a).bind(u=>Rp(n,ee.fromDom(u.getNode())).bind(f=>Io(f,r)?F.none():F.some(rt))),Xv=(e,n)=>F.some(()=>{rm(n),e.selection.setCursorLocation(n.dom,0)}),uM=(e,n,o,r)=>ca(e.dom).bind(a=>ol(e.dom).map(u=>n?o.isEqual(a)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(a))).getOr(!0),v9=(e,n)=>Xv(e,n),dM=(e,n,o)=>Yv(e,ee.fromDom(o.getNode())).fold(()=>F.some(rt),r=>To(!Io(r,n),rt)),mM=(e,n,o,r,a)=>Zf(o,e.getBody(),a).fold(()=>F.some(rt),u=>uM(r,o,a,u)?v9(e,r):dM(n,r,u)),y9=(e,n,o,r)=>{const a=Le.fromRangeStart(e.selection.getRng());return Rp(o,r).bind(u=>ii(e.schema,u,{checkRootAsContent:!1})?Xv(e,u):Tk(e,o,n,u,a))},C9=(e,n,o,r)=>{const a=Le.fromRangeStart(e.selection.getRng());return ii(e.schema,r)?Xv(e,r):mM(e,o,n,r,a)},fM=(e,n)=>e?OB(n):ik(n),w9=(e,n)=>{const o=Le.fromRangeStart(e.selection.getRng());return fM(n,o)||nl(n,e.getBody(),o).exists(r=>fM(n,r))},S9=(e,n,o)=>{const r=ee.fromDom(e.getBody());return Yv(r,o).fold(()=>y9(e,n,r,o).orThunk(()=>To(w9(e,n),rt)),a=>C9(e,n,r,a))},Ak=(e,n)=>{const o=ee.fromDom(e.selection.getStart(!0)),r=fh(e);return e.selection.isCollapsed()&&r.length===0?S9(e,n,o):wh(e,o,r)},Bp=(e,n)=>{let o=n;for(;o&&o!==e;){if(ai(o)||hr(o))return o;o=o.parentNode}return null},gM=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],xY=Ct.each,hM=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,f)=>{if(u.nodeName!==f.nodeName||u.nodeType!==f.nodeType)return!1;const h=w=>{const D={};return xY(n.getAttribs(w),R=>{const M=R.nodeName.toLowerCase();M!=="style"&&!a(M)&&(D[M]=n.getAttrib(w,M))}),D},v=(w,D)=>{for(const R in w)if(Jt(w,R)){const M=D[R];if(ro(M)||w[R]!==M)return!1;delete D[R]}for(const R in D)if(Jt(D,R))return!1;return!0};return gn(u)&&gn(f)&&(!v(h(u),h(f))||!v(n.parseStyle(n.getAttrib(u,"style")),n.parseStyle(n.getAttrib(f,"style"))))?!1:!tu(u)&&!tu(f)},a=u=>ve(gM,f=>Ln(u,f))||o.has(u);return{compare:r,isAttributeInternal:a}},x9=(e,n)=>{if(pt(e))return{container:e,offset:n};const o=Yf.getNode(e,n);return pt(o)?{container:o,offset:n>=e.childNodes.length?o.data.length:0}:o.previousSibling&&pt(o.previousSibling)?{container:o.previousSibling,offset:o.previousSibling.data.length}:o.nextSibling&&pt(o.nextSibling)?{container:o.nextSibling,offset:0}:{container:e,offset:n}},E9=e=>{const n=e.cloneRange(),o=x9(e.startContainer,e.startOffset);n.setStart(o.container,o.offset);const r=x9(e.endContainer,e.endOffset);return n.setEnd(r.container,r.offset),n},jE=Bs.DOM,EY=()=>jE.create("span",{"data-mce-type":"bookmark"}),pM=(e,n,o)=>{if(gn(e)){const r=o();return e.hasChildNodes()?n===e.childNodes.length?e.appendChild(r):e.insertBefore(r,e.childNodes[n]):e.appendChild(r),{container:r,offset:0}}else return{container:e,offset:n}},bM=(e,n)=>{const o=r=>{var f;let a=(f=r.parentNode)==null?void 0:f.firstChild,u=0;for(;a;){if(a===r)return u;(!gn(a)||a.getAttribute("data-mce-type")!=="bookmark")&&u++,a=a.nextSibling}return-1};if(gn(e)&&xe(e.parentNode)){const r=e;n=o(e),e=e.parentNode,jE.remove(r),!e.hasChildNodes()&&jE.isBlock(e)&&e.appendChild(jE.create("br"))}return{container:e,offset:n}},T9=(e,n,o,r)=>{const a=jE.createRng();return a.setStart(e,n),a.setEnd(o,r),E9(a)},Sh=(e,n=EY)=>{const{container:o,offset:r}=pM(e.startContainer,e.startOffset,n);if(e.collapsed)return{startContainer:o,startOffset:r};{const{container:a,offset:u}=pM(e.endContainer,e.endOffset,n);return{startContainer:o,startOffset:r,endContainer:a,endOffset:u}}},Zc=e=>{const{container:n,offset:o}=bM(e.startContainer,e.startOffset);if(!ro(e.endContainer)&&!ro(e.endOffset)){const{container:r,offset:a}=bM(e.endContainer,e.endOffset);return T9(n,o,r,a)}else return T9(n,o,n,o)},A9=(e,n,o,r)=>{if(Ct.each(o.styles,(a,u)=>{e.setStyle(n,u,b(a,r))}),o.styles){const a=e.getAttrib(n,"style");a&&e.setAttrib(n,"data-mce-style",a)}},Jv=(e,n,o,r,a)=>{const u=e.dom;le(o.onformat)&&o.onformat(n,o,r,a),A9(u,n,o,r),Ct.each(o.attributes,(f,h)=>{u.setAttrib(n,h,b(f,r))}),Ct.each(o.classes,f=>{const h=b(f,r);u.hasClass(n,h)||u.addClass(n,h)})},vM=e=>!je(e.attributes)&&!je(e.styles),yM=y,CM=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let a=0;a<r.length;a++){const u=r[a];if(ut(u)&&u.inherit===!1&&e.dom.is(n,u.selector))return!0}return!1},kk=(e,n,o,r,a)=>{const u=e.dom.getRoot();if(n===u)return!1;const f=e.dom.getParent(n,h=>CM(e,h,o)?!0:h.parentNode===u||!!ym(e,h,o,r,!0));return!!ym(e,f,o,r,a)},GE=(e,n,o)=>bt(o)&&yM(n,o.inline)||ft(o)&&yM(n,o.block)?!0:ut(o)?gn(n)&&e.is(n,o.selector):!1,qE=(e,n,o,r,a,u)=>{const f=o[r],h=r==="attributes";if(le(o.onmatch))return o.onmatch(n,o,r);if(f){if(nd(f)){for(let v=0;v<f.length;v++)if(h?e.getAttrib(n,f[v]):_(e,n,f[v]))return!0}else for(const v in f)if(Jt(f,v)){const w=h?e.getAttrib(n,v):_(e,n,v),D=b(f[v],u),R=pn(w)||vi(w);if(R&&pn(D))continue;if(a&&R&&!o.exact||(!a||o.exact)&&!yM(w,T(D,v)))return!1}}return!0},ym=(e,n,o,r,a)=>{const u=e.formatter.get(o),f=e.dom;if(u&&gn(n))for(let h=0;h<u.length;h++){const v=u[h];if(GE(e.dom,n,v)&&qE(f,n,v,"attributes",a,r)&&qE(f,n,v,"styles",a,r)){const w=v.classes;if(w){for(let D=0;D<w.length;D++)if(!e.dom.hasClass(n,b(w[D],r)))return}return v}}},Dk=(e,n,o,r,a)=>{if(r)return kk(e,r,n,o,a);if(r=e.selection.getNode(),kk(e,r,n,o,a))return!0;const u=e.selection.getStart();return!!(u!==r&&kk(e,u,n,o,a))},k9=(e,n,o)=>{const r=[],a={},u=e.selection.getStart();return e.dom.getParent(u,f=>{for(let h=0;h<n.length;h++){const v=n[h];!a[v]&&ym(e,f,v,o)&&(a[v]=!0,r.push(v))}},e.dom.getRoot()),r},or=(e,n)=>{const o=a=>Io(a,ee.fromDom(e.getBody())),r=(a,u)=>ym(e,a.dom,u)?F.some(u):F.none();return F.from(e.selection.getStart(!0)).bind(a=>Wr(ee.fromDom(a),u=>Os(n,f=>r(u,f)),o)).getOrNull()},D9=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o&&e.selection.isEditable()){const a=e.selection.getStart(),u=z(r,a);for(let f=o.length-1;f>=0;f--){const h=o[f];if(!ut(h))return!0;for(let v=u.length-1;v>=0;v--)if(r.is(u[v],h.selector))return!0}}return!1},O9=(e,n,o)=>$e(o,(r,a)=>{const u=de(e,a);return e.formatter.matchNode(n,a,{},u)?r.concat([a]):r},[]),xh=Sc,wM=(e,n)=>e.importNode(n,!0),SM=e=>{if(e){const n=new tr(e,e);for(let o=n.current();o;o=n.next())if(pt(o))return o}return null},Ok=e=>{const n=ee.fromTag("span");return zc(n,{id:Nv,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&is(n,ee.fromText(xh)),n},_9=e=>{const n=SM(e);return n&&n.data.charAt(0)===xh&&n.deleteData(0,1),n},KE=(e,n,o)=>{const r=e.dom,a=e.selection;if(rn(n))yh(e,!1,ee.fromDom(n),o,!0);else{const u=a.getRng(),f=r.getParent(n,r.isBlock),h=u.startContainer,v=u.startOffset,w=u.endContainer,D=u.endOffset,R=_9(n);r.remove(n,!0),h===R&&v>0&&u.setStart(R,v-1),w===R&&D>0&&u.setEnd(R,D-1),f&&r.isEmpty(f)&&rm(ee.fromDom(f)),a.setRng(u)}},_k=(e,n,o)=>{const r=e.dom,a=e.selection;if(n)KE(e,n,o);else if(n=jf(e.getBody(),a.getStart()),!n)for(;n=r.get(Nv);)KE(e,n,o)},TY=(e,n,o)=>{var u,f;const r=e.dom,a=r.getParent(o,He(nr,e.schema));a&&r.isEmpty(a)?(u=o.parentNode)==null||u.replaceChild(n,o):(R2(ee.fromDom(o)),r.isEmpty(o)?(f=o.parentNode)==null||f.replaceChild(n,o):r.insertAfter(n,o))},R9=(e,n)=>(e.appendChild(n),n),xM=(e,n)=>{const o=bn(e,(a,u)=>R9(a,u.cloneNode(!1)),n),r=o.ownerDocument??document;return R9(o,r.createTextNode(xh))},B9=(e,n,o,r,a,u)=>{const f=e.formatter,h=e.dom,v=Ce(on(f.get()),R=>R!==r&&!zs(R,"removeformat")),w=O9(e,o,v);if(Ce(w,R=>!ke(e,R,r)).length>0){const R=o.cloneNode(!1);return h.add(n,R),f.remove(r,a,R,u),h.remove(R),F.some(R)}else return F.none()},EM=e=>b1(e,ga(e).replace(new RegExp(`${mr}$`)," ")),TM=(e,n)=>{const o=()=>{n!==null&&!e.dom.isEmpty(n)&&Vi(ee.fromDom(n)).each(r=>{ys(r)?EM(r):Df(r,a=>ys(a)).each(a=>{ys(a)&&EM(a)})})};e.once("input",r=>{r.data&&!rf(r.data)&&(r.isComposing?e.once("compositionend",()=>{o()}):o())})},AM=(e,n,o)=>{let r;const a=e.selection,u=e.formatter.get(n);if(!u)return;const f=a.getRng();let h=f.startOffset;const w=f.startContainer.nodeValue;r=jf(e.getBody(),a.getStart());const D=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(w&&h>0&&h<w.length&&D.test(w.charAt(h))&&D.test(w.charAt(h-1))){const R=a.getBookmark();f.collapse(!0);let M=vm(e.dom,f,u);M=ou(M),e.formatter.apply(n,o,M),a.moveToBookmark(R)}else{let R=r?SM(r):null;(!r||(R==null?void 0:R.data)!==xh)&&(r=wM(e.getDoc(),Ok(!0).dom),R=r.firstChild,f.insertNode(r),h=1,TM(e,r)),e.formatter.apply(n,o,r),a.setCursorLocation(R,h)}},M9=(e,n,o,r)=>{const a=e.dom,u=e.selection;let f=!1;const h=e.formatter.get(n);if(!h)return;const v=u.getRng(),w=v.startContainer,D=v.startOffset;let R=w;pt(w)&&(D!==w.data.length&&(f=!0),R=R.parentNode);const M=[];let L;for(;R;){if(ym(e,R,n,o,r)){L=R;break}R.nextSibling&&(f=!0),M.push(R),R=R.parentNode}if(L)if(f){const K=u.getBookmark();v.collapse(!0);let W=vm(a,v,h,{includeTrailingSpace:!0});W=ou(W),e.formatter.remove(n,o,W,r),u.moveToBookmark(K)}else{const K=jf(e.getBody(),L),W=xe(K)?a.getParents(L.parentNode,Ve,K):[],J=Ok(!1).dom;TY(e,J,K??L);const pe=B9(e,J,L,n,o,r),be=xM([...M,...pe.toArray(),...W],J);K&&KE(e,K,xe(K)),u.setCursorLocation(be,1),TM(e,J),a.isEmpty(L)&&a.remove(L)}},zo=(e,n,o)=>{const r=e.selection,a=e.getBody();_k(e,null,o),(n===8||n===46)&&r.isCollapsed()&&r.getStart().innerHTML===xh&&_k(e,jf(a,r.getStart()),!0),(n===37||n===39)&&_k(e,jf(a,r.getStart()),!0)},kM=e=>pt(e)&&vc(e.data,mr),NC=e=>{e.on("mouseup keydown",n=>{zo(e,n.keyCode,kM(e.selection.getRng().endContainer))})},Qv=e=>{const n=Ok(!1),o=xM(e,n.dom);return{caretContainer:n,caretPosition:Le(o,0)}},ey=(e,n)=>{const{caretContainer:o,caretPosition:r}=Qv(n);return ea(ee.fromDom(e),o),Ws(ee.fromDom(e)),r},PC=(e,n)=>{const{caretContainer:o,caretPosition:r}=Qv(n);return e.insertNode(o.dom),r},Rk=(e,n)=>{if(Iu(n.dom))return!1;const o=e.schema.getTextInlineElements();return Jt(o,xo(n))&&!Iu(n.dom)&&!Rg(n.dom)},F9=["fontWeight","fontStyle","color","fontSize","fontFamily"],AY=e=>En(e.styles)&&ve(on(e.styles),n=>De(F9,n)),kY=e=>Xt(e,n=>bt(n)&&n.inline==="span"&&AY(n)),N9=(e,n)=>{const o=e.get(n);return je(o)?kY(o):F.none()},DM=(e,n)=>ra(n,Le.fromRangeStart(e)).isNone(),P9=(e,n)=>_i(n,Le.fromRangeEnd(e)).exists(o=>!Ar(o.getNode())||_i(n,o).isSome())===!1,OM=e=>n=>p2(n)&&e.isEditable(n),$9=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return DM(o,n[0])&&P9(o,n[0])?n:[];{const r=Wo(n).filter(f=>DM(o,f)).toArray(),a=Js(n).filter(f=>P9(o,f)).toArray(),u=n.slice(1,-1);return r.concat(u).concat(a)}},DY=e=>Ce($9(e),OM(e.dom)),_M=e=>Ce(e.getSelectedBlocks(),OM(e.dom)),sr=Ct.each,RM=e=>gn(e)&&!tu(e)&&!Iu(e)&&!Rg(e),I9=(e,n)=>{for(let o=e;o;o=o[n]){if(pt(o)&&Qs(o.data))return e;if(gn(o)&&!tu(o))return o}return e},BM=(e,n,o)=>{const r=hM(e),a=gr(n)&&e.dom.isEditable(n),u=gr(o)&&e.dom.isEditable(o);if(a&&u){const f=I9(n,"previousSibling"),h=I9(o,"nextSibling");if(r.compare(f,h)){for(let v=f.nextSibling;v&&v!==h;){const w=v;v=v.nextSibling,f.appendChild(w)}return e.dom.remove(h),Ct.each(Ct.grep(h.childNodes),v=>{f.appendChild(v)}),f}}return o},ty=(e,n,o,r)=>{if(r&&n.merge_siblings!==!1){const a=BM(e,dE(r),r)??r;BM(e,a,dE(a,!0))}},L9=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";sr(e.select(r,o),a=>{RM(a)&&e.isEditable(a)&&sr(n.styles,(u,f)=>{e.setStyle(a,f,"")})})}},Bk=(e,n,o)=>{sr(e.childNodes,r=>{RM(r)&&(n(r)&&o(r),r.hasChildNodes()&&Bk(r,n,o))})},Eh=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},Ss=(e,n)=>o=>!!(o&&_(e,o,n)),jc=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),Eh(e,r)},kl=dc.generate([{keep:[]},{rename:["name"]},{removed:[]}]),H9=/^(src|href|style)$/,Mk=Ct.each,YE=y,z9=e=>/^(TR|TH|TD)$/.test(e.nodeName),Fk=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),ny=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],a=n[o?"startOffset":"endOffset"];if(gn(r)){const u=r.childNodes.length-1;!o&&a&&a--,r=r.childNodes[a>u?u:a]}return pt(r)&&o&&a>=r.data.length&&(r=new tr(r,e.getBody()).next()||r),pt(r)&&!o&&a===0&&(r=new tr(r,e.getBody()).prev()||r),r},Nk=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return z9(e)&&r?e.nodeName==="TR"&&r[o]||r:e},XE=(e,n,o,r)=>{var u;const a=e.create(o,r);return(u=n.parentNode)==null||u.insertBefore(a,n),a.appendChild(n),a},MM=(e,n,o,r,a)=>{const u=ee.fromDom(n),f=ee.fromDom(e.create(r,a)),h=o?kc(u):Ic(u);return Zi(f,h),o?(ea(u,f),yu(f,u)):(Wi(u,f),is(f,u)),f.dom},V9=(e,n)=>n.links&&e.nodeName==="A",FM=(e,n,o)=>{const r=n.parentNode;let a;const u=e.dom,f=Sa(e);ft(o)&&r===u.getRoot()&&(!o.list_block||!YE(n,o.list_block))&&te(Xo(n.childNodes),h=>{hh(e,f,h.nodeName.toLowerCase())?a?a.appendChild(h):(a=XE(u,h,f),u.setAttribs(a,yp(e))):a=null}),!(mt(o)&&!YE(o.inline,n))&&u.remove(n,!0)},Pk=(e,n,o)=>vs(e)?{name:n,value:null}:{name:e,value:b(n,o)},NM=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},PM=(e,n,o,r,a)=>{let u=!1;Mk(o.styles,(f,h)=>{const{name:v,value:w}=Pk(h,f,r),D=T(w,v);(o.remove_similar||G(w)||!gn(a)||YE(_(e,a,v),D))&&e.setStyle(n,v,""),u=!0}),u&&NM(e,n)},U9=(e,n,o)=>{n==="removeformat"?te(_M(e.selection),r=>{te(F9,a=>e.dom.setStyle(r,a,"")),NM(e.dom,r)}):N9(e.formatter,n).each(r=>{te(_M(e.selection),a=>PM(e.dom,a,r,o,null))})},$k=(e,n,o,r,a)=>{const u=e.dom,f=hM(e),h=e.schema;if(bt(n)&&_a(h,n.inline)&&ct(h,r)&&r.parentElement===e.getBody())return FM(e,r,n),kl.removed();if(!n.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!GE(u,r,n)&&!V9(r,n))return kl.keep();const v=r,w=n.preserve_attributes;if(bt(n)&&n.remove==="all"&&je(w)){const D=Ce(u.getAttribs(v),R=>De(w,R.name.toLowerCase()));if(u.removeAllAttribs(v),te(D,R=>u.setAttrib(v,R.name,R.value)),D.length>0)return kl.rename("span")}if(n.remove!=="all"){PM(u,v,n,o,a),Mk(n.attributes,(R,M)=>{const{name:L,value:K}=Pk(M,R,o);if(n.remove_similar||G(K)||!gn(a)||YE(u.getAttrib(a,L),K)){if(L==="class"){const W=u.getAttrib(v,L);if(W){let J="";if(te(W.split(/\s+/),pe=>{/mce\-\w+/.test(pe)&&(J+=(J?" ":"")+pe)}),J){u.setAttrib(v,L,J);return}}}if(H9.test(L)&&v.removeAttribute("data-mce-"+L),L==="style"&&na(["li"])(v)&&u.getStyle(v,"list-style-type")==="none"){v.removeAttribute(L),u.setStyle(v,"list-style-type","none");return}L==="class"&&v.removeAttribute("className"),v.removeAttribute(L)}}),Mk(n.classes,R=>{R=b(R,o),(!gn(a)||u.hasClass(a,R))&&u.removeClass(v,R)});const D=u.getAttribs(v);for(let R=0;R<D.length;R++){const M=D[R].nodeName;if(!f.isAttributeInternal(M))return kl.keep()}}return n.remove!=="none"?(FM(e,v,n),kl.removed()):kl.keep()},Ik=(e,n,o,r,a)=>{let u;return n.parentNode&&te(z(e.dom,n.parentNode).reverse(),f=>{if(!u&&gn(f)&&f.id!=="_start"&&f.id!=="_end"){const h=ym(e,f,o,r,a);h&&h.split!==!1&&(u=f)}}),u},$M=(e,n,o,r)=>$k(e,n,o,r,r).fold(tt(r),a=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,a)),tt(null)),Lk=(e,n,o,r,a,u,f,h)=>{var R;let v,w;const D=e.dom;if(o){const M=o.parentNode;for(let L=r.parentNode;L&&L!==M;L=L.parentNode){let K=D.clone(L,!1);for(let W=0;W<n.length&&(K=$M(e,n[W],h,K),K!==null);W++);K&&(v&&K.appendChild(v),w||(w=K),v=K)}(!f.mixed||!D.isBlock(o))&&(r=D.split(o,r)??r),v&&w&&((R=a.parentNode)==null||R.insertBefore(v,a),w.appendChild(a),bt(f)&&ty(e,f,h,v))}return r},OY=(e,n,o,r,a)=>{const u=e.formatter.get(n),f=u[0],h=e.dom,v=e.selection,w=W=>{const J=Ik(e,W,n,o,a);return Lk(e,u,J,W,W,!0,f,o)},D=W=>tu(W)&&gn(W)&&(W.id==="_start"||W.id==="_end"),R=W=>ve(u,J=>JE(e,J,o,W,W)),M=W=>{const J=Xo(W.childNodes),be=R(W)||ve(u,it=>GE(h,W,it)),Se=W.parentNode;if(!be&&xe(Se)&&Bn(f)&&R(Se),f.deep&&J.length)for(let it=0;it<J.length;it++)M(J[it]);te(["underline","line-through","overline"],it=>{gn(W)&&e.dom.getStyle(W,"text-decoration")===it&&W.parentNode&&P(h,W.parentNode)===it&&JE(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:it}},void 0,W)})},L=W=>{const J=h.get(W?"_start":"_end");if(J){let pe=J[W?"firstChild":"lastChild"];return D(pe)&&(pe=pe[W?"firstChild":"lastChild"]),pt(pe)&&pe.data.length===0&&(pe=W?J.previousSibling||J.nextSibling:J.nextSibling||J.previousSibling),h.remove(J,!0),pe}else return null},K=W=>{let J,pe,be=vm(h,W,u,{includeTrailingSpace:W.collapsed});if(f.split){if(be=ou(be),J=ny(e,be,!0),pe=ny(e,be),J!==pe){if(J=Nk(J,!0),pe=Nk(pe,!1),Fk(h,J,pe)){const Ze=F.from(J.firstChild).getOr(J);w(MM(h,Ze,!0,"span",{id:"_start","data-mce-type":"bookmark"})),L(!0);return}if(Fk(h,pe,J)){const Ze=F.from(pe.lastChild).getOr(pe);w(MM(h,Ze,!1,"span",{id:"_end","data-mce-type":"bookmark"})),L(!1);return}J=XE(h,J,"span",{id:"_start","data-mce-type":"bookmark"}),pe=XE(h,pe,"span",{id:"_end","data-mce-type":"bookmark"});const Se=h.createRng();Se.setStartAfter(J),Se.setEndBefore(pe),nu(h,Se,Ze=>{te(Ze,it=>{!tu(it)&&!tu(it.parentNode)&&w(it)})}),w(J),w(pe),J=L(!0),pe=L()}else J=pe=w(J);be.startContainer=J.parentNode?J.parentNode:J,be.startOffset=h.nodeIndex(J),be.endContainer=pe.parentNode?pe.parentNode:pe,be.endOffset=h.nodeIndex(pe)+1}nu(h,be,Se=>{te(Se,M)})};if(r){if(gh(r)){const W=h.createRng();W.setStartBefore(r),W.setEndAfter(r),K(W)}else K(r);ox(e,n,r,o);return}!v.isCollapsed()||!bt(f)||fh(e).length?(uE(e,()=>EC(e,K),W=>bt(f)&&Dk(e,n,o,W)),e.nodeChanged()):M9(e,n,o,a),U9(e,n,o),ox(e,n,r,o)},Na=(e,n,o,r,a)=>{(r||e.selection.isEditable())&&OY(e,n,o,r,a)},W9=(e,n,o,r)=>$k(e,n,o,r).fold(()=>F.some(r),a=>F.some(e.dom.rename(r,a)),F.none),JE=(e,n,o,r,a)=>$k(e,n,o,r,a).fold(Ae,u=>(e.dom.rename(r,u),!0),Ve),IM=["fontsize","subscript","superscript"],Z9=["strikethrough",...IM],j9=(e,n,o)=>xe(e.matchNode(n.dom,o,{},o==="fontsize")),Hk=(e,n)=>ve(IM,o=>j9(e,n,o)),LM=e=>De(Z9,e),$C=(e,n,o,r,a)=>{const u=ma(n,e).filter(Rr);return vo(u,o).map(f=>{const h=u[f],v=r(h),w=[...a(ic(h)).toArray(),...zn(u.slice(0,f),D=>o(D)?a(D).toArray():[ic(D)])];return{container:h,innerWrapper:v,outerWrappers:w}})},G9=(e,n,o,r)=>{te(Er(e),a=>{Rr(a)&&o(a)&&r(a).isNone()&&si(a)}),te(Er(e),a=>is(n,a)),yu(e,n)},HM=(e,n)=>{if(n.length>0){const o=n[n.length-1];ea(e,o);const r=$e(n.slice(0,n.length-1),(a,u)=>(is(a,u),u),o);is(r,e)}},q9=(e,n,o,r,a)=>{const u=f=>Io(ee.fromDom(e.getRoot()),f)||e.isBlock(f.dom);te(n,f=>{$C(u,f,o,r,a).each(({container:h,innerWrapper:v,outerWrappers:w})=>{e.split(h.dom,f.dom),G9(f,v,o,a),HM(f,w)})})},Mp=(e,n,o)=>{const r=h=>xe(ym(e,h.dom,n)),a=h=>{const v=ee.fromTag(xo(h)),w=ym(e,h.dom,n,{});return xe(w)&&vM(w)&&Jv(e,v.dom,w),v},u=h=>{const v=ym(e,h.dom,n,{});return xe(v)?W9(e,v,{},h.dom).map(ee.fromDom):F.some(h)},f=Sh(e.selection.getRng());q9(e.dom,o,r,a,u),e.selection.setRng(Zc(f))},zM=(e,n)=>zn(n,o=>{const r=$(o,a=>Hk(e,a));return Hk(e,o)?[o,...r]:r}),VM=(e,n,o)=>{if(LM(n)){const r=zM(e.formatter,o);Mp(e,"strikethrough",r)}},UM=(e,n)=>{const o=Ce(n,r=>Hk(e.formatter,r));Mp(e,"strikethrough",o)},zk=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),WM=e=>e.name==="summary",K9=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},Vk=(e,n,o,r)=>{const a=o.name;for(let u=0,f=e.length;u<f;u++){const h=e[u];if(h.name===a){const v=r.nodes[a];v?v.nodes.push(o):r.nodes[a]={filter:h,nodes:[o]}}}if(o.attributes)for(let u=0,f=n.length;u<f;u++){const h=n[u],v=h.name;if(v in o.attributes.map){const w=r.attributes[v];w?w.nodes.push(o):r.attributes[v]={filter:h,nodes:[o]}}}},Y9=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&K9(o,a=>{Vk(e,n,a,r)}),r},ZM=(e,n)=>{const o=(r,a)=>{yo(r,u=>{const f=Xo(u.nodes);te(u.filter.callbacks,h=>{for(let v=f.length-1;v>=0;v--){const w=f[v];(!(a?w.attr(u.filter.name)!==void 0:w.name===u.filter.name)||pn(w.parent))&&f.splice(v,1)}f.length>0&&h(f,u.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},jM=(e,n,o,r={})=>{const a=Y9(e,n,o);ZM(a,r)},Uk=(e,n,o,r)=>{if((e.pad_empty_with_br||n.insert)&&o(r)){const u=new hi("br",1);n.insert&&u.attr("data-mce-bogus","1"),r.empty().append(u)}else r.empty().append(new hi("#text",3)).value=mr},X9=e=>{var n;return J9(e,"#text")&&((n=e==null?void 0:e.firstChild)==null?void 0:n.value)===mr},J9=(e,n)=>{const o=e==null?void 0:e.firstChild;return xe(o)&&o===e.lastChild&&o.name===n},Q9=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},IC=(e,n,o,r)=>r.isEmpty(n,o,a=>Q9(e,a)),_Y=(e,n)=>xe(e)&&(n(e)||e.name==="br"),eH=e=>{let n;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(n=o)}return F.from(n)},Wk=e=>{const n=[];for(let o=e.firstChild;xe(o);o=o.walk())n.push(o);return n},LC=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const a of r)o&&!n.isValidChild(o.name,a.name)&&LC(a,n,o);e.unwrap()}},GM=(e,n,o,r=rt)=>{const a=n.getTextBlockElements(),u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),h=Ct.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),v=new Set,w=D=>D!==o&&!h[D.name];for(let D=0;D<e.length;D++){const R=e[D];let M,L,K;if(!R.parent||v.has(R))continue;if(a[R.name]&&R.parent.name==="li"){let J=R.next;for(;J&&a[J.name];){J.name="li",v.add(J),R.parent.insert(J,R.parent);J=J.next}R.unwrap();continue}const W=[R];for(M=R.parent;M&&!n.isValidChild(M.name,R.name)&&w(M);M=M.parent)W.push(M);if(M&&W.length>1)if(Zk(n,R,M))LC(R,n);else{W.reverse(),L=W[0].clone(),r(L);let J=L;for(let pe=0;pe<W.length-1;pe++){n.isValidChild(J.name,W[pe].name)&&pe>0?(K=W[pe].clone(),r(K),J.append(K)):K=J;for(let be=W[pe].firstChild;be&&be!==W[pe+1];){const Se=be.next;K.append(be),be=Se}J=K}IC(n,u,f,L)?M.insert(R,W[0],!0):(M.insert(L,W[0],!0),M.insert(R,L)),M=W[0],(IC(n,u,f,M)||J9(M,"br"))&&M.empty().remove()}else if(R.parent){if(R.name==="li"){let J=R.prev;if(J&&(J.name==="ul"||J.name==="ol")){J.append(R);continue}if(J=R.next,J&&(J.name==="ul"||J.name==="ol")&&J.firstChild){J.insert(R,J.firstChild,!0);continue}const pe=new hi("ul",1);r(pe),R.wrap(pe);continue}if(n.isValidChild(R.parent.name,"div")&&n.isValidChild("div",R.name)){const J=new hi("div",1);r(J),R.wrap(J)}else LC(R,n)}}},RY=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},Zk=(e,n,o=n.parent)=>o?e.children[n.name]&&!e.isValidChild(o.name,n.name)||n.name==="a"&&RY(o,"a")?!0:WM(o)&&zk(n)?!((o==null?void 0:o.firstChild)===n&&(o==null?void 0:o.lastChild)===n):!1:!1,tH=(e,n,o,r)=>{const a=document.createRange();return a.setStart(e,n),a.setEnd(o,r),a},nH=e=>{const n=Le.fromRangeStart(e),o=Le.fromRangeEnd(e),r=e.commonAncestorContainer;return nl(!1,r,o).map(a=>!Td(n,o,r)&&Td(n,a,r)?tH(n.container(),n.offset(),a.container(),a.offset()):e).getOr(e)},QE=e=>e.collapsed?e:nH(e),qM=Ct.explode,KM=()=>{const e={};return{addFilter:(a,u)=>{te(qM(a),f=>{Jt(e,f)||(e[f]={name:f,callbacks:[]}),e[f].callbacks.push(u)})},getFilters:()=>tn(e),removeFilter:(a,u)=>{te(qM(a),f=>{if(Jt(e,f))if(xe(u)){const h=e[f],v=Ce(h.callbacks,w=>w!==u);v.length>0?h.callbacks=v:delete e[f]}else delete e[f]})}}},oH=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),YM=e=>e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"),sH=(e,n)=>{te(n,o=>{e.attr(o,null)})},rH=(e,n,o)=>{e.addNodeFilter("font",r=>{te(r,a=>{const u=n.parse(a.attr("style")),f=a.attr("color"),h=a.attr("face"),v=a.attr("size");f&&(u.color=f),h&&(u["font-family"]=h),v&&td(v).each(w=>{u["font-size"]=o[w-1]}),a.name="span",a.attr("style",n.serialize(u)),sH(a,["color","face","size"])})})},Th=(e,n,o)=>{e.addNodeFilter("strike",r=>{const a=n.type!=="html4";te(r,u=>{if(a)u.name="s";else{const f=o.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(f))}})})},cH=(e,n,o)=>{const r=Wg();n.convert_fonts_to_spans&&rH(e,r,Ct.explode(n.font_size_legacy_values??"")),Th(e,o,r)},XM=(e,n,o)=>{n.inline_styles&&cH(e,n,o)},aH=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),iH=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},JM=e=>{try{return decodeURIComponent(e)}catch{return e}},eT=e=>{const[n,...o]=e.split(","),r=o.join(","),a=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(a){const u=a[2]===";base64",f=JM(r),h=u?iH(f):f;return F.some({type:a[1],data:h,base64Encoded:u})}else return F.none()},jk=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return F.none()}const a=new Uint8Array(r.length);for(let u=0;u<a.length;u++)a[u]=r.charCodeAt(u);return F.some(new Blob([a],{type:e}))},QM=e=>new Promise((n,o)=>{eT(e).bind(({type:r,data:a,base64Encoded:u})=>jk(r,a,u)).fold(()=>o("Invalid data URI"),n)}),lH=e=>Ln(e,"blob:")?aH(e):Ln(e,"data:")?QM(e):Promise.reject("Unknown URI format"),eF=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var a;o((a=r.error)==null?void 0:a.message)},r.readAsDataURL(e)});let uH=0;const dH=e=>"blobid"+uH++,tF=(e,n,o)=>eT(e).bind(({data:r,type:a,base64Encoded:u})=>{if(n&&!u)return F.none();{const f=u?r:btoa(r);return o(f,a)}}),Fp=(e,n,o)=>{const r=e.create(dH(),n,o);return e.add(r),r},Gk=(e,n,o=!1)=>tF(n,o,(r,a)=>F.from(e.getByData(r,a)).orThunk(()=>jk(a,r).map(u=>Fp(e,u,r)))),mH=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(Ln(n,"blob:")){const r=e.getByUri(n);return xe(r)?Promise.resolve(r):lH(n).then(a=>eF(a).then(u=>tF(u,!1,f=>F.some(Fp(e,a,f))).getOrThunk(o)))}else return Ln(n,"data:")?Gk(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},fH=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,qk=e=>F.from(e.match(fH)).bind(n=>Uo(n,1)).map(n=>Ln(n,"www.")?n.substring(4):n),nF=(e,n)=>{F.from(e.attr("src")).bind(qk).forall(o=>!De(n,o))&&e.attr("sandbox","")},HC=(e,n)=>Ln(e,`${n}/`),oF=e=>ro(e)?"iframe":HC(e,"image")?"img":HC(e,"video")?"video":HC(e,"audio")?"audio":"iframe",gH=({type:e,src:n,width:o,height:r}={},a,u)=>{const f=oF(e),h=new hi(f,1);return h.attr(f==="audio"?{src:n}:{src:n,width:o,height:r}),(f==="audio"||f==="video")&&h.attr("controls",""),f==="iframe"&&a&&nF(h,u),h},hH=e=>xe(e.attr("data-mce-bogus")),tT=e=>e.attr("src")===wo.transparentSrc||xe(e.attr("data-mce-placeholder")),pH=(e,n)=>{const{blob_cache:o}=n;if(o){const r=a=>{const u=a.attr("src");tT(a)||hH(a)||pn(u)||Gk(o,u,!0).each(f=>{a.attr("src",f.blobUri())})};e.addAttributeFilter("src",a=>te(a,r))}},sF=(e,n)=>{const o=e.schema;e.addAttributeFilter("href",f=>{let h=f.length;const v=D=>D.split(" ").filter(M=>M.length>0).concat(["noopener"]).sort().join(" "),w=D=>{const R=D?Ct.trim(D):"";return/\b(noopener)\b/g.test(R)?R:v(R)};if(!n.allow_unsafe_link_target)for(;h--;){const D=f[h];D.name==="a"&&D.attr("target")==="_blank"&&D.attr("rel",w(D.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",f=>{let h=f.length,v,w,D,R;for(;h--;)if(R=f[h],R.name==="a"&&R.firstChild&&!R.attr("href"))for(D=R.parent,v=R.lastChild;v&&D;)w=v.prev,D.insert(v,R),v=w}),n.fix_list_elements&&e.addNodeFilter("ul,ol",f=>{let h=f.length,v,w;for(;h--;)if(v=f[h],w=v.parent,w&&(w.name==="ul"||w.name==="ol"))if(v.prev&&v.prev.name==="li")v.prev.append(v);else{const D=new hi("li",1);D.attr("style","list-style-type: none"),v.wrap(D)}});const r=o.getValidClasses();n.validate&&r&&e.addAttributeFilter("class",f=>{let h=f.length;for(;h--;){const v=f[h],w=v.attr("class")??"",D=Ct.explode(w," ");let R="";for(let M=0;M<D.length;M++){const L=D[M];let K=!1,W=r["*"];W&&W[L]&&(K=!0),W=r[v.name],!K&&W&&W[L]&&(K=!0),K&&(R&&(R+=" "),R+=L)}R.length||(R=null),v.attr("class",R)}}),pH(e,n);const a=n.sandbox_iframes??!1,u=Hr(n.sandbox_iframes_exclusions??[]);n.convert_unsafe_embeds&&e.addNodeFilter("object,embed",f=>te(f,h=>{h.replace(gH({type:h.attr("type"),src:h.name==="object"?h.attr("data"):h.attr("src"),width:h.attr("width"),height:h.attr("height")},a,u))})),a&&e.addNodeFilter("iframe",f=>te(f,h=>nF(h,u)))};/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:rF,setPrototypeOf:Kk,isFrozen:cF,getPrototypeOf:aF,getOwnPropertyDescriptor:bH}=Object;let{freeze:Dl,seal:Cm,create:iF}=Object,{apply:Yk,construct:al}=typeof Reflect<"u"&&Reflect;Dl||(Dl=function(n){return n}),Cm||(Cm=function(n){return n}),Yk||(Yk=function(n,o,r){return n.apply(o,r)}),al||(al=function(n,o){return new n(...o)});const zC=Bi(Array.prototype.forEach),vH=Bi(Array.prototype.lastIndexOf),Xk=Bi(Array.prototype.pop),VC=Bi(Array.prototype.push),yH=Bi(Array.prototype.splice),nT=Bi(String.prototype.toLowerCase),Np=Bi(String.prototype.toString),A0=Bi(String.prototype.match),oT=Bi(String.prototype.replace),CH=Bi(String.prototype.indexOf),wH=Bi(String.prototype.trim),Pa=Bi(Object.prototype.hasOwnProperty),cu=Bi(RegExp.prototype.test),UC=SH(TypeError);function Bi(e){return function(n){n instanceof RegExp&&(n.lastIndex=0);for(var o=arguments.length,r=new Array(o>1?o-1:0),a=1;a<o;a++)r[a-1]=arguments[a];return Yk(e,n,r)}}function SH(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return al(e,o)}}function Xs(e,n){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:nT;Kk&&Kk(e,null);let r=n.length;for(;r--;){let a=n[r];if(typeof a=="string"){const u=o(a);u!==a&&(cF(n)||(n[r]=u),a=u)}e[a]=!0}return e}function Jk(e){for(let n=0;n<e.length;n++)Pa(e,n)||(e[n]=null);return e}function Jf(e){const n=iF(null);for(const[o,r]of rF(e))Pa(e,o)&&(Array.isArray(r)?n[o]=Jk(r):r&&typeof r=="object"&&r.constructor===Object?n[o]=Jf(r):n[o]=r);return n}function WC(e,n){for(;e!==null;){const r=bH(e,n);if(r){if(r.get)return Bi(r.get);if(typeof r.value=="function")return Bi(r.value)}e=aF(e)}function o(){return null}return o}const xH=Dl(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Qf=Dl(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Qk=Dl(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),EH=Dl(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),eD=Dl(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Bo=Dl(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),lF=Dl(["#text"]),uF=Dl(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),sT=Dl(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),dF=Dl(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),rT=Dl(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),lc=Cm(/\{\{[\w\W]*|[\w\W]*\}\}/gm),TH=Cm(/<%[\w\W]*|[\w\W]*%>/gm),AH=Cm(/\$\{[\w\W]*/gm),kH=Cm(/^data-[\-\w.\u00B7-\uFFFF]+$/),DH=Cm(/^aria-[\-\w]+$/),Fr=Cm(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),mF=Cm(/^(?:\w+script|data):/i),fF=Cm(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),gF=Cm(/^html$/i),hF=Cm(/^[a-z][.\w]*(-[.\w]+)+$/i);var pF=Object.freeze({__proto__:null,ARIA_ATTR:DH,ATTR_WHITESPACE:fF,CUSTOM_ELEMENT:hF,DATA_ATTR:kH,DOCTYPE_NAME:gF,ERB_EXPR:TH,IS_ALLOWED_URI:Fr,IS_SCRIPT_OR_DATA:mF,MUSTACHE_EXPR:lc,TMPLIT_EXPR:AH});const _d={element:1,text:3,progressingInstruction:7,comment:8,document:9},tD=function(){return typeof window>"u"?null:window},OH=function(n,o){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let r=null;const a="data-tt-policy-suffix";o&&o.hasAttribute(a)&&(r=o.getAttribute(a));const u="dompurify"+(r?"#"+r:"");try{return n.createPolicy(u,{createHTML(f){return f},createScriptURL(f){return f}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}},bF=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function cT(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:tD();const n=qo=>cT(qo);if(n.version="3.2.6",n.removed=[],!e||!e.document||e.document.nodeType!==_d.document||!e.Element)return n.isSupported=!1,n;let{document:o}=e;const r=o,a=r.currentScript,{DocumentFragment:u,HTMLTemplateElement:f,Node:h,Element:v,NodeFilter:w,NamedNodeMap:D=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:R,DOMParser:M,trustedTypes:L}=e,K=v.prototype,W=WC(K,"cloneNode"),J=WC(K,"remove"),pe=WC(K,"nextSibling"),be=WC(K,"childNodes"),Se=WC(K,"parentNode");if(typeof f=="function"){const qo=o.createElement("template");qo.content&&qo.content.ownerDocument&&(o=qo.content.ownerDocument)}let Ze,it="";const{implementation:$t,createNodeIterator:yt,createDocumentFragment:Ge,getElementsByTagName:ze}=o,{importNode:lt}=r;let sn=bF();n.isSupported=typeof rF=="function"&&typeof Se=="function"&&$t&&$t.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Nn,ERB_EXPR:bo,TMPLIT_EXPR:Zo,DATA_ATTR:rr,ARIA_ATTR:yr,IS_SCRIPT_OR_DATA:Tc,ATTR_WHITESPACE:Kc,CUSTOM_ELEMENT:Ld}=pF;let{IS_ALLOWED_URI:Vt}=pF,Rn=null;const ks=Xs({},[...xH,...Qf,...Qk,...eD,...lF]);let Ds=null;const Tn=Xs({},[...uF,...sT,...dF,...rT]);let wt=Object.seal(iF(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ut=null,Pn=null,io=!0,rs=!0,Cr=!1,hf=!0,Qa=!1,pf=!0,bf=!1,uu=!1,Nl=!1,Fm=!1,Gy=!1,qy=!1,C4=!0,Gn=!1;const cs="user-content-";let pc=!0,xr=!1,Ys={},uc=null;const du=Xs({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ll=null;const Hd=Xs({},["audio","video","img","source","image","track"]);let Ih=null;const w4=Xs({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),S4="http://www.w3.org/1998/Math/MathML",tS="http://www.w3.org/2000/svg",mg="http://www.w3.org/1999/xhtml";let Ky=mg,T5=!1,x4=null;const tX=Xs({},[S4,tS,mg],Np);let A5=Xs({},["mi","mo","mn","ms","mtext"]),k5=Xs({},["annotation-xml"]);const nX=Xs({},["title","style","font","a","script"]);let E4=null;const Yy=["application/xhtml+xml","text/html"],II="text/html";let _e=null,Ne=null;const Wt=o.createElement("form"),Ft=function(Ie){return Ie instanceof RegExp||Ie instanceof Function},no=function(){let Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Ne&&Ne===Ie)){if((!Ie||typeof Ie!="object")&&(Ie={}),Ie=Jf(Ie),E4=Yy.indexOf(Ie.PARSER_MEDIA_TYPE)===-1?II:Ie.PARSER_MEDIA_TYPE,_e=E4==="application/xhtml+xml"?Np:nT,Rn=Pa(Ie,"ALLOWED_TAGS")?Xs({},Ie.ALLOWED_TAGS,_e):ks,Ds=Pa(Ie,"ALLOWED_ATTR")?Xs({},Ie.ALLOWED_ATTR,_e):Tn,x4=Pa(Ie,"ALLOWED_NAMESPACES")?Xs({},Ie.ALLOWED_NAMESPACES,Np):tX,Ih=Pa(Ie,"ADD_URI_SAFE_ATTR")?Xs(Jf(w4),Ie.ADD_URI_SAFE_ATTR,_e):w4,ll=Pa(Ie,"ADD_DATA_URI_TAGS")?Xs(Jf(Hd),Ie.ADD_DATA_URI_TAGS,_e):Hd,uc=Pa(Ie,"FORBID_CONTENTS")?Xs({},Ie.FORBID_CONTENTS,_e):du,Ut=Pa(Ie,"FORBID_TAGS")?Xs({},Ie.FORBID_TAGS,_e):Jf({}),Pn=Pa(Ie,"FORBID_ATTR")?Xs({},Ie.FORBID_ATTR,_e):Jf({}),Ys=Pa(Ie,"USE_PROFILES")?Ie.USE_PROFILES:!1,io=Ie.ALLOW_ARIA_ATTR!==!1,rs=Ie.ALLOW_DATA_ATTR!==!1,Cr=Ie.ALLOW_UNKNOWN_PROTOCOLS||!1,hf=Ie.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Qa=Ie.SAFE_FOR_TEMPLATES||!1,pf=Ie.SAFE_FOR_XML!==!1,bf=Ie.WHOLE_DOCUMENT||!1,Fm=Ie.RETURN_DOM||!1,Gy=Ie.RETURN_DOM_FRAGMENT||!1,qy=Ie.RETURN_TRUSTED_TYPE||!1,Nl=Ie.FORCE_BODY||!1,C4=Ie.SANITIZE_DOM!==!1,Gn=Ie.SANITIZE_NAMED_PROPS||!1,pc=Ie.KEEP_CONTENT!==!1,xr=Ie.IN_PLACE||!1,Vt=Ie.ALLOWED_URI_REGEXP||Fr,Ky=Ie.NAMESPACE||mg,A5=Ie.MATHML_TEXT_INTEGRATION_POINTS||A5,k5=Ie.HTML_INTEGRATION_POINTS||k5,wt=Ie.CUSTOM_ELEMENT_HANDLING||{},Ie.CUSTOM_ELEMENT_HANDLING&&Ft(Ie.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(wt.tagNameCheck=Ie.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ie.CUSTOM_ELEMENT_HANDLING&&Ft(Ie.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(wt.attributeNameCheck=Ie.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ie.CUSTOM_ELEMENT_HANDLING&&typeof Ie.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(wt.allowCustomizedBuiltInElements=Ie.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Qa&&(rs=!1),Gy&&(Fm=!0),Ys&&(Rn=Xs({},lF),Ds=[],Ys.html===!0&&(Xs(Rn,xH),Xs(Ds,uF)),Ys.svg===!0&&(Xs(Rn,Qf),Xs(Ds,sT),Xs(Ds,rT)),Ys.svgFilters===!0&&(Xs(Rn,Qk),Xs(Ds,sT),Xs(Ds,rT)),Ys.mathMl===!0&&(Xs(Rn,eD),Xs(Ds,dF),Xs(Ds,rT))),Ie.ADD_TAGS&&(Rn===ks&&(Rn=Jf(Rn)),Xs(Rn,Ie.ADD_TAGS,_e)),Ie.ADD_ATTR&&(Ds===Tn&&(Ds=Jf(Ds)),Xs(Ds,Ie.ADD_ATTR,_e)),Ie.ADD_URI_SAFE_ATTR&&Xs(Ih,Ie.ADD_URI_SAFE_ATTR,_e),Ie.FORBID_CONTENTS&&(uc===du&&(uc=Jf(uc)),Xs(uc,Ie.FORBID_CONTENTS,_e)),pc&&(Rn["#text"]=!0),bf&&Xs(Rn,["html","head","body"]),Rn.table&&(Xs(Rn,["tbody"]),delete Ut.tbody),Ie.TRUSTED_TYPES_POLICY){if(typeof Ie.TRUSTED_TYPES_POLICY.createHTML!="function")throw UC('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Ie.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw UC('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Ze=Ie.TRUSTED_TYPES_POLICY,it=Ze.createHTML("")}else Ze===void 0&&(Ze=OH(L,a)),Ze!==null&&typeof it=="string"&&(it=Ze.createHTML(""));Dl&&Dl(Ie),Ne=Ie}},xs=Xs({},[...Qf,...Qk,...EH]),bc=Xs({},[...eD,...Bo]),Lh=function(Ie){let Mn=Se(Ie);(!Mn||!Mn.tagName)&&(Mn={namespaceURI:Ky,tagName:"template"});const Mo=nT(Ie.tagName),Ta=nT(Mn.tagName);return x4[Ie.namespaceURI]?Ie.namespaceURI===tS?Mn.namespaceURI===mg?Mo==="svg":Mn.namespaceURI===S4?Mo==="svg"&&(Ta==="annotation-xml"||A5[Ta]):!!xs[Mo]:Ie.namespaceURI===S4?Mn.namespaceURI===mg?Mo==="math":Mn.namespaceURI===tS?Mo==="math"&&k5[Ta]:!!bc[Mo]:Ie.namespaceURI===mg?Mn.namespaceURI===tS&&!k5[Ta]||Mn.namespaceURI===S4&&!A5[Ta]?!1:!bc[Mo]&&(nX[Mo]||!xs[Mo]):!!(E4==="application/xhtml+xml"&&x4[Ie.namespaceURI]):!1},fg=function(Ie){VC(n.removed,{element:Ie});try{Se(Ie).removeChild(Ie)}catch{J(Ie)}},T4=function(Ie,Mn){try{VC(n.removed,{attribute:Mn.getAttributeNode(Ie),from:Mn})}catch{VC(n.removed,{attribute:null,from:Mn})}if(Mn.removeAttribute(Ie),Ie==="is")if(Fm||Gy)try{fg(Mn)}catch{}else try{Mn.setAttribute(Ie,"")}catch{}},oX=function(Ie){let Mn=null,Mo=null;if(Nl)Ie="<remove></remove>"+Ie;else{const ul=A0(Ie,/^[\r\n\t ]+/);Mo=ul&&ul[0]}E4==="application/xhtml+xml"&&Ky===mg&&(Ie='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ie+"</body></html>");const Ta=Ze?Ze.createHTML(Ie):Ie;if(Ky===mg)try{Mn=new M().parseFromString(Ta,E4)}catch{}if(!Mn||!Mn.documentElement){Mn=$t.createDocument(Ky,"template",null);try{Mn.documentElement.innerHTML=T5?it:Ta}catch{}}const Ju=Mn.body||Mn.documentElement;return Ie&&Mo&&Ju.insertBefore(o.createTextNode(Mo),Ju.childNodes[0]||null),Ky===mg?ze.call(Mn,bf?"html":"body")[0]:bf?Mn.documentElement:Ju},sX=function(Ie){return yt.call(Ie.ownerDocument||Ie,Ie,w.SHOW_ELEMENT|w.SHOW_COMMENT|w.SHOW_TEXT|w.SHOW_PROCESSING_INSTRUCTION|w.SHOW_CDATA_SECTION,null)},cY=function(Ie){return Ie instanceof R&&(typeof Ie.nodeName!="string"||typeof Ie.textContent!="string"||typeof Ie.removeChild!="function"||!(Ie.attributes instanceof D)||typeof Ie.removeAttribute!="function"||typeof Ie.setAttribute!="function"||typeof Ie.namespaceURI!="string"||typeof Ie.insertBefore!="function"||typeof Ie.hasChildNodes!="function")},rX=function(Ie){return typeof h=="function"&&Ie instanceof h};function mb(qo,Ie,Mn){zC(qo,Mo=>{Mo.call(n,Ie,Mn,Ne)})}const cX=function(Ie){let Mn=null;if(mb(sn.beforeSanitizeElements,Ie,null),cY(Ie))return fg(Ie),!0;const Mo=_e(Ie.nodeName);if(mb(sn.uponSanitizeElement,Ie,{tagName:Mo,allowedTags:Rn}),pf&&Ie.hasChildNodes()&&!rX(Ie.firstElementChild)&&cu(/<[/\w!]/g,Ie.innerHTML)&&cu(/<[/\w!]/g,Ie.textContent)||Ie.nodeType===_d.progressingInstruction||pf&&Ie.nodeType===_d.comment&&cu(/<[/\w]/g,Ie.data))return fg(Ie),!0;if(!Rn[Mo]||Ut[Mo]){if(!Ut[Mo]&&iX(Mo)&&(wt.tagNameCheck instanceof RegExp&&cu(wt.tagNameCheck,Mo)||wt.tagNameCheck instanceof Function&&wt.tagNameCheck(Mo)))return!1;if(pc&&!uc[Mo]){const Ta=Se(Ie)||Ie.parentNode,Ju=be(Ie)||Ie.childNodes;if(Ju&&Ta){const ul=Ju.length;for(let Nm=ul-1;Nm>=0;--Nm){const fb=W(Ju[Nm],!0);fb.__removalCount=(Ie.__removalCount||0)+1,Ta.insertBefore(fb,pe(Ie))}}}return fg(Ie),!0}return Ie instanceof v&&!Lh(Ie)||(Mo==="noscript"||Mo==="noembed"||Mo==="noframes")&&cu(/<\/no(script|embed|frames)/i,Ie.innerHTML)?(fg(Ie),!0):(Qa&&Ie.nodeType===_d.text&&(Mn=Ie.textContent,zC([Nn,bo,Zo],Ta=>{Mn=oT(Mn,Ta," ")}),Ie.textContent!==Mn&&(VC(n.removed,{element:Ie.cloneNode()}),Ie.textContent=Mn)),mb(sn.afterSanitizeElements,Ie,null),!1)},aX=function(Ie,Mn,Mo){if(C4&&(Mn==="id"||Mn==="name")&&(Mo in o||Mo in Wt))return!1;if(!(rs&&!Pn[Mn]&&cu(rr,Mn))){if(!(io&&cu(yr,Mn))){if(!Ds[Mn]||Pn[Mn]){if(!(iX(Ie)&&(wt.tagNameCheck instanceof RegExp&&cu(wt.tagNameCheck,Ie)||wt.tagNameCheck instanceof Function&&wt.tagNameCheck(Ie))&&(wt.attributeNameCheck instanceof RegExp&&cu(wt.attributeNameCheck,Mn)||wt.attributeNameCheck instanceof Function&&wt.attributeNameCheck(Mn))||Mn==="is"&&wt.allowCustomizedBuiltInElements&&(wt.tagNameCheck instanceof RegExp&&cu(wt.tagNameCheck,Mo)||wt.tagNameCheck instanceof Function&&wt.tagNameCheck(Mo))))return!1}else if(!Ih[Mn]){if(!cu(Vt,oT(Mo,Kc,""))){if(!((Mn==="src"||Mn==="xlink:href"||Mn==="href")&&Ie!=="script"&&CH(Mo,"data:")===0&&ll[Ie])){if(!(Cr&&!cu(Tc,oT(Mo,Kc,"")))){if(Mo)return!1}}}}}}return!0},iX=function(Ie){return Ie!=="annotation-xml"&&A0(Ie,Ld)},lX=function(Ie){mb(sn.beforeSanitizeAttributes,Ie,null);const{attributes:Mn}=Ie;if(!Mn||cY(Ie))return;const Mo={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ds,forceKeepAttr:void 0};let Ta=Mn.length;for(;Ta--;){const Ju=Mn[Ta],{name:ul,namespaceURI:Nm,value:fb}=Ju,D5=_e(ul),aY=fb;let Qu=ul==="value"?aY:wH(aY);if(Mo.attrName=D5,Mo.attrValue=Qu,Mo.keepAttr=!0,Mo.forceKeepAttr=void 0,mb(sn.uponSanitizeAttribute,Ie,Mo),Qu=Mo.attrValue,Gn&&(D5==="id"||D5==="name")&&(T4(ul,Ie),Qu=cs+Qu),pf&&cu(/((--!?|])>)|<\/(style|title)/i,Qu)){T4(ul,Ie);continue}if(Mo.forceKeepAttr)continue;if(!Mo.keepAttr){T4(ul,Ie);continue}if(!hf&&cu(/\/>/i,Qu)){T4(ul,Ie);continue}Qa&&zC([Nn,bo,Zo],dX=>{Qu=oT(Qu,dX," ")});const uX=_e(Ie.nodeName);if(!aX(uX,D5,Qu)){T4(ul,Ie);continue}if(Ze&&typeof L=="object"&&typeof L.getAttributeType=="function"&&!Nm)switch(L.getAttributeType(uX,D5)){case"TrustedHTML":{Qu=Ze.createHTML(Qu);break}case"TrustedScriptURL":{Qu=Ze.createScriptURL(Qu);break}}if(Qu!==aY)try{Nm?Ie.setAttributeNS(Nm,ul,Qu):Ie.setAttribute(ul,Qu),cY(Ie)?fg(Ie):Xk(n.removed)}catch{T4(ul,Ie)}}mb(sn.afterSanitizeAttributes,Ie,null)},fX=function qo(Ie){let Mn=null;const Mo=sX(Ie);for(mb(sn.beforeSanitizeShadowDOM,Ie,null);Mn=Mo.nextNode();)mb(sn.uponSanitizeShadowNode,Mn,null),cX(Mn),lX(Mn),Mn.content instanceof u&&qo(Mn.content);mb(sn.afterSanitizeShadowDOM,Ie,null)};return n.sanitize=function(qo){let Ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Mn=null,Mo=null,Ta=null,Ju=null;if(T5=!qo,T5&&(qo="<!-->"),typeof qo!="string"&&!rX(qo))if(typeof qo.toString=="function"){if(qo=qo.toString(),typeof qo!="string")throw UC("dirty is not a string, aborting")}else throw UC("toString is not a function");if(!n.isSupported)return qo;if(uu||no(Ie),n.removed=[],typeof qo=="string"&&(xr=!1),xr){if(qo.nodeName){const fb=_e(qo.nodeName);if(!Rn[fb]||Ut[fb])throw UC("root node is forbidden and cannot be sanitized in-place")}}else if(qo instanceof h)Mn=oX("<!---->"),Mo=Mn.ownerDocument.importNode(qo,!0),Mo.nodeType===_d.element&&Mo.nodeName==="BODY"||Mo.nodeName==="HTML"?Mn=Mo:Mn.appendChild(Mo);else{if(!Fm&&!Qa&&!bf&&qo.indexOf("<")===-1)return Ze&&qy?Ze.createHTML(qo):qo;if(Mn=oX(qo),!Mn)return Fm?null:qy?it:""}Mn&&Nl&&fg(Mn.firstChild);const ul=sX(xr?qo:Mn);for(;Ta=ul.nextNode();)cX(Ta),lX(Ta),Ta.content instanceof u&&fX(Ta.content);if(xr)return qo;if(Fm){if(Gy)for(Ju=Ge.call(Mn.ownerDocument);Mn.firstChild;)Ju.appendChild(Mn.firstChild);else Ju=Mn;return(Ds.shadowroot||Ds.shadowrootmode)&&(Ju=lt.call(r,Ju,!0)),Ju}let Nm=bf?Mn.outerHTML:Mn.innerHTML;return bf&&Rn["!doctype"]&&Mn.ownerDocument&&Mn.ownerDocument.doctype&&Mn.ownerDocument.doctype.name&&cu(gF,Mn.ownerDocument.doctype.name)&&(Nm="<!DOCTYPE "+Mn.ownerDocument.doctype.name+`>
`+Nm),Qa&&zC([Nn,bo,Zo],fb=>{Nm=oT(Nm,fb," ")}),Ze&&qy?Ze.createHTML(Nm):Nm},n.setConfig=function(){let qo=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};no(qo),uu=!0},n.clearConfig=function(){Ne=null,uu=!1},n.isValidAttribute=function(qo,Ie,Mn){Ne||no({});const Mo=_e(qo),Ta=_e(Ie);return aX(Mo,Ta,Mn)},n.addHook=function(qo,Ie){typeof Ie=="function"&&VC(sn[qo],Ie)},n.removeHook=function(qo,Ie){if(Ie!==void 0){const Mn=vH(sn[qo],Ie);return Mn===-1?void 0:yH(sn[qo],Mn,1)[0]}return Xk(sn[qo])},n.removeHooks=function(qo){sn[qo]=[]},n.removeAllHooks=function(){sn=bF()},n}var nD=cT();const vF=Ct.each,Gc=Ct.trim,_H=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],Pp={ftp:21,http:80,https:443,mailto:25},RH=["img","video"],BH=(e,n)=>xe(e)?!e:xe(n)?!De(RH,n):!0,MH=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},yF=(e,n,o)=>{const r=MH(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?BH(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class wm{constructor(n,o={}){Xe(this,"source");Xe(this,"protocol");Xe(this,"authority");Xe(this,"userInfo");Xe(this,"user");Xe(this,"password");Xe(this,"host");Xe(this,"port");Xe(this,"relative");Xe(this,"path","");Xe(this,"directory","");Xe(this,"file");Xe(this,"query");Xe(this,"anchor");Xe(this,"settings");n=Gc(n),this.settings=o;const r=o.base_uri,a=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){a.source=n;return}const u=n.indexOf("//")===0;if(n.indexOf("/")===0&&!u&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const h=r?r.path:new wm(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+a.toAbsPath(h,n);else{const v=/([^#?]*)([#?]?.*)/.exec(n);v&&(n=(r&&r.protocol||"http")+"://mce_host"+a.toAbsPath(h,v[1])+v[2])}}n=n.replace(/@@/g,"(mce_at)");const f=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);f&&vF(_H,(h,v)=>{let w=f[v];w&&(w=w.replace(/\(mce_at\)/g,"@@")),a[h]=w}),r&&(a.protocol||(a.protocol=r.protocol),a.userInfo||(a.userInfo=r.userInfo),!a.port&&a.host==="mce_host"&&(a.port=r.port),(!a.host||a.host==="mce_host")&&(a.host=r.host),a.source=""),u&&(a.protocol="")}static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),a=/data:([^;]+)/.exec(r[0]);return a&&(o=a[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const a=Pg.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!yF(r,a,o)}}static getDocumentBaseUrl(n){let o;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?o=n.href??"":o=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/")),o}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new wm(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),a=o.getURI();if(r===a||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===a)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(n,o){const r=new wm(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?Pp[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,a="",u,f;const h=n.substring(0,n.lastIndexOf("/")).split("/"),v=o.split("/");if(h.length>=v.length){for(u=0,f=h.length;u<f;u++)if(u>=v.length||h[u]!==v[u]){r=u+1;break}}if(h.length<v.length){for(u=0,f=v.length;u<f;u++)if(u>=h.length||h[u]!==v[u]){r=u+1;break}}if(r===1)return o;for(u=0,f=h.length-(r-1);u<f;u++)a+="../";for(u=r-1,f=v.length;u<f;u++)u!==r-1?a+="/"+v[u]:a+=v[u];return a}toAbsPath(n,o){let r=0;const a=/\/$/.test(o)?"/":"",u=n.split("/"),f=o.split("/"),h=[];vF(u,R=>{R&&h.push(R)});const v=[];for(let R=f.length-1;R>=0;R--)if(!(f[R].length===0||f[R]===".")){if(f[R]===".."){r++;continue}if(r>0){r--;continue}v.push(f[R])}const w=h.length-r;let D;return w<=0?D=ko(v).join("/"):D=h.slice(0,w).join("/")+"/"+ko(v).join("/"),D.indexOf("/")!==0&&(D="/"+D),a&&D.lastIndexOf("/")!==D.length-1&&(D+=a),D}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const FH=Ct.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),oD="data-mce-type";let CF=0;const wF=(e,n,o,r,a)=>{const u=n.validate,f=o.getSpecialElements();e.nodeType===oi&&(!n.allow_conditional_comments&&/^\[if/i.test(e.nodeValue??"")&&(e.nodeValue=" "+e.nodeValue),n.sanitize&&n.allow_html_in_comments&&re(e.nodeValue)&&(e.nodeValue=oH(e.nodeValue)));const h=(a==null?void 0:a.tagName)??e.nodeName.toLowerCase();if(r!=="html"&&o.isValid(r)){xe(a)&&(a.allowedTags[h]=!0);return}if(e.nodeType!==Cg||h==="body")return;const v=ee.fromDom(e),w=fr(v,oD),D=lr(v,"data-mce-bogus");if(!w&&re(D)){D==="all"?Ws(v):si(v);return}const R=o.getElementRule(h);if(u&&!R){Jt(f,h)?Ws(v):si(v);return}else xe(a)&&(a.allowedTags[h]=!0);if(u&&R&&!w){if(te(R.attributesForced??[],M=>{Sr(v,M.name,M.value==="{$uid}"?`mce_${CF++}`:M.value)}),te(R.attributesDefault??[],M=>{fr(v,M.name)||Sr(v,M.name,M.value==="{$uid}"?`mce_${CF++}`:M.value)}),R.attributesRequired&&!ve(R.attributesRequired,M=>fr(v,M))){si(v);return}if(R.removeEmptyAttrs&&xf(v)){si(v);return}R.outputName&&R.outputName!==h&&id(v,R.outputName)}},aT=(e,n,o,r,a)=>{const u=e.tagName.toLowerCase(),{attrName:f,attrValue:h}=a;a.keepAttr=SF(n,o,r,u,f,h),a.keepAttr?(a.allowedAttributes[f]=!0,NH(f,o,e.nodeName)&&(a.attrValue=f),n.allow_svg_data_urls&&Ln(h,"data:image/svg+xml")&&(a.forceKeepAttr=!0)):xF(e,f)&&(a.forceKeepAttr=!0)},SF=(e,n,o,r,a,u)=>o!=="html"&&!li(r)?!0:!(a in FH&&yF(e,u,r))&&(!e.validate||n.isValid(r,a)||Ln(a,"data-")||Ln(a,"aria-")),xF=(e,n)=>e.hasAttribute(oD)&&(n==="id"||n==="class"||n==="style"),NH=(e,n,o)=>e in n.getBoolAttrs()&&!Jt(n.getCustomElements(),o.toLowerCase()),ZC=(e,n,o,r)=>{const{attributes:a}=e;for(let u=a.length-1;u>=0;u--){const f=a[u],h=f.name,v=f.value;!SF(n,o,r,e.tagName.toLowerCase(),h,v)&&!xF(e,h)?e.removeAttribute(h):NH(h,o,e.nodeName)&&e.setAttribute(h,h)}},PH=(e,n,o)=>{const r=nD();return r.addHook("uponSanitizeElement",(a,u)=>{wF(a,e,n,o.track(a),u)}),r.addHook("uponSanitizeAttribute",(a,u)=>{aT(a,e,n,o.current(),u)}),r},sD=(e,n)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body","html"],ALLOWED_ATTR:[]}};return r.PARSER_MEDIA_TYPE=n,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},$H=e=>{const n=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(r=>`xlink:${r}`),o={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:n};nD().sanitize(e,o)},IH=(e,n)=>{const o={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}},r=nD(),a=n.allow_mathml_annotation_encodings,u=je(a)&&a.length>0,f=v=>{const w=v.getAttribute("encoding");return u&&re(w)&&De(a,w)},h=(v,w)=>u&&w==="semantics"?F.some(!0):w==="annotation"?F.some(gn(v)&&f(v)):je(n.extended_mathml_elements)&&n.extended_mathml_elements.includes(w)?F.from(!0):F.none();r.addHook("uponSanitizeElement",(v,w)=>{const D=w.tagName??v.nodeName.toLowerCase();h(v,D).each(M=>{w.allowedTags[D]=M,!M&&n.sanitize&&gn(v)&&v.remove()})}),r.addHook("uponSanitizeAttribute",(v,w)=>{je(n.extended_mathml_attributes)&&n.extended_mathml_attributes.includes(w.attrName)&&(w.forceKeepAttr=!0)}),r.sanitize(e,o)},LH=e=>n=>{const o=uS(n);if(o==="svg")$H(n);else if(o==="math")IH(n,e);else throw new Error("Not a namespace element")},HH=(e,n)=>{const o=_b();if(e.sanitize){const r=PH(e,n,o);return{sanitizeHtmlElement:(u,f)=>{r.sanitize(u,sD(e,f)),r.removed=[],o.reset()},sanitizeNamespaceElement:LH(e)}}else return{sanitizeHtmlElement:(u,f)=>{const h=document.createNodeIterator(u,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let v;for(;v=h.nextNode();){const w=o.track(v);wF(v,e,n,w),gn(v)&&ZC(v,e,n,w)}o.reset()},sanitizeNamespaceElement:rt}},$p=["script","style","template","param","meta","title","link"],Ip=Ct.makeMap,jC=Ct.extend,GC=(e,n,o,r,a)=>{const u=e.name,f=u in o&&u!=="title"&&u!=="textarea"&&u!=="noscript",h=n.childNodes;for(let v=0,w=h.length;v<w;v++){const D=h[v],R=new hi(D.nodeName.toLowerCase(),D.nodeType);if(gn(D)){const M=D.attributes;for(let L=0,K=M.length;L<K;L++){const W=M[L];R.attr(W.name,W.value)}li(R.name)&&(r(D),R.value=D.innerHTML)}else pt(D)?(R.value=D.data,f&&(R.raw=!0)):Zr(D)?R.value=a?YM(D.data):D.data:(m2(D)||f2(D))&&(R.value=D.data);if(kb(D)){const M=hi.create("#text");M.value=D.innerHTML,M.raw=!0,R.append(M)}else li(R.name)||GC(R,D,o,r,a);e.append(R)}},k0=(e,n,o)=>{const r=[];for(let a=e,u=a;a;u=a,a=a.walk()){const f=a;te(n,h=>h(f)),pn(f.parent)&&f!==e?a=u:r.push(f)}for(let a=r.length-1;a>=0;a--){const u=r[a];te(o,f=>f(u))}},D0=(e,n,o,r)=>{const a=o.validate,u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),h=jC(Ip($p),n.getBlockElements()),v=yS(n),w=/[ \t\r\n]+/g,D=/^[ \t\r\n]+/,R=/[ \t\r\n]+$/,M=be=>{let Se=be.parent;for(;xe(Se);){if(Se.name in f)return!0;Se=Se.parent}return!1},L=be=>{let Se=be;for(;xe(Se);){if(Se.name in v)return IC(n,u,f,Se);Se=Se.parent}return!1},K=be=>be.name in h||E1(n,be)||li(be.name)&&be.parent===e,W=(be,Se)=>{const Ze=Se?be.prev:be.next;return xe(Ze)||pn(be.parent)?!1:K(be.parent)&&(be.parent!==e||r.isRootContent===!0)};return[be=>{if(be.type===3&&!M(be)){let Se=be.value??"";Se=Se.replace(w," "),(_Y(be.prev,K)||W(be,!0))&&(Se=Se.replace(D,"")),Se.length===0||Se===" "&&be.prev&&be.prev.type===oi&&be.next&&be.next.type===oi?be.remove():be.value=Se}},be=>{if(be.type===1){const Se=n.getElementRule(be.name);if(a&&Se){const Ze=IC(n,u,f,be);Se.paddInEmptyBlock&&Ze&&L(be)?Uk(o,r,K,be):Se.removeEmpty&&Ze?K(be)?be.remove():be.unwrap():Se.paddEmpty&&(Ze||X9(be))&&Uk(o,r,K,be)}}else if(be.type===3&&!M(be)){let Se=be.value??"";(be.next&&K(be.next)||W(be,!1))&&(Se=Se.replace(R,"")),Se.length===0?be.remove():be.value=Se}}]},iT=(e,n)=>{const o=n.forced_root_block??e.forced_root_block;return o===!1?"":o===!0?"p":o},qC=' xmlns="http://www.w3.org/1999/xhtml"',O0=(e={},n=Ru())=>{const o=KM(),r=KM(),a={validate:!0,root_name:"body",sanitize:!0,allow_html_in_comments:!1,...e},u=new DOMParser,f=HH(a,n),h=(Se,Ze,it="html",$t=!1)=>{const yt=it==="xhtml",Ge=yt?"application/xhtml+xml":"text/html",ze=Jt(n.getSpecialElements(),Ze.toLowerCase()),lt=ze?`<${Ze}>${Se}</${Ze}>`:Se,sn=()=>/^[\s]*<head/i.test(Se)||/^[\s]*<html/i.test(Se)||/^[\s]*<!DOCTYPE/i.test(Se)?`<html${yt?qC:""}>${lt}</html>`:yt?`<html${qC}><head></head><body>${lt}</body></html>`:`<body>${lt}</body>`,Nn=u.parseFromString(sn(),Ge),bo=$t?Nn.documentElement:Nn.body;return f.sanitizeHtmlElement(bo,Ge),ze?bo.firstChild:bo},v=o.addFilter,w=o.getFilters,D=o.removeFilter,R=r.addFilter,M=r.getFilters,L=r.removeFilter,K=(Se,Ze)=>{Zk(n,Se)&&Ze.push(Se)},W=(Se,Ze)=>{const it=re(Ze.attr(oD)),$t=Ze.type===1&&!Jt(Se,Ze.name)&&!E1(n,Ze)&&!li(Ze.name);return Ze.type===3||$t&&!it},J=(Se,Ze)=>{const it=jC(Ip($p),n.getBlockElements()),$t=/^[ \t\r\n]+/,yt=/[ \t\r\n]+$/;let Ge=Se.firstChild,ze=null;const lt=sn=>{var Nn,bo;sn&&(Ge=sn.firstChild,Ge&&Ge.type===3&&(Ge.value=(Nn=Ge.value)==null?void 0:Nn.replace($t,"")),Ge=sn.lastChild,Ge&&Ge.type===3&&(Ge.value=(bo=Ge.value)==null?void 0:bo.replace(yt,"")))};if(n.isValidChild(Se.name,Ze.toLowerCase())){for(;Ge;){const sn=Ge.next;W(it,Ge)?(ze||(ze=new hi(Ze,1),ze.attr(a.forced_root_block_attrs),Se.insert(ze,Ge)),ze.append(Ge)):(lt(ze),ze=null),Ge=sn}lt(ze)}},be={schema:n,addAttributeFilter:R,getAttributeFilters:M,removeAttributeFilter:L,addNodeFilter:v,getNodeFilters:w,removeNodeFilter:D,parse:(Se,Ze={})=>{const it=a.validate,$t=(Ze.context??a.root_name)==="#document",yt=Ze.context??($t?"html":a.root_name),Ge=h(Se,yt,Ze.format,$t);Bf(n,Ge);const ze=new hi(yt,11);GC(ze,Ge,n.getSpecialElements(),f.sanitizeNamespaceElement,a.sanitize&&a.allow_html_in_comments),Ge.innerHTML="";const[lt,sn]=D0(ze,n,a,Ze),Nn=[],bo=it?Tc=>K(Tc,Nn):rt,Zo={nodes:{},attributes:{}},rr=Tc=>Vk(w(),M(),Tc,Zo);k0(ze,[lt,rr],[sn,bo]),Nn.reverse(),it&&Nn.length>0&&(Ze.context?Ze.invalid=!0:GM(Nn,n,ze,rr));const yr=iT(a,Ze);return yr&&(ze.name==="body"||Ze.isRootContent)&&J(ze,yr),Ze.invalid||ZM(Zo,Ze),ze}};return sF(be,a),XM(be,a,n),be},oy=e=>e instanceof hi,rD=e=>oy(e)?x0({validate:!1}).serialize(e):e,cD=(e,n,o)=>{const r=rD(e),a=n(r);if(a.isDefaultPrevented())return a;if(oy(e))if(a.content!==r){const u=O0({validate:!1,forced_root_block:!1,...o}).parse(a.content,{context:e.name});return{...a,content:u}}else return{...a,content:e};else return a},aD=e=>({sanitize:dC(e),sandbox_iframes:Tv(e),sandbox_iframes_exclusions:r0(e)}),_0=(e,n)=>{if(n.no_events)return _s.value(n);{const o=rx(e,n);return o.isDefaultPrevented()?_s.error(cx(e,{content:"",...o}).content):_s.value(o)}},iD=(e,n,o)=>o.no_events?n:cD(n,a=>cx(e,{...o,content:a}),aD(e)).content,lT=(e,n)=>{if(n.no_events)return _s.value(n);{const o=cD(n.content,r=>sa(e,{...n,content:r}),aD(e));return o.isDefaultPrevented()?(sx(e,o),_s.error(void 0)):_s.value(o)}},uT=(e,n,o)=>{o.no_events||sx(e,{...o,content:n})},dT="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),EF=["content_css_cors"],TF="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),lD=[{name:"export",replacedWith:"Export to PDF"}],uD=(e,n)=>{const o=Ce(n,r=>Jt(e,r));return Ls(o)},Ah=e=>{const n=uD(e,dT),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),Ls(n)},Lp=e=>uD(e,EF),Rd=(e,n)=>{const o=Ct.makeMap(e.plugins," "),a=Ce(n,u=>Jt(o,u));return Ls(a)},zH=e=>Rd(e,TF),VH=e=>Rd(e,lD.map(n=>n.name)),UH=(e,n)=>{const o=Ah(e),r=zH(n),a=r.length>0,u=o.length>0,f=n.theme==="mobile";if(a||u||f){const h=`
- `,v=f?`

Themes:${h}mobile`:"",w=a?`

Plugins:${h}${r.join(h)}`:"",D=u?`

Options:${h}${o.join(h)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 8.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/8/migration-from-7x/ for more information."+v+w+D)}},WH=e=>Xt(lD,n=>n.name===e).fold(()=>e,n=>n.replacedWith?`${e}, replaced by ${n.replacedWith}`:e),ZH=(e,n)=>{const o=Lp(e),r=VH(n),a=r.length>0,u=o.length>0;if(a||u){const f=`
- `,h=a?`

Plugins:${f}${r.map(WH).join(f)}`:"",v=u?`

Options:${f}${o.join(f)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+h+v)}},jH=(e,n)=>{UH(e,n),ZH(e,n)},GH={fire:'The "fire" event api has been deprecated and will be removed in TinyMCE 9. Use "dispatch" instead.',selectionSetContent:'The "editor.selection.setContent" method has been deprecated and will be removed in TinyMCE 9. Use "editor.insertContent" instead.'},AF=e=>{console.warn(GH[e],new Error().stack)},kF=e=>e.dom.length===0?(Ws(e),F.none()):F.some(e),qH=(e,n)=>e.filter(o=>y0.isBookmarkNode(o.dom)).bind(n?Ua:Vi),KH=(e,n,o,r,a)=>{const u=e.dom,f=n.dom,h=r?u.length:f.length;r?(pk(u,f,a,!1,!r),o.setStart(f,h)):(pk(f,u,a,!1,!r),o.setEnd(f,h))},YH=(e,n,o)=>{Va(e).each(r=>{const a=e.dom;n&&BC(r,Le(a,0),o)?ME(a,0,o):!n&&Kv(r,Le(a,a.length),o)&&FE(a,a.length,o)})},mT=(e,n,o,r,a)=>{e.bind(u=>((r?FE:ME)(u.dom,r?u.dom.length:0,a),n.filter(ys).map(h=>KH(u,h,o,r,a)))).orThunk(()=>qH(n,r).or(n).filter(ys).map(f=>YH(f,r,a)))},dD=(e,n,o)=>{const r=F.from(n.firstChild).map(ee.fromDom),a=F.from(n.lastChild).map(ee.fromDom);e.deleteContents(),e.insertNode(n);const u=r.bind(Vi).filter(ys).bind(kF),f=a.bind(Ua).filter(ys).bind(kF);mT(u,r,e,!0,o),mT(f,a,e,!1,o),e.collapse(!1)},DF=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),XH=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),a=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(n.content,{forced_root_block:!1,...a,...n});return x0({validate:!1},e.schema).serialize(u)}else return n.content},fT=(e,n,o={})=>{const r=DF(o,n);lT(e,r).each(a=>{const u=XH(e,a),f=e.selection.getRng();dD(f,f.createContextualFragment(u),e.schema),e.selection.setRng(f),w0(e,f),uT(e,u,a)})},OF=(e,n,o={})=>{AF("selectionSetContent"),fT(e,n,o)},_F=e=>xe(e.firstChild)&&e.firstChild===e.lastChild,mD=e=>e.name==="br"||e.value===mr,RF=(e,n)=>e.getBlockElements()[n.name]&&_F(n)&&mD(n.firstChild),BF=(e,n)=>{const o=e.getNonEmptyElements();return xe(n)&&(n.isEmpty(o)||RF(e,n))},fD=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),BF(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},JH=e=>{var r,a;const n=e.firstChild,o=e.lastChild;return n&&n.nodeName==="META"&&((r=n.parentNode)==null||r.removeChild(n)),o&&o.id==="mce_marker"&&((a=o.parentNode)==null||a.removeChild(o)),e},QH=(e,n,o)=>{const r=n.serialize(o),a=e.createFragment(r);return JH(a)},eg=e=>Ce((e==null?void 0:e.childNodes)??[],n=>n.nodeName==="LI"),Sm=e=>e.data===mr||Ar(e),gT=e=>xe(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&Sm(e.firstChild),MF=e=>!e.firstChild||gT(e),hT=e=>e.length>0&&MF(e[e.length-1])?e.slice(0,-1):e,pT=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},FF=(e,n)=>!!pT(e,n),NF=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},PF=(e,n)=>{const o=Le.before(e),a=kd(n).next(o);return a?a.toRange():null},gD=(e,n)=>{const o=Le.after(e),a=kd(n).prev(o);return a?a.toRange():null},$F=(e,n,o,r)=>{const a=NF(e,r),u=e.parentNode;return u&&(u.insertBefore(a[0],e),Ct.each(n,f=>{u.insertBefore(f,e)}),u.insertBefore(a[1],e),u.removeChild(e)),gD(n[n.length-1],o)},bT=(e,n,o)=>{const r=e.parentNode;return r&&Ct.each(n,a=>{r.insertBefore(a,e)}),PF(e,o)},hD=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),gD(n[0],o)),ez=(e,n,o,r)=>{const a=QH(n,e,r),u=pT(n,o.startContainer),f=hT(eg(a.firstChild)),h=1,v=2,w=n.getRoot(),D=R=>{const M=Le.fromRangeStart(o),L=kd(n.getRoot()),K=R===h?L.prev(M):L.next(M),W=K==null?void 0:K.getNode();return W?pT(n,W)!==u:!0};return u?D(h)?bT(u,f,w):D(v)?hD(u,f,w,n):$F(u,f,w,o):null},tz=["pre"],nz=(e,n,o,r)=>{var w;const a=n.firstChild,u=n.lastChild,f=u.attr("data-mce-type")==="bookmark"?u.prev:u,h=a===f,v=De(tz,a.name);if(h&&v){const D=a.attr("contenteditable")!=="false",R=((w=e.getParent(o,e.isBlock))==null?void 0:w.nodeName.toLowerCase())===a.name,M=F.from(Bp(r,o)).forall(ai);return D&&R&&M}else return!1},pD=Qd,IF=(e,n,o)=>{if(xe(o)){const r=e.getParent(n.endContainer,pD);return o===r&&xC(ee.fromDom(o),n)}else return!1},oz=(e,n)=>{if(e.isBlock(n)&&e.isEditable(n)){const o=n.childNodes;return o.length===1&&Ar(o[0])||o.length===0}else return!1},sz=(e,n,o)=>{var r;o.getAttribute("data-mce-bogus")==="all"?(r=o.parentNode)==null||r.insertBefore(e.dom.createFragment(n),o):oz(e.dom,o)?e.dom.setHTML(o,n):fT(e,n,{no_events:!0})},bD=(e,n,o)=>{F.from(e.getParent(n,"td,th")).map(ee.fromDom).each(r=>V4(r,o))},rz=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const a=e.getBody(),u=hM(e),f="*[data-mce-fragment]",h=r.select(f);Ct.each(h,v=>{const w=M=>xe(o[M.nodeName.toLowerCase()]),D=M=>M.childNodes.length===1;if((M=>!(kL(r,M)||DL(r,M)))(v)&&w(v)&&D(v)){const M=E0(r,v),L=(pe,be)=>ns(pe,Se=>De(be,Se)),K=pe=>D(v)&&r.is(pe,f)&&w(pe)&&(pe.nodeName===v.nodeName&&L(M,E0(r,pe))||K(pe.children[0])),W=pe=>xe(pe)&&pe!==a&&(u.compare(v,pe)||W(pe.parentElement)),J=pe=>xe(pe)&&pe!==a&&r.is(pe,f)&&(OL(r,v,pe)||J(pe.parentElement));(K(v.children[0])||W(v.parentElement)&&!J(v.parentElement))&&r.remove(v,!0)}}),UM(e,jd(h))}},cz=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},az=e=>{Ct.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},iz=e=>!!e.getAttribute("data-mce-fragment"),lz=(e,n)=>xe(n)&&!e.schema.getVoidElements()[n.nodeName],uz=(e,n)=>{var D,R;let o;const r=e.dom,a=e.selection;if(!n)return;a.scrollIntoView(n);const u=Bp(e.getBody(),n);if(u&&r.getContentEditable(u)==="false"){r.remove(n),a.select(u);return}let f=r.createRng();const h=n.previousSibling;if(pt(h)){f.setStart(h,((D=h.nodeValue)==null?void 0:D.length)??0);const M=n.nextSibling;pt(M)&&(h.appendData(M.data),(R=M.parentNode)==null||R.removeChild(M))}else f.setStartBefore(n),f.setEndBefore(n);const v=M=>{let L=Le.fromRangeStart(M);return L=kd(e.getBody()).next(L),L==null?void 0:L.toRange()},w=r.getParent(n,r.isBlock);if(r.remove(n),w&&r.isEmpty(w)){const M=pD(w);bl(ee.fromDom(w)),f.setStart(w,0),f.setEnd(w,0),!M&&!iz(w)&&(o=v(f))?(f=o,r.remove(w)):r.add(w,r.create("br",M?{}:{"data-mce-bogus":"1"}))}a.setRng(f)},dz=e=>{const n=e.dom,o=QE(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,pD);IF(n,o,r)?Ek(e,o,ee.fromDom(r)):lE(o)||$3(o)?o.deleteContents():e.getDoc().execCommand("Delete",!1)},vT=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return F.some(n);return F.none()},vD=(e,n,o)=>{var r;return ve(o.children(),zk)&&((r=e.getParent(n,e.isBlock))==null?void 0:r.nodeName)==="SUMMARY"},mz=(e,n,o)=>{var J;const r=e.selection,a=e.dom,u=e.parser,f=o.merge,h=x0({validate:!0},e.schema),v='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';o.preserve_zwsp||(n=ki(n)),n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,v);let w=r.getRng();const D=w.startContainer,R=e.getBody();D===R&&r.isCollapsed()&&a.isBlock(R.firstChild)&&lz(e,R.firstChild)&&a.isEmpty(R.firstChild)&&(w=a.createRng(),w.setStart(R.firstChild,0),w.setEnd(R.firstChild,0),r.setRng(w)),r.isCollapsed()||dz(e);const M=r.getNode(),L={context:M.nodeName.toLowerCase(),data:o.data,insert:!0},K=u.parse(n,L);if(o.paste===!0&&fD(e.schema,K)&&FF(a,M))return w=ez(h,a,r.getRng(),K),w&&r.setRng(w),n;o.paste===!0&&nz(a,K,M,e.getBody())&&((J=K.firstChild)==null||J.unwrap()),cz(K);let W=K.lastChild;if(W&&W.attr("id")==="mce_marker"){const pe=W;for(W=W.prev;W&&W.name!=="table";W=W.walk(!0))if(W.type===3||!a.isBlock(W.name)){W.parent&&e.schema.isValidChild(W.parent.name,"span")&&W.parent.insert(pe,W,W.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(M),!L.invalid&&!vD(a,M,K))n=h.serialize(K),sz(e,n,M);else{fT(e,v);let pe=r.getNode(),be;const Se=e.getBody();for(_o(pe)?pe=be=Se:be=pe;be&&be!==Se;)pe=be,be=be.parentNode;n=pe===Se?Se.innerHTML:a.getOuterHTML(pe);const Ze=u.parse(n),it=vT(Ze),$t=it.bind(eH).getOr(Ze);it.each(ze=>ze.replace(K));const yt=Wk(K);K.unwrap();const Ge=Ce(yt,ze=>Zk(e.schema,ze));GM(Ge,e.schema,$t),jM(u.getNodeFilters(),u.getAttributeFilters(),Ze),n=h.serialize(Ze),pe===Se?a.setHTML(Se,n):a.setOuterHTML(pe,n)}return rz(e,f),uz(e,a.get("mce_marker")),az(e.getBody()),bD(a,r.getStart(),e.schema),Ng(e.schema,e.getBody(),r.getStart()),n},fz=e=>{Uu(e)&&ca(e.getBody()).each(n=>{const o=n.getNode(),r=Jd(o)?ca(o).getOr(n):n;e.selection.setRng(r.toRange())})},yD=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&fz(e)},gz=(e,n,o,r)=>{if(o=ki(o),o.length===0||/^\s+$/.test(o)){const a='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+a+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+a+"</li>");const u=Sa(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),u.toLowerCase())?(o=a,o=e.dom.createHTML(u,yp(e),o)):o||(o=a),yD(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=x0({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const a=Qi(ee.fromDom(n))?o:Ct.trim(o);return yD(e,a,r.no_selection),{content:a,html:a}}},LF=(e,n,o,r)=>{jM(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const a=x0({validate:!1},e.schema).serialize(o),u=ki(Qi(ee.fromDom(n))?a:Ct.trim(a));return yD(e,u,r.no_selection),{content:o,html:u}},hz=(e,n,o)=>F.from(e.getBody()).map(r=>oy(n)?LF(e,r,n,o):gz(e,r,n,o)).getOr({content:n,html:oy(o.content)?"":o.content}),KC={},yT=na(["pre"]),pz=(e,n)=>{KC[e]||(KC[e]=[]),KC[e].push(n)},bz=(e,n)=>{Jt(KC,e)&&te(KC[e],o=>{o(n)})};pz("pre",e=>{const n=e.selection.getRng(),o=a=>u=>{const f=u.previousSibling;return yT(f)&&De(a,f)},r=(a,u)=>{const f=ee.fromDom(u),h=gl(f).dom;Ws(f),Zi(ee.fromDom(a),[ee.fromTag("br",h),ee.fromTag("br",h),...Er(f)])};if(!n.collapsed){const a=e.selection.getSelectedBlocks(),u=Ce(Ce(a,yT),o(a));te(u,f=>{r(f.previousSibling,f)})}});const HF=Ct.each,vz=(e,n,o,r)=>{const a=u=>{if(gr(u)&&gn(u.parentNode)&&e.isEditable(u)){const f=P(e,u.parentNode);e.getStyle(u,"color")&&f?e.setStyle(u,"text-decoration",f):e.getStyle(u,"text-decoration")===f&&e.setStyle(u,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(Ct.walk(r,a,"childNodes"),a(r))},yz=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const a=Ss(e,"fontSize");Bk(r,u=>a(u)&&e.isEditable(u),jc(e,"backgroundColor",b(n.styles.backgroundColor,o)))}},Cz=(e,n,o,r)=>{if(bt(n)&&(n.inline==="sub"||n.inline==="sup")){const a=Ss(e,"fontSize");Bk(r,f=>a(f)&&e.isEditable(f),jc(e,"fontSize",""));const u=Ce(e.select(n.inline==="sup"?"sub":"sup",r),e.isEditable);e.remove(u,!0)}},wz=(e,n,o,r)=>{HF(n,a=>{bt(a)&&HF(e.dom.select(a.inline,r),u=>{RM(u)&&JE(e,a,o,u,a.exact?u:null)}),L9(e.dom,a,r)})},CT=(e,n,o,r,a)=>{const u=a.parentNode;ym(e,u,o,r)&&JE(e,n,r,a)||n.merge_with_parents&&u&&e.dom.getParent(u,f=>ym(e,f,o,r)?(JE(e,n,r,a),!0):!1)},wT=Ct.each,Sz=(e,n,o,r)=>{if(J1(e)&&bt(n)&&o.parentNode){const a=yS(e.schema),u=Ht(ee.fromDom(o),f=>Iu(f.dom));return lo(a,r)&&Kl(e.schema,o.parentNode,{skipBogus:!1,includeZwsp:!0})&&!u}else return!1},xz=(e,n,o,r)=>{const a=e.formatter.get(n),u=a[0],f=!r&&e.selection.isCollapsed(),h=e.dom,v=e.selection,w=(L,K)=>{let W=!1;return wT(L,J=>ut(J)?h.getContentEditable(K)==="false"&&!J.ceFalseOverride||xe(J.collapsed)&&J.collapsed!==f?!0:h.is(K,J.selector)&&!Iu(K)?(Jv(e,K,J,o,K),W=!0,!1):!0:!1),W},D=L=>{if(re(L)){const K=h.create(L);return Jv(e,K,u,o,r),K}else return null},R=(L,K,W)=>{const J=[];let pe=!0;const be=u.inline||u.block,Se=D(be),Ze=yt=>Gt(u)&&ym(e,yt,n,o),it=(yt,Ge,ze)=>{const lt=Zt(u)&&nr(e.schema,yt)&&hh(e,Ge,be);return ze&&lt},$t=(yt,Ge,ze,lt)=>{const sn=yt.nodeName.toLowerCase(),Nn=hh(e,be,sn)&&hh(e,Ge,be),bo=!W&&pt(yt)&&Yb(yt.data),Zo=Iu(yt),rr=!bt(u)||!L.isBlock(yt);return(ze||lt)&&Nn&&!bo&&!Zo&&rr};nu(L,K,yt=>{let Ge;const ze=lt=>{let sn=!1,Nn=pe,bo=!1;const Zo=lt.parentNode,rr=Zo.nodeName.toLowerCase(),yr=L.getContentEditable(lt);xe(yr)&&(Nn=pe,pe=yr==="true",sn=!0,bo=m(e,lt));const Tc=pe&&!sn;if(Ar(lt)&&!Sz(e,u,lt,rr)){Ge=null,ft(u)&&L.remove(lt);return}if(Ze(lt)){Ge=null;return}if(it(lt,rr,Tc)){const Kc=L.rename(lt,be);Jv(e,Kc,u,o,lt),J.push(Kc),Ge=null;return}if(ut(u)){let Kc=w(a,lt);if(!Kc&&xe(Zo)&&Bn(u)&&(Kc=w(a,Zo)),!bt(u)||Kc){Ge=null;return}}xe(Se)&&$t(lt,rr,Tc,bo)?(Ge||(Ge=L.clone(Se,!1),Zo.insertBefore(Ge,lt),J.push(Ge)),bo&&sn&&(pe=Nn),Ge.appendChild(lt)):(Ge=null,te(Xo(lt.childNodes),ze),sn&&(pe=Nn),Ge=null)};te(yt,ze)}),u.links===!0&&te(J,yt=>{const Ge=ze=>{ze.nodeName==="A"&&Jv(e,ze,u,o,r),te(Xo(ze.childNodes),Ge)};Ge(yt)}),VM(e,n,jd(J)),te(J,yt=>{const Ge=sn=>{let Nn=0;return te(sn.childNodes,bo=>{!Hu(bo)&&!tu(bo)&&Nn++}),Nn},ze=sn=>Xt(sn.childNodes,TC).filter(bo=>L.getContentEditable(bo)!=="false"&&GE(L,bo,u)).map(bo=>{const Zo=L.clone(bo,!1);return Jv(e,Zo,u,o,sn),L.replace(Zo,sn,!0),L.remove(bo,!0),Zo}).getOr(sn),lt=Ge(yt);if((J.length>1||!L.isBlock(yt))&&lt===0){L.remove(yt,!0);return}(bt(u)||ft(u)&&u.wrapper)&&(!u.exact&&lt===1&&(yt=ze(yt)),wz(e,a,o,yt),CT(e,u,n,o,yt),yz(L,u,o,yt),vz(L,u,o,yt),Cz(L,u,o,yt),ty(e,u,o,yt))})},M=gh(r)?r:v.getNode();if(h.getContentEditable(M)==="false"&&!m(e,M)){r=M,w(a,r),Et(e,n,r,o);return}if(u){if(r)if(gh(r)){if(!w(a,r)){const L=h.createRng();L.setStartBefore(r),L.setEndAfter(r),R(h,vm(h,L,a),!0)}}else R(h,r,!0);else!f||!bt(u)||fh(e).length?(v.setRng(QE(v.getRng())),uE(e,()=>{EC(e,(L,K)=>{const W=K?L:vm(h,L,a);R(h,W,!1)})},Ve),e.nodeChanged()):AM(e,n,o),N9(e.formatter,n).each(L=>{te(DY(e.selection),K=>A9(h,K,L,o))});bz(n,e)}Et(e,n,r,o)},YC=(e,n,o,r)=>{(r||e.selection.isEditable())&&xz(e,n,o,r)},zF=e=>Jt(e,"vars"),Ez=(e,n)=>{e.set({}),n.on("NodeChange",o=>{ZF(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=F.from(o.node).map(a=>gh(a)?a:a.startContainer).bind(a=>gn(a)?F.some(a):F.from(a.parentElement)).getOrThunk(()=>VF(n));ZF(n,r,e.get())})},VF=e=>e.selection.getStart(),UF=(e,n,o,r,a)=>et(n,h=>{const v=e.formatter.matchNode(h,o,a??{},r);return!ro(v)},h=>CM(e,h,o)?!0:r?!1:xe(e.formatter.matchNode(h,o,a,!0))),WF=(e,n)=>{const o=n??VF(e);return Ce(z(e.dom,o),r=>gn(r)&&!Rg(r))},ZF=(e,n,o)=>{const r=WF(e,n);yo(o,(a,u)=>{const f=h=>{const v=UF(e,r,u,h.similar,zF(h)?h.vars:void 0),w=v.isSome();if(h.state.get()!==w){h.state.set(w);const D=v.getOr(n);zF(h)?h.callback(w,{node:D,format:u,parents:r}):te(h.callbacks,R=>R(w,{node:D,format:u,parents:r}))}};te([a.withSimilar,a.withoutSimilar],f),te(a.withVars,f)})},Tz=(e,n,o,r,a,u)=>{const f=n.get();te(o.split(","),h=>{const v=dn(f,h).getOrThunk(()=>{const D={withSimilar:{state:Yt(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Yt(!1),similar:!1,callbacks:[]},withVars:[]};return f[h]=D,D}),w=()=>{const D=WF(e);return UF(e,D,h,a,u).isSome()};if(ro(u)){const D=a?v.withSimilar:v.withoutSimilar;D.callbacks.push(r),D.callbacks.length===1&&D.state.set(w())}else v.withVars.push({state:Yt(w()),similar:a,vars:u,callback:r})}),n.set(f)},Az=(e,n,o)=>{const r=e.get();te(n.split(","),a=>dn(r,a).each(u=>{r[a]={withSimilar:{...u.withSimilar,callbacks:Ce(u.withSimilar.callbacks,f=>f!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:Ce(u.withoutSimilar.callbacks,f=>f!==o)},withVars:Ce(u.withVars,f=>f.callback!==o)}})),e.set(r)},kz=(e,n,o,r,a,u)=>(Tz(e,n,o,r,a,u),{unbind:()=>Az(n,o,r)}),Dz=(e,n,o,r)=>{const a=e.formatter.get(n);a&&(Dk(e,n,o,r)&&(!("toggle"in a[0])||a[0].toggle)?Na(e,n,o,r):YC(e,n,o,r))},CD=(e,n,o)=>({element:e,width:n,rows:o}),Oz=(e,n)=>({element:e,cells:n}),xm=(e,n)=>({x:e,y:n}),wD=(e,n)=>ji(e,n).bind(td).getOr(1),_z=(e,n,o,r,a)=>{const u=wD(a,"rowspan"),f=wD(a,"colspan"),h=e.rows;for(let v=o;v<o+u;v++){h[v]||(h[v]=Oz(Cu(r),[]));for(let w=n;w<n+f;w++){const D=h[v].cells;D[w]=v===o&&w===n?a:ic(a)}}},jF=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},Rz=(e,n,o)=>{for(;jF(e,n,o);)n++;return n},GF=e=>$e(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),Bz=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const a=o[r].cells;for(let u=0;u<a.length;u++)if(Io(a[u],n))return F.some(xm(u,r))}return F.none()},Ja=(e,n,o,r,a)=>{const u=[],f=e.rows;for(let h=o;h<=a;h++){const v=f[h].cells,w=n<r?v.slice(n,r+1):v.slice(r,n+1);u.push(Oz(f[h].element,w))}return u},Mz=(e,n,o)=>{const r=n.x,a=n.y,u=o.x,f=o.y,h=a<f?Ja(e,r,a,u,f):Ja(e,r,f,u,a);return CD(e.element,GF(h),h)},SD=(e,n)=>{const o=ic(e.element),r=ee.fromTag("tbody");return Zi(r,n),is(o,r),o},qF=e=>ae(e.rows,n=>{const o=ae(n.cells,a=>{const u=Cu(a);return cc(u,"colspan"),cc(u,"rowspan"),u}),r=ic(n.element);return Zi(r,o),r}),ST=e=>{const n=CD(ic(e),0,[]);return te(ge(e,"tr"),(o,r)=>{te(ge(o,"td,th"),(a,u)=>{_z(n,Rz(n,u,r),r,o,a)})}),CD(n.element,GF(n.rows),n.rows)},Fz=e=>SD(e,qF(e)),Nz=(e,n,o)=>Bz(e,n).bind(r=>Bz(e,o).map(a=>Mz(e,r,a))),Pz=e=>Xt(e,n=>xo(n)==="ul"||xo(n)==="ol"),$z=(e,n)=>Xt(e,o=>xo(o)==="li"&&xC(o,n)).fold(tt([]),o=>Pz(e).map(r=>{const a=ee.fromTag(xo(r)),u=Ot(Af(r),(f,h)=>Ln(h,"list-style"));return ri(a,u),[ee.fromTag("li"),a]}).getOr([])),Iz=(e,n)=>{const o=$e(n,(r,a)=>(is(a,r),a),e);return n.length>0?qd([o]):o},KF=e=>sm(e)?Va(e).filter(qb).fold(tt([]),n=>[e,n]):qb(e)?[e]:[],Lz=(e,n,o)=>{const r=ee.fromDom(n.commonAncestorContainer),a=Xf(r,e),u=Ce(a,v=>o.isWrapper(xo(v))),f=$z(a,n),h=u.concat(f.length?f:KF(r));return ae(h,ic)},xD=()=>qd([]),YF=(e,n,o)=>Iz(ee.fromDom(n.cloneContents()),Lz(e,n,o)),Hz=(e,n)=>Xr(n,"table",He(Io,e)),zz=(e,n)=>Hz(e,n[0]).bind(o=>{const r=n[0],a=n[n.length-1],u=ST(o);return Nz(u,r,a).map(f=>qd([Fz(f)]))}).getOrThunk(xD),Vz=(e,n,o)=>n.length>0&&n[0].collapsed?xD():YF(e,n[0],o),Uz=(e,n,o)=>{const r=Hv(n,e);return r.length>0?zz(e,r):Vz(e,n,o)},xT=(e,n)=>n>=0&&n<e.length&&rf(e.charAt(n)),XC=e=>ki(e.innerText),XF=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),JF=e=>F.from(e.selection.getRng()).map(n=>{const o=F.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),r=e.getBody(),a=XF(o),u=ee.fromDom(n.cloneContents());yL(u),SB(u);const f=e.dom.add(r,a,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},u.dom),h=XC(f),v=ki(f.textContent??"");if(e.dom.remove(f),xT(v,0)||xT(v,v.length-1)){const w=o.getOr(r),D=XC(w),R=D.indexOf(h);if(R===-1)return h;{const M=xT(D,R-1),L=xT(D,R+h.length);return(M?" ":"")+h+(L?" ":"")}}else return h}).getOr(""),Wz=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),a=e.selection.getSel(),u=hB(e,kp(a)),f=n.contextual?Uz(ee.fromDom(e.getBody()),u,e.schema).dom:o.cloneContents();return f&&r.appendChild(f),e.selection.serializer.serialize(r,n)},QF=(e,n)=>{if(n.format==="text")return JF(e);{const o=Wz(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},Zz=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),jz=(e,n,o={})=>{const r=Zz(o,n);return _0(e,r).fold(No,a=>{const u=QF(e,a);return iD(e,u,a)})},ED=0,ET=1,TT=2,Gz=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),a=new Array(o),u=(D,R,M)=>({start:D,end:R,diag:M}),f=(D,R,M,L,K)=>{const W=v(D,R,M,L);if(W===null||W.start===R&&W.diag===R-L||W.end===D&&W.diag===D-M){let J=D,pe=M;for(;J<R||pe<L;)J<R&&pe<L&&e[J]===n[pe]?(K.push([ED,e[J]]),++J,++pe):R-D>L-M?(K.push([TT,e[J]]),++J):(K.push([ET,n[pe]]),++pe)}else{f(D,W.start,M,W.start-W.diag,K);for(let J=W.start;J<W.end;++J)K.push([ED,e[J]]);f(W.end,R,W.end-W.diag,L,K)}},h=(D,R,M,L)=>{let K=D;for(;K-R<L&&K<M&&e[K]===n[K-R];)++K;return u(D,K,R)},v=(D,R,M,L)=>{const K=R-D,W=L-M;if(K===0||W===0)return null;const J=K-W,pe=W+K,be=(pe%2===0?pe:pe+1)/2;r[1+be]=D,a[1+be]=R+1;let Se,Ze,it,$t,yt;for(Se=0;Se<=be;++Se){for(Ze=-Se;Ze<=Se;Ze+=2){for(it=Ze+be,Ze===-Se||Ze!==Se&&r[it-1]<r[it+1]?r[it]=r[it+1]:r[it]=r[it-1]+1,$t=r[it],yt=$t-D+M-Ze;$t<R&&yt<L&&e[$t]===n[yt];)r[it]=++$t,++yt;if(J%2!==0&&J-Se<=Ze&&Ze<=J+Se&&a[it-J]<=r[it])return h(a[it-J],Ze+D-M,R,L)}for(Ze=J-Se;Ze<=J+Se;Ze+=2){for(it=Ze+be-J,Ze===J-Se||Ze!==J+Se&&a[it+1]<=a[it-1]?a[it]=a[it+1]-1:a[it]=a[it-1],$t=a[it]-1,yt=$t-D+M-Ze;$t>=D&&yt>=M&&e[$t]===n[yt];)a[it]=$t--,yt--;if(J%2===0&&-Se<=Ze&&Ze<=Se&&a[it]<=r[it+J])return h(a[it],Ze+D-M,R,L)}}return null},w=[];return f(0,e.length,0,n.length,w),w},AT=e=>gn(e)?e.outerHTML:pt(e)?Pg.encodeRaw(e.data,!1):Zr(e)?"<!--"+e.data+"-->":"",qz=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},Kz=(e,n,o)=>{const r=qz(n);if(e.hasChildNodes()&&o<e.childNodes.length){const a=e.childNodes[o];e.insertBefore(r,a)}else e.appendChild(r)},Yz=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},Xz=(e,n)=>{let o=0;te(e,r=>{r[0]===ED?o++:r[0]===ET?(Kz(n,r[1],o),o++):r[0]===TT&&Yz(n,o)})},Jz=(e,n)=>Ce(ae(Xo(e.childNodes),k(ki,AT)),o=>o.length>0),Qz=(e,n)=>{const o=ae(Xo(n.childNodes),AT);return Xz(Gz(o,e),n),n},e6=Pc(()=>document.implementation.createHTMLDocument("undo")),eV=e=>e.querySelector("iframe")!==null,tV=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),nV=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),kT=e=>{const n=e.serializer.getTempAttrs(),o=AE(e.getBody(),n);return eV(o)?tV(Jz(o)):nV(ki(o.innerHTML))},TD=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?Qz(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:xe(r)&&Qx(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},AD=e=>e.type==="fragmented"?e.fragments.join(""):e.content,t6=e=>{const n=ee.fromTag("body",e6());return ld(n,AD(e)),te(ge(n,"*[data-mce-bogus]"),si),ta(n)},sy=(e,n)=>AD(e)===AD(n),DT=(e,n)=>t6(e)===t6(n),OT=(e,n)=>!e||!n?!1:sy(e,n)?!0:DT(e,n),_T=e=>e.get()===0,RT=(e,n,o)=>{_T(o)&&(e.typing=n)},n6=(e,n)=>{e.typing&&(RT(e,!1,n),e.add())},kD=e=>{e.typing&&(e.typing=!1,e.add())},oV=(e,n,o)=>{_T(n)&&o.set(W1(e.selection))},sV=(e,n,o,r,a,u,f)=>{const h=kT(e),v=Ct.extend(u||{},h);if(!_T(r)||e.removed)return null;const w=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:v,lastLevel:w,originalEvent:f}).isDefaultPrevented()||w&&OT(w,v))return null;n.data[o.get()]&&a.get().each(M=>{n.data[o.get()].beforeBookmark=M});const D=yx(e);if(D&&n.data.length>D){for(let M=0;M<n.data.length-1;M++)n.data[M]=n.data[M+1];n.data.length--,o.set(n.data.length)}v.bookmark=W1(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(v),o.set(n.data.length-1);const R={level:v,lastLevel:w,originalEvent:f};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",R),e.dispatch("change",R)):e.dispatch("AddUndo",R),v},rV=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},cV=(e,n,o,r,a)=>{if(n.transact(r)){const u=n.data[o.get()].bookmark,f=n.data[o.get()-1];TD(e,f,!0),n.transact(a)&&(n.data[o.get()-1].beforeBookmark=u)}},aV=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],TD(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},BT=(e,n,o,r)=>{let a;return n.typing&&(n.add(),n.typing=!1,RT(n,!1,o)),r.get()>0&&(r.set(r.get()-1),a=n.data[r.get()],TD(e,a,!0),e.setDirty(!0),e.dispatch("Undo",{level:a})),a},JC=e=>{e.clear(),e.add()},iV=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!OT(kT(e),n.data[0]),ry=(e,n)=>n.get()<e.data.length-1&&!e.typing,Zu=(e,n,o)=>(n6(e,n),e.beforeChange(),e.ignore(o),e.add()),QC=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},Ks=(e,n)=>{const o=e.dom,r=xe(n)?n:e.getBody();te(o.select("table,a",r),a=>{switch(a.nodeName){case"TABLE":const u=o0(e),f=o.getAttrib(a,"border");(!f||f==="0")&&e.hasVisual?o.addClass(a,u):o.removeClass(a,u);break;case"A":if(!o.getAttrib(a,"href")){const h=o.getAttrib(a,"name")||a.id,v=aC(e);h&&e.hasVisual?o.addClass(a,v):o.removeClass(a,v)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},cy=e=>({init:{bindEvents:rt},undoManager:{beforeChange:(n,o)=>oV(e,n,o),add:(n,o,r,a,u,f)=>sV(e,n,o,r,a,u,f),undo:(n,o,r)=>BT(e,n,o,r),redo:(n,o)=>aV(e,n,o),clear:(n,o)=>rV(e,n,o),reset:n=>JC(n),hasUndo:(n,o)=>iV(e,n,o),hasRedo:(n,o)=>ry(n,o),transact:(n,o,r)=>Zu(n,o,r),ignore:(n,o)=>QC(n,o),extra:(n,o,r,a)=>cV(e,n,o,r,a)},formatter:{match:(n,o,r,a)=>Dk(e,n,o,r,a),matchAll:(n,o)=>k9(e,n,o),matchNode:(n,o,r,a)=>ym(e,n,o,r,a),canApply:n=>D9(e,n),closest:n=>or(e,n),apply:(n,o,r)=>YC(e,n,o,r),remove:(n,o,r,a)=>Na(e,n,o,r,a),toggle:(n,o,r)=>Dz(e,n,o,r),formatChanged:(n,o,r,a,u)=>kz(e,n,o,r,a,u)},editor:{getContent:n=>sk(e,n),setContent:(n,o)=>hz(e,n,o),insertContent:(n,o)=>mz(e,n,o),addVisual:n=>Ks(e,n)},selection:{getContent:(n,o)=>jz(e,n,o)},autocompleter:{addDecoration:rt,removeDecoration:rt},raw:{getModel:()=>F.none()}}),o6=e=>{const n=w=>En(w)?w:{},{init:o,undoManager:r,formatter:a,editor:u,selection:f,autocompleter:h,raw:v}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(w,D,R)=>r.transact(R),ignore:(w,D)=>r.ignore(D),extra:(w,D,R,M)=>r.extra(R,M)},formatter:{match:(w,D,R,M)=>a.match(w,n(D),M),matchAll:a.matchAll,matchNode:a.matchNode,canApply:w=>a.canApply(w),closest:w=>a.closest(w),apply:(w,D,R)=>a.apply(w,n(D)),remove:(w,D,R,M)=>a.remove(w,n(D)),toggle:(w,D,R)=>a.toggle(w,n(D)),formatChanged:(w,D,R,M,L)=>a.formatChanged(D,R,M,L)},editor:{getContent:w=>u.getContent(w),setContent:(w,D)=>({content:u.setContent(w,D),html:""}),insertContent:(w,D)=>(u.insertContent(w),""),addVisual:u.addVisual},selection:{getContent:(w,D)=>f.getContent(D)},autocompleter:{addDecoration:h.addDecoration,removeDecoration:h.removeDecoration},raw:{getModel:()=>F.some(v.getRawModel())}}},s6=()=>{const e=tt(null),n=tt("");return{init:{bindEvents:rt},undoManager:{beforeChange:rt,add:e,undo:e,redo:e,clear:rt,reset:rt,hasUndo:Ae,hasRedo:Ae,transact:e,ignore:rt,extra:rt},formatter:{match:Ae,matchAll:tt([]),matchNode:tt(void 0),canApply:Ae,closest:n,apply:rt,remove:rt,toggle:rt,formatChanged:tt({unbind:rt})},editor:{getContent:n,setContent:tt({content:"",html:""}),insertContent:tt(""),addVisual:rt},selection:{getContent:n},autocompleter:{addDecoration:rt,removeDecoration:rt},raw:{getModel:tt(F.none())}}},Bd=e=>Jt(e.plugins,"rtc"),DD=e=>dn(e.plugins,"rtc").bind(n=>F.from(n.setup)),OD=e=>{const n=e;return DD(e).fold(()=>(n.rtcInstance=cy(e),F.none()),o=>(n.rtcInstance=s6(),F.some(()=>o().then(r=>(n.rtcInstance=o6(r),r.rtc.isRemote)))))},ew=e=>e.rtcInstance?e.rtcInstance:cy(e),Fc=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},MT=(e,n,o)=>{Fc(e).undoManager.beforeChange(n,o)},_D=(e,n,o,r,a,u,f)=>Fc(e).undoManager.add(n,o,r,a,u,f),r6=(e,n,o,r)=>Fc(e).undoManager.undo(n,o,r),c6=(e,n,o)=>Fc(e).undoManager.redo(n,o),a6=(e,n,o)=>{Fc(e).undoManager.clear(n,o)},i6=(e,n)=>{Fc(e).undoManager.reset(n)},l6=(e,n,o)=>Fc(e).undoManager.hasUndo(n,o),R0=(e,n,o)=>Fc(e).undoManager.hasRedo(n,o),u6=(e,n,o,r)=>Fc(e).undoManager.transact(n,o,r),RD=(e,n,o)=>{Fc(e).undoManager.ignore(n,o)},lV=(e,n,o,r,a)=>{Fc(e).undoManager.extra(n,o,r,a)},uV=(e,n,o,r,a)=>Fc(e).formatter.match(n,o,r,a),d6=(e,n,o)=>Fc(e).formatter.matchAll(n,o),m6=(e,n,o,r,a)=>Fc(e).formatter.matchNode(n,o,r,a),f6=(e,n)=>Fc(e).formatter.canApply(n),FT=(e,n)=>Fc(e).formatter.closest(n),g6=(e,n,o,r)=>{Fc(e).formatter.apply(n,o,r)},h6=(e,n,o,r,a)=>{Fc(e).formatter.remove(n,o,r,a)},p6=(e,n,o,r)=>{Fc(e).formatter.toggle(n,o,r)},b6=(e,n,o,r,a,u)=>Fc(e).formatter.formatChanged(n,o,r,a,u),v6=(e,n)=>ew(e).editor.getContent(n),y6=(e,n,o)=>ew(e).editor.setContent(n,o),C6=(e,n,o)=>ew(e).editor.insertContent(n,o),w6=(e,n,o)=>Fc(e).selection.getContent(n,o),S6=(e,n)=>Fc(e).editor.addVisual(n),BD=e=>Fc(e).init.bindEvents(),MD=(e,n={})=>{const o=n.format?n.format:"html";return w6(e,o,n)},FD=(e,n,o)=>{if(Jt(e,n)){const r=Ce(e[n],a=>a!==o);r.length===0?delete e[n]:e[n]=r}};var x6=(e,n)=>{let o,r;const a=(h,v)=>Xt(v,w=>e.is(w,h)),u=h=>e.getParents(h,void 0,e.getRoot()),f=()=>{o={},r={},n.on("NodeChange",h=>{const v=h.element,w=u(v),D={};yo(o,(R,M)=>{a(M,w).each(L=>{r[M]||(te(R,K=>{K(!0,{node:L,selector:M,parents:w})}),r[M]=R),D[M]=R})}),yo(r,(R,M)=>{D[M]||(delete r[M],te(R,L=>{L(!1,{node:v,selector:M,parents:w})}))})})};return{selectorChangedWithUnbind:(h,v)=>(o||f(),o[h]||(o[h]=[]),o[h].push(v),a(h,u(n.selection.getStart())).each(()=>{r[h]=o[h]}),{unbind:()=>{FD(o,h,v),FD(r,h,v)}})}};const ND=e=>!!(e&&e.ownerDocument)&&za(ee.fromDom(e.ownerDocument),ee.fromDom(e)),E6=e=>e?ND(e.startContainer)&&ND(e.endContainer):!1,PD=(e,n,o,r)=>{let a,u;const{selectorChangedWithUnbind:f}=x6(e,r),h=(Vt,Rn)=>{const ks=e.createRng();xe(Vt)&&xe(Rn)?(ks.setStart(Vt,Rn),ks.setEnd(Vt,Rn),Ze(ks),pe(!1)):(Dp(e,ks,r.getBody(),!0),Ze(ks))},v=Vt=>MD(r,Vt),w=(Vt,Rn)=>OF(r,Vt,Rn),D=Vt=>lL(r.getBody(),Se(),Vt),R=Vt=>gB(r.getBody(),Se(),Vt),M=(Vt,Rn)=>Kc.getBookmark(Vt,Rn),L=Vt=>Kc.moveToBookmark(Vt),K=(Vt,Rn)=>(mL(e,Vt,Rn).each(Ze),Vt),W=()=>{const Vt=Se(),Rn=be();return!Vt||Vt.item?!1:Vt.compareEndPoints?Vt.compareEndPoints("StartToEnd",Vt)===0:!Rn||Vt.collapsed},J=()=>{if(r.mode.isReadOnly())return!1;const Vt=Se(),Rn=r.getBody().querySelectorAll('[data-mce-selected="1"]');return Rn.length>0?ns(Rn,ks=>e.isEditable(ks.parentElement)):fB(e,Vt)},pe=Vt=>{const Rn=Se();Rn.collapse(!!Vt),Ze(Rn)},be=()=>n.getSelection?n.getSelection():n.document.selection,Se=()=>{let Vt;const Rn=(Ds,Tn,wt)=>{try{return Tn.compareBoundaryPoints(Ds,wt)}catch{return-1}},ks=n.document;if(xe(r.bookmark)&&!Uu(r)){const Ds=kC(r);if(Ds.isSome())return Ds.map(Tn=>hB(r,[Tn])[0]).getOr(ks.createRange())}try{const Ds=be();Ds&&!u2(Ds.anchorNode)&&(Ds.rangeCount>0?Vt=Ds.getRangeAt(0):Vt=ks.createRange(),Vt=hB(r,[Vt])[0])}catch{}if(Vt||(Vt=ks.createRange()),_o(Vt.startContainer)&&Vt.collapsed){const Ds=e.getRoot();Vt.setStart(Ds,0),Vt.setEnd(Ds,0)}return a&&u&&(Rn(Vt.START_TO_START,Vt,a)===0&&Rn(Vt.END_TO_END,Vt,a)===0?Vt=u:(a=null,u=null)),Vt},Ze=(Vt,Rn)=>{if(!E6(Vt))return;const ks=be();if(Vt=r.dispatch("SetSelectionRange",{range:Vt,forward:Rn}).range,ks){u=Vt;try{ks.removeAllRanges(),ks.addRange(Vt)}catch{}Rn===!1&&ks.extend&&(ks.collapse(Vt.endContainer,Vt.endOffset),ks.extend(Vt.startContainer,Vt.startOffset)),a=ks.rangeCount>0?ks.getRangeAt(0):null}if(!Vt.collapsed&&Vt.startContainer===Vt.endContainer&&(ks!=null&&ks.setBaseAndExtent)&&Vt.endOffset-Vt.startOffset<2&&Vt.startContainer.hasChildNodes()){const Tn=Vt.startContainer.childNodes[Vt.startOffset];Tn&&Tn.nodeName==="IMG"&&(ks.setBaseAndExtent(Vt.startContainer,Vt.startOffset,Vt.endContainer,Vt.endOffset),(ks.anchorNode!==Vt.startContainer||ks.focusNode!==Vt.endContainer)&&ks.setBaseAndExtent(Tn,0,Tn,1))}r.dispatch("AfterSetSelectionRange",{range:Vt,forward:Rn})},it=Vt=>(fT(r,e.getOuterHTML(Vt)),Vt),$t=()=>uL(r.getBody(),Se()),yt=(Vt,Rn)=>dL(e,Se(),Vt,Rn),Ge=()=>{const Vt=be(),Rn=Vt==null?void 0:Vt.anchorNode,ks=Vt==null?void 0:Vt.focusNode;if(!Vt||!Rn||!ks||u2(Rn)||u2(ks))return!0;const Ds=e.createRng(),Tn=e.createRng();try{Ds.setStart(Rn,Vt.anchorOffset),Ds.collapse(!0),Tn.setStart(ks,Vt.focusOffset),Tn.collapse(!0)}catch{return!0}return Ds.compareBoundaryPoints(Ds.START_TO_START,Tn)<=0},Tc={dom:e,win:n,serializer:o,editor:r,expand:(Vt={type:"word"})=>Ze(Yf(e).expand(Se(),Vt)),collapse:pe,setCursorLocation:h,getContent:v,setContent:w,getBookmark:M,moveToBookmark:L,select:K,isCollapsed:W,isEditable:J,isForward:Ge,setNode:it,getNode:$t,getSel:be,setRng:Ze,getRng:Se,getStart:D,getEnd:R,getSelectedBlocks:yt,normalize:()=>{const Vt=Se(),Rn=be();if(!CC(Rn)&&Vv(r)){const ks=C0(e,Vt);return ks.each(Ds=>{Ze(Ds,Ge())}),ks.getOr(Vt)}return Vt},selectorChanged:(Vt,Rn)=>(f(Vt,Rn),Tc),selectorChangedWithUnbind:f,getScrollContainer:()=>{let Vt,Rn=e.getRoot();for(;Rn&&Rn.nodeName!=="BODY";){if(Rn.scrollHeight>Rn.clientHeight){Vt=Rn;break}Rn=Rn.parentNode}return Vt},scrollIntoView:(Vt,Rn)=>{xe(Vt)?mB(r,Vt,Rn):w0(r,Se(),Rn)},placeCaretAt:(Vt,Rn)=>Ze(J5(Vt,Rn,r.getDoc())),getBoundingClientRect:()=>{const Vt=Se();return Vt.collapsed?Le.fromRangeStart(Vt).getClientRects()[0]:Vt.getBoundingClientRect()},destroy:()=>{n=a=u=null,Ld.destroy()}},Kc=y0(Tc),Ld=X5(Tc,r);return Tc.bookmarkManager=Kc,Tc.controlSelection=Ld,Tc},T6=(e,n,o)=>{n.addNodeFilter("br",(r,a,u)=>{const f=Ct.extend({},o.getBlockElements()),h=o.getNonEmptyElements(),v=o.getWhitespaceElements();f.body=1;const w=D=>D.name in f||E1(o,D);for(let D=0,R=r.length;D<R;D++){let M=r[D],L=M.parent;if(L&&w(L)&&M===L.lastChild){let K=M.prev;for(;K;){const W=K.name;if(W!=="span"||K.attr("data-mce-type")!=="bookmark"){W==="br"&&(M=null);break}K=K.prev}if(M&&(M.remove(),IC(o,h,v,L))){const W=o.getElementRule(L.name);W&&(W.removeEmpty?L.remove():W.paddEmpty&&Uk(e,u,w,L))}}else{let K=M;for(;L&&L.firstChild===K&&L.lastChild===K&&(K=L,!f[L.name]);)L=L.parent;if(K===L){const W=new hi("#text",3);W.value=mr,M.replace(W)}}}})},A6=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,a)=>{let u=r.length;for(;u--;){const f=r[u];f.attr("tabindex",f.attr("data-mce-tabindex")),f.attr(a,null)}}),e.addAttributeFilter("src,href,style",(r,a)=>{const u="data-mce-"+a,f=n.url_converter,h=n.url_converter_scope;let v=r.length;for(;v--;){const w=r[v];let D=w.attr(u);D!==void 0?(w.attr(a,D.length>0?D:null),w.attr(u,null)):(D=w.attr(a),a==="style"?D=o.serializeStyle(o.parseStyle(D),w.name):f&&(D=f.call(h,D,a,w.name)),w.attr(a,D.length>0?D:null))}}),e.addAttributeFilter("class",r=>{let a=r.length;for(;a--;){const u=r[a];let f=u.attr("class");f&&(f=f.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",f.length>0?f:null))}}),e.addAttributeFilter("data-mce-type",(r,a,u)=>{let f=r.length;for(;f--;){const h=r[f];h.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(F.from(h.firstChild).exists(w=>!Yb(w.value??""))?h.unwrap():h.remove())}}),e.addNodeFilter("script,style",(r,a)=>{const u=h=>h.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let f=r.length;for(;f--;){const h=r[f],v=h.firstChild,w=(v==null?void 0:v.value)??"";if(a==="script"){const D=h.attr("type");D&&h.attr("type",D==="mce-no/type"?null:D.replace(/^mce\-/,"")),n.element_format==="xhtml"&&v&&w.length>0&&(v.value=`// <![CDATA[
`+u(w)+`
// ]]>`)}else n.element_format==="xhtml"&&v&&w.length>0&&(v.value=`<!--
`+u(w)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let a=r.length;for(;a--;){const u=r[a],f=u.value;n.preserve_cdata&&(f==null?void 0:f.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(f.replace(/^\[CDATA\[|\]\]$/g,""))):(f==null?void 0:f.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(f).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,a)=>{let u=r.length;for(;u--;){const f=r[u];f.type===7?f.remove():f.type===1&&a==="input"&&!f.attr("type")&&f.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{te(r,a=>{a.attr("data-mce-type")==="format-caret"&&(a.isEmpty(e.schema.getNonEmptyElements())?a.remove():a.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,a)=>{let u=r.length;for(;u--;)r[u].attr(a,null)}),n.remove_trailing_brs&&T6(n,e,e.schema)},$D=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},NT=(e,n,o)=>{let r;const a=e.dom;let u=n.cloneNode(!0);const f=document.implementation;if(f.createHTMLDocument){const h=f.createHTMLDocument("");Ct.each(u.nodeName==="BODY"?u.childNodes:[u],v=>{h.body.appendChild(h.importNode(v,!0))}),u.nodeName!=="BODY"?u=h.body.firstChild:u=h.body,r=a.doc,a.doc=h}return Sd(e,{...o,node:u}),r&&(a.doc=r),u},k6=(e,n)=>xe(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,dV=(e,n,o)=>k6(e,o)?NT(e,n,o):n,D6=(e,n,o)=>{Ct.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,a)=>{let u=r.length;for(;u--;)r[u].attr(a,null)}),n.push(o))},PT=(e,n,o)=>!n.no_events&&e?nx(e,{...n,content:o}).content:o,ID=(e,n,o)=>{const r=ki(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||Qi(ee.fromDom(n))?r:Ct.trim(r)},tw=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,a=e.parse(n,r);return $D(a),a},LD=(e,n,o)=>x0(e,n).serialize(o),O6=(e,n,o,r,a)=>{const u=LD(n,o,r);return PT(e,a,u)},ay=(e,n)=>{const o=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},a=n&&n.dom?n.dom:Bs.DOM,u=n&&n.schema?n.schema:Ru(r),f=O0(r,u);A6(f,r,a);const h=(v,w={})=>{const{indent:D,entity_encoding:R,...M}=w,L={format:"html",...M},K=dV(n,v,L),W=ID(a,K,L),J=tw(f,W,L);if(L.format==="tree")return J;const pe={...r,...xe(D)?{indent:D}:{},...xe(R)?{entity_encoding:R}:{}};return O6(n,pe,u,J,L)};return{schema:u,addNodeFilter:f.addNodeFilter,addAttributeFilter:f.addAttributeFilter,serialize:h,addRules:u.addValidElements,setRules:u.setValidElements,addTempAttr:He(D6,f,o),getTempAttrs:tt(o),getNodeFilters:f.getNodeFilters,getAttributeFilters:f.getAttributeFilters,removeNodeFilter:f.removeNodeFilter,removeAttributeFilter:f.removeAttributeFilter}},$T=(e,n)=>{const o=ay(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},HD="html",iy=(e,n)=>({...e,format:n,get:!0,getInner:!0}),Hp=(e,n={})=>{const o=n.format?n.format:HD,r=iy(n,o);return _0(e,r).fold(No,a=>{const u=v6(e,a);return iD(e,u,a)})},_6="html",mV=(e,n)=>({format:_6,...e,set:!0,content:n}),zD=(e,n,o={})=>{const r=mV(o,n);lT(e,r).each(a=>{const u=y6(e,a.content,a);uT(e,u.html,a)})},nw=Bs.DOM,R6=e=>{nw.setStyle(e.id,"display",e.orgDisplay)},ow=e=>F.from(e).each(n=>n.destroy()),fV=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},zp=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),nw.unbind(n,"submit reset",e.formEventDelegate))},B0=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),a=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&xe(a==null?void 0:a.nextSibling)&&nw.remove(a.nextSibling),ef(e),e.editorManager.remove(e),!e.inline&&r&&R6(e),Pu(e),nw.remove(e.getContainer()),ow(n),ow(o),e.destroy()}},B6=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),ow(o),ow(r)),zp(e),fV(e),e.destroyed=!0}},IT=(()=>{const e={};return{add:(a,u)=>{e[a]=u},get:a=>e[a]?e[a]:{icons:{}},has:a=>Jt(e,a)}})(),ly=Ra.ModelManager,M6=(e,n)=>n.dom[e],Ol=(e,n)=>parseInt($r(n,e),10),Em=He(M6,"clientWidth"),F6=He(M6,"clientHeight"),VD=He(Ol,"margin-top"),UD=He(Ol,"margin-left"),LT=e=>e.dom.getBoundingClientRect(),hV=(e,n,o)=>{const r=Em(e),a=F6(e);return n>=0&&o>=0&&n<=r&&o<=a},N6=(e,n,o,r)=>{const a=LT(n),u=e?a.left+n.dom.clientLeft+UD(n):0,f=e?a.top+n.dom.clientTop+VD(n):0,h=o-u,v=r-f;return{x:h,y:v}},sw=(e,n,o)=>{const r=ee.fromDom(e.getBody()),a=e.inline?r:rc(r),u=N6(e.inline,a,n,o);return hV(a,u.x,u.y)},pV=e=>F.from(e).map(ee.fromDom),HT=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return pV(n).map(Ts).getOr(!1)};var WD=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const ZD=e=>{const n=[],o=()=>{const M=e.theme;return M&&M.getNotificationManagerImpl?M.getNotificationManagerImpl():WD()},r=()=>F.from(n[0]),a=(M,L)=>M.type===L.type&&M.text===L.text&&!M.progressBar&&!M.timeout&&!L.progressBar&&!L.timeout,u=()=>{r().each(M=>{M.reposition()})},f=M=>{n.push(M)},h=M=>{oo(n,L=>L===M).each(L=>{n.splice(L,1)})},v=(M,L=!0)=>e.removed||!HT(e)?{}:(L&&e.dispatch("BeforeOpenNotification",{notification:M}),Xt(n,K=>a(o().getArgs(K),M)).getOrThunk(()=>{e.editorManager.setActive(e);const K=o().open(M,()=>{h(K)},()=>Gv(e));return f(K),u(),e.dispatch("OpenNotification",{notification:{...K}}),K})),w=()=>{r().each(M=>{o().close(M),h(M),u()})},D=tt(n);return(M=>{M.on("SkinLoaded",()=>{const L=rC(M);L&&v({text:L,type:"warning",timeout:0},!1),u()}),M.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(u)}),M.on("remove",()=>{te(n.slice(),L=>{o().close(L)})}),M.on("keydown",L=>{var W;const K=((W=L.key)==null?void 0:W.toLowerCase())==="f12"||L.keyCode===123;L.altKey&&K&&(L.preventDefault(),r().map(J=>ee.fromDom(J.getEl())).each(J=>Sg(J)))})})(e),{open:v,close:w,getNotifications:D}},tg=Ra.PluginManager,M0=Ra.ThemeManager;var bV=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const Tm=e=>{let n=[];const o=()=>{const J=e.theme;return J&&J.getWindowManagerImpl?J.getWindowManagerImpl():bV()},r=(J,pe)=>(...be)=>pe?pe.apply(J,be):void 0,a=J=>{e.dispatch("OpenWindow",{dialog:J})},u=J=>{e.dispatch("CloseWindow",{dialog:J})},f=(J,pe)=>{n.push({instanceApi:J,triggerElement:pe}),a(J)},h=J=>{u(J);const pe=Os(n,({instanceApi:be,triggerElement:Se})=>be===J?Se:F.none());n=Ce(n,({instanceApi:be})=>be!==J),n.length===0?e.focus():pe.filter(Ts).each(Sg)},v=()=>F.from(n[n.length-1]),w=J=>{e.editorManager.setActive(e),pE(e);const pe=pl();e.ui.show();const be=J();return f(be,pe),be},D=(J,pe)=>w(()=>o().open(J,pe,h)),R=J=>w(()=>o().openUrl(J,h)),M=J=>{n.length!==0&&J.each(pe=>Sg(pe))},L=(J,pe,be)=>{const Se=pl(),Ze=o();Ze.alert(J,r(be||Ze,()=>{M(Se),pe==null||pe()}))},K=(J,pe,be)=>{const Se=pl(),Ze=o();Ze.confirm(J,r(be||Ze,it=>{M(Se),pe==null||pe(it)}))},W=()=>{v().each(({instanceApi:J})=>{o().close(J),h(J)})};return e.on("remove",()=>{te(n,({instanceApi:J})=>{o().close(J)})}),{open:D,openUrl:R,alert:L,confirm:K,close:W}},_l=(e,n)=>{e.notificationManager.open({type:"error",text:n})},Vp=(e,n)=>{e._skinLoaded?_l(e,n):e.on("SkinLoaded",()=>{_l(e,n)})},au=(e,n)=>{Vp(e,Mu.translate(["Failed to upload image: {0}",n]))},F0=(e,n,o)=>{Y2(e,n,{message:o}),console.error(o)},Is=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,vV=(e,n,o)=>{F0(e,"PluginLoadError",Is("plugin",n,o))},kh=(e,n,o)=>{F0(e,"IconsLoadError",Is("icons",n,o))},rw=(e,n,o)=>{F0(e,"LanguageLoadError",Is("language",n,o))},P6=(e,n,o)=>{F0(e,"ThemeLoadError",Is("theme",n,o))},jD=(e,n,o)=>{F0(e,"ModelLoadError",Is("model",n,o))},GD=(e,n)=>{F0(e,"LicenseKeyManagerLoadError",Is("license key manager",n))},yV=(e,n)=>{F0(e,"ComponentLoadError",Is("component",n))},qD=(e,n,o)=>{const r=Mu.translate(["Failed to initialize plugin: {0}",n]);Y2(e,"PluginLoadError",{message:r}),zT(r,o),Vp(e,r)},zT=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},KD=new WeakMap,$6=e=>{if(KD.has(e))return;KD.set(e,!0);const n=()=>{e.on("SwitchMode",r=>{const{mode:a}=r;a!=="readonly"&&e.mode.set("readonly")})},o=()=>{e.on("DisabledStateChange",r=>{const{state:a}=r;a||r.preventDefault()},!0)};e.initialized?(e.removed||e.mode.set("readonly"),e.options.set("disabled",!0)):e.on("init",()=>{e.removed||e.mode.set("readonly"),e.options.set("disabled",!0)}),o(),n()},VT=(e,n)=>{const{type:o,message:r}=n;e.notificationManager.open({type:o,text:r})},I6=e=>{switch(e){case"error":return console.error;case"info":return console.info;case"warn":return console.warn;case"log":default:return console.log}},UT=e=>{I6(e.type)(e.message)},YD=(e,n)=>{const{console:o,editor:r}=n;xe(r)&&(e._skinLoaded?VT(e,r):e.on("SkinLoaded",()=>{VT(e,r)})),xe(o)&&UT(o)},XD="Read more: https://www.tiny.cloud/docs/tinymce/latest/license-key/",CV="Make sure to provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms.",wV=e=>{const n="The editor is disabled because a TinyMCE license key has not been provided.";YD(e,{console:{type:"error",message:[`${n}`,CV,XD].join(" ")},editor:{type:"warning",message:`${n}`}})},L6=(e,n)=>{const o=`${n==="online"?"API":"license"} key`,r=`The editor is disabled because the TinyMCE ${o} could not be validated.`;YD(e,{console:{type:"error",message:[`${r}`,`The TinyMCE Commercial License Key Manager plugin is required for the provided ${o} to be validated but could not be loaded.`,XD].join(" ")},editor:{type:"warning",message:`${r}`}})},H6=(e,n)=>{const o=`The "${n}" plugin requires a valid TinyMCE license key.`;YD(e,{console:{type:"error",message:[`${o}`,XD].join(" ")}})},z6="licensekeymanager",V6=e=>re(Mx(e))?"online":"offline",SV=e=>{var o;const n=(o=c0(e))==null?void 0:o.toLowerCase();return n==="gpl"?"gpl":pn(n)?"no_key":"non_gpl"},JD=e=>{const n=V6(e),o=SV(e),r=new Set(sh(e)).has(z6);return o!=="gpl"||n==="online"||r?{type:"use_plugin",onlineStatus:n,licenseKeyType:o,forcePlugin:r}:{type:"use_gpl",onlineStatus:n,licenseKeyType:o,forcePlugin:r}},cw=e=>({validate:n=>{const{plugin:o}=n;return re(o)&&H6(e,o),Promise.resolve(!1)}}),xV=e=>({validate:n=>{const{plugin:o}=n,r=re(o);return r&&H6(e,o),Promise.resolve(!r)}}),WT="manager",U6=z6,QD=(()=>{const e=Ra();return{load:(a,u)=>{if(JD(a).type==="use_plugin"){const h=`plugins/${U6}/plugin${u}.js`;e.load(WT,h).catch(()=>{GD(a,h)})}},add:a=>{e.add(WT,a)},init:a=>{const u=v=>{Object.defineProperty(a,"licenseKeyManager",{value:v,writable:!1,configurable:!1,enumerable:!0})},f=JD(a),h=e.get(WT);if(xe(h)){const v=h(a,e.urls[WT]);u(v)}else switch(f.type){case"use_gpl":{u(xV(a));break}case"use_plugin":{$6(a),u(cw(a)),f.onlineStatus==="offline"&&f.licenseKeyType==="no_key"?wV(a):L6(a,f.onlineStatus);break}}a.licenseKeyManager.validate({})}}})(),W6=e=>{F.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},$a=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},TV=(e,n)=>{$a(e,"StyleWithCSS",n),$a(e,"enableInlineTableEditing",n),$a(e,"enableObjectResizing",n)},Z6=e=>{e.selection.setRng(e.selection.getRng())},ZT=(e,n,o)=>{qh(e,n)&&!o?Jr(e,n):o&&ci(e,n)},jT=e=>{const n=ee.fromDom(e.getBody());ZT(n,"mce-content-readonly",!0),e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),W6(e)},eO=e=>{const n=ee.fromDom(e.getBody());ZT(n,"mce-content-readonly",!1),e.hasEditableRoot()&&pa(n,!0),TV(e,!1),Gv(e)&&e.focus(),Z6(e),e.nodeChanged()},ng=e=>a0(e),N0="data-mce-contenteditable",AV=e=>{te(ge(e,'*[contenteditable="true"]'),n=>{Sr(n,N0,"true"),pa(n,!1)})},j6=e=>{te(ge(e,`*[${N0}="true"]`),n=>{cc(n,N0),pa(n,!0)})},tO=(e,n)=>{const o=ee.fromDom(e.getBody());n?(jT(e),pa(o,!1),AV(o)):(j6(o),eO(e))},ju=e=>{e.serializer?G6(e):e.on("PreInit",()=>{G6(e)})},G6=e=>{e.parser.addAttributeFilter("contenteditable",n=>{ng(e)&&te(n,o=>{o.attr(N0,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(N0,n=>{ng(e)&&te(n,o=>{o.attr("contenteditable",o.attr(N0))})}),e.serializer.addTempAttr(N0)},kV=e=>e.type==="click",MY=["copy"],nO=e=>De(MY,e.type),DV=(e,n)=>ha(n,"a",r=>Io(r,ee.fromDom(e.getBody()))).bind(r=>ji(r,"href")),FY=(e,n)=>{if(kV(n)&&!jt.metaKeyPressed(n)){const o=ee.fromDom(n.target);DV(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const a=e.dom.select(`${r},[name="${Aa(r,"#")}"]`);a.length&&e.selection.scrollIntoView(a[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else nO(n)&&e.dispatch(n.type,n)},OV=e=>{e.on("ShowCaret ObjectSelected",n=>{ng(e)&&n.preventDefault()}),e.on("DisabledStateChange",n=>{n.isDefaultPrevented()||tO(e,n.state)})},oO=e=>{ju(e),OV(e)},Am=e=>/^[a-z0-9\-]+$/i.test(e),aw=e=>"content/"+e+"/content.css",GT=e=>tinymce.Resource.has(aw(e)),sO=e=>qT(e,nC(e)),_V=e=>qT(e,fx(e)),qT=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",a=`content${e.editorManager.suffix}.css`;return ae(n,u=>GT(u)?u:Am(u)&&!e.inline?`${o}/${u}/${a}`:e.documentBaseURI.toAbsolute(u))},RV=e=>{e.contentCSS=e.contentCSS.concat(sO(e),_V(e))},q6=e=>e?Xo(e.getElementsByTagName("img")):[],BV=(e,n)=>{const o={};return{findAll:(a,u=Ve)=>{const f=Ce(q6(a),v=>{const w=v.src;return v.hasAttribute("data-mce-bogus")||v.hasAttribute("data-mce-placeholder")||!w||w===wo.transparentSrc?!1:Ln(w,"blob:")?!e.isUploaded(w)&&u(v):Ln(w,"data:")?u(v):!1}),h=ae(f,v=>{const w=v.src;if(Jt(o,w))return o[w].then(D=>re(D)?D:{image:v,blobInfo:D.blobInfo});{const D=mH(n,w).then(R=>(delete o[w],{image:v,blobInfo:R})).catch(R=>(delete o[w],R));return o[w]=D,D}});return Promise.all(h)}}},K6=()=>{let o={};const r=(M,L)=>({status:M,resultUri:L}),a=M=>M in o;return{hasBlobUri:a,getResultUri:M=>{const L=o[M];return L?L.resultUri:null},isPending:M=>a(M)?o[M].status===1:!1,isUploaded:M=>a(M)?o[M].status===2:!1,markPending:M=>{o[M]=r(1,null)},markUploaded:(M,L)=>{o[M]=r(2,L)},removeFailed:M=>{delete o[M]},destroy:()=>{o={}}}};let rO=0;const MV=()=>{const e=()=>Math.round(Wn()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},Y6=e=>e+rO+++MV(),FV=()=>{let e=[];const n=R=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[R.toLowerCase()]||"dat",o=(R,M,L,K,W)=>{if(re(R))return r({id:R,name:K,filename:W,blob:M,base64:L});if(En(R))return r(R);throw new Error("Unknown input type")},r=R=>{if(!R.blob||!R.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const M=R.id||Y6("blobid"),L=R.name||M,K=R.blob;return{id:tt(M),name:tt(L),filename:tt(R.filename||L+"."+n(K.type)),blob:tt(K),base64:tt(R.base64),blobUri:tt(R.blobUri||URL.createObjectURL(K)),uri:tt(R.uri)}},a=R=>{f(R.id())||e.push(R)},u=R=>Xt(e,R).getOrUndefined(),f=R=>u(M=>M.id()===R);return{create:o,add:a,get:f,getByUri:R=>u(M=>M.blobUri()===R),getByData:(R,M)=>u(L=>L.base64()===R&&L.blob().type===M),findFirst:u,removeByUri:R=>{e=Ce(e,M=>M.blobUri()===R?(URL.revokeObjectURL(M.blobUri()),!1):!0)},destroy:()=>{te(e,R=>{URL.revokeObjectURL(R.blobUri())}),e=[]}}},P0=(e,n)=>{const o={},r=(W,J)=>W?W.replace(/\/$/,"")+"/"+J.replace(/^\//,""):J,a=(W,J)=>new Promise((pe,be)=>{const Se=new XMLHttpRequest;Se.open("POST",n.url),Se.withCredentials=n.credentials,Se.upload.onprogress=it=>{J(it.loaded/it.total*100)},Se.onerror=()=>{be("Image upload failed due to a XHR Transport error. Code: "+Se.status)},Se.onload=()=>{if(Se.status<200||Se.status>=300){be("HTTP Error: "+Se.status);return}const it=JSON.parse(Se.responseText);if(!it||!re(it.location)){be("Invalid JSON: "+Se.responseText);return}pe(r(n.basePath,it.location))};const Ze=new FormData;Ze.append("file",W.blob(),W.filename()),Se.send(Ze)}),u=le(n.handler)?n.handler:a,f=()=>new Promise(W=>{W([])}),h=(W,J)=>({url:J,blobInfo:W,status:!0}),v=(W,J)=>({url:"",blobInfo:W,status:!1,error:J}),w=(W,J)=>{Ct.each(o[W],pe=>{pe(J)}),delete o[W]},D=(W,J,pe)=>(e.markPending(W.blobUri()),new Promise(be=>{let Se,Ze;try{const it=()=>{Se&&(Se.close(),Ze=rt)},$t=Ge=>{it(),e.markUploaded(W.blobUri(),Ge),w(W.blobUri(),h(W,Ge)),be(h(W,Ge))},yt=Ge=>{it(),e.removeFailed(W.blobUri()),w(W.blobUri(),v(W,Ge)),be(v(W,Ge))};Ze=Ge=>{Ge<0||Ge>100||F.from(Se).orThunk(()=>F.from(pe).map(Be)).each(ze=>{Se=ze,ze.progressBar.value(Ge)})},J(W,Ze).then($t,Ge=>{yt(re(Ge)?{message:Ge}:Ge)})}catch(it){be(v(W,it))}})),R=W=>W===a,M=W=>{const J=W.blobUri();return new Promise(pe=>{o[J]=o[J]||[],o[J].push(pe)})},L=(W,J)=>(W=Ct.grep(W,pe=>!e.isUploaded(pe.blobUri())),Promise.all(Ct.map(W,pe=>e.isPending(pe.blobUri())?M(pe):D(pe,u,J))));return{upload:(W,J)=>!n.url&&R(u)?f():L(W,J)}},cO=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),X6=(e,n)=>P0(n,{url:$5(e),basePath:q1(e),credentials:n3(e),handler:I5(e)}),J6=e=>{const n=K6(),o=X6(e,n);return{upload:(r,a=!0)=>o.upload(r,a?cO(e):void 0)}},NV=(e,n)=>e.dom.isEmpty(n.dom)&&xe(e.schema.getTextBlockElements()[xo(n)]),PV=e=>n=>{NV(e,n)&&is(n,ee.fromHtml('<br data-mce-bogus="1" />'))},$V=e=>{const n=FV();let o,r;const a=K6(),u=[],f=Se=>Ze=>e.selection?Se(Ze):[],h=Se=>Se+(Se.indexOf("?")===-1?"?":"&")+new Date().getTime(),v=(Se,Ze,it)=>{let $t=0;do $t=Se.indexOf(Ze,$t),$t!==-1&&(Se=Se.substring(0,$t)+it+Se.substr($t+Ze.length),$t+=it.length-Ze.length+1);while($t!==-1);return Se},w=(Se,Ze,it)=>{const $t=`src="${it}"${it===wo.transparentSrc?' data-mce-placeholder="1"':""}`;return Se=v(Se,`src="${Ze}"`,$t),Se=v(Se,'data-mce-src="'+Ze+'"','data-mce-src="'+it+'"'),Se},D=(Se,Ze)=>{te(e.undoManager.data,it=>{it.type==="fragmented"?it.fragments=ae(it.fragments,$t=>w($t,Se,Ze)):it.content=w(it.content,Se,Ze)})},R=(Se,Ze)=>{const it=e.convertURL(Ze,"src");D(Se.src,Ze),zc(ee.fromDom(Se),{src:ss(e)?h(Ze):Ze,"data-mce-src":it})},M=()=>(o||(o=X6(e,a)),J().then(f(Se=>{const Ze=ae(Se,it=>it.blobInfo);return o.upload(Ze,cO(e)).then(f(it=>{const $t=[];let yt=!1;const Ge=ae(it,(ze,lt)=>{const{blobInfo:sn,image:Nn}=Se[lt];let bo=!1;return ze.status&&N5(e)?(ze.url&&!zs(Nn.src,ze.url)&&(yt=!0),n.removeByUri(Nn.src),Bd(e)||R(Nn,ze.url)):ze.error&&(ze.error.remove&&(D(Nn.src,wo.transparentSrc),$t.push(Nn),bo=!0),au(e,ze.error.message)),{element:Nn,status:ze.status,uploadUri:ze.url,blobInfo:sn,removed:bo}});return $t.length>0&&!Bd(e)?e.undoManager.transact(()=>{te(jd($t),ze=>{const lt=Va(ze);Ws(ze),lt.each(PV(e)),n.removeByUri(ze.dom.src)})}):yt&&e.undoManager.dispatchChange(),Ge}))}))),L=()=>oh(e)?M():Promise.resolve([]),K=Se=>ns(u,Ze=>Ze(Se)),W=Se=>{u.push(Se)},J=()=>(r||(r=BV(a,n)),r.findAll(e.getBody(),K).then(f(Se=>{const Ze=Ce(Se,it=>re(it)?(Vp(e,it),!1):it.uriType!=="blob");return Bd(e)||te(Ze,it=>{D(it.image.src,it.blobInfo.blobUri()),it.image.src=it.blobInfo.blobUri(),it.image.removeAttribute("data-mce-src")}),Ze}))),pe=()=>{n.destroy(),a.destroy(),r=o=null},be=Se=>Se.replace(/src="(blob:[^"]+)"/g,(Ze,it)=>{const $t=a.getResultUri(it);if($t)return'src="'+$t+'"';let yt=n.getByUri(it);return yt||(yt=$e(e.editorManager.get(),(Ge,ze)=>Ge||ze.editorUpload&&ze.editorUpload.blobCache.getByUri(it),void 0)),yt?'src="data:'+yt.blob().type+";base64,"+yt.base64()+'"':Ze});return e.on("SetContent",()=>{oh(e)?L():J()}),e.on("RawSaveContent",Se=>{Se.content=be(Se.content)}),e.on("GetContent",Se=>{Se.source_view||Se.format==="raw"||Se.format==="tree"||(Se.content=be(Se.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",Se=>{te(Se,Ze=>{const it=Ze.attr("src");if(!it||n.getByUri(it))return;const $t=a.getResultUri(it);$t&&Ze.attr("src",$t)})})}),{blobCache:n,addFilter:W,uploadImages:M,uploadImagesAuto:L,scanForImages:J,destroy:pe}},IV=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"left"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:a=>{n.setStyle(a,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:".mce-placeholder",styles:{display:"block",marginLeft:"auto",marginRight:"auto"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"right"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:a=>{n.setStyle(a,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const a={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[f,a,u]:[a,f,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},samp:{inline:"samp"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(a,u,f)=>gn(a)&&a.hasAttribute("href"),onformat:(a,u,f)=>{Ct.each(f,(h,v)=>{n.setAttrib(a,v,h)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":a=>(a==null?void 0:a.customValue)??null}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Ct.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd".split(/\s/),a=>{r[a]={block:a,remove:"all"}}),r},Q6={remove_similar:!0,inherit:!1},$0={selector:"td,th",...Q6},LV={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...$0},tablecellverticalalign:{styles:{"vertical-align":"%value"},...$0},tablecellbordercolor:{styles:{borderColor:"%value"},...$0},tablecellclass:{classes:["%value"],...$0},tableclass:{selector:"table",classes:["%value"],...Q6},tablecellborderstyle:{styles:{borderStyle:"%value"},...$0},tablecellborderwidth:{styles:{borderWidth:"%value"},...$0}},aO=tt(LV),Up=e=>{const n={},o=f=>xe(f)?n[f]:n,r=f=>Jt(n,f),a=(f,h)=>{f&&(re(f)?(je(h)||(h=[h]),te(h,v=>{ro(v.deep)&&(v.deep=!ut(v)),ro(v.split)&&(v.split=!ut(v)||bt(v)),ro(v.remove)&&ut(v)&&!bt(v)&&(v.remove="none"),ut(v)&&bt(v)&&(v.mixed=!0,v.block_expand=!0),re(v.classes)&&(v.classes=v.classes.split(/\s+/))}),n[f]=h):yo(f,(v,w)=>{a(w,v)}))},u=f=>(f&&n[f]&&delete n[f],n);return a(IV(e)),a(aO()),a(r3(e)),{get:o,has:r,register:a,unregister:u}},KT=Ct.each,Md=Bs.DOM,I0=e=>xe(e)&&En(e),iO=(e,n)=>{const o=n&&n.schema||Ru({}),r=(v,w)=>{w.classes.length>0&&Md.addClass(v,w.classes.join(" ")),Md.setAttribs(v,w.attrs)},a=v=>{const w=re(v)?{name:v,classes:[],attrs:{}}:v,D=Md.create(w.name);return r(D,w),D},u=(v,w)=>{const D=o.getElementRule(v.nodeName.toLowerCase()),R=D==null?void 0:D.parentsRequired;return R&&R.length?w&&De(R,w)?w:R[0]:!1},f=(v,w,D)=>{let R;const M=w[0],L=I0(M)?M.name:void 0,K=u(v,L);if(K)L===K?(R=M,w=w.slice(1)):R=K;else if(M)R=M,w=w.slice(1);else if(!D)return v;const W=R?a(R):Md.create("div");W.appendChild(v),D&&Ct.each(D,pe=>{const be=a(pe);W.insertBefore(be,v)});const J=I0(R)?R.siblings:void 0;return f(W,w,J)},h=Md.create("div");if(e.length>0){const v=e[0],w=a(v),D=I0(v)?v.siblings:void 0;h.appendChild(f(w,e.slice(1),D))}return h},eN=e=>{e=Ct.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,a,u,f,h)=>{switch(a){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":Ct.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(f==="["){const v=h.match(/([\w\-]+)(?:\=\"([^\"]+))?/);v&&(o.attrs[v[1]]=v[2])}return""})),o.name=n||"div",o},tN=e=>re(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Ct.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=Ct.map(n.split(/(?:~\+|~|\+)/),eN),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],YT=(e,n)=>{let o="",r=X1(e);if(r==="")return"";const a=M=>re(M)?M.replace(/%(\w+)/g,""):"",u=(M,L)=>Md.getStyle(L??e.getBody(),M,!0);if(re(n)){const M=e.formatter.get(n);if(!M)return"";n=M[0]}if("preview"in n){const M=n.preview;if(M===!1)return"";r=M||r}let f=n.block||n.inline||"span",h;const v=tN(n.selector);v.length>0?(v[0].name||(v[0].name=f),f=n.selector,h=iO(v,e)):h=iO([f],e);const w=Md.select(f,h)[0]||h.firstChild;KT(n.styles,(M,L)=>{const K=a(M);K&&Md.setStyle(w,L,K)}),KT(n.attributes,(M,L)=>{const K=a(M);K&&Md.setAttrib(w,L,K)}),KT(n.classes,M=>{const L=a(M);Md.hasClass(w,L)||Md.addClass(w,L)}),e.dispatch("PreviewFormats"),Md.setStyles(h,{position:"absolute",left:-65535}),e.getBody().appendChild(h);const D=u("fontSize"),R=/px$/.test(D)?parseInt(D,10):0;return KT(r.split(" "),M=>{let L=u(M,w);if(!(M==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(L)&&(L=u(M),Ug(L).toLowerCase()==="#ffffff"))&&!(M==="color"&&Ug(L).toLowerCase()==="#000000")){if(M==="font-size"&&/em|%$/.test(L)){if(R===0)return;L=parseFloat(L)/(/%$/.test(L)?100:1)*R+"px"}M==="border"&&L&&(o+="padding:0 2px;"),o+=M+":"+L+";"}}),e.dispatch("AfterPreviewFormats"),Md.remove(h),o},nN=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},oN=e=>{const n=Up(e),o=Yt({});return nN(e),NC(e),Bd(e)||Ez(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,a,u)=>{g6(e,r,a,u)},remove:(r,a,u,f)=>{h6(e,r,a,u,f)},toggle:(r,a,u)=>{p6(e,r,a,u)},match:(r,a,u,f)=>uV(e,r,a,u,f),closest:r=>FT(e,r),matchAll:(r,a)=>d6(e,r,a),matchNode:(r,a,u,f)=>m6(e,r,a,u,f),canApply:r=>f6(e,r),formatChanged:(r,a,u,f)=>b6(e,o,r,a,u,f),getCssText:He(YT,e)}},lO=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},HV=(e,n,o)=>{const r=Yt(!1),a=v=>{RT(n,!1,o),n.add({},v)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",v=>{const w=v.command;lO(w)||(n6(n,o),n.beforeChange())}),e.on("ExecCommand",v=>{const w=v.command;lO(w)||a(v)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",a),e.on("dragend",a),e.on("keyup",v=>{const w=v.keyCode;if(v.isDefaultPrevented())return;const D=wo.os.isMacOS()&&v.key==="Meta";(w>=33&&w<=36||w>=37&&w<=40||w===45||v.ctrlKey||D)&&(a(),e.nodeChanged()),(w===46||w===8)&&e.nodeChanged(),r.get()&&n.typing&&!OT(kT(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",v=>{const w=v.keyCode;if(v.isDefaultPrevented())return;if(w>=33&&w<=36||w>=37&&w<=40||w===45){n.typing&&a(v);return}const D=v.ctrlKey&&!v.altKey||v.metaKey;if((w<16||w>20)&&w!==224&&w!==91&&!n.typing&&!D){n.beforeChange(),RT(n,!0,o),n.add({},v),r.set(!0);return}(wo.os.isMacOS()?v.metaKey:v.ctrlKey&&!v.altKey)&&n.beforeChange()}),e.on("mousedown",v=>{n.typing&&a(v)});const u=v=>v.inputType==="insertReplacementText",f=v=>v.inputType==="insertText"&&v.data===null,h=v=>v.inputType==="insertFromPaste"||v.inputType==="insertFromDrop";e.on("input",v=>{v.inputType&&(u(v)||f(v)||h(v))&&a(v)}),e.on("AddUndo Undo Redo ClearUndos",v=>{v.isDefaultPrevented()||e.nodeChanged()})},zV=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},iw=e=>{const n=fs(),o=Yt(0),r=Yt(0),a={data:[],typing:!1,beforeChange:()=>{MT(e,o,n)},add:(u,f)=>_D(e,a,r,o,n,u,f),dispatchChange:()=>{e.setDirty(!0);const u=kT(e);u.bookmark=W1(e.selection),e.dispatch("change",{level:u,lastLevel:Uo(a.data,r.get()).getOrUndefined()})},undo:()=>r6(e,a,o,r),redo:()=>c6(e,r,a.data),clear:()=>{a6(e,a,r)},reset:()=>{i6(e,a)},hasUndo:()=>l6(e,a,r),hasRedo:()=>R0(e,a,r),transact:u=>u6(e,a,o,u),ignore:u=>{RD(e,o,u)},extra:(u,f)=>{lV(e,a,r,u,f)}};return Bd(e)||HV(e,a,o),zV(e),a},sN=[9,27,jt.HOME,jt.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,jt.DOWN,jt.UP,jt.LEFT,jt.RIGHT].concat(wo.browser.isFirefox()?[224]:[]),uO="data-mce-placeholder",lw=e=>e.type==="keydown"||e.type==="keyup",rN=e=>{const n=e.keyCode;return n===jt.BACKSPACE||n===jt.DELETE},VV=e=>{if(lw(e)){const n=e.keyCode;return!rN(e)&&(jt.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||De(sN,n))}else return!1},UV=e=>lw(e)&&!(rN(e)||e.type==="keyup"&&e.keyCode===229),cN=(e,n,o)=>{if(e.isEmpty(n,void 0,{skipBogus:!1,includeZwsp:!0})){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},dO=e=>{const n=e.dom,o=Sa(e),r=hx(e)??"",a=(u,f)=>{if(VV(u))return;const h=e.getBody(),v=UV(u)?!1:cN(n,h,o);(n.getAttrib(h,uO)!==""!==v||f)&&(n.setAttrib(h,uO,v?r:null),Y4(e,v),e.on(v?"keydown":"keyup",a),e.off(v?"keyup":"keydown",a))};Qs(r)&&e.on("init",u=>{a(u,!0),e.on("change SetContent ExecCommand",a),e.on("paste",f=>Vu.setEditorTimeout(e,()=>a(f)))})},WV=e=>n=>xe(n)&&n.nodeName.toLowerCase()===e,uw=e=>n=>xe(n)&&e.test(n.nodeName),og=e=>xe(e)&&e.nodeType===3,aN=e=>xe(e)&&e.nodeType===1,Fd=uw(/^(OL|UL|DL)$/),dw=uw(/^(OL|UL)$/),Gu=uw(/^(LI|DT|DD)$/),ZV=uw(/^(DT|DD)$/),Dh=WV("br"),tc=e=>{var n;return((n=e.parentNode)==null?void 0:n.firstChild)===e},mw=(e,n)=>xe(n)&&n.nodeName in e.schema.getTextBlockElements(),uy=(e,n)=>xe(e)&&e.nodeName in n,Oh=(e,n)=>xe(n)&&n.nodeName in e.schema.getVoidElements(),iN=(e,n)=>Dh(n)?e.isBlock(n.nextSibling)&&!Dh(n.previousSibling):!1,_h=(e,n,o)=>{const r=e.isEmpty(n);return o&&e.select("span[data-mce-type=bookmark]",n).length>0?!1:r},lN=(e,n)=>e.isChildOf(n,e.getRoot()),L0=Bs.DOM,jV=(e,n)=>{const o=n.parentElement;if(o&&o.nodeName==="LI"&&o.firstChild===n){const r=o.previousSibling;r&&r.nodeName==="LI"?(r.appendChild(n),_h(e,o)&&L0.remove(o)):L0.setStyle(o,"listStyleType","none")}if(Fd(o)){const r=o.previousSibling;r&&r.nodeName==="LI"&&r.appendChild(n)}},mO=(e,n)=>{const o=Ct.grep(e.select("ol,ul",n));Ct.each(o,r=>{jV(e,r)})},H0=(e,n)=>{if(og(e))return{container:e,offset:n};const o=Yf.getNode(e,n);return og(o)?{container:o,offset:n>=e.childNodes.length?o.data.length:0}:o.previousSibling&&og(o.previousSibling)?{container:o.previousSibling,offset:o.previousSibling.data.length}:o.nextSibling&&og(o.nextSibling)?{container:o.nextSibling,offset:0}:{container:e,offset:n}},fO=e=>{const n=e.cloneRange(),o=H0(e.startContainer,e.startOffset);n.setStart(o.container,o.offset);const r=H0(e.endContainer,e.endOffset);return n.setEnd(r.container,r.offset),n},Wp=["OL","UL","DL"],uN=Wp.join(","),km=(e,n)=>{const o=e.selection.getStart(!0);return e.dom.getParent(o,uN,fw(e,o))},GV=(e,n)=>xe(e)&&n.length===1&&n[0]===e,Nd=e=>Ce(e.querySelectorAll(uN),Fd),z0=e=>{const n=km(e),o=e.selection.getSelectedBlocks();return GV(n,o)?Nd(n):Ce(o,r=>Fd(r)&&n!==r)},qV=(e,n)=>{const o=Ct.map(n,r=>{const a=e.dom.getParent(r,"li,dd,dt",fw(e,r));return a||r});return Hr(o)},V0=e=>{const n=e.selection.getSelectedBlocks();return Ce(qV(e,n),Gu)},gO=e=>Ce(V0(e),ZV),hO=(e,n)=>{const o=e.dom.getParents(n,"TD,TH");return o.length>0?o[0]:e.getBody()},dy=(e,n)=>!Fd(n)&&!Gu(n)&&ve(Wp,o=>e.isValidChild(n.nodeName,o)),fw=(e,n)=>{const o=e.dom.getParents(n,e.dom.isBlock),r=u=>u.nodeName.toLowerCase()!==Sa(e);return Xt(o,u=>r(u)&&dy(e.schema,u)).getOr(e.getBody())},Dm=e=>Va(e).exists(n=>Gu(n.dom)&&Dc(n).exists(o=>!Fd(o.dom))&&Kr(n).exists(o=>!Fd(o.dom))),gw=(e,n)=>{const o=e.dom.getParents(n,"ol,ul",fw(e,n));return Js(o)},dN=e=>{const n=gw(e,e.selection.getStart()),o=Ce(e.selection.getSelectedBlocks(),dw);return n.toArray().concat(o)},pO=e=>{const n=e.selection.getStart();return e.dom.getParents(n,"ol,ul",fw(e,n))},bO=e=>{const n=dN(e),o=pO(e);return Xt(o,r=>Dm(ee.fromDom(r))).fold(()=>U0(e,n),r=>[r])},U0=(e,n)=>{const o=ae(n,r=>gw(e,r).getOr(r));return Hr(o)},my=e=>/\btox\-/.test(e.className),mN=(e,n)=>n!==null&&!e.dom.isEditable(n),KV=e=>{const n=km(e);return mN(e,n)||!e.selection.isEditable()},vO=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return mN(e,o)||!e.selection.isEditable()},W0=(e,n,o)=>e.dispatch("ListMutation",{action:n,element:o}),fN=(e,n,o={})=>{const r=e.dom,a=e.schema.getBlockElements(),u=r.createFragment(),f=Sa(e),h=yp(e);let v,w,D=!1;for(w=r.create(f,{...h,...o.style?{style:o.style}:{}}),uy(n.firstChild,a)||u.appendChild(w);v=n.firstChild;){const R=v.nodeName;!D&&(R!=="SPAN"||v.getAttribute("data-mce-type")!=="bookmark")&&(D=!0),uy(v,a)?(u.appendChild(v),w=null):(w||(w=r.create(f,h),u.appendChild(w)),w.appendChild(v))}return!D&&w&&w.appendChild(r.create("br",{"data-mce-bogus":"1"})),u},hw=e=>Sf(e,"OL,UL"),fy=e=>Sf(e,"LI"),Om=e=>Dc(e).exists(hw),YV=e=>Kr(e).exists(hw),XV=(e,n)=>Fx(e).map(o=>o>=n).getOr(!0),Z0=e=>"listAttributes"in e,gN=e=>"isComment"in e,JV=e=>"isFragment"in e,hN=e=>e.depth>0,QV=e=>e.isSelected,eU=e=>{const n=Er(e),o=YV(e)?n.slice(0,-1):n;return ae(o,Cu)},tU=(e,n,o)=>Va(e).filter(Rr).map(r=>({depth:n,dirty:!1,isSelected:o,content:eU(e),itemAttributes:Ro(e),listAttributes:Ro(r),listType:xo(r),isInPreviousLi:!1})),nU=(e,n)=>{is(e.item,n.list)},oU=e=>{for(let n=1;n<e.length;n++)nU(e[n-1],e[n])},sU=(e,n)=>{Qt(Js(e),Wo(n),nU)},rU=(e,n)=>{const o={list:ee.fromTag(n,e),item:ee.fromTag("li",e)};return is(o.list,o.item),o},cU=(e,n,o)=>{const r=[];for(let a=0;a<o;a++)r.push(rU(e,Z0(n)?n.listType:n.parentListType));return r},aU=(e,n)=>{for(let o=0;o<e.length-1;o++)fa(e[o].item,"list-style-type","none");Js(e).each(o=>{Z0(n)&&(zc(o.list,n.listAttributes),zc(o.item,n.itemAttributes)),Zi(o.item,n.content)})},iU=(e,n)=>{xo(e.list)!==n.listType&&(e.list=id(e.list,n.listType)),zc(e.list,n.listAttributes)},Zp=(e,n,o)=>{const r=ee.fromTag("li",e);return zc(r,n),Zi(r,o),r},lU=(e,n)=>{is(e.list,n),e.item=n},pN=(e,n,o)=>{const r=n.slice(0,o.depth);return Js(r).each(a=>{if(Z0(o)){const u=Zp(e,o.itemAttributes,o.content);lU(a,u),iU(a,o)}else if(JV(o))Zi(a.item,o.content);else{const u=ee.fromHtml(`<!--${o.content}-->`);is(a.list,u)}}),r},yO=(e,n,o)=>{const r=cU(e,o,o.depth-n.length);return oU(r),aU(r,o),sU(n,r),n.concat(r)},bN=(e,n)=>{let o=F.none();const r=$e(n,(a,u,f)=>gN(u)?f===0?(o=F.some(u),a):pN(e,a,u):u.depth>a.length?yO(e,a,u):pN(e,a,u),[]);return o.each(a=>{const u=ee.fromHtml(`<!--${a.content}-->`);Wo(r).each(f=>{yu(f.list,u)})}),Wo(r).map(a=>a.list)},CO=(e,n,o)=>{switch(n){case"Indent":if(XV(e,o.depth))o.depth++;else return;break;case"Outdent":o.depth--;break;case"Flatten":o.depth=0}o.dirty=!0},uU=(e,n)=>{Z0(e)&&Z0(n)&&(e.listType=n.listType,e.listAttributes={...n.listAttributes})},dU=e=>{e.listAttributes=Ot(e.listAttributes,(n,o)=>o!=="start")},mU=(e,n)=>{const o=e[n].depth,r=u=>u.depth===o&&!u.dirty,a=u=>u.depth<o;return et(ko(e.slice(0,n)),r,a).orThunk(()=>et(e.slice(n+1),r,a))},vN=e=>(te(e,(n,o)=>{mU(e,o).fold(()=>{n.dirty&&Z0(n)&&dU(n)},r=>uU(n,r))}),e),yN=(e,n,o,r)=>{if(Vl(r))return[{depth:e+1,content:r.dom.nodeValue??"",dirty:!1,isSelected:!1,isComment:!0}];n.each(f=>{Io(f.start,r)&&o.set(!0)});const a=tU(r,e,o.get());n.each(f=>{Io(f.end,r)&&o.set(!1)});const u=Kr(r).filter(hw).map(f=>XT(e,n,o,f)).getOr([]);return a.toArray().concat(u)},fU=(e,n,o,r)=>Dc(r).filter(hw).fold(()=>yN(e,n,o,r),a=>{const u=$e(Er(r),(f,h,v)=>{if(v===0)return f;if(fy(h))return f.concat(yN(e,n,o,h));{const w={isFragment:!0,depth:e,content:[h],isSelected:!1,dirty:!1,parentListType:xo(a)};return f.concat(w)}},[]);return XT(e,n,o,a).concat(u)}),XT=(e,n,o,r)=>zn(Er(r),a=>{const u=hw(a)?XT:fU,f=e+1;return u(f,n,o,a)}),gU=(e,n)=>{const o=Yt(!1),r=0;return ae(e,a=>({sourceList:a,entries:XT(r,n,o,a)}))},hU=(e,n)=>{const o=vN(n);return ae(o,r=>{const a=gN(r)?qd([ee.fromHtml(`<!--${r.content}-->`)]):qd(r.content),u=Z0(r)?r.itemAttributes:{};return ee.fromDom(fN(e,a.dom,u))})},pU=(e,n)=>{const o=vN(n);return bN(e.contentDocument,o).toArray()},bU=(e,n)=>zn(_t(n,hN),o=>Wo(o).exists(hN)?pU(e,o):hU(e,o)),vU=(e,n,o)=>{te(Ce(n,QV),r=>CO(e,o,r))},yU=e=>{const n=ae(V0(e),ee.fromDom);return Qt(Xt(n,Je(Om)),Xt(ko(n),Je(Om)),(o,r)=>({start:o,end:r}))},CU=(e,n,o)=>{const r=gU(n,yU(e));te(r,a=>{vU(e,a.entries,o);const u=bU(e,a.entries);te(u,f=>{W0(e,o==="Indent"?"IndentList":"OutdentList",f.dom)}),bb(a.sourceList,u),Ws(a.sourceList)})},wU=e=>Fx(e).forall(n=>{const o=e.selection.getSelectedBlocks();return ve(o,r=>ha(ee.fromDom(r),"li").forall(a=>q(a,"ol,ul").length<=n))}),jp=Bs.DOM,SU=(e,n,o)=>{const r=w=>{const D=w.parentNode;D&&Ct.each(a,R=>{D.insertBefore(R,o.parentNode)}),jp.remove(w)},a=jp.select('span[data-mce-type="bookmark"]',n),u=fN(e,o),f=jp.createRng();f.setStartAfter(o),f.setEndAfter(n);const h=f.extractContents();for(let w=h.firstChild;w;w=w.firstChild)if(w.nodeName==="LI"&&e.dom.isEmpty(w)){jp.remove(w);break}e.dom.isEmpty(h)||jp.insertAfter(h,n),jp.insertAfter(u,n);const v=o.parentElement;v&&_h(e.dom,v)&&r(v),jp.remove(o),_h(e.dom,n)&&jp.remove(n)},xU=sc("dd"),CN=sc("dt"),EU=(e,n)=>{xU(n)?id(n,"dt"):CN(n)&&Si(n).each(o=>SU(e,o.dom,n.dom))},wN=e=>{CN(e)&&id(e,"dd")},TU=(e,n,o)=>{n==="Indent"?te(o,wN):te(o,r=>EU(e,r))},AU=(e,n)=>{const o=jd(bO(e)),r=jd(gO(e));let a=!1;if(o.length||r.length){const u=e.selection.getBookmark();CU(e,o,n),TU(e,n,r),e.selection.moveToBookmark(u),e.selection.setRng(fO(e.selection.getRng())),e.nodeChanged(),a=!0}return a},wO=(e,n)=>!KV(e)&&AU(e,n),SN=e=>wO(e,"Indent"),SO=e=>wO(e,"Outdent"),JT=e=>wO(e,"Flatten"),gy=e=>{switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},kU=(e,n,o)=>{const r=o["list-style-type"]?o["list-style-type"]:null;e.setStyle(n,"list-style-type",r)},xO=(e,n)=>{Ct.each(n,(o,r)=>{e.setAttribute(r,o)})},DU=(e,n,o)=>{xO(n,o["list-attributes"]),Ct.each(e.select("li",n),r=>{xO(r,o["list-item-attributes"])})},hy=(e,n,o)=>{kU(e,n,o),DU(e,n,o)},OU=(e,n,o)=>{Ct.each(o,r=>e.setStyle(n,r,""))},QT=(e,n)=>xe(n)&&!uy(n,e.schema.getBlockElements()),EO=(e,n,o,r)=>{let a=n[o?"startContainer":"endContainer"];const u=n[o?"startOffset":"endOffset"];aN(a)&&(a=a.childNodes[Math.min(u,a.childNodes.length-1)]||a),!o&&Dh(a.nextSibling)&&(a=a.nextSibling);const f=v=>{for(;!e.dom.isBlock(v)&&v.parentNode&&r!==v;)v=v.parentNode;return v},h=(v,w)=>{var L;const D=new tr(v,f(v)),R=w?"next":"prev";let M;for(;M=D[R]();)if(!(Oh(e,M)||Xc(M.textContent)||((L=M.textContent)==null?void 0:L.length)===0))return F.some(M);return F.none()};if(o&&og(a))if(Xc(a.textContent))a=h(a,!1).getOr(a);else for(a.parentNode!==null&&QT(e,a.parentNode)&&(a=a.parentNode);a.previousSibling!==null&&(QT(e,a.previousSibling)||og(a.previousSibling));)a=a.previousSibling;if(!o&&og(a))if(Xc(a.textContent))a=h(a,!0).getOr(a);else for(a.parentNode!==null&&QT(e,a.parentNode)&&(a=a.parentNode);a.nextSibling!==null&&(QT(e,a.nextSibling)||og(a.nextSibling));)a=a.nextSibling;for(;a.parentNode!==r;){const v=a.parentNode;if(mw(e,a)||/^(TD|TH)$/.test(v.nodeName))return a;a=v}return a},_U=(e,n,o)=>{const r=[],a=e.dom,u=EO(e,n,!0,o),f=EO(e,n,!1,o);let h;const v=[];for(let w=u;w&&(v.push(w),w!==f);w=w.nextSibling);return Ct.each(v,w=>{var R;if(mw(e,w)){r.push(w),h=null;return}if(a.isBlock(w)||Dh(w)){Dh(w)&&a.remove(w),h=null;return}const D=w.nextSibling;if(y0.isBookmarkNode(w)&&(Fd(D)||mw(e,D)||!D&&w.parentNode===o)){h=null;return}h||(h=a.create("p"),(R=w.parentNode)==null||R.insertBefore(h,w),r.push(h)),h.appendChild(w)}),r},RU=(e,n,o)=>{const r=e.getStyle(n,"list-style-type");let a=o?o["list-style-type"]:"";return a=a===null?"":a,r===a},BU=(e,n)=>{const o=e.selection.getStart(!0),r=EO(e,n,!0,e.getBody());return fo(ee.fromDom(r),ee.fromDom(n.commonAncestorContainer))?n.commonAncestorContainer:o},TO=(e,n,o)=>{const r=e.selection.getRng();let a="LI";const u=fw(e,BU(e,r)),f=e.dom;if(f.getContentEditable(e.selection.getNode())==="false")return;n=n.toUpperCase(),n==="DL"&&(a="DT");const h=Sh(r),v=Ce(_U(e,r,u),e.dom.isEditable);Ct.each(v,w=>{let D;const R=w.previousSibling,M=w.parentNode;Gu(M)||(R&&Fd(R)&&R.nodeName===n&&RU(f,R,o)?(D=R,w=f.rename(w,a),R.appendChild(w)):(D=f.create(n),M.insertBefore(D,w),D.appendChild(w),w=f.rename(w,a)),OU(f,w,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),hy(f,D,o),eA(e.dom,D))}),e.selection.setRng(Zc(h))},xN=(e,n)=>Fd(e)&&e.nodeName===(n==null?void 0:n.nodeName),EN=(e,n,o)=>{const r=e.getStyle(n,"list-style-type",!0),a=e.getStyle(o,"list-style-type",!0);return r===a},TN=(e,n)=>e.className===n.className,MU=(e,n,o)=>xN(n,o)&&EN(e,n,o)&&TN(n,o),eA=(e,n)=>{let o,r=n.nextSibling;if(MU(e,n,r)){const a=r;for(;o=a.firstChild;)n.appendChild(o);e.remove(a)}if(r=n.previousSibling,MU(e,n,r)){const a=r;for(;o=a.lastChild;)n.insertBefore(o,n.firstChild);e.remove(a)}},FU=(e,n,o,r)=>{if(n.nodeName!==o){const a=e.dom.rename(n,o);hy(e.dom,a,r),W0(e,gy(o),a)}else hy(e.dom,n,r),W0(e,gy(o),n)},AN=(e,n,o,r)=>{if(n.classList.forEach((a,u,f)=>{a.startsWith("tox-")&&(f.remove(a),f.length===0&&n.removeAttribute("class"))}),n.nodeName!==o){const a=e.dom.rename(n,o);hy(e.dom,a,r),W0(e,gy(o),a)}else hy(e.dom,n,r),W0(e,gy(o),n)},NU=(e,n,o,r,a)=>{const u=Fd(n);if(u&&n.nodeName===r&&!kN(a)&&!my(n))JT(e);else{TO(e,r,a);const f=Sh(e.selection.getRng()),h=u?[n,...o]:o,v=u&&my(n)?AN:FU;Ct.each(h,w=>{v(e,w,r,a)}),e.selection.setRng(Zc(f))}},kN=e=>"list-style-type"in e,PU=(e,n,o,r)=>{if(n!==e.getBody())if(n)if(n.nodeName===o&&!kN(r)&&!my(n))JT(e);else{const a=Sh(e.selection.getRng());my(n)&&n.classList.forEach((f,h,v)=>{f.startsWith("tox-")&&(v.remove(f),v.length===0&&n.removeAttribute("class"))}),hy(e.dom,n,r);const u=e.dom.rename(n,o);eA(e.dom,u),e.selection.setRng(Zc(a)),TO(e,o,r),W0(e,gy(o),u)}else TO(e,o,r),W0(e,gy(o),n)},AO=(e,n,o)=>{const r=km(e);if(vO(e,r))return;const a=z0(e),u=En(o)?o:{};a.length>0?NU(e,r,a,n,u):PU(e,r,n,u)},DN=(e,n,o,r)=>{let a=n.startContainer;const u=n.startOffset;if(og(a)&&(o?u<a.data.length:u>0))return a;const f=e.schema.getNonEmptyElements();aN(a)&&(a=Yf.getNode(a,u));const h=new tr(a,r);o&&iN(e.dom,a)&&h.next();const v=o?h.next.bind(h):h.prev2.bind(h);for(;a=v();)if(a.nodeName==="LI"&&!a.hasChildNodes()||f[a.nodeName]||og(a)&&a.data.length>0)return a;return null},ON=(e,n)=>{const o=n.childNodes;return o.length===1&&!Fd(o[0])&&e.isBlock(o[0])},kO=e=>F.from(e).map(ee.fromDom).filter(Ul).exists(n=>yl(n)&&!De(["details"],xo(n))),DO=(e,n)=>{ON(e,n)&&kO(n.firstChild)&&e.remove(n.firstChild,!0)},_N=(e,n,o)=>{let r;const a=ON(e,o)?o.firstChild:o;if(DO(e,n),!_h(e,n,!0))for(;r=n.firstChild;)a.appendChild(r)},tA=(e,n,o)=>{let r;const a=n.parentNode;if(!lN(e,n)||!lN(e,o))return;Fd(o.lastChild)&&(r=o.lastChild),a===o.lastChild&&Dh(a.previousSibling)&&e.remove(a.previousSibling);const u=o.lastChild;u&&Dh(u)&&n.hasChildNodes()&&e.remove(u),_h(e,o,!0)&&bl(ee.fromDom(o)),_N(e,n,o),r&&o.appendChild(r);const h=za(ee.fromDom(o),ee.fromDom(n))?e.getParents(n,Fd,o):[];e.remove(n),te(h,v=>{_h(e,v)&&v!==e.getRoot()&&e.remove(v)})},$U=(e,n,o)=>{bl(ee.fromDom(o)),tA(e.dom,n,o),e.selection.setCursorLocation(o,0)},IU=(e,n,o,r)=>{const a=e.dom;if(a.isEmpty(r))$U(e,o,r);else{const u=Sh(n);tA(a,o,r),e.selection.setRng(Zc(u))}},LU=(e,n,o,r)=>{const a=Sh(n);tA(e.dom,o,r);const u=Zc(a);e.selection.setRng(u)},HU=(e,n)=>{const o=e.dom,r=e.selection,a=r.getStart(),u=hO(e,a),f=o.getParent(r.getStart(),"LI",u);if(f){const h=f.parentElement;if(h===e.getBody()&&_h(o,h))return!0;const v=fO(r.getRng()),w=o.getParent(DN(e,v,n,u),"LI",u),D=w&&(n?o.isChildOf(f,w):o.isChildOf(w,f));if(w&&w!==f&&!D)return e.undoManager.transact(()=>{n?IU(e,v,w,f):tc(f)?SO(e):LU(e,v,f,w)}),!0;if(D&&!n&&w!==f){const R=v.commonAncestorContainer.parentElement;return!R||o.isChildOf(w,R)?!1:(e.undoManager.transact(()=>{const M=Sh(v);_N(o,R,w),R.remove();const L=Zc(M);e.selection.setRng(L)}),!0)}else if(!w&&!n&&v.startOffset===0&&v.endOffset===0)return e.undoManager.transact(()=>{JT(e)}),!0}return!1},zU=(e,n,o)=>{const r=e.getParent(n.parentNode,e.isBlock,o);e.remove(n),r&&e.isEmpty(r)&&e.remove(r)},VU=(e,n)=>{const o=e.dom,r=e.selection.getStart(),a=hO(e,r),u=o.getParent(r,o.isBlock,a);if(u&&o.isEmpty(u,void 0,{checkRootAsContent:!0})){const f=fO(e.selection.getRng()),h=DN(e,f,n,a),v=o.getParent(h,"LI",a);if(h&&v){const w=L=>De(["td","th","caption"],xo(L)),D=L=>L.dom===a,R=Ps(ee.fromDom(v),w,D),M=Ps(ee.fromDom(f.startContainer),w,D);return It(R,M,Io)?(e.undoManager.transact(()=>{const L=v.parentNode;zU(o,u,a),eA(o,L),e.selection.select(h,!0),e.selection.collapse(n)}),!0):!1}}return!1},UU=(e,n)=>HU(e,n)||VU(e,n),OO=e=>{const n=e.selection.getStart(),o=hO(e,n),r=e.dom.getParent(n,"LI,DT,DD",o);return xe(r)||V0(e).length>0},WU=e=>OO(e)?(e.undoManager.transact(()=>{let n=!0;const o=()=>n=!1;e.on("input",o),e.execCommand("Delete"),e.off("input",o),n&&e.dispatch("input"),mO(e.dom,e.getBody())}),!0):!1,_O=(e,n)=>{const o=e.selection;return!vO(e,o.getNode())&&(o.isCollapsed()?UU(e,n):WU(e))},RO=(e,n)=>({block:e,position:n}),ZU=(e,n)=>({from:e,to:n}),BO=(e,n)=>{const o=ee.fromDom(e),r=ee.fromDom(n.container());return HE(o,r).map(a=>RO(a,n))},jU=e=>!(za(e.to.block,e.from.block)||za(e.from.block,e.to.block)),GU=e=>!Io(e.from.block,e.to.block),RN=(e,n)=>Ps(n,a=>Ji(a)||ai(a.dom),a=>Io(a,e)).filter(Rr).getOr(e),BN=(e,n)=>{const o=ee.fromDom(e);return Io(RN(o,n.from.block),RN(o,n.to.block))},j0=e=>hr(e.from.block.dom)===!1&&hr(e.to.block.dom)===!1,MN=e=>{const n=o=>dp(o)||Vc(o.dom)||sm(o);return n(e.from.block)&&n(e.to.block)},qU=(e,n,o,r)=>Ar(r.position.getNode())&&!ii(e,r.block)?Tp(!1,r.block.dom).bind(a=>a.isEqual(r.position)?nl(o,n,a).bind(u=>BO(n,u)):F.some(r)).getOr(r):r,KU=(e,n,o,r)=>{const a=BO(n,Le.fromRangeStart(r)),u=a.bind(f=>nl(o,n,f.position).bind(h=>BO(n,h).map(v=>qU(e,n,o,v))));return Qt(a,u,ZU).filter(f=>GU(f)&&BN(n,f)&&j0(f)&&MN(f)&&jU(f))},YU=(e,n,o,r)=>r.collapsed?KU(e,n,o,r):F.none(),XU=(e,n)=>{const o=Er(e);return oo(o,r=>n.isBlock(xo(r))).fold(tt(o),r=>o.slice(0,r))},G0=(e,n)=>{const o=XU(e,n);return te(o,Ws),o},FN=(e,n,o)=>{const r=Xf(o,n);return Xt(r.reverse(),a=>ii(e,a)).each(Ws)},MO=(e,n)=>Ce(Ic(n),o=>!ii(e,o)).length===0,FO=(e,n,o,r,a)=>{if(ii(r,o))return rm(o),ca(o.dom);MO(r,a)&&ii(r,n)&&ea(a,ee.fromTag("br"));const u=ra(o.dom,Le.before(a.dom));return te(G0(n,r),f=>{ea(a,f)}),FN(r,e,n),u},JU=(e,n)=>e.isInline(xo(n)),NN=(e,n,o,r)=>{if(ii(r,o)){if(ii(r,n)){const f=bn((h=>{const v=(w,D)=>Dc(w).fold(()=>D,R=>JU(r,R)?v(R,D.concat(ic(R))):D);return v(h,[])})(o),(h,v)=>(xi(h,v),v),mp());bl(n),is(n,f)}return Ws(o),ca(n.dom)}const a=ol(o.dom);return te(G0(n,r),u=>{is(o,u)}),FN(r,e,n),a},nA=(e,n)=>{const o=Xf(n,e);return F.from(o[o.length-1])},QU=(e,n)=>za(n,e)?nA(n,e):F.none(),PN=(e,n)=>{Tp(e,n.dom).bind(o=>F.from(o.getNode())).map(ee.fromDom).filter(om).each(Ws)},$N=(e,n,o,r)=>(PN(!0,n),PN(!1,o),QU(n,o).fold(He(NN,e,n,o,r),He(FO,e,n,o,r))),IN=(e,n,o,r,a)=>n?$N(e,r,o,a):$N(e,o,r,a),NO=(e,n)=>{const o=ee.fromDom(e.getBody());return YU(e.schema,o.dom,n,e.selection.getRng()).map(a=>()=>{IN(o,n,a.from.block,a.to.block,e.schema).each(u=>{e.selection.setRng(u.toRange())})})},PO=(e,n,o)=>{const r=n.getRng();return Qt(HE(e,ee.fromDom(r.startContainer)),HE(e,ee.fromDom(r.endContainer)),(a,u)=>Io(a,u)?F.none():F.some(()=>{r.deleteContents(),IN(e,!0,a,u,o).each(f=>{n.setRng(f.toRange())})})).getOr(F.none())},LN=(e,n)=>{const o=ee.fromDom(n),r=He(Io,e);return xu(o,Ji,r).isSome()},eW=(e,n)=>LN(e,n.startContainer)||LN(e,n.endContainer),tW=(e,n)=>{const o=ra(e.dom,Le.fromRangeStart(n)).isNone(),r=_i(e.dom,Le.fromRangeEnd(n)).isNone();return!eW(e,n)&&o&&r},nW=e=>F.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),oW=e=>{const n=ee.fromDom(e.getBody()),o=e.selection.getRng();return tW(n,o)?nW(e):PO(n,e.selection,e.schema)},$O=(e,n)=>e.selection.isCollapsed()?F.none():oW(e),Rh=(e,n,o,r,a)=>F.from(n._selectionOverrides.showCaret(e,o,r,a)),sW=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},pw=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?F.none():F.some(sW(n)),rW=(e,n,o)=>{const r=m0(1,e.getBody(),n),a=Le.fromRangeStart(r),u=a.getNode();if(Ed(u))return Rh(1,e,u,!a.isAtEnd(),!1);const f=a.getNode(!0);if(Ed(f))return Rh(1,e,f,!1,!1);const h=Bp(e.dom.getRoot(),a.getNode());return Ed(h)?Rh(1,e,h,!1,o):F.none()},IO=(e,n,o)=>n.collapsed?rW(e,n,o).getOr(n):n,cW=e=>Lt(e)||OC(e),aW=e=>cl(e)||_C(e),iW=(e,n)=>{pt(n)&&n.data.length===0&&e.remove(n)},LO=(e,n,o,r,a,u)=>{Rh(r,e,u.getNode(!a),a,!0).each(f=>{if(n.collapsed){const h=n.cloneRange();a?h.setEnd(f.startContainer,f.startOffset):h.setStart(f.endContainer,f.endOffset),h.deleteContents()}else n.deleteContents();e.selection.setRng(f)}),iW(e.dom,o)},lW=(e,n)=>{const o=e.selection.getRng();if(!pt(o.commonAncestorContainer))return F.none();const r=n?1:-1,a=kd(e.getBody()),u=He(Mv,n?a.next:a.prev),f=n?cW:aW,h=Ad(r,e.getBody(),o),v=u(h),w=v&&Od(n,v);if(!w||!f0(h,w))return F.none();if(f(w))return F.some(()=>LO(e,o,h.getNode(),r,n,w));const D=u(w);return D&&f(D)&&f0(w,D)?F.some(()=>LO(e,o,h.getNode(),r,n,D)):F.none()},HO=(e,n)=>lW(e,n),zO=(e,n)=>{const o=e.getBody();return n?ca(o).filter(Lt):ol(o).filter(cl)},VO=e=>{const n=e.selection.getRng();return!n.collapsed&&(zO(e,!0).exists(o=>o.isEqual(Le.fromRangeStart(n)))||zO(e,!1).exists(o=>o.isEqual(Le.fromRangeEnd(n))))},uW=e=>xe(e)&&(Ji(ee.fromDom(e))||sm(ee.fromDom(e))),Rl=dc.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),dW=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return gn(o)&&o.getAttribute("data-mce-caret")===r},mW=(e,n,o,r,a)=>{const u=f=>a.isInline(f.nodeName.toLowerCase())&&!Td(o,r,e);return xp(!n,o).fold(()=>xp(n,r).fold(Ae,u),u)},HN=(e,n,o,r,a)=>{const u=a.getNode(!o);return HE(ee.fromDom(n),ee.fromDom(r.getNode())).map(f=>ii(e,f)?Rl.remove(f.dom):Rl.moveToElement(u)).orThunk(()=>F.some(Rl.moveToElement(u)))},zN=(e,n,o,r)=>nl(n,e,o).bind(a=>uW(a.getNode())||mW(e,n,o,a,r)?F.none():n&&hr(a.getNode())||!n&&hr(a.getNode(!0))?HN(r,e,n,o,a):n&&cl(o)||!n&&Lt(o)?F.some(Rl.moveToPosition(a)):F.none()),fW=(e,n)=>pn(n)?F.none():e&&hr(n.nextSibling)?F.some(Rl.moveToElement(n.nextSibling)):!e&&hr(n.previousSibling)?F.some(Rl.moveToElement(n.previousSibling)):F.none(),gW=(e,n,o)=>o.fold(r=>F.some(Rl.remove(r)),r=>F.some(Rl.moveToElement(r)),r=>Td(n,r,e)?F.none():F.some(Rl.moveToPosition(r))),hW=(e,n,o,r)=>dW(n,o)?fW(n,o.getNode(!n)).orThunk(()=>zN(e,n,o,r)):zN(e,n,o,r).bind(a=>gW(e,o,a)),pW=(e,n,o,r)=>{const a=m0(n?1:-1,e,o),u=Le.fromRangeStart(a),f=ee.fromDom(e);return!n&&cl(u)?F.some(Rl.remove(u.getNode(!0))):n&&Lt(u)?F.some(Rl.remove(u.getNode())):!n&&Lt(u)&&RE(f,u,r)?MB(f,u,r).map(h=>Rl.remove(h.getNode())):n&&cl(u)&&mk(f,u,r)?PL(f,u,r).map(h=>Rl.remove(h.getNode())):hW(e,n,u,r)},bW=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),yh(e,n,ee.fromDom(o)),!0),vW=(e,n)=>o=>{const r=n?Le.before(o):Le.after(o);return e.selection.setRng(r.toRange()),!0},yW=e=>n=>(e.selection.setRng(n.toRange()),!0),VN=(e,n)=>F.from(Bp(e.getBody(),n)),CW=(e,n)=>{const o=e.selection.getNode();return VN(e,o).filter(hr).fold(()=>pW(e.getBody(),n,e.selection.getRng(),e.schema).map(r=>()=>r.fold(bW(e,n),vW(e,n),yW(e))),()=>F.some(rt))},wW=e=>{te(ge(e,".mce-offscreen-selection"),Ws)},SW=(e,n)=>{const o=e.selection.getNode();return hr(o)&&!Qd(o)?VN(e,o.parentNode).filter(hr).fold(()=>F.some(()=>{wW(ee.fromDom(e.getBody())),yh(e,n,ee.fromDom(e.selection.getNode())),zE(e)}),()=>F.some(rt)):VO(e)?F.some(()=>{oM(e,e.selection.getRng(),ee.fromDom(e.getBody()))}):F.none()},UN=e=>{const n=e.dom,o=e.selection,r=Bp(e.getBody(),o.getNode());if(ai(r)&&n.isBlock(r)&&n.isEmpty(r)){const a=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(a),o.setRng(Le.before(a).toRange())}return!0},UO=(e,n)=>e.selection.isCollapsed()?CW(e,n):SW(e,n),WO=(e,n)=>{var h;const o=e.dom,r=o.getParent(e.selection.getStart(),o.isBlock),a=o.getParent(e.selection.getEnd(),o.isBlock),u=e.getBody();if(((h=r==null?void 0:r.nodeName)==null?void 0:h.toLowerCase())==="div"&&r&&a&&r===u.firstChild&&a===u.lastChild&&!o.isEmpty(u)){const v=r.cloneNode(!1),w=()=>{if(n?nM(e):LE(e),u.firstChild!==r){const D=Sh(e.selection.getRng(),()=>document.createElement("span"));Array.from(u.childNodes).forEach(R=>v.appendChild(R)),u.appendChild(v),e.selection.setRng(Zc(D))}};return F.some(w)}return F.none()},xW=(e,n)=>{const o=Le.fromRangeStart(e.selection.getRng());return nl(n,e.getBody(),o).filter(r=>n?RL(r):BL(r)).bind(r=>Sn(n?0:-1,r)).map(r=>()=>e.selection.select(r))},ZO=(e,n)=>e.selection.isCollapsed()?xW(e,n):F.none(),py=pt,jO=e=>py(e)&&e.data[0]===Sc,WN=e=>py(e)&&e.data[e.data.length-1]===Sc,ZN=e=>(e.ownerDocument??document).createTextNode(Sc),jN=e=>{var n;if(py(e.previousSibling))return WN(e.previousSibling)||e.previousSibling.appendData(Sc),e.previousSibling;if(py(e))return jO(e)||e.insertData(0,Sc),e;{const o=ZN(e);return(n=e.parentNode)==null||n.insertBefore(o,e),o}},EW=e=>{var n,o;if(py(e.nextSibling))return jO(e.nextSibling)||e.nextSibling.insertData(0,Sc),e.nextSibling;if(py(e))return WN(e)||e.appendData(Sc),e;{const r=ZN(e);return e.nextSibling?(n=e.parentNode)==null||n.insertBefore(r,e.nextSibling):(o=e.parentNode)==null||o.appendChild(r),r}},oA=(e,n)=>e?jN(n):EW(n),TW=He(oA,!0),AW=He(oA,!1),sA=(e,n)=>pt(e.container())?oA(n,e.container()):oA(n,e.getNode()),GO=(e,n)=>{const o=n.get();return o&&e.container()===o&&Cs(o)},GN=(e,n)=>n.fold(o=>{dm(e.get());const r=TW(o);return e.set(r),F.some(Le(r,r.length-1))},o=>ca(o).map(r=>{if(GO(r,e)){const a=e.get();return Le(a,1)}else{dm(e.get());const a=sA(r,!0);return e.set(a),Le(a,1)}}),o=>ol(o).map(r=>{if(GO(r,e)){const a=e.get();return Le(a,a.length-1)}else{dm(e.get());const a=sA(r,!1);return e.set(a),Le(a,a.length-1)}}),o=>{dm(e.get());const r=AW(o);return e.set(r),F.some(Le(r,1))}),by=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return F.none()},Bl=dc.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),kW=(e,n)=>{const o=fm(n,e);return o||e},NY=(e,n,o)=>{const r=QB(o),a=kW(n,r.container());return Ch(e,a,r).fold(()=>_i(a,r).bind(He(Ch,e,a)).map(u=>Bl.before(u)),F.none)},PY=(e,n)=>jf(e,n)===null,_m=(e,n,o)=>Ch(e,n,o).filter(He(PY,n)),bw=(e,n,o)=>{const r=eM(o);return _m(e,n,r).bind(a=>ra(a,r).isNone()?F.some(Bl.start(a)):F.none())},lf=(e,n,o)=>{const r=QB(o);return _m(e,n,r).bind(a=>_i(a,r).isNone()?F.some(Bl.end(a)):F.none())},q0=(e,n,o)=>{const r=eM(o),a=kW(n,r.container());return Ch(e,a,r).fold(()=>ra(a,r).bind(He(Ch,e,a)).map(u=>Bl.after(u)),F.none)},rA=e=>!vk(K0(e)),uf=(e,n,o)=>by([NY,bw,lf,q0],[e,n,o]).filter(rA),K0=e=>e.fold(No,No,No,No),qN=e=>e.fold(tt("before"),tt("start"),tt("end"),tt("after")),vw=e=>e.fold(Bl.before,Bl.before,Bl.after,Bl.after),KN=e=>e.fold(Bl.start,Bl.start,Bl.end,Bl.end),DW=(e,n)=>qN(e)===qN(n)&&K0(e)===K0(n),yw=(e,n,o,r,a,u)=>Qt(Ch(n,o,r),Ch(n,o,a),(f,h)=>f!==h&&XB(o,f,h)?Bl.after(e?f:h):u).getOr(u),YN=(e,n)=>e.fold(Ve,o=>!DW(o,n)),Ec=(e,n,o,r,a)=>{const u=Od(e,a);return nl(e,o,u).map(He(Od,e)).fold(()=>r.map(vw),v=>uf(n,o,v).map(He(yw,e,n,o,u,v)).filter(He(YN,r))).filter(rA)},OW=(e,n)=>e?n.fold(k(F.some,Bl.start),F.none,k(F.some,Bl.after),F.none):n.fold(F.none,k(F.some,Bl.before),F.none,k(F.some,Bl.end)),_W=(e,n,o,r)=>{const a=Od(e,r),u=uf(n,o,a);return uf(n,o,a).bind(He(OW,e)).orThunk(()=>Ec(e,n,o,u,r))},vy=e=>le(e.selection.getSel().modify),Gp=(e,n,o)=>{const r=e?1:-1;return n.setRng(Le(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},Y0=(e,n)=>{const o=n.selection.getRng(),r=e?Le.fromRangeEnd(o):Le.fromRangeStart(o);return vy(n)?e&&Jb(r)?Gp(!0,n.selection,r):!e&&N1(r)?Gp(!1,n.selection,r):!1:!1};var sg;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(sg||(sg={}));const cA=(e,n)=>e===-1?ko(n):n,qO=(e,n,o)=>e===1?n.next(o):n.prev(o),KO=(e,n,o,r)=>Ar(r.getNode(n===1))?sg.Br:Td(o,r)===!1?sg.Block:sg.Wrap,YO=(e,n,o,r)=>{const a=kd(o);let u=r;const f=[];for(;u;){const h=qO(n,a,u);if(!h)break;if(Ar(h.getNode(!1)))return n===1?{positions:cA(n,f).concat([h]),breakType:sg.Br,breakAt:F.some(h)}:{positions:cA(n,f),breakType:sg.Br,breakAt:F.some(h)};if(!h.isVisible()){u=h;continue}if(e(u,h)){const v=KO(o,n,u,h);return{positions:cA(n,f),breakType:v,breakAt:F.some(h)}}f.push(h),u=h}return{positions:cA(n,f),breakType:sg.Eol,breakAt:F.none()}},XO=(e,n,o,r)=>n(o,r).breakAt.map(a=>{const u=n(o,a).positions;return e===-1?u.concat(a):[a].concat(u)}).getOr([]),JO=(e,n)=>$e(e,(o,r)=>o.fold(()=>F.some(r),a=>Qt(Wo(a.getClientRects()),Wo(r.getClientRects()),(u,f)=>{const h=Math.abs(n-u.left);return Math.abs(n-f.left)<=h?r:a}).or(o)),F.none()),aA=(e,n)=>Wo(n.getClientRects()).bind(o=>JO(e,o.left)),X0=He(YO,Le.isAbove,-1),Cw=He(YO,Le.isBelow,1),XN=He(XO,-1,X0),JN=He(XO,1,Cw),QO=(e,n)=>X0(e,n).breakAt.isNone(),e_=(e,n)=>Cw(e,n).breakAt.isNone(),t_=e=>ca(e).map(n=>[n].concat(Cw(e,n).positions)).getOr([]),QN=e=>ol(e).map(n=>X0(e,n).positions.concat(n)).getOr([]),e8=(e,n)=>aA(XN(e,n),n),t8=(e,n)=>aA(JN(e,n),n),yy=hr,n_=(e,n)=>Math.abs(e.left-n),n8=(e,n)=>Math.abs(e.right-n),o8=e=>lo(e,"node"),s8=(e,n)=>dl(e,(o,r)=>{const a=Math.min(n_(o,n),n8(o,n)),u=Math.min(n_(r,n),n8(r,n));return u===a&&o8(r)&&yy(r.node)||u<a?r:o}),r8=e=>{const n=o=>ae(o,r=>{const a=Di(r);return a.node=e,a});if(gn(e))return n(e.getClientRects());if(pt(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},c8=e=>zn(e,r8);var qp;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(qp||(qp={}));const a8=(e,n,o,r)=>{let a=r;for(;a=l0(a,e,nv,n);)if(o(a))return},o_=(e,n,o,r,a,u)=>{let f=0;const h=[],v=R=>{let M=c8([R]);e===qp.Up&&(M=M.reverse());for(let L=0;L<M.length;L++){const K=M[L];if(!o(K,w)){if(h.length>0&&n(K,Nr(h))&&f++,K.line=f,a(K))return!0;h.push(K)}}return!1},w=Nr(u.getClientRects());if(!w)return h;const D=u.getNode();return D&&(v(D),a8(e,r,v,D)),h},i8=(e,n)=>n.line>e,l8=(e,n)=>n.line===e,u8=He(o_,qp.Up,zf,qg),RW=He(o_,qp.Down,qg,zf),d8=e=>Nr(e.getClientRects()),BW=(e,n,o,r)=>{const a=kd(n);let u,f,h,v;const w=[];let D=0;e===qp.Down?(u=a.next,f=qg,h=zf,v=Le.after(r)):(u=a.prev,f=zf,h=qg,v=Le.before(r));const R=d8(v);do{if(!v.isVisible())continue;const M=d8(v);if(h(M,R))continue;w.length>0&&f(M,Nr(w))&&D++;const L=Di(M);if(L.position=v,L.line=D,o(L))return w;w.push(L)}while(v=u(v));return w},iA=e=>n=>i8(e,n),J0=e=>n=>l8(e,n),qu=(e,n)=>{e.selection.setRng(n),w0(e,e.selection.getRng())},ww=(e,n,o)=>F.some(IO(e,n,o)),s_=(e,n)=>{const o=e.getNode(n===-1);return xe(o)&&u0(o)?F.some(o):F.none()},r_=(e,n)=>{const o=e.dom.createRng();return o.selectNode(n),o},Sw=(e,n,o,r,a,u)=>{const f=n===1,h=kd(e.getBody()),v=He(Mv,f?h.next:h.prev),w=f?r:a;if(!o.collapsed){const K=Vf(o);if(u(K))if(u0(K)){const W=Ad(n,e.getBody(),o);return F.from(v(W)).map(J=>J.toRange())}else return Rh(n,e,K,n===-1,!1);else if(VO(e)){const W=o.cloneRange();return W.collapse(n===-1),F.from(W)}}const D=Ad(n,e.getBody(),o);if(w(D))return pw(e,D.getNode(!f));let R=v(D);const M=fp(o);if(R)R=Od(f,R);else return M?F.some(o):F.none();if(w(R))return s_(R,n).fold(()=>Rh(n,e,R==null?void 0:R.getNode(!f),f,!1),K=>F.some(r_(e,K)));const L=v(R);return L&&w(L)&&f0(R,L)?s_(R,n).fold(()=>Rh(n,e,L.getNode(!f),f,!1),K=>F.some(r_(e,K))):M?ww(e,R.toRange(),!1):F.none()},m8=(e,n,o,r,a,u)=>{const f=Ad(n,e.getBody(),o),h=Nr(f.getClientRects()),v=n===qp.Down,w=e.getBody();if(!h)return F.none();if(VO(e)){const J=v?Le.fromRangeEnd(o):Le.fromRangeStart(o);return(v?t8:e8)(w,J).orThunk(()=>F.from(J)).map(be=>be.toRange())}const R=(v?RW:u8)(w,iA(1),f),M=Ce(R,J0(1)),L=h.left,K=s8(M,L);if(K&&u(K.node)){const J=Math.abs(L-K.left),pe=Math.abs(L-K.right);return Rh(n,e,K.node,J<pe,!1)}let W;if(r(f)?W=f.getNode():a(f)?W=f.getNode(!0):W=Vf(o),W){const J=BW(n,w,iA(1),W);let pe=s8(Ce(J,J0(1)),L);if(pe||(pe=Nr(Ce(J,J0(0))),pe))return ww(e,pe.position.toRange(),!1)}return M.length===0?c_(e,v).filter(v?a:r).map(J=>IO(e,J.toRange(),!1)):F.none()},c_=(e,n)=>{const o=e.selection.getRng(),r=n?Le.fromRangeEnd(o):Le.fromRangeStart(o),a=Ux(r.container(),e.getBody());if(n){const u=Cw(a,r);return Js(u.positions)}else{const u=X0(a,r);return Wo(u.positions)}},Kp=(e,n,o)=>c_(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),Cy=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},a_=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},wy=(e,n,o)=>GN(n,o).map(r=>(Cy(e,r),o)),f8=(e,n,o)=>{const r=Le.fromRangeStart(e);if(e.collapsed)return r;{const a=Le.fromRangeEnd(e);return o?ra(n,a).getOr(a):_i(n,r).getOr(r)}},i_=(e,n,o)=>{const r=e.getBody(),a=f8(e.selection.getRng(),r,o),u=He(_p,e);return _W(o,u,r,a).bind(h=>wy(e,n,h))},g8=(e,n,o)=>{const r=ae(ge(ee.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),f=>f.dom),a=Ce(r,e),u=Ce(o,e);te(mo(a,u),He(a_,!1)),te(mo(u,a),He(a_,!0))},h8=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=Le.fromRangeStart(e.selection.getRng());Le.isTextPosition(r)&&!JB(r)&&(Cy(e,_v(o,r)),n.set(null))}},MW=(e,n,o,r)=>{if(n.selection.isCollapsed()){const a=Ce(r,e);te(a,u=>{const f=Le.fromRangeStart(n.selection.getRng());uf(e,n.getBody(),f).bind(h=>wy(n,o,h))})}},l_=(e,n,o)=>um(e)?i_(e,n,o).isSome():!1,p8=(e,n,o)=>um(n)?Y0(e,n):!1,FW=e=>{const n=Yt(null),o=He(_p,e);return e.on("NodeChange",r=>{um(e)&&(g8(o,e.dom,r.parents),h8(e,n),MW(o,e,n,r.parents))}),n},NW=He(p8,!0),PW=He(p8,!1),Sy=(e,n,o)=>{if(um(e)){const r=c_(e,n).getOrThunk(()=>{const a=e.selection.getRng();return n?Le.fromRangeEnd(a):Le.fromRangeStart(a)});return uf(He(_p,e),e.getBody(),r).exists(a=>{const u=vw(a);return GN(o,u).exists(f=>(Cy(e,f),!0))})}else return!1},$W=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},b8=e=>Qt(ca(e),ol(e),(n,o)=>{const r=Od(!0,n),a=Od(!1,o);return _i(e,r).forall(u=>u.isEqual(a))}).getOr(!0),v8=(e,n)=>o=>GN(n,o).map(r=>()=>Cy(e,r)),y8=(e,n,o,r)=>{const a=e.getBody(),u=He(_p,e);e.undoManager.ignore(()=>{e.selection.setRng($W(o,r)),LE(e),uf(u,a,Le.fromRangeStart(e.selection.getRng())).map(KN).bind(v8(e,n)).each(xt)}),e.nodeChanged()},IW=(e,n)=>{const o=fm(n,e);return o||e},LW=(e,n,o,r)=>{const a=IW(e.getBody(),r.container()),u=He(_p,e),f=uf(u,a,r);return f.bind(v=>o?v.fold(tt(F.some(KN(v))),F.none,tt(F.some(vw(v))),F.none):v.fold(F.none,tt(F.some(vw(v))),F.none,tt(F.some(KN(v))))).map(v8(e,n)).getOrThunk(()=>{const v=Zf(o,a,r),w=v.bind(D=>uf(u,a,D));return Qt(f,w,()=>Ch(u,a,r).bind(D=>b8(D)?F.some(()=>{yh(e,o,ee.fromDom(D))}):F.none())).getOrThunk(()=>w.bind(()=>v.map(D=>()=>{o?y8(e,n,r,D):y8(e,n,D,r)})))})},u_=(e,n,o)=>{if(e.selection.isCollapsed()&&um(e)){const r=Le.fromRangeStart(e.selection.getRng());return LW(e,n,o,r)}return F.none()},HW=e=>Ud(e)>1,C8=(e,n)=>{const o=ee.fromDom(e.getBody()),r=ee.fromDom(e.selection.getStart()),a=Xf(r,o);return oo(a,n).fold(tt(a),u=>a.slice(0,u))},zW=e=>Ud(e)===1,VW=e=>C8(e,n=>e.schema.isBlock(xo(n))||HW(n)),UW=e=>C8(e,n=>e.schema.isBlock(xo(n))),w8=(e,n)=>{const o=He(Rk,e);return zn(n,r=>o(r)?[r.dom]:[])},lA=e=>{const n=UW(e);return w8(e,n)},WW=(e,n,o,r)=>{const a=w8(n,r);if(a.length===0)yh(n,e,o);else{const u=ey(o.dom,a);n.selection.setRng(u.toRange())}},uA=(e,n)=>{const o=Ce(VW(e),zW);return Js(o).bind(r=>{const a=Le.fromRangeStart(e.selection.getRng());return s9(n,a,r.dom)&&!ws(r)?F.some(()=>WW(n,e,r,o)):F.none()})},Mi=(e,n)=>{const o=n.parentElement;return Ar(n)&&!G(o)&&e.dom.isEmpty(o)},ZW=e=>ws(ee.fromDom(e)),xw=(e,n)=>{const o=e.selection.getStart(),r=Mi(e,o)||ZW(o)?ey(o,n):PC(e.selection.getRng(),n);e.selection.setRng(r.toRange())},Yp=(e,n)=>{const o=mo(n,lA(e));o.length>0&&xw(e,o)},d_=e=>pt(e.startContainer),iu=e=>e.startOffset===0&&d_(e),Q0=(e,n)=>{const o=n.startContainer.parentElement;return!G(o)&&Rk(e,ee.fromDom(o))},S8=e=>{const n=e.startContainer.parentNode,o=e.endContainer.parentNode;return!G(n)&&!G(o)&&n.isEqualNode(o)},jW=e=>{const n=e.endContainer;return e.endOffset===(pt(n)?n.length:n.childNodes.length)},x8=e=>S8(e)&&jW(e),GW=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),E8=e=>x8(e)||GW(e),m_=e=>{const n=e.selection.getRng();return iu(n)&&Q0(e,n)&&E8(n)},f_=e=>{if(m_(e)){const n=lA(e);return F.some(()=>{LE(e),Yp(e,n)})}else return F.none()},g_=(e,n)=>e.selection.isCollapsed()?uA(e,n):f_(e),qW=(e,n)=>Ye(e,o=>Iu(o.dom),o=>n.isBlock(xo(o))),T8=e=>qW(ee.fromDom(e.selection.getStart()),e.schema),df=e=>{const n=e.selection.getRng();return n.collapsed&&(d_(n)||e.dom.isEmpty(n.startContainer))&&!T8(e)},eb=e=>(df(e)&&xw(e,[]),!0),h_=(e,n,o)=>xe(o)?F.some(()=>{e._selectionOverrides.hideFakeCaret(),yh(e,n,ee.fromDom(o))}):F.none(),dA=(e,n)=>{const o=n?OC:_C,a=Ad(n?1:-1,e.getBody(),e.selection.getRng());return o(a)?h_(e,n,a.getNode(!n)):F.from(Od(n,a)).filter(u=>o(u)&&f0(a,u)).bind(u=>h_(e,n,u.getNode(!n)))},p_=(e,n)=>{const o=e.selection.getNode();return Au(o)?h_(e,n,o):F.none()},mA=(e,n)=>e.selection.isCollapsed()?dA(e,n):p_(e,n),A8=e=>Ps(e,n=>ai(n.dom)||hr(n.dom)).exists(n=>ai(n.dom)),fA=e=>td(e??"").getOr(0),k8=(e,n)=>{const o=e||$S(n)?"margin":"padding",r=$r(n,"direction")==="rtl"?"-right":"-left";return o+r},KW=(e,n,o,r,a,u)=>{const f=k8(o,ee.fromDom(u)),h=fA(e.getStyle(u,f));if(n==="outdent"){const v=Math.max(0,h-r);e.setStyle(u,f,v?v+a:"")}else{const v=h+r+a;e.setStyle(u,f,v)}},YW=(e,n)=>ns(n,o=>{const r=k8(Y1(e),o),a=Yr(o,r).map(fA).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&a>0}),D8=e=>{const n=O8(e);return!e.mode.isReadOnly()&&(n.length>1||YW(e,n))},XW=e=>!e.mode.isReadOnly()&&wU(e),b_=e=>qb(e)||sm(e),JW=e=>Va(e).exists(b_),O8=e=>Ce(jd(e.selection.getSelectedBlocks()),n=>!b_(n)&&!JW(n)&&A8(n)),_8=(e,n)=>{var h;if(e.mode.isReadOnly())return;const{dom:o}=e,r=tC(e),a=((h=/[a-z%]+$/i.exec(r))==null?void 0:h[0])??"px",u=fA(r),f=Y1(e);te(O8(e),v=>{KW(o,n,f,u,a,v.dom)}),n==="indent"?SN(e):SO(e)},R8=e=>_8(e,"indent"),gA=e=>_8(e,"outdent"),hA=e=>{if(e.selection.isCollapsed()&&D8(e)){const n=e.dom,o=e.selection.getRng(),r=Le.fromRangeStart(o),a=n.getParent(o.startContainer,n.isBlock);if(a!==null&&dk(ee.fromDom(a),r,e.schema))return F.some(()=>gA(e))}return F.none()},B8=(e,n)=>{const o=QE(e.selection.getRng());return P3(o)?F.some(()=>yh(e,n,ee.fromDom(e.selection.getNode()))):F.none()},Ew=(e,n)=>e.selection.isCollapsed()?F.none():B8(e,n),v_=(e,n,o)=>Os([hA,UO,HO,(r,a)=>u_(r,n,a),NO,Ak,ZO,mA,$O,g_,WO,Ew],r=>r(e,o)).filter(r=>e.selection.isEditable()),pA=(e,n)=>{v_(e,n,!1).fold(()=>{e.selection.isEditable()&&(LE(e),zE(e))},xt),OO(e)&&mO(e.dom,e.getBody())},y_=(e,n)=>{v_(e,n,!0).fold(()=>{e.selection.isEditable()&&nM(e)},xt),OO(e)&&mO(e.dom,e.getBody())},M8=(e,n)=>{e.addCommand("delete",()=>{pA(e,n)}),e.addCommand("forwardDelete",()=>{y_(e,n)})},C_=5,F8=400,N8=e=>e.touches===void 0||e.touches.length!==1?F.none():F.some(e.touches[0]),QW=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>C_||r>C_},bA=e=>{const n=fs(),o=Yt(!1),r=La(a=>{e.dispatch("longpress",{...a,type:"longpress"}),o.set(!0)},F8);e.on("touchstart",a=>{N8(a).each(u=>{r.cancel();const f={x:u.clientX,y:u.clientY,target:a.target};r.throttle(a),o.set(!1),n.set(f)})},!0),e.on("touchmove",a=>{r.cancel(),N8(a).each(u=>{n.on(f=>{QW(u,f)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",a=>{r.cancel(),a.type!=="touchcancel"&&n.get().filter(u=>u.target.isEqualNode(a.target)).each(()=>{o.get()?a.preventDefault():e.dispatch("tap",{...a,type:"tap"})})},!0)},w_=(e,n)=>Jt(e,n.nodeName),Tw=(e,n)=>pt(n)?!0:gn(n)?!w_(e.getBlockElements(),n)&&!tu(n)&&!ct(e,n)&&!Mg(n)&&!kb(n):!1,eZ=(e,n,o)=>ve(kE(ee.fromDom(o),ee.fromDom(n)),r=>w_(e,r.dom)),tZ=(e,n)=>{if(pt(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data))return!n.nextSibling||w_(e,n.nextSibling)||Mg(n.nextSibling)}return!1},S_=e=>e.dom.create(Sa(e),yp(e)),nZ=e=>{const n=e.dom,o=e.selection,r=e.schema,a=r.getBlockElements(),u=o.getStart(),f=e.getBody();let h,v,w=null;const D=Sa(e);if(!u||!gn(u))return;const R=f.nodeName.toLowerCase();if(!r.isValidChild(R,D.toLowerCase())||eZ(a,f,u))return;if(f.firstChild===f.lastChild&&Ar(f.firstChild)){h=S_(e),h.appendChild(mp().dom),f.replaceChild(h,f.firstChild),e.selection.setCursorLocation(h,0),e.nodeChanged();return}let M=f.firstChild;for(;M;)if(gn(M)&&ui(r,M),Tw(r,M)){if(tZ(a,M)){v=M,M=M.nextSibling,n.remove(v);continue}if(!h){if(!w&&e.hasFocus()&&(w=Sh(e.selection.getRng(),()=>document.createElement("span"))),!M.parentNode){M=null;break}h=S_(e),f.insertBefore(h,M)}v=M,M=M.nextSibling,h.appendChild(v)}else h=null,M=M.nextSibling;w&&(e.selection.setRng(Zc(w)),e.nodeChanged())},x_=(e,n,o)=>{const r=ee.fromDom(S_(e)),a=mp();is(r,a),o(n,r);const u=document.createRange();return u.setStartBefore(a.dom),u.setEndBefore(a.dom),u},P8=e=>{e.on("NodeChange",()=>nZ(e))},$8=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,oZ=(e,n,o)=>function(r){const a=arguments,u=a[a.length-2],f=u>0?n.charAt(u-1):"";if(f==='"')return r;if(f===">"){const h=n.lastIndexOf("<",u);if(h!==-1&&n.substring(h,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(a[0])+'">'+e.dom.encode(typeof a[1]=="string"?a[1]:a[0])+"</span>"},sZ=(e,n,o)=>{let r=n.length,a=o.content;if(o.format!=="raw"){for(;r--;)a=a.replace(n[r],oZ(e,a,uC(e)));o.content=a}},rZ=(e,n)=>ns(e,o=>{const r=n.match(o);return r!==null&&r[0].length===n.length}),cZ=e=>{const n="contenteditable",o=" "+Ct.trim(Ox(e))+" ",r=" "+Ct.trim(uC(e))+" ",a=$8(o),u=$8(r),f=_x(e);f.length>0&&e.on("BeforeSetContent",h=>{sZ(e,f,h)}),e.parser.addAttributeFilter("class",h=>{let v=h.length;for(;v--;){const w=h[v];a(w)?w.attr(n,"true"):u(w)&&w.attr(n,"false")}}),e.serializer.addAttributeFilter(n,h=>{let v=h.length;for(;v--;){const w=h[v];if(!a(w)&&!u(w))continue;const D=w.attr("data-mce-content");f.length>0&&D?rZ(f,D)?(w.name="#text",w.type=3,w.raw=!0,w.value=D):w.remove():w.attr(n,null)}})},I8=e=>Eu(ee.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),aZ=(e,n)=>{n.hasAttribute("data-mce-caret")&&(El(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},iZ=(e,n)=>{const o=I8(e);if(o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),aZ(e,o);return}F1(o)&&(aZ(e,o),e.undoManager.add())}},lZ=e=>{e.on("keyup compositionstart",He(iZ,e))},L8=hr,uZ=(e,n,o)=>Sw(n,e,o,Lt,cl,L8),dZ=(e,n,o)=>m8(n,e,o,u=>Lt(u)||OB(u),u=>cl(u)||ik(u),L8),mZ=e=>{const n=e.dom.create(Sa(e));return n.innerHTML='<br data-mce-bogus="1">',n},H8=(e,n,o)=>{const r=kd(e.getBody()),a=He(Mv,n===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!a(Le.fromRangeStart(o))){const h=ee.fromDom(mZ(e));n===1?Wi(ee.fromDom(u),h):ea(ee.fromDom(u),h),e.selection.select(h.dom,!0),e.selection.collapse()}}},z8=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return uZ(o,e,r).orThunk(()=>(H8(e,o,r),F.none()))},fZ=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return dZ(o,e,r).orThunk(()=>(H8(e,o,r),F.none()))},gZ=(e,n)=>{const o=n?e.getEnd(!0):e.getStart(!0);return vk(o)?!n:n},V8=(e,n)=>z8(e,gZ(e.selection,n)).exists(o=>(qu(e,o),!0)),U8=(e,n)=>fZ(e,n).exists(o=>(qu(e,o),!0)),W8=(e,n)=>Kp(e,n,n?cl:Lt),vA=(e,n)=>zO(e,!n).map(o=>{const r=o.toRange(),a=e.selection.getRng();return n?r.setStart(a.startContainer,a.startOffset):r.setEnd(a.endContainer,a.endOffset),r}).exists(o=>(qu(e,o),!0)),Z8=(e,n)=>{const o=f=>Io(f,n),r=f=>ai(f.dom),a=ee.fromDom(e.container());return Ps(a,r,o).filter(f=>!o(f))},hZ=(e,n,o)=>(o?t8:e8)(e.getBody(),n).map(a=>a.toRange()),pZ=(e,n)=>{const o=Le.fromRangeStart(e.selection.getRng()),r=Le.fromRangeEnd(e.selection.getRng()),a=ee.fromDom(e.getBody());return Co(Qt(Z8(o,a),Z8(r,a),(f,h)=>Io(f,h)?F.some(f):F.none())).fold(Ae,f=>n&&e_(f.dom,r)||!n&&QO(f.dom,o)?hZ(e,n?r:o,n).exists(h=>(qu(e,h),!0)):!1)},j8=(e,n)=>pZ(e,n),G8=e=>De(["figcaption"],xo(e)),bZ=(e,n,o)=>{const r=He(Io,n);return Ps(ee.fromDom(e.container()),a=>o.isBlock(xo(a)),r).filter(G8)},vZ=(e,n,o)=>n?e_(e.dom,o):QO(e.dom,o),yZ=(e,n)=>{const o=ee.fromDom(e.getBody()),r=Le.fromRangeStart(e.selection.getRng());return bZ(r,o,e.schema).exists(()=>{if(vZ(o,n,r)){const u=x_(e,o,n?is:yu);return e.selection.setRng(u),!0}else return!1})},Aw=(e,n)=>e.selection.isCollapsed()?yZ(e,n):!1,CZ=(e,n,o)=>{const r=e.selection.getRng(),a=Le.fromRangeStart(r);return e.getBody().firstChild===n&&QO(o,a)?(e.execCommand("InsertNewBlockBefore"),!0):!1},wZ=(e,n)=>{const o=e.selection.getRng(),r=Le.fromRangeStart(o);return e.getBody().lastChild===n&&e_(n,r)?(e.execCommand("InsertNewBlockAfter"),!0):!1},q8=(e,n)=>n?F.from(e.dom.getParent(e.selection.getNode(),"details")).map(o=>wZ(e,o)).getOr(!1):F.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(o=>F.from(e.dom.getParent(o,"details")).map(r=>CZ(e,r,o))).getOr(!1),yA=(e,n)=>q8(e,n),K8={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},SZ=e=>ae(e,n=>({...K8,...n})),$Y=e=>ae(e,n=>({...K8,...n})),Y8=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,xZ=(e,n)=>zn(SZ(e),o=>Y8(o,n)?[o]:[]),EZ=(e,n)=>zn($Y(e),o=>Y8(o,n)?[o]:[]),Zn=(e,...n)=>()=>e.apply(null,n),kw=(e,n)=>Xt(xZ(e,n),o=>o.action()),X8=(e,n)=>Os(EZ(e,n),o=>o.action()),J8=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return Sw(e,o,r,OC,_C,Au).exists(a=>(qu(e,a),!0))},E_=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return m8(e,o,r,OC,_C,Au).exists(a=>(qu(e,a),!0))},Bh=(e,n)=>Kp(e,n,n?_C:OC),Ml=(e,n)=>T_(e,n,Ve),T_=(e,n,o)=>zn(Er(e),r=>wi(r,n)?o(r)?[r]:[]:T_(r,n,o)),Dw=(e,n,o=Ae)=>{if(o(n))return F.none();if(De(e,xo(n)))return F.some(n);const r=a=>wi(a,"table")||o(a);return Xr(n,e.join(","),r)},Xp=(e,n)=>Dw(["td","th"],e,n),rg=e=>Ml(e,"th,td"),xy=(e,n)=>ha(e,"table",n),CA=dc.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Ey={...CA,none:e=>CA.none(e)},wA=(e,n,o,r,a=Ve)=>{const u=r===1;if(!u&&o<=0)return Ey.first(e[0]);if(u&&o>=e.length-1)return Ey.last(e[e.length-1]);{const f=o+r,h=e[f];return a(h)?Ey.middle(n,h):wA(e,n,f,r,a)}},eP=(e,n)=>xy(e,n).bind(o=>{const r=rg(o);return oo(r,u=>Io(e,u)).map(u=>({index:u,all:r}))}),TZ=(e,n,o)=>eP(e,o).fold(()=>Ey.none(e),a=>wA(a.all,e,a.index,1,n)),tP=(e,n,o)=>eP(e,o).fold(()=>Ey.none(),a=>wA(a.all,e,a.index,-1,n));var nP=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],oP=()=>{const e=w=>ee.fromDom(w.dom.cloneNode(!1)),n=w=>gl(w).dom,o=w=>Rr(w)?xo(w)==="body"?!0:De(nP,xo(w)):!1,r=w=>Rr(w)?De(["br","img","hr","input"],xo(w)):!1,a=w=>Rr(w)&&lr(w,"contenteditable")==="false",u=(w,D)=>w.dom.compareDocumentPosition(D.dom),f=(w,D)=>{const R=Ro(w);zc(D,R)},h=w=>{const D=xo(w);return De(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],D)},v=w=>Rr(w)?ji(w,"lang"):F.none();return{up:tt({selector:Xr,closest:ha,predicate:xu,all:ma}),down:tt({selector:ge,predicate:$}),styles:tt({get:$r,getRaw:Yr,set:fa,remove:jh}),attrs:tt({get:lr,set:Sr,remove:cc,copyTo:f}),insert:tt({before:ea,after:Wi,afterAll:xg,append:is,appendAll:Zi,prepend:yu,wrap:xi}),remove:tt({unwrap:si,remove:Ws}),create:tt({nu:ee.fromTag,clone:e,text:ee.fromText}),query:tt({comparePosition:u,prevSibling:Vi,nextSibling:Ua}),property:tt({children:Er,name:xo,parent:Va,document:n,isText:ys,isComment:Vl,isElement:Rr,isSpecial:h,getLanguage:v,getText:ga,setText:b1,isBoundary:o,isEmptyTag:r,isNonEditable:a}),eq:Io,is:Sf}};const A_=(e,n)=>({element:e,offset:n}),AZ=(e,n)=>{if(e.property().isText(n))return A_(n,e.property().getText(n).length);{const o=e.property().children(n);return o.length>0?AZ(e,o[o.length-1]):A_(n,o.length)}},kZ=(e,n,o)=>{const r=e.property().children(n);return r.length>0&&o<r.length?kZ(e,r[o],0):r.length>0&&e.property().isElement(n)&&r.length===o?AZ(e,r[r.length-1]):A_(n,o)},IY=kZ,Rm=oP(),DZ=(e,n)=>IY(Rm,e,n),sP=Jn("image"),tb=e=>{const n=e;return F.from(n[sP])},rP=(e,n)=>{const o=e;o[sP]=n},k_=Jn("event"),SA=e=>{const n=e;return F.from(n[k_])},Ty=e=>n=>{const o=n;o[k_]=e},cP=(e,n)=>Ty(n)(e),D_=Ty(0),OZ=Ty(2),aP=Ty(1),iP=(e=>n=>{const o=n;return F.from(o[k_]).exists(r=>r===e)})(0),O_=()=>Object.freeze({length:0,item:e=>null}),__=Jn("mode"),RZ=e=>{const n=e;return F.from(n[__])},xA=e=>n=>{const o=n;o[__]=e},lP=(e,n)=>xA(n)(e),uP=xA(0),R_=xA(2),BZ=xA(1),dP=e=>n=>{const o=n;return F.from(o[__]).exists(r=>r===e)},nb=dP(0),mP=dP(1),Mh=(e,n)=>({...n,get length(){return n.length},add:(o,r)=>{if(nb(e))if(re(o)){if(!ro(r))return n.add(o,r)}else return n.add(o);return null},remove:o=>{nb(e)&&n.remove(o)},clear:()=>{nb(e)&&n.clear()}}),B_=["none","copy","link","move"],MZ=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],M_=()=>{const e=new window.DataTransfer;let n="move",o="all";const r={get dropEffect(){return n},set dropEffect(a){De(B_,a)&&(n=a)},get effectAllowed(){return o},set effectAllowed(a){iP(r)&&De(MZ,a)&&(o=a)},get items(){return Mh(r,e.items)},get files(){return mP(r)?O_():e.files},get types(){return e.types},setDragImage:(a,u,f)=>{nb(r)&&(rP(r,{image:a,x:u,y:f}),e.setDragImage(a,u,f))},getData:a=>mP(r)?"":e.getData(a),setData:(a,u)=>{nb(r)&&e.setData(a,u)},clearData:a=>{nb(r)&&e.clearData(a)}};return uP(r),r},FZ=e=>{const n=M_(),o=RZ(e);return R_(e),D_(n),n.dropEffect=e.dropEffect,n.effectAllowed=e.effectAllowed,tb(e).each(r=>n.setDragImage(r.image,r.x,r.y)),te(e.types,r=>{r!=="Files"&&n.setData(r,e.getData(r))}),te(e.files,r=>n.items.add(r)),SA(e).each(r=>{cP(n,r)}),o.each(r=>{lP(e,r),lP(n,r)}),n},F_=e=>{const n=e.getData("text/html");return n===""?F.none():F.some(n)},EA=(e,n)=>e.setData("text/html",n),fP=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),gP=(e,n)=>zn(n,o=>{const r=fP(Di(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),hP=(e,n,o)=>$e(e,(r,a)=>r.fold(()=>F.some(a),u=>{const f=Math.sqrt(Math.abs(u.x-n)+Math.abs(u.y-o)),h=Math.sqrt(Math.abs(a.x-n)+Math.abs(a.y-o));return F.some(h<f?a:u)}),F.none()),pP=(e,n,o,r,a)=>{const u=ge(ee.fromDom(o),"td,th,caption").map(h=>h.dom),f=Ce(gP(e,u),h=>n(h,a));return hP(f,r,a).map(h=>h.cell)},Ow=e=>e.bottom,TA=e=>e.top,bP=(e,n)=>e.y<n,vP=(e,n)=>e.y>n,yP=He(pP,Ow,bP),CP=He(pP,TA,vP),AA=(e,n)=>Wo(n.getClientRects()).bind(o=>yP(e,o.left,o.top)).bind(o=>aA(QN(o),n)),N_=(e,n)=>Js(n.getClientRects()).bind(o=>CP(e,o.left,o.top)).bind(o=>aA(t_(o),n)),_w=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),NZ=e=>e.breakType===sg.Wrap&&e.positions.length===0,wP=e=>e.breakType===sg.Br&&e.positions.length===1,SP=(e,n,o)=>{const r=e(n,o);return NZ(r)||!Ar(o.getNode())&&wP(r)?!_w(e,n,r):r.breakAt.isNone()},PZ=He(SP,X0),xP=He(SP,Cw),$Z=(e,n,o)=>{const r=Le.fromRangeStart(n);return Tp(!e,o).exists(a=>a.isEqual(r))},EP=(e,n,o,r)=>{const a=e.selection.getRng(),u=n?1:-1;return Rv()&&$Z(n,a,o)?(Rh(u,e,o,!n,!1).each(f=>{qu(e,f)}),!0):!1},LY=(e,n,o)=>AA(n,o).orThunk(()=>Wo(o.getClientRects()).bind(r=>JO(XN(e,Le.before(n)),r.left))).getOr(Le.before(n)),IZ=(e,n,o)=>N_(n,o).orThunk(()=>Wo(o.getClientRects()).bind(r=>JO(JN(e,Le.after(n)),r.left))).getOr(Le.after(n)),TP=(e,n)=>{const o=n.getNode(e);return Jd(o)?F.some(o):F.none()},LZ=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?Wi:ea,a=x_(n,ee.fromDom(o),r);qu(n,a)})},AP=(e,n,o)=>{const r=TP(!!n,o),a=n===!1;r.fold(()=>qu(e,o.toRange()),u=>Tp(a,e.getBody()).filter(f=>f.isEqual(o)).fold(()=>qu(e,o.toRange()),f=>LZ(n,e,u)))},HZ=(e,n,o,r)=>{const a=e.selection.getRng(),u=Le.fromRangeStart(a),f=e.getBody();if(!n&&PZ(r,u)){const h=LY(f,o,u);return AP(e,n,h),!0}else if(n&&xP(r,u)){const h=IZ(f,o,u);return AP(e,n,h),!0}else return!1},kP=(e,n,o)=>F.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>F.from(e.dom.getParent(r,"table")).map(a=>o(e,n,a,r))).getOr(!1),DP=(e,n)=>kP(e,n,EP),Rw=(e,n)=>kP(e,n,HZ),zZ=e=>{const n=Xd.exact(e,0,e,0);return a2(n)},Jp=e=>mf(e)||Es(e).some(n=>Ul(n)&&mf(n)),P_=(e,n,o)=>o.fold(F.none,F.none,(r,a)=>kg(a).map(u=>zZ(u)),r=>e.mode.isReadOnly()||!$_(r)||!Jp(r)?F.none():(e.execCommand("mceTableInsertRowAfter"),I_(e,n,r))),$_=e=>Ps(e,sc("table")).exists(yl),I_=(e,n,o)=>P_(e,n,TZ(o,mf)),L_=(e,n,o)=>P_(e,n,tP(o,mf)),mf=e=>yl(e)||un(e,OP),OP=e=>Ul(e)&&yl(e),Ku=(e,n)=>{const o=["table","li","dl"],r=ee.fromDom(e.getBody()),a=h=>{const v=xo(h);return Io(h,r)||De(o,v)},u=e.selection.getRng(),f=ee.fromDom(n?u.endContainer:u.startContainer);return Xp(f,a).map(h=>(xy(h,a).each(D=>{e.model.table.clearSelectedCells(D.dom)}),e.selection.collapse(!n),(n?I_:L_)(e,a,h).each(D=>{e.selection.setRng(D)}),!0)).getOr(!1)},ob=(e,n,o)=>{const r=wo.os.isMacOS()||wo.os.isiOS(),a=wo.browser.isFirefox();kw([{keyCode:jt.RIGHT,action:Zn(V8,e,!0)},{keyCode:jt.LEFT,action:Zn(V8,e,!1)},{keyCode:jt.UP,action:Zn(U8,e,!1)},{keyCode:jt.DOWN,action:Zn(U8,e,!0)},...r?[{keyCode:jt.UP,action:Zn(vA,e,!1),metaKey:!0,shiftKey:!0},{keyCode:jt.DOWN,action:Zn(vA,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:jt.RIGHT,action:Zn(DP,e,!0)},{keyCode:jt.LEFT,action:Zn(DP,e,!1)},{keyCode:jt.UP,action:Zn(Rw,e,!1)},{keyCode:jt.DOWN,action:Zn(Rw,e,!0)},{keyCode:jt.UP,action:Zn(Rw,e,!1)},{keyCode:jt.UP,action:Zn(yA,e,!1)},{keyCode:jt.DOWN,action:Zn(yA,e,!0)},{keyCode:jt.RIGHT,action:Zn(J8,e,!0)},{keyCode:jt.LEFT,action:Zn(J8,e,!1)},{keyCode:jt.UP,action:Zn(E_,e,!1)},{keyCode:jt.DOWN,action:Zn(E_,e,!0)},{keyCode:jt.RIGHT,action:Zn(l_,e,n,!0)},{keyCode:jt.LEFT,action:Zn(l_,e,n,!1)},{keyCode:jt.RIGHT,ctrlKey:!r,altKey:r,action:Zn(NW,e,n)},{keyCode:jt.LEFT,ctrlKey:!r,altKey:r,action:Zn(PW,e,n)},{keyCode:jt.UP,action:Zn(Aw,e,!1)},{keyCode:jt.DOWN,action:Zn(Aw,e,!0)},...a?[{keyCode:jt.UP,action:Zn(j8,e,!1)},{keyCode:jt.DOWN,action:Zn(j8,e,!0)}]:[]],o).each(u=>{o.preventDefault()})},_P=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||ob(e,n,o)})},Pd=(e,n)=>({container:e,offset:n}),kA=Bs.DOM,Bw=e=>n=>e===n?-1:0,VZ=e=>n=>e.isBlock(n)||De(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",H_=(e,n,o)=>{if(pt(e)&&n>=0)return F.some(Pd(e,n));{const r=vd(kA);return F.from(r.backwards(e,n,Bw(e),o)).map(a=>Pd(a.container,a.container.data.length))}},UZ=(e,n,o)=>{if(pt(e)&&n>=e.length)return F.some(Pd(e,n));{const r=vd(kA);return F.from(r.forwards(e,n,Bw(e),o)).map(a=>Pd(a.container,0))}},z_=(e,n,o)=>{if(!pt(e))return F.none();const r=e.data;if(n>=0&&n<=r.length)return F.some(Pd(e,n));{const a=vd(kA);return F.from(a.backwards(e,n,Bw(e),o)).bind(u=>{const f=u.container.data;return z_(u.container,n+f.length,o)})}},RP=(e,n,o)=>{if(!pt(e))return F.none();const r=e.data;if(n<=r.length)return F.some(Pd(e,n));{const a=vd(kA);return F.from(a.forwards(e,n,Bw(e),o)).bind(u=>RP(u.container,n-r.length,o))}},DA=(e,n,o,r,a)=>{const u=vd(e,VZ(e));return F.from(u.backwards(n,o,r,a))},WZ=e=>e.collapsed&&pt(e.startContainer),ZZ=e=>ki(e.toString().replace(/\u00A0/g," ")),sb=e=>e!==""&&`  \uFEFF\f
\r	\v`.indexOf(e)!==-1,OA=(e,n)=>e.substring(n.length),BP=(e,n,o,r=!1)=>{let a;const u=o.charAt(0);for(a=n-1;a>=0;a--){const f=e.charAt(a);if(!r&&sb(f))return F.none();if(u===f&&zs(e,o,a,n))break}return F.some(a)},_A=(e,n,o,r=!1)=>{if(!WZ(n))return F.none();const a={text:"",offset:0},u=(h,v,w)=>(a.text=w+a.text,a.offset+=v,BP(a.text,a.offset,o,r).getOr(v)),f=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return DA(e,n.startContainer,n.startOffset,u,f).bind(h=>{const v=n.cloneRange();if(v.setStart(h.container,h.offset),v.setEnd(n.endContainer,n.endOffset),v.collapsed)return F.none();const w=ZZ(v);return w.lastIndexOf(o)!==0?F.none():F.some({text:OA(w,o),range:v,trigger:o})})},V_=e=>e.nodeType===a1,jZ=e=>e.nodeType===Cg,MP=e=>{if(V_(e))return Pd(e,e.data.length);{const n=e.childNodes;return n.length>0?MP(n[n.length-1]):Pd(e,n.length)}},FP=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?FP(o[n],0):o.length>0&&jZ(e)&&o.length===n?MP(o[o.length-1]):Pd(e,n)},NP=(e,n)=>{const o=e.getParent(n.container,e.isBlock)??e.getRoot();return DA(e,n.container,n.offset,(r,a)=>a===0?-1:a,o).filter(r=>{const a=r.container.data.charAt(r.offset-1);return!sb(a)}).isSome()},RA=e=>n=>{const o=FP(n.startContainer,n.startOffset);return!NP(e,o)},PP=(e,n,o)=>Os(o.triggers,r=>_A(e,n,r)),BA=(e,n)=>{const o=n(),r=e.selection.getRng();return PP(e.dom,r,o).bind(a=>$P(e,n,a))},$P=(e,n,o,r={})=>{const a=n(),f=e.selection.getRng().startContainer.nodeValue??"",h=Ce(a.lookupByTrigger(o.trigger),w=>o.text.length>=w.minChars&&w.matches.getOrThunk(()=>RA(e.dom))(o.range,f,o.text));if(h.length===0)return F.none();const v=Promise.all(ae(h,w=>w.fetch(o.text,w.maxResults,r).then(R=>({matchText:o.text,items:R,columns:w.columns,onAction:w.onAction,highlightOn:w.highlightOn}))));return F.some({lookupData:v,context:o})};var Bm;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(Bm||(Bm={}));const U_=(e,n,o)=>e.stype===Bm.Error?n(e.serror):o(e.svalue),GZ=e=>{const n=[],o=[];return te(e,r=>{U_(r,a=>o.push(a),a=>n.push(a))}),{values:n,errors:o}},qZ=(e,n)=>e.stype===Bm.Error?{stype:Bm.Error,serror:n(e.serror)}:e,IP=(e,n)=>e.stype===Bm.Value?{stype:Bm.Value,svalue:n(e.svalue)}:e,KZ=(e,n)=>e.stype===Bm.Value?n(e.svalue):e,YZ=(e,n)=>e.stype===Bm.Error?n(e.serror):e,W_=e=>({stype:Bm.Value,svalue:e}),Ay=e=>({stype:Bm.Error,serror:e}),Fi={fromResult:e=>e.fold(Ay,W_),toResult:e=>U_(e,_s.error,_s.value),svalue:W_,partition:GZ,serror:Ay,bind:KZ,bindError:YZ,map:IP,mapError:qZ,fold:U_},Z_=e=>En(e)&&on(e).length>100?" removed due to size":JSON.stringify(e,null,2),j_=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:tt("... (only showing first ten failures)")}]):e;return ae(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},G_=(e,n)=>Fi.serror([{path:e,getErrorInfo:n}]),JZ=(e,n,o)=>G_(e,()=>'Could not find valid *required* value for "'+n+'" in '+Z_(o)),LP=(e,n)=>G_(e,tt(n)),HP=e=>{const n=(r,a)=>Fi.bindError(e(a),u=>LP(r,u)),o=tt("val");return{extract:n,toString:o}},QZ=HP(Fi.svalue),q_=tt(QZ),Mw=(e,n)=>HP(o=>{const r=typeof o;return e(o)?Fi.svalue(o):Fi.serror(`Expected type: ${n} but got: ${r}`)}),ej=Mw(vs,"number"),K_=Mw(re,"string"),Fw=Mw(le,"function"),zP=()=>({tag:"required",process:{}}),Y_=e=>({tag:"defaultedThunk",process:e}),X_=e=>Y_(tt(e)),J_=()=>({tag:"option",process:{}}),VP=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),UP=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},tj=(e,n)=>Fi.svalue(fe(n,Qe.apply(void 0,e))),WP=e=>k(Fi.serror,Lo)(e),nj={consolidateObj:(e,n)=>{const o=Fi.partition(e);return o.errors.length>0?WP(o.errors):tj(o.values,n)},consolidateArr:e=>{const n=Fi.partition(e);return n.errors.length>0?WP(n.errors):Fi.svalue(n.values)}},oj=(e,n,o,r)=>dn(n,o).fold(()=>JZ(e,o,n),r),ZP=(e,n,o,r)=>{const a=dn(e,n).getOrThunk(()=>o(e));return r(a)},eR=(e,n,o)=>o(dn(e,n)),sj=(e,n,o,r)=>{const a=dn(e,n).map(u=>u===!0?o(e):u);return r(a)},rj=(e,n,o,r,a)=>{const u=h=>a.extract(n.concat([r]),h),f=h=>h.fold(()=>Fi.svalue(F.none()),v=>{const w=a.extract(n.concat([r]),v);return Fi.map(w,F.some)});switch(e.tag){case"required":return oj(n,o,r,u);case"defaultedThunk":return ZP(o,r,e.process,u);case"option":return eR(o,r,f);case"defaultedOptionThunk":return sj(o,r,e.process,f);case"mergeWithThunk":return ZP(o,r,tt({}),h=>{const v=fe(e.process(o),h);return u(v)})}},jP=(e,n,o)=>{const r={},a=[];for(const u of o)UP(u,(f,h,v,w)=>{const D=rj(v,e,n,f,w);Fi.fold(D,R=>{a.push(...R)},R=>{r[h]=R})},(f,h)=>{r[f]=h(n)});return a.length>0?Fi.serror(a):Fi.svalue(r)},GP=e=>({extract:(r,a)=>jP(r,a,e),toString:()=>`obj{
`+ae(e,a=>UP(a,(u,f,h,v)=>u+" -> "+v.toString(),(u,f)=>"state("+u+")")).join(`
`)+"}"}),cj=e=>({extract:(r,a)=>{const u=ae(a,(f,h)=>e.extract(r.concat(["["+h+"]"]),f));return nj.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),aj=(e,n,o)=>{const r=n.extract([e],o);return Fi.mapError(r,a=>({input:o,errors:a}))},qP=(e,n,o)=>Fi.toResult(aj(e,n,o)),KP=e=>`Errors: 
`+j_(e.errors).join(`
`)+`

Input object: `+Z_(e.input),ky=VP,tR=e=>ky(e,e,zP(),q_()),YP=(e,n)=>ky(e,e,zP(),n),nR=e=>YP(e,K_),XP=e=>YP(e,Fw),ij=e=>ky(e,e,J_(),q_()),JP=(e,n)=>ky(e,e,J_(),n),QP=e=>JP(e,K_),qc=e=>JP(e,Fw),lj=(e,n)=>ky(e,e,X_(n),q_()),e$=(e,n,o)=>ky(e,e,X_(n),o),t$=(e,n)=>e$(e,n,ej),n$=(e,n,o)=>e$(e,n,cj(o)),oR=nR("type"),o$=XP("fetch"),Nw=XP("onAction"),uj=e=>lj("columns",e),dj=GP([oR,nR("trigger"),t$("minChars",1),uj(1),t$("maxResults",10),qc("matches"),o$,Nw,n$("highlightOn",[],K_)]),mj=e=>qP("Autocompleter",dj,e),fj=()=>{const e={},n={},o={},r={},a={},u={},f={},h={},v={},w=(L,K)=>(W,J)=>{L[W.toLowerCase()]={...J,type:K}},D=(L,K)=>(W,J)=>{L[W.toLowerCase()]={type:K,...J}},R=(L,K)=>r[L.toLowerCase()]=K,M=(L,K)=>f[L.toLowerCase()]=K;return{addButton:w(e,"button"),addGroupToolbarButton:w(e,"grouptoolbarbutton"),addToggleButton:w(e,"togglebutton"),addMenuButton:w(e,"menubutton"),addSplitButton:w(e,"splitbutton"),addMenuItem:w(n,"menuitem"),addNestedMenuItem:w(n,"nestedmenuitem"),addToggleMenuItem:w(n,"togglemenuitem"),addAutocompleter:w(o,"autocompleter"),addContextMenu:w(a,"contextmenu"),addContextToolbar:w(u,"contexttoolbar"),addContextForm:D(u,"contextform"),addSidebar:w(h,"sidebar"),addView:w(v,"views"),addIcon:R,addContext:M,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:a,contextToolbars:u,sidebars:h,views:v,contexts:f})}},gj=e=>{const n=e.ui.registry.getAll().popups,o=Nc(n,f=>mj(f).fold(h=>{throw new Error(KP(h))},No)),r=Pl(an(o,f=>f.trigger)),a=tn(o);return{dataset:o,triggers:r,lookupByTrigger:f=>Ce(a,h=>h.trigger===f)}},hj=(e,n)=>{const o=La(n.load,50);e.on("input",r=>{r.inputType==="insertCompositionText"&&!e.composing||o.throttle()}),e.on("keydown",r=>{const a=r.which;a===8?o.throttle():a===27?(o.cancel(),n.cancelIfNecessary()):(a===38||a===40)&&o.cancel()},!0),e.on("remove",o.cancel)},pj=e=>{const n=fs(),o=Yt(!1),r=n.isSet,a=()=>{r()&&(ax(e),o.set(!1),n.clear())},u=R=>{r()||n.set({trigger:R.trigger,matchLength:R.text.length})},f=Pc(()=>gj(e)),h=R=>n.get().map(M=>_A(e.dom,e.selection.getRng(),M.trigger,!0).bind(L=>$P(e,f,L,R))).getOrThunk(()=>BA(e,f)),v=R=>{h(R).fold(a,M=>{u(M.context),M.lookupData.then(L=>{n.get().map(K=>{const W=M.context;K.trigger===W.trigger&&(n.set({...K,matchLength:W.text.length}),o.get()?(X2(e,{range:W.range}),Qn(e,{lookupData:L})):(o.set(!0),X2(e,{range:W.range}),X4(e,{lookupData:L})))})})})},w=(R,M)=>{const L=R.compareBoundaryPoints(window.Range.START_TO_START,M),K=R.compareBoundaryPoints(window.Range.END_TO_END,M);return L>=0&&K<=0},D=()=>n.get().bind(({trigger:R})=>{const M=e.selection.getRng();return _A(e.dom,M,R,o.get()).filter(({range:L})=>w(M,L)).map(({range:L})=>L)});e.addCommand("mceAutocompleterReload",(R,M)=>{const L=En(M)?M.fetchOptions:{};v(L)}),e.addCommand("mceAutocompleterClose",a),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{D().each(R=>{X2(e,{range:R})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>D().isSome()),hj(e,{cancelIfNecessary:a,load:v})},bj=wn().browser.isSafari(),s$=e=>rm(ee.fromDom(e)),r$=(e,n)=>{var o;return e.startOffset===0&&e.endOffset===((o=n.textContent)==null?void 0:o.length)},MA=(e,n)=>F.from(e.getParent(n.container(),"details")),c$=(e,n)=>MA(e,n).isSome(),vj=(e,n)=>{const o=F.from(e.getParent(n.startContainer,"details")),r=F.from(e.getParent(n.endContainer,"details"));if(o.isSome()||r.isSome()){const a=o.bind(u=>F.from(e.select("summary",u)[0]));return F.some({startSummary:a,startDetails:o,endDetails:r})}else return F.none()},a$=(e,n)=>ca(n).exists(o=>o.isEqual(e)),i$=(e,n)=>ol(n).exists(o=>Ar(o.getNode())&&ra(n,o).exists(r=>r.isEqual(e))||o.isEqual(e)),l$=(e,n)=>n.startSummary.exists(o=>a$(e,o)),yj=(e,n)=>n.startSummary.exists(o=>i$(e,o)),Cj=(e,n)=>n.startDetails.exists(o=>ra(o,e).forall(r=>n.startSummary.exists(a=>!a.contains(e.container())&&a.contains(r.container())))),wj=(e,n,o)=>o.startDetails.exists(r=>_i(e,n).forall(a=>!r.contains(a.container()))),u$=(e,n)=>{const o=n.getNode();ro(o)||e.selection.setCursorLocation(o,n.offset())},sR=(e,n,o)=>{const r=e.dom.getParent(n.container(),"details");if(r&&!r.open){const a=e.dom.select("summary",r)[0];a&&(o?ca(a):ol(a)).each(f=>u$(e,f))}else u$(e,n)},Sj=(e,n)=>{const o=v=>v.contains(e.startContainer),r=v=>v.contains(e.endContainer),a=n.startSummary.exists(o),u=n.startSummary.exists(r),f=n.startDetails.forall(v=>n.endDetails.forall(w=>v!==w));return(a||u)&&!(a&&u)||f},rR=(e,n,o)=>{const{dom:r,selection:a}=e,u=e.getBody();if(o==="character"){const f=Le.fromRangeStart(a.getRng()),h=r.getParent(f.container(),r.isBlock),v=MA(r,f),w=h&&r.isEmpty(h),D=G(h==null?void 0:h.previousSibling),R=G(h==null?void 0:h.nextSibling);return w&&(n?R:D)&&Zf(!n,u,f).exists(K=>c$(r,K)&&!It(v,MA(r,K)))?!0:Zf(n,u,f).fold(Ae,M=>{const L=MA(r,M);if(c$(r,M)&&!It(v,L)){if(n||sR(e,M,!1),h&&w){if(n&&D)return!0;if(!n&&R)return!0;sR(e,M,n),e.dom.remove(h)}return!0}else return!1})}else return!1},xj=(e,n,o,r)=>{const u=e.selection.getRng(),f=Le.fromRangeStart(u),h=e.getBody();return r==="selection"?Sj(u,n):o?yj(f,n)||wj(h,f,n):l$(f,n)||Cj(f,n)},d$=(e,n,o)=>vj(e.dom,e.selection.getRng()).fold(()=>rR(e,n,o),r=>xj(e,r,n,o)||rR(e,n,o)),m$=(e,n,o)=>{const r=e.selection,a=r.getNode(),u=r.getRng(),f=Le.fromRangeStart(u);return b2(a)?(o==="selection"&&r$(u,a)||s9(n,f,a)?s$(a):e.undoManager.transact(()=>{const h=r.getSel();let{anchorNode:v,anchorOffset:w,focusNode:D,focusOffset:R}=h??{};const M=()=>{xe(v)&&xe(w)&&xe(D)&&xe(R)&&(h==null||h.setBaseAndExtent(v,w,D,R))},L=()=>{v=h==null?void 0:h.anchorNode,w=h==null?void 0:h.anchorOffset,D=h==null?void 0:h.focusNode,R=h==null?void 0:h.focusOffset},K=(J,pe)=>{te(J.childNodes,be=>{gh(be)&&pe.appendChild(be)})},W=e.dom.create("span",{"data-mce-bogus":"1"});K(a,W),a.appendChild(W),M(),(o==="word"||o==="line")&&(h==null||h.modify("extend",n?"right":"left",o)),!r.isCollapsed()&&r$(r.getRng(),W)?s$(a):(e.execCommand(n?"ForwardDelete":"Delete"),L(),K(W,a),M()),e.dom.remove(W)}),!0):!1},rb=(e,n,o)=>d$(e,n,o)||bj&&m$(e,n,o)?F.some(rt):F.none(),f$=e=>(n,o,r={})=>{const a=n.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:a,currentTarget:a,eventPhase:Event.AT_TARGET,originalTarget:a,explicitOriginalTarget:a,isTrusted:!1,srcElement:a,cancelable:!1,preventDefault:rt,inputType:o},f=D1(new InputEvent(e));return n.dispatch(e,{...f,...u,...r})},Pw=f$("input"),FA=f$("beforeinput"),cR=wn(),g$=cR.os,h$=g$.isMacOS()||g$.isiOS(),Tj=cR.browser.isFirefox(),Aj=(e,n,o)=>{const r=o.keyCode===jt.BACKSPACE?"deleteContentBackward":"deleteContentForward",a=e.selection.isCollapsed(),u=a?"character":"selection",f=h=>a?h?"word":"line":"selection";X8([{keyCode:jt.BACKSPACE,action:Zn(hA,e)},{keyCode:jt.BACKSPACE,action:Zn(UO,e,!1)},{keyCode:jt.DELETE,action:Zn(UO,e,!0)},{keyCode:jt.BACKSPACE,action:Zn(HO,e,!1)},{keyCode:jt.DELETE,action:Zn(HO,e,!0)},{keyCode:jt.BACKSPACE,action:Zn(u_,e,n,!1)},{keyCode:jt.DELETE,action:Zn(u_,e,n,!0)},{keyCode:jt.BACKSPACE,action:Zn(Ak,e,!1)},{keyCode:jt.DELETE,action:Zn(Ak,e,!0)},{keyCode:jt.BACKSPACE,action:Zn(rb,e,!1,u)},{keyCode:jt.DELETE,action:Zn(rb,e,!0,u)},...h$?[{keyCode:jt.BACKSPACE,altKey:!0,action:Zn(rb,e,!1,f(!0))},{keyCode:jt.DELETE,altKey:!0,action:Zn(rb,e,!0,f(!0))},{keyCode:jt.BACKSPACE,metaKey:!0,action:Zn(rb,e,!1,f(!1))}]:[{keyCode:jt.BACKSPACE,ctrlKey:!0,action:Zn(rb,e,!1,f(!0))},{keyCode:jt.DELETE,ctrlKey:!0,action:Zn(rb,e,!0,f(!0))}],{keyCode:jt.BACKSPACE,action:Zn(ZO,e,!1)},{keyCode:jt.DELETE,action:Zn(ZO,e,!0)},{keyCode:jt.BACKSPACE,action:Zn(mA,e,!1)},{keyCode:jt.DELETE,action:Zn(mA,e,!0)},{keyCode:jt.BACKSPACE,action:Zn($O,e,!1)},{keyCode:jt.DELETE,action:Zn($O,e,!0)},{keyCode:jt.BACKSPACE,action:Zn(NO,e,!1)},{keyCode:jt.DELETE,action:Zn(NO,e,!0)},{keyCode:jt.BACKSPACE,action:Zn(g_,e,!1)},{keyCode:jt.DELETE,action:Zn(g_,e,!0)},{keyCode:jt.BACKSPACE,action:Zn(WO,e,!1)},{keyCode:jt.DELETE,action:Zn(WO,e,!0)},{keyCode:jt.BACKSPACE,action:Zn(Ew,e,!1)},{keyCode:jt.DELETE,action:Zn(Ew,e,!0)}],o).filter(h=>e.selection.isEditable()).each(h=>{o.preventDefault(),FA(e,r).isDefaultPrevented()||(h(),Pw(e,r))})},p$=(e,n,o,r)=>kw([{keyCode:jt.BACKSPACE,action:Zn(UN,e)},{keyCode:jt.DELETE,action:Zn(UN,e)},...h$?[{keyCode:jt.BACKSPACE,altKey:!0,action:Zn(eb,e)},{keyCode:jt.DELETE,altKey:!0,action:Zn(eb,e)},...o?[{keyCode:Tj?224:91,action:Zn(()=>(Yp(e,r),eb(e)))}]:[]]:[{keyCode:jt.BACKSPACE,ctrlKey:!0,action:Zn(eb,e)},{keyCode:jt.DELETE,ctrlKey:!0,action:Zn(eb,e)}]],n),kj=(e,n)=>{let o=!1,r=[];e.on("keydown",a=>{o=a.keyCode===jt.BACKSPACE,r=lA(e),a.isDefaultPrevented()||Aj(e,n,a)}),e.on("keyup",a=>{a.isDefaultPrevented()||(p$(e,a,o,r),r.length=0),o=!1})},Dj=(e,n)=>{const o=ee.fromDom(e),r=ee.fromDom(n),a=sc("span"),u=He(Io,o),f=v=>Rr(v)&&Yr(v,"font-size").isSome(),h=[...f(r)?[r]:[],...x(r,f,u)];te(h.slice(1),v=>{jh(v,"font-size"),cc(v,"data-mce-style"),a(v)&&xf(v)&&si(v)})},Oj=e=>{for(;e;){if(gn(e)||pt(e)&&e.data&&/[\r\n\s]/.test(e.data))return F.from(ee.fromDom(e));e=e.nextSibling}return F.none()},cb=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const u=v=>/^(ul|ol|dl)$/.test(xo(v)),f=v=>u(v)?F.from(v):Df(v,u),h=v=>o.isEmpty(v.dom);Oj(n.firstChild).each(v=>{f(v).fold(()=>{if(h(v)){const w=DZ(v,0).element;Rr(w)&&!om(w)&&is(w,ee.fromText(mr))}},w=>{ea(w,ee.fromText(mr))})})}const a=o.createRng();if(n.normalize(),n.hasChildNodes()){const u=new tr(n,n);let f=n,h;for(;h=u.current();){if(pt(h)){a.setStart(h,0),a.setEnd(h,0);break}if(r[h.nodeName.toLowerCase()]){a.setStartBefore(h),a.setEndBefore(h);break}f=h,h=u.next()}h||(a.setStart(f,0),a.setEnd(f,0))}else Ar(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(a.setStartBefore(n),a.setEndBefore(n)):(a.setStartAfter(n),a.setEndAfter(n)):(a.setStart(n,0),a.setEnd(n,0));e.selection.setRng(a),w0(e,a)},Dy=(e,n)=>{const o=e.getRoot();let r,a=n;for(;a!==o&&a&&e.getContentEditable(a)!=="false";){if(e.getContentEditable(a)==="true"){r=a;break}a=a.parentNode}return a!==o?r:o},aR=e=>F.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),_j=e=>aR(e).fold(tt(""),n=>n.nodeName.toUpperCase()),Rj=e=>aR(e).filter(n=>sm(ee.fromDom(n))).isSome(),iR=e=>{e.innerHTML='<br data-mce-bogus="1">'},Bj=(e,n,o)=>{const r=e.dom;F.from(o.style).map(r.parseStyle).each(v=>{const D={...Af(ee.fromDom(n)),...v};r.setStyles(n,D)});const a=F.from(o.class).map(v=>v.split(/\s+/)),u=F.from(n.className).map(v=>Ce(v.split(/\s+/),w=>w!==""));Qt(a,u,(v,w)=>{const D=Ce(w,M=>!De(v,M)),R=[...v,...D];r.setAttrib(n,"class",R.join(" "))});const f=["style","class"],h=Ot(o,(v,w)=>!De(f,w));r.setAttribs(n,h)},$w=(e,n)=>{if(Sa(e).toLowerCase()===n.tagName.toLowerCase()){const r=yp(e);Bj(e,n,r)}},b$=(e,n,o,r,a=!0,u,f)=>{const h=e.dom,v=e.schema,w=Sa(e),D=o?o.nodeName.toUpperCase():"";let R=n;const M=v.getTextInlineElements();let L;u||D==="TABLE"||D==="HR"?L=h.create(u||w,f||{}):L=o.cloneNode(!1);let K=L;if(!a)h.setAttrib(L,"style",null),h.setAttrib(L,"class",null);else{do if(M[R.nodeName]){if(Iu(R)||tu(R))continue;const W=R.cloneNode(!1);h.setAttrib(W,"id",""),L.hasChildNodes()?(W.appendChild(L.firstChild),L.appendChild(W)):(K=W,L.appendChild(W))}while((R=R.parentNode)&&R!==r);Dj(L,K)}return $w(e,L),iR(K),L},Mj=(e,n)=>e.dom.getParent(n,Db),UY=(e,n,o)=>{let r=n;for(;r&&r!==e&&G(r.nextSibling);){const a=r.parentElement;if(!a||!o(a))return Db(a);r=a}return!1},Fj=(e,n,o)=>!n&&o.nodeName.toLowerCase()===Sa(e)&&e.dom.isEmpty(o)&&UY(e.getBody(),o,r=>Jt(e.schema.getTextBlockElements(),r.nodeName.toLowerCase())),NA=(e,n,o)=>{var u,f;const r=n(Sa(e)),a=Mj(e,o);a&&(e.dom.insertAfter(r,a),cb(e,r),(((f=(u=o.parentElement)==null?void 0:u.childNodes)==null?void 0:f.length)??0)>1&&e.dom.remove(o))},v$=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,y$=e=>{var n;return((n=e.parentNode)==null?void 0:n.firstChild)===e},C$=(e,n)=>{const o=e==null?void 0:e.parentNode;return xe(o)&&o.nodeName===n},lR=e=>xe(e)&&/^(OL|UL|LI)$/.test(e.nodeName),PA=e=>xe(e)&&/^(LI|DT|DD)$/.test(e.nodeName),Nj=e=>lR(e)&&lR(e.parentNode),$A=e=>{const n=e.parentNode;return PA(n)?n:e},IA=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!gn(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},uR=e=>$e(an(Af(ee.fromDom(e)),(n,o)=>`${o}: ${n};`),(n,o)=>n+o,""),Pj=(e,n,o,r,a)=>{const u=e.dom,f=e.selection.getRng(),h=o.parentNode;if(o===e.getBody()||!h)return;Nj(o)&&(a="LI");const v=PA(r)?uR(r):void 0;let w=PA(r)&&v?n(a,{style:uR(r)}):n(a);if(IA(o,r,!0)&&IA(o,r,!1))if(C$(o,"LI")){const D=$A(o);u.insertAfter(w,D),y$(o)?u.remove(D):u.remove(o)}else u.replace(w,o);else if(IA(o,r,!0))C$(o,"LI")?(u.insertAfter(w,$A(o)),w.appendChild(u.doc.createTextNode(" ")),w.appendChild(o)):h.insertBefore(w,o),u.remove(r);else if(IA(o,r,!1))u.insertAfter(w,$A(o)),u.remove(r);else{o=$A(o);const D=f.cloneRange();D.setStartAfter(r),D.setEndAfter(o);const R=D.extractContents();if(a==="LI"&&v$(R,"LI")){const M=Ce(ae(w.children,ee.fromDom),Je(sc("br")));w=R.firstChild,u.insertAfter(R,o),te(M,L=>yu(ee.fromDom(w),L)),v&&w.setAttribute("style",v)}else u.insertAfter(R,o),u.insertAfter(w,o);u.remove(r)}cb(e,w)},dR=e=>{te($(ee.fromDom(e),ys),n=>{const o=n.dom;o.nodeValue=ki(o.data)})},$j=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},Ij=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),mR=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,w$=(e,n)=>e.nodeName===n||e.nextSibling&&e.nextSibling.nodeName===n,fR=(e,n)=>xe(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",Lj=(e,n,o)=>{var f;const r=[];if(!o)return;let a=o;for(;a=a.firstChild;){if(e.isBlock(a))return;gn(a)&&!n[a.nodeName.toLowerCase()]&&r.push(a)}let u=r.length;for(;u--;)a=r[u],(!a.hasChildNodes()||a.firstChild===a.lastChild&&((f=a.firstChild)==null?void 0:f.nodeValue)===""||Ij(e,a))&&e.remove(a)},gR=(e,n,o)=>pt(n)?e?o===1&&n.data.charAt(o-1)===Sc?0:o:o===n.data.length-1&&n.data.charAt(o)===Sc?n.data.length:o:o,Hj=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,gR(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,gR(!1,e.endContainer,e.endOffset)),n},WY=e=>{let n=e;do pt(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},zj=(e,n,o,r,a)=>{var v;const u=e.dom,f=Dy(u,r)??u.getRoot();let h=u.getParent(r,u.isBlock);if(!h||!fR(u,h)){if(h=h||f,!h.hasChildNodes()){const M=u.create(n);return $w(e,M),h.appendChild(M),o.setStart(M,0),o.setEnd(M,0),M}let w=r;for(;w&&w.parentNode!==h;)w=w.parentNode;let D;for(;w&&!u.isBlock(w);)D=w,w=w.previousSibling;const R=(v=D==null?void 0:D.parentElement)==null?void 0:v.nodeName;if(D&&R&&e.schema.isValidChild(R,n.toLowerCase())){const M=D.parentNode,L=u.create(n);for($w(e,L),M.insertBefore(L,D),w=D;w&&!u.isBlock(w);){const K=w.nextSibling;L.appendChild(w),w=K}o.setStart(r,a),o.setEnd(r,a)}}return r},Vj=(e,n)=>{n.normalize();const o=n.lastChild;(!o||gn(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},Uj=(e,n)=>{const o=F5(e);return pn(n)?!1:re(o)?De(Ct.explode(o),n.nodeName.toLowerCase()):o},hR={insert:(e,n)=>{let o,r,a,u,f=!1;const h=e.dom,v=e.schema,w=v.getNonEmptyElements(),D=e.selection.getRng(),R=Sa(e),M=ee.fromDom(D.startContainer),L=hl(M,D.startOffset),K=L.exists(lt=>Ul(lt)&&!yl(lt)),W=D.collapsed&&K,J=(lt,sn)=>b$(e,o,$t,it,nh(e),lt,sn),pe=lt=>{const sn=gR(lt,o,r);if(pt(o)&&(lt?sn>0:sn<o.data.length))return!1;if((o.parentNode===$t||o===$t)&&f&&!lt||lt&&gn(o)&&o===$t.firstChild)return!0;if(mR(o,"TABLE")||mR(o,"HR"))return w$(o,"BR")?!lt:f&&!lt||!f&&lt;const Nn=new tr(o,$t);pt(o)&&(lt&&sn===0?Nn.prev():!lt&&sn===o.data.length&&Nn.next());let bo;for(;bo=Nn.current();){if(gn(bo)){if(!bo.getAttribute("data-mce-bogus")){const Zo=bo.nodeName.toLowerCase();if(w[Zo]&&Zo!=="br")return!1}}else if(pt(bo)&&!Vm(bo.data))return!1;lt?Nn.prev():Nn.next()}return!0},be=()=>{let lt;return/^(H[1-6]|PRE|FIGURE)$/.test(a)&&yt!=="HGROUP"?lt=J(R):lt=J(),Uj(e,u)&&fR(h,u)&&h.isEmpty($t,void 0,{includeZwsp:!0})?lt=h.split(u,$t):h.insertAfter(lt,$t),cb(e,lt),lt};C0(h,D).each(lt=>{D.setStart(lt.startContainer,lt.startOffset),D.setEnd(lt.endContainer,lt.endOffset)}),o=D.startContainer,r=D.startOffset;const Se=!!(n&&n.shiftKey),Ze=!!(n&&n.ctrlKey);gn(o)&&o.hasChildNodes()&&!W&&(f=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,f&&pt(o)?r=o.data.length:r=0);const it=Dy(h,o);if(!it||$j(e,o))return;Se||(o=zj(e,R,D,o,r));let $t=h.getParent(o,h.isBlock)||h.getRoot();u=xe($t==null?void 0:$t.parentNode)?h.getParent($t.parentNode,h.isBlock):null,a=$t?$t.nodeName.toUpperCase():"";const yt=u?u.nodeName.toUpperCase():"";if(yt==="LI"&&!Ze){const lt=u;$t=lt,u=lt.parentNode,a=yt}if(gn(u)&&Fj(e,Se,$t))return NA(e,J,$t);if(/^(LI|DT|DD)$/.test(a)&&gn(u)&&h.isEmpty($t)){Pj(e,J,u,$t,R);return}if(!W&&($t===e.getBody()||!fR(h,$t)))return;const Ge=$t.parentNode;let ze;if(W)ze=J(R),L.fold(()=>{is(M,ee.fromDom(ze))},lt=>{ea(lt,ee.fromDom(ze))}),e.selection.setCursorLocation(ze,0);else if(Xm($t))ze=El($t),h.isEmpty($t)&&iR($t),$w(e,ze),cb(e,ze);else if(pe(!1))ze=be();else if(pe(!0)&&Ge){const lt=Le.fromRangeStart(D),sn=ik(lt),Nn=ee.fromDom($t),Zo=RE(Nn,lt,e.schema)?MB(Nn,lt,e.schema).bind(yr=>F.from(yr.getNode())):F.none();ze=Ge.insertBefore(J(),$t);const rr=mR($t,"HR")||sn?ze:Zo.getOr($t);cb(e,rr)}else{const lt=Hj(D).cloneRange();lt.setEndAfter($t);const sn=lt.extractContents();dR(sn),WY(sn),ze=sn.firstChild,$t===ze?xe(Ge)&&h.insertAfter(sn,Ge):h.insertAfter(sn,$t),Lj(h,w,ze),Vj(h,$t),h.isEmpty($t)&&iR($t),ze.normalize(),h.isEmpty(ze)?(h.remove(ze),be()):($w(e,ze),cb(e,ze))}h.setAttrib(ze,"id",""),e.dispatch("NewBlock",{newBlock:ze})},fakeEventName:"insertParagraph"},Wj=(e,n,o)=>{const r=new tr(n,o);let a;const u=e.getNonEmptyElements();for(;a=r.next();)if(u[a.nodeName.toLowerCase()]||pt(a)&&a.length>0)return!0;return!1},LA=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),w0(e,r)},cg=(e,n)=>{const o=e.selection,r=e.dom,a=o.getRng();let u,f=!1;C0(r,a).each(L=>{a.setStart(L.startContainer,L.startOffset),a.setEnd(L.endContainer,L.endOffset)});let h=a.startOffset,v=a.startContainer;if(gn(v)&&v.hasChildNodes()){const L=h>v.childNodes.length-1;v=v.childNodes[Math.min(h,v.childNodes.length-1)]||v,L&&pt(v)?h=v.data.length:h=0}let w=r.getParent(v,r.isBlock);const D=w&&w.parentNode?r.getParent(w.parentNode,r.isBlock):null,R=D?D.nodeName.toUpperCase():"",M=!!(n&&n.ctrlKey);R==="LI"&&!M&&(w=D),pt(v)&&h>=v.data.length&&(Wj(e.schema,v,w||r.getRoot())||(u=r.create("br"),a.insertNode(u),a.setStartAfter(u),a.setEndAfter(u),f=!0)),u=r.create("br"),iv(r,a,u),LA(e,u,f),e.undoManager.add()},S$=(e,n)=>{const o=ee.fromTag("br");ea(ee.fromDom(n),o),e.undoManager.add()},x$=(e,n)=>{HA(e.getBody(),n)||Wi(ee.fromDom(n),ee.fromTag("br"));const o=ee.fromTag("br");Wi(ee.fromDom(n),o),LA(e,o.dom,!1),e.undoManager.add()},Zj=e=>Ar(e.getNode()),HA=(e,n)=>Zj(Le.after(n))?!0:_i(e,Le.after(n)).map(o=>Ar(o.getNode())).getOr(!1),zA=e=>e&&e.nodeName==="A"&&"href"in e,E$=e=>e.fold(Ae,zA,zA,Ae),T$=e=>{const n=He(_p,e),o=Le.fromRangeStart(e.selection.getRng());return uf(n,e.getBody(),o).filter(E$)},jj=(e,n)=>{n.fold(rt,He(S$,e),He(x$,e),rt)},A$={insert:(e,n)=>{const o=T$(e);o.isSome()?o.each(He(jj,e)):cg(e,n)},fakeEventName:"insertLineBreak"},k$=(e,n)=>aR(e).filter(o=>n.length>0&&wi(ee.fromDom(o),n)).isSome(),D$=e=>k$(e,es(e)),Gj=e=>k$(e,xd(e)),Yu=dc.generate([{br:[]},{block:[]},{none:[]}]),KY=(e,n)=>Gj(e),VA=e=>(n,o)=>Rj(n)===e,O$=(e,n)=>(o,r)=>_j(o)===e.toUpperCase()===n,qj=e=>{const n=Dy(e.dom,e.selection.getStart());return pn(n)},Iw=e=>O$("pre",e),Kj=()=>O$("summary",!0),UA=e=>(n,o)=>e3(n)===e,Yj=(e,n)=>D$(e),WA=(e,n)=>n,Xj=e=>{const n=Sa(e),o=Dy(e.dom,e.selection.getStart());return xe(o)&&e.schema.isValidChild(o.nodeName,n)},ZA=e=>{const n=e.selection.getRng(),o=ee.fromDom(n.startContainer),a=hl(o,n.startOffset).map(u=>Ul(u)&&!yl(u));return n.collapsed&&a.getOr(!0)},$d=(e,n)=>(o,r)=>$e(e,(u,f)=>u&&f(o,r),!0)?F.some(n):F.none(),Jj=(e,n)=>by([$d([KY],Yu.none()),$d([Iw(!0),qj],Yu.none()),$d([Kj()],Yu.br()),$d([Iw(!0),UA(!1),WA],Yu.br()),$d([Iw(!0),UA(!1)],Yu.block()),$d([Iw(!0),UA(!0),WA],Yu.block()),$d([Iw(!0),UA(!0)],Yu.br()),$d([VA(!0),WA],Yu.br()),$d([VA(!0)],Yu.block()),$d([Yj],Yu.br()),$d([WA],Yu.br()),$d([Xj],Yu.block()),$d([ZA],Yu.block())],[e,!!(n&&n.shiftKey)]).getOr(Yu.none()),Oy=(e,n,o)=>{n.mode.isReadOnly()||(n.selection.isCollapsed()||t9(n),!(xe(o)&&FA(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),xe(o)&&Pw(n,e.fakeEventName)))},jA=(e,n)=>{if(e.mode.isReadOnly())return;const o=()=>Oy(A$,e,n),r=()=>Oy(hR,e,n),a=Jj(e,n);switch(t3(e)){case"linebreak":a.fold(o,o,rt);break;case"block":a.fold(r,r,rt);break;case"invert":a.fold(r,o,rt);break;default:a.fold(o,r,rt);break}},_$=wn(),Qj=_$.os.isiOS()&&_$.browser.isSafari(),pR=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),kD(e.undoManager),e.undoManager.transact(()=>{jA(e,n)}))},eG=e=>{if(!e.collapsed)return!1;const n=e.startContainer;if(pt(n)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=n.data.charAt(e.startOffset-1);return o.test(r)}else return!1},tG=e=>{let n=F.none();const o=a=>{n=F.some(a.selection.getBookmark()),a.undoManager.add()},r=(a,u)=>{a.undoManager.undo(),n.fold(rt,f=>a.selection.moveToBookmark(f)),pR(a,u),n=F.none()};e.on("keydown",a=>{a.keyCode===jt.ENTER&&(Qj&&eG(e.selection.getRng())?o(e):pR(e,a))}),e.on("keyup",a=>{a.keyCode===jt.ENTER&&n.each(()=>r(e,a))})},nG=(e,n,o)=>{const r=wo.os.isMacOS()||wo.os.isiOS();kw([{keyCode:jt.END,action:Zn(W8,e,!0)},{keyCode:jt.HOME,action:Zn(W8,e,!1)},...r?[]:[{keyCode:jt.HOME,action:Zn(vA,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:jt.END,action:Zn(vA,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:jt.END,action:Zn(Bh,e,!0)},{keyCode:jt.HOME,action:Zn(Bh,e,!1)},{keyCode:jt.END,action:Zn(Sy,e,!0,n)},{keyCode:jt.HOME,action:Zn(Sy,e,!1,n)}],o).each(a=>{o.preventDefault()})},oG=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||nG(e,n,o)})},sG=e=>{e.on("input",n=>{n.isComposing||zB(e)})},rG=wn(),R$=(e,n,o)=>{kw([{keyCode:jt.PAGE_UP,action:Zn(Sy,e,!1,n)},{keyCode:jt.PAGE_DOWN,action:Zn(Sy,e,!0,n)}],o)},Lw=e=>e.stopImmediatePropagation(),bR=e=>e.keyCode===jt.PAGE_UP||e.keyCode===jt.PAGE_DOWN,vR=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",Lw,!0):!o&&e.get()&&n.off("NodeChange",Lw),e.set(o)},cG=(e,n)=>{if(rG.os.isMacOS())return;const o=Yt(!1);e.on("keydown",r=>{bR(r)&&vR(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||R$(e,n,r),bR(r)&&o.get()&&(vR(o,e,!1),e.nodeChanged())})},B$=(e,n)=>e===n||e.contains(n),GA=(e,n)=>!B$(e.getBody(),n.startContainer)||!B$(e.getBody(),n.endContainer)?!0:fB(e.dom,n),aG=e=>{e.on("beforeinput",n=>{(!e.selection.isEditable()||ve(n.getTargetRanges(),o=>!GA(e,o)))&&n.preventDefault()})},yR=(e,n)=>{const o=n.container(),r=n.offset();return pt(o)?(o.insertData(r,e),F.some(Le(o,r+e.length))):Ep(n).map(a=>{const u=ee.fromText(e);return n.isAtEnd()?Wi(a,u):ea(a,u),Le(u.dom,e.length)})},M$=He(yR,mr),CR=He(yR," "),iG=(e,n,o)=>$B(e,n,o)?M$(n):CR(n),lG=e=>n=>n.fold(o=>ra(e.dom,Le.before(o)),o=>ca(o),o=>ol(o),o=>_i(e.dom,Le.after(o))),uG=(e,n,o)=>r=>$B(e,r,o)?M$(n):CR(n),F$=e=>n=>{e.selection.setRng(n.toRange()),e.nodeChanged()},dG=(e,n)=>e.isEditable(e.getParent(n,"summary")),_y=e=>{const n=Le.fromRangeStart(e.selection.getRng()),o=ee.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=He(_p,e),a=Le.fromRangeStart(e.selection.getRng());return uf(r,e.getBody(),a).bind(lG(o)).map(u=>()=>uG(o,n,e.schema)(u).each(F$(e)))}else return F.none()},mG=e=>{const n=()=>{const o=ee.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const r=Le.fromRangeStart(e.selection.getRng());iG(o,r,e.schema).each(F$(e))};return To(wo.browser.isFirefox()&&e.selection.isEditable()&&dG(e.dom,e.selection.getRng().startContainer),n)},fG=(e,n)=>{X8([{keyCode:jt.SPACEBAR,action:Zn(_y,e)},{keyCode:jt.SPACEBAR,action:Zn(mG,e)}],n).each(o=>{n.preventDefault(),FA(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),Pw(e,"insertText",{data:" "}))})},N$=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||fG(e,n)})},gG=e=>g3(e)?[{keyCode:jt.TAB,action:Zn(Ku,e,!0)},{keyCode:jt.TAB,shiftKey:!0,action:Zn(Ku,e,!1)}]:[],hG=(e,n)=>{kw([...gG(e)],n).each(o=>{n.preventDefault()})},pG=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||hG(e,n)})},P$=e=>{if(e.addShortcut("Meta+P","","mcePrint"),pj(e),Bd(e))return Yt(null);{const n=FW(e);return aG(e),lZ(e),_P(e,n),kj(e,n),tG(e),N$(e),sG(e),pG(e),oG(e,n),cG(e,n),n}},bG=(e,n)=>{const o=km(e);o===null||vO(e,o)||e.undoManager.transact(()=>{En(n.styles)&&e.dom.setStyles(o,n.styles),En(n.attrs)&&yo(n.attrs,(r,a)=>e.dom.setAttrib(o,a,r))})},wR=(e,n)=>()=>{const o=km(e);return xe(o)&&o.nodeName===n},YY=e=>{e.addCommand("InsertUnorderedList",(n,o)=>{AO(e,"UL",o)}),e.addCommand("InsertOrderedList",(n,o)=>{AO(e,"OL",o)}),e.addCommand("InsertDefinitionList",(n,o)=>{AO(e,"DL",o)}),e.addCommand("RemoveList",()=>{JT(e)}),e.addCommand("mceListUpdate",(n,o)=>{En(o)&&bG(e,o)}),e.addCommand("mceListBackspaceDelete",(n,o)=>{_O(e,o)}),e.addQueryStateHandler("InsertUnorderedList",wR(e,"UL")),e.addQueryStateHandler("InsertOrderedList",wR(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",wR(e,"DL"))},qA=e=>{e.on("keydown",n=>{n.keyCode===jt.BACKSPACE?_O(e,!1)&&n.preventDefault():n.keyCode===jt.DELETE&&_O(e,!0)&&n.preventDefault()})},$$=e=>e.type===3,I$=e=>e.length===0,vG=e=>{const n=(a,u)=>{const f=hi.create("li");te(a,h=>f.append(h)),u?e.insert(f,u,!0):e.append(f)},o=(a,u)=>$$(u)?[...a,u]:!I$(a)&&!$$(u)?(n(a,u),[]):a,r=$e(e.children(),o,[]);I$(r)||n(r)},yG=e=>{e.on("PreInit",()=>{const{parser:n}=e;n.addNodeFilter("ul,ol",o=>te(o,vG))})},CG=e=>{e.on("keydown",n=>{n.keyCode!==jt.TAB||jt.metaKeyPressed(n)||e.undoManager.transact(()=>{(n.shiftKey?SO(e):SN(e))&&n.preventDefault()})})},wG=e=>{v3(e)&&CG(e)},SG=e=>{qA(e),YY(e),yG(e),wG(e)};class xG{constructor(n){Xe(this,"editor");Xe(this,"lastPath",[]);this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",a=>{const u=n.selection.getRng(),f={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(a.type==="nodechange"||!K3(f,o))&&n.dispatch("SelectionChange"),o=f}),n.on("contextmenu",()=>{pE(n),n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const a=n.selection.getStart(!0);a&&Vv(n)&&!r.isSameElementPath(a)&&n.dom.isChildOf(a,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",a=>{!a.isDefaultPrevented()&&Vv(n)&&(n.selection.getNode().nodeName==="IMG"?Vu.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor,r=o.selection;let a;if(o.initialized&&r&&!Cx(o)&&!a0(o)){const u=o.getBody();a=r.getStart(!0)||u,(a.ownerDocument!==o.getDoc()||!o.dom.isChildOf(a,u))&&(a=u);const f=[];o.dom.getParent(a,h=>h===u?!0:(f.push(h),!1)),o.dispatch("NodeChange",{...n,element:a,parents:f})}}isSameElementPath(n){let o;const r=this.editor,a=ko(r.dom.getParents(n,Ve,r.getBody()));if(a.length===this.lastPath.length){for(o=a.length;o>=0&&a[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=a,!0}return this.lastPath=a,!1}}const L$="x-tinymce/html",KA=tt(L$),SR="<!-- "+L$+" -->",EG=e=>SR+e,TG=e=>e.replace(SR,""),Gs=e=>e.indexOf(SR)!==-1,AG=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),H$=(e,n)=>{let o="<"+e;const r=an(n,(a,u)=>u+'="'+Pg.encodeAllRaw(a)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},kG=(e,n,o)=>{const r=e.split(/\n\n/),a=H$(n,o),u="</"+n+">",f=ae(r,v=>v.split(/\n/).join("<br />")),h=v=>a+v+u;return f.length===1?f[0]:ae(f,h).join("")},YA="%MCEPASTEBIN%",z$=(e,n)=>{const{dom:o,selection:r}=e,a=e.getBody();n.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},YA);wo.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(a,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),u.focus(),r.select(u,!0)},DG=(e,n)=>{const o=e.dom;if(xR(e)){let r;const a=n.get();for(;r=xR(e);)o.remove(r),o.unbind(r);a&&e.selection.setRng(a)}n.set(null)},xR=e=>e.dom.get("mcepastebin"),OG=e=>xe(e)&&e.id==="mcepastebin",V$=e=>{const n=e.dom,o=(f,h)=>{f.appendChild(h),n.remove(h,!0)},[r,...a]=Ce(e.getBody().childNodes,OG);te(a,f=>{o(r,f)});const u=n.select("div[id=mcepastebin]",r);for(let f=u.length-1;f>=0;f--){const h=n.create("div");r.insertBefore(h,u[f]),o(h,u[f])}return r?r.innerHTML:""},Hw=e=>e===YA,_G=e=>{const n=Yt(null);return{create:()=>z$(e,n),remove:()=>DG(e,n),getEl:()=>xR(e),getHtml:()=>V$(e),getLastRng:n.get}},U$=(e,n)=>(Ct.each(n,o=>{nn(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),ER=e=>{const n=Ru(),o=O0({},n);let r="";const a=n.getVoidElements(),u=Ct.makeMap("script noscript style textarea video audio iframe object"," "),f=n.getBlockElements(),h=v=>{const w=v.name,D=v;if(w==="br"){r+=`
`;return}if(w!=="wbr"){if(a[w]&&(r+=" "),u[w]){r+=" ";return}if(v.type===3&&(r+=v.value),!(v.name in n.getVoidElements())){let R=v.firstChild;if(R)do h(R);while(R=R.next)}f[w]&&D.next&&(r+=`
`,w==="p"&&(r+=`
`))}};return e=U$(e,[/<!\[[^\]]+\]>/g]),h(o.parse(e)),r},W$=e=>(e=U$(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,a)=>!r&&!a?" ":mr],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),RG=e=>{let n=0;return()=>e+n++},BG=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Ct.hasOwn(o,n)?"image/"+o[n]:"image/"+n},MG=(e,n)=>{const o=O0({sanitize:dC(e),sandbox_iframes:Tv(e),sandbox_iframes_exclusions:r0(e),convert_unsafe_embeds:fC(e)},e.schema);o.addNodeFilter("meta",a=>{Ct.each(a,u=>{u.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return x0({validate:!0},e.schema).serialize(r)},TR=(e,n)=>({content:e,cancelled:n}),FG=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),a=J4(e,r,o);return TR(a.node.innerHTML,a.isDefaultPrevented())},NG=(e,n,o)=>{const r=B5(e,n,o),a=MG(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?FG(e,a,o):TR(a,r.isDefaultPrevented())},Z$=(e,n,o)=>NG(e,n,o),AR=(e,n)=>(e.insertContent(n,{merge:l3(e),paste:!0}),!0),kR=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),PG=(e,n)=>kR(n)&&ve(Bx(e),o=>vc(n.toLowerCase(),`.${o.toLowerCase()}`)),DR=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),$G=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),j$=(e,n,o)=>!e.selection.isCollapsed()&&kR(n)?$G(e,n,o):!1,IG=(e,n,o)=>PG(e,n)?DR(e,n,o):!1,OR=(e,n)=>{Ct.each([j$,IG,AR],o=>!o(e,n,AR))},LG=(e,n,o)=>{o||!Dx(e)?AR(e,n):OR(e,n)},G$=RG("mceclip"),HG=e=>{const n=M_();return EA(n,e),R_(n),n},q$=(e,n,o,r,a)=>{const u=Z$(e,n,o);if(!u.cancelled){const f=u.content,h=()=>LG(e,f,r);a?FA(e,"insertFromPaste",{dataTransfer:HG(f)}).isDefaultPrevented()||(h(),Pw(e,"insertFromPaste")):h()}},XA=(e,n,o,r)=>{const a=o||Gs(n);q$(e,TG(n),a,!1,r)},_R=(e,n,o)=>{const r=e.dom.encode(n).replace(/\r\n/g,`
`),a=l2(r,iC(e)),u=kG(a,Sa(e),yp(e));q$(e,u,!1,!0,o)},RR=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},Qp=(e,n)=>n in e&&e[n].length>0,BR=e=>Qp(e,"text/html")||Qp(e,"text/plain"),JA=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return xe(o)?e.dom.encode(o[1]):void 0},MR=(e,n,o,r)=>{const a=G$(),u=ss(e)&&xe(o.name),f=u?JA(e,o.name):a,h=u?o.name:void 0,v=n.create(a,o,r,f,h);return n.add(v),v},FR=(e,n)=>{eT(n.uri).each(({data:o,type:r,base64Encoded:a})=>{const u=a?o:btoa(o),f=n.file,h=e.editorUpload.blobCache,w=h.getByData(u,r)??MR(e,h,f,u);XA(e,`<img src="${w.blobUri()}">`,!1,!0)})},zG=e=>e.type==="paste",VG=e=>Promise.all(ae(e,n=>eF(n).then(o=>({file:n,uri:o})))),Ry=e=>{const n=Bx(e);return o=>Ln(o.type,"image/")&&ve(n,r=>BG(r)===o.type)},UG=(e,n)=>{const o=n.items?zn(Xo(n.items),a=>a.kind==="file"?[a.getAsFile()]:[]):[],r=n.files?Xo(n.files):[];return Ce(o.length>0?o:r,Ry(e))},ab=(e,n,o)=>{const r=zG(n)?n.clipboardData:n.dataTransfer;if(ch(e)&&r){const a=UG(e,r);if(a.length>0)return n.preventDefault(),VG(a).then(u=>{o&&e.selection.setRng(o),te(u,f=>{FR(e,f)})}),!0}return!1},zw=e=>{var n,o;return wo.os.isAndroid()&&((o=(n=e.clipboardData)==null?void 0:n.items)==null?void 0:o.length)===0},WG=e=>jt.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,NR=(e,n,o,r,a)=>{let u=W$(o);const f=Qp(n,KA())||Gs(o),h=!f&&AG(u),v=kR(u);(Hw(u)||!u.length||h&&!v)&&(r=!0),(r||v)&&(Qp(n,"text/plain")&&h?u=n["text/plain"]:u=ER(u)),!Hw(u)&&(r?_R(e,u,a):XA(e,u,f,a))},By=(e,n,o)=>{let r;const a=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",u=>{WG(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||zw(u))return;const f=o.get()==="text"||r;r=!1;const h=RR(u.clipboardData);!BR(h)&&ab(e,u,a())||(Qp(h,"text/html")?(u.preventDefault(),NR(e,h,h["text/html"],f,!0)):Qp(h,"text/plain")&&Qp(h,"text/uri-list")?(u.preventDefault(),NR(e,h,h["text/plain"],f,!0)):(n.create(),Vu.setEditorTimeout(e,()=>{const v=n.getHtml();n.remove(),NR(e,h,v,f,!1)},0)))})},ZG=e=>{const n=a=>Ln(a,"webkit-fake-url"),o=a=>Ln(a,"data:"),r=a=>{var u;return((u=a.data)==null?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(a,u,f)=>{if(!ch(e)&&r(f))for(const h of a){const v=h.attr("src");re(v)&&!h.attr("data-mce-object")&&v!==wo.transparentSrc&&(n(v)||!Ev(e)&&o(v))&&h.remove()}})},PR=(e,n,o)=>{By(e,n,o),ZG(e)},jG=(e,n)=>{n.get()==="text"?(n.set("html"),ix(e,!1)):(n.set("text"),ix(e,!0)),e.focus()},K$=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{jG(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&XA(e,r.html,r.internal,!1),r.text&&_R(e,r.text,!1)})},Y$=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(KA(),n),!0}catch{return!1}else return!1},QA=(e,n,o,r)=>{Y$(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},$R=e=>(n,o)=>{const{dom:r,selection:a}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),f=r.create("div",{contenteditable:"true"},n);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(f),r.add(e.getBody(),u);const h=a.getRng();f.focus();const v=r.createRng();v.selectNodeContents(f),a.setRng(v),Vu.setEditorTimeout(e,()=>{a.setRng(h),r.remove(u),o()},0)},X$=e=>({html:EG(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),GG=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),IR=e=>!e.selection.isCollapsed()||GG(e),qG=(e,n)=>o=>{!o.isDefaultPrevented()&&IR(e)&&e.selection.isEditable()&&QA(o,X$(e),$R(e),()=>{if(wo.browser.isChromium()||wo.browser.isFirefox()){const r=e.selection.getRng();Vu.setEditorTimeout(e,()=>{e.selection.setRng(r),pA(e,n)},0)}else pA(e,n)})},J$=e=>n=>{!n.isDefaultPrevented()&&IR(e)&&QA(n,X$(e),$R(e),rt)},LR=(e,n)=>{e.on("cut",qG(e,n)),e.on("copy",J$(e))},HR=(e,n)=>Yf.getCaretRangeFromPoint(n.clientX??0,n.clientY??0,e.getDoc()),KG=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},Q$=(e,n)=>{n&&e.selection.setRng(n),e.focus()},YG=e=>ve(e.files,n=>/^image\//.test(n.type)),e7=(e,n,o,r)=>{const a=e.getParent(o,f=>ct(n,f));if(!G(e.getParent(o,"summary")))return!0;if(a&&Jt(r,"text/html")){const f=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!G(f.querySelector(a.nodeName.toLowerCase()))}else return!1},zR=e=>{e.on("input",n=>{const o=r=>G(r.querySelector("summary"));if(n.inputType==="deleteByDrag"){const r=Ce(e.dom.select("details"),o);te(r,a=>{Ar(a.firstChild)&&a.firstChild.remove();const u=e.dom.create("summary");u.appendChild(mp().dom),a.prepend(u)})}})},XG=(e,n)=>{rh(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),ch(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&YG(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=HR(e,o);if(pn(r))return;const a=RR(o.dataTransfer),u=Qp(a,KA());if((!BR(a)||KG(a))&&ab(e,o,r))return;const f=a[KA()],h=f||a["text/html"]||a["text/plain"],v=e7(e.dom,e.schema,r.startContainer,a),w=n.get();w&&!v||h&&(o.preventDefault(),Vu.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(f||w&&v)&&e.execCommand("Delete"),Q$(e,r);const D=W$(h);a["text/html"]?XA(e,D,u,!0):_R(e,D,!0)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{ch(e)&&!n.get()&&(o.preventDefault(),Q$(e,HR(e,o))),o.type==="dragend"&&n.set(!1)}),zR(e)},t7=e=>{const n=a=>u=>{a(e,u)},o=Ex(e);le(o)&&e.on("PastePreProcess",n(o));const r=Tx(e);le(r)&&e.on("PastePostProcess",n(r))},n7=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},JG=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,VR=e=>Ct.trim(e).replace(JG,Ug).toLowerCase(),QG=(e,n,o)=>{const r=Sv(e);if(o||r==="all"||!kx(e))return n;const a=r?r.split(/[, ]/):[];if(a&&r!=="none"){const u=e.dom,f=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(h,v,w,D)=>{const R=u.parseStyle(u.decode(w)),M={};for(let K=0;K<a.length;K++){const W=R[a[K]];let J=W,pe=u.getStyle(f,a[K],!0);/color/.test(a[K])&&(J=VR(J),pe=VR(pe)),pe!==J&&(M[a[K]]=W)}const L=u.serializeStyle(M,"span");return L?v+' style="'+L+'"'+D:v+D})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,f,h,v)=>f+' style="'+h+'"'+v),n},eq=e=>{(wo.browser.isChromium()||wo.browser.isSafari())&&n7(e,QG)},e4=(e,n)=>{const o=Yt(!1),r=Yt(xv(e)?"text":"html"),a=_G(e);eq(e),K$(e,r),t7(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>r.get()==="text"),e.on("PreInit",()=>{LR(e,n),XG(e,o),PR(e,a,r)})},tq=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},nq=e=>{e.parser.addNodeFilter("details",n=>{const o=h3(e);te(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const o=p3(e);te(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})})},o7=e=>{tq(e),nq(e)},s7=Ar,r7=pt,oq=e=>hr(e.dom),sq=e=>ai(e.dom),c7=e=>n=>Io(ee.fromDom(e),n),rq=(e,n,o)=>Ps(ee.fromDom(e),r=>sq(r)||o.isBlock(xo(r)),c7(n)).getOr(ee.fromDom(n)).dom,UR=(e,n)=>Ps(ee.fromDom(e),oq,c7(n)),a7=(e,n,o)=>{const r=new tr(e,n),a=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let f=o?e:a();f&&!s7(f);f=a())br(f)&&(u=f);return u},cq=(e,n,o)=>{const a=Le.fromRangeStart(e).getNode(),u=rq(a,n,o),f=a7(a,u,!1),h=a7(a,u,!0),v=document.createRange();return UR(f,u).fold(()=>{r7(f)?v.setStart(f,0):v.setStartBefore(f)},w=>v.setStartBefore(w.dom)),UR(h,u).fold(()=>{r7(h)?v.setEnd(h,h.data.length):v.setEndAfter(h)},w=>v.setEndAfter(w.dom)),v},aq=e=>{const n=cq(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(QE(n))},iq=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),aq(e))})};var My;(function(e){e.Before="before",e.After="after"})(My||(My={}));const lq=(e,n)=>Math.abs(e.left-n),uq=(e,n)=>Math.abs(e.right-n),dq=(e,n)=>e>=n.top&&e<=n.bottom,i7=(e,n)=>e.top<n.bottom&&e.bottom>n.top,l7=(e,n)=>{const o=P2(e,n)/Math.min(e.height,n.height);return i7(e,n)&&o>.5},mq=(e,n)=>{const o=Ce(e,r=>dq(n,r));return N2(o).fold(()=>[[],e],r=>{const{pass:a,fail:u}=Ee(e,f=>l7(f,r));return[a,u]})},fq=(e,n)=>({node:e.node,position:lq(e,n)<uq(e,n)?My.Before:My.After}),gq=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),ib=(e,n,o,r)=>{const a=R=>br(R.node)?F.some(R):gn(R.node)?ib(Xo(R.node.childNodes),n,o,!1):F.none(),u=(R,M,L)=>a(M).filter(K=>Math.abs(L(R,n,o)-L(K,n,o))<2&&pt(K.node)),f=(R,M)=>{const L=Ls(R,(K,W)=>M(K,n,o)-M(W,n,o));return Os(L,a).map(K=>r&&!pt(K.node)&&L.length>1?u(K,L[1],M).getOr(K):K)},[h,v]=mq(c8(e),o),{pass:w,fail:D}=Ee(v,R=>R.top<o);return f(h,gq).orThunk(()=>f(D,P1)).orThunk(()=>f(w,P1))},hq=(e,n,o,r)=>{const a=(u,f)=>{const h=w=>gn(w)&&w.classList.contains("mce-drag-container"),v=Ce(u.dom.childNodes,Je(h));return f.fold(()=>ib(v,o,r,!0),w=>{const D=Ce(v,R=>R!==w.dom);return ib(D,o,r,!0)}).orThunk(()=>(Io(u,e)?F.none():Si(u)).bind(D=>a(D,F.some(u))))};return a(n,F.none())},pq=(e,n,o)=>{const r=ee.fromDom(e),a=gl(r),f=ee.fromPoint(a,n,o).filter(h=>za(r,h)).getOr(r);return hq(r,f,n,o)},WR=(e,n,o)=>pq(e,n,o).filter(r=>i0(r.node)).map(r=>fq(r,n)),u7=e=>{const n=e.getBoundingClientRect(),o=e.ownerDocument,r=o.documentElement,a=o.defaultView;return{top:n.top+((a==null?void 0:a.scrollY)??0)-r.clientTop,left:n.left+((a==null?void 0:a.scrollX)??0)-r.clientLeft}},bq=e=>e.inline?u7(e.getBody()):{left:0,top:0},vq=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},yq=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},a={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:a},Cq=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=u7(e.getContentAreaContainer()),r=yq(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},t4=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),d7=(e,n)=>t4(bq(e),vq(e),Cq(e,n)),ZR=e=>({target:e,srcElement:e}),wq=(e,n,o,r)=>({...n,dataTransfer:r,type:e,...ZR(o)}),Sq=(e,n,o)=>{const r=Bt("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:rt,stopImmediatePropagation:rt,stopPropagation:rt,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,layerX:0,layerY:0,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:o,...ZR(n)}},xq=(e,n)=>{const o=FZ(e);return n==="dragstart"?(D_(o),uP(o)):n==="drop"?(OZ(o),R_(o)):(aP(o),BZ(o)),o},XY=(e,n,o,r)=>{const a=xq(o,e);return ro(r)?Sq(e,n,a):wq(e,r,n,a)},n4=32,Eq=100,Fy=8,lb=16,m7=hr,Tq=Uf(m7,ai),Aq=(e,n,o)=>m7(o)&&o!==n&&e.isEditable(o.parentElement),f7=(e,n,o)=>pn(n)||n===o||e.dom.isChildOf(n,o)?!1:e.dom.isEditable(n),kq=(e,n,o,r)=>{const a=e.dom,u=n.cloneNode(!0);a.setStyles(u,{width:o,height:r}),a.setAttrib(u,"data-mce-selected",null);const f=a.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return a.setStyles(f,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),a.setStyles(u,{margin:0,boxSizing:"border-box"}),f.appendChild(u),f},jR=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},Vw=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},g7=Vw("left",-n4),h7=Vw("left",n4),GR=Vw("top",-n4),p7=Vw("top",n4),JY=(e,n,o,r,a,u,f,h,v,w,D,R)=>{let M=0,L=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>a&&(M=n.pageX+o-a),n.pageY+r>u&&(L=n.pageY+r-u),e.style.width=o-M+"px",e.style.height=r-L+"px";const K=v.clientHeight,W=v.clientWidth,J=f+v.getBoundingClientRect().top,pe=h+v.getBoundingClientRect().left;D.on(be=>{be.intervalId.clear(),be.dragging&&R&&(f+Fy>=K?be.intervalId.set(p7(w)):f-Fy<=0?be.intervalId.set(GR(w)):h+Fy>=W?be.intervalId.set(h7(w)):h-Fy<=0?be.intervalId.set(g7(w)):J+lb>=window.innerHeight?be.intervalId.set(p7(window)):J-lb<=0?be.intervalId.set(GR(window)):pe+lb>=window.innerWidth?be.intervalId.set(h7(window)):pe-lb<=0&&be.intervalId.set(g7(window)))})},b7=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},Dq=(e,n)=>{const o=e.getParent(n.parentNode,e.isBlock);b7(n),o&&o!==e.getRoot()&&e.isEmpty(o)&&rm(ee.fromDom(o))},Oq=e=>e.button===0,v7=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),qR=(e,n)=>o=>{if(Oq(o)){const r=Xt(n.dom.getParents(o.target),Tq).getOr(null);if(xe(r)&&Aq(n.dom,n.getBody(),r)){const a=n.dom.getPos(r),u=n.getBody(),f=n.getDoc().documentElement;e.set({element:r,dataTransfer:M_(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?u.scrollWidth:f.offsetWidth)-2,maxY:(n.inline?u.scrollHeight:f.offsetHeight)-2,relX:o.pageX-a.x,relY:o.pageY-a.y,width:r.offsetWidth,height:r.offsetHeight,ghost:kq(n,r,r.offsetWidth,r.offsetHeight),intervalId:$i(Eq)})}}},o4=(e,n,o)=>{e._selectionOverrides.hideFakeCaret(),WR(e.getBody(),n,o).fold(()=>e.selection.placeCaretAt(n,o),r=>{const a=e._selectionOverrides.showCaret(1,r.node,r.position===My.Before,!1);a?e.selection.setRng(a):e.selection.placeCaretAt(n,o)})},Ny=(e,n,o,r,a)=>{n==="dragstart"&&EA(r,e.dom.getOuterHTML(o));const u=XY(n,o,r,a);return e.dispatch(n,u)},_q=(e,n)=>{const o=Pt((a,u)=>o4(n,a,u),0);n.on("remove",o.cancel);const r=e;return a=>e.on(u=>{const f=Math.max(Math.abs(a.screenX-u.screenX),Math.abs(a.screenY-u.screenY));if(!u.dragging&&f>10){const h=Ny(n,"dragstart",u.element,u.dataTransfer,a);if(xe(h.dataTransfer)&&(u.dataTransfer=h.dataTransfer),h.isDefaultPrevented())return;u.dragging=!0,n.focus()}if(u.dragging){const h=a.currentTarget===n.getDoc().documentElement,v=v7(u,d7(n,a));jR(u.ghost,n.getBody()),JY(u.ghost,v,u.width,u.height,u.maxX,u.maxY,a.clientY,a.clientX,n.getContentAreaContainer(),n.getWin(),r,h),o.throttle(a.clientX,a.clientY)}})},Rq=e=>{const n=e.getSel();if(xe(n)){const r=n.getRangeAt(0).startContainer;return pt(r)?r.parentNode:r}else return null},Bq=(e,n)=>o=>{e.on(r=>{if(r.intervalId.clear(),r.dragging){if(f7(n,Rq(n.selection),r.element)){const a=n.getDoc().elementFromPoint(o.clientX,o.clientY)??n.getBody();Ny(n,"drop",a,r.dataTransfer,o).isDefaultPrevented()||n.undoManager.transact(()=>{Dq(n.dom,r.element),F_(r.dataTransfer).each(f=>n.insertContent(f)),n._selectionOverrides.hideFakeCaret()})}Ny(n,"dragend",n.getBody(),r.dataTransfer,o)}}),w7(e)},y7=(e,n,o)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&o.fold(()=>Ny(n,"dragend",r.element,r.dataTransfer),a=>Ny(n,"dragend",r.element,r.dataTransfer,a))}),w7(e)},C7=(e,n)=>o=>y7(e,n,F.some(o)),w7=e=>{e.on(n=>{n.intervalId.clear(),b7(n.ghost)}),e.clear()},S7=e=>{const n=fs(),o=Bs.DOM,r=document,a=qR(n,e),u=_q(n,e),f=Bq(n,e),h=C7(n,e);e.on("mousedown",a),e.on("mousemove",u),e.on("mouseup",f),o.bind(r,"mousemove",u),o.bind(r,"mouseup",h),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",h)}),e.on("keydown",v=>{v.keyCode===jt.ESC&&y7(n,e,F.none())})},Mq=e=>{const n=a=>{if(!a.isDefaultPrevented()){const u=a.dataTransfer;u&&(De(u.types,"Files")||u.files.length>0)&&(a.preventDefault(),a.type==="drop"&&Vp(e,"Dropped file type is not supported"))}},o=a=>{vE(e,a.target)&&n(a)},r=()=>{const a=Bs.DOM,u=e.dom,f=document,h=e.inline?e.getBody():e.getDoc(),v=["drop","dragover"];te(v,w=>{a.bind(f,w,o),u.bind(h,w,n)}),e.on("remove",()=>{te(v,w=>{a.unbind(f,w,o),u.unbind(h,w,n)})})};e.on("init",()=>{Vu.setEditorTimeout(e,r,0)})},Fq=e=>{S7(e),n0(e)&&Mq(e)},KR=e=>{const n=Pt(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=IO(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},x7=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(Au(o)){const r=Bp(e.getBody(),o),a=hr(r)?r:o;e.selection.getNode()!==a&&pw(e,a).each(u=>e.selection.setRng(u))}})})},s4=hr,E7=(e,n)=>Bp(e.getBody(),n),T7=e=>{const n=e.selection,o=e.dom,r=e.getBody(),a=gC(e,r,o.isBlock,()=>Uu(e)),u="sel-"+o.uniqueId(),f="data-mce-selected";let h;const v=yt=>xe(yt)&&o.hasClass(yt,"mce-offscreen-selection"),w=yt=>yt!==r&&(s4(yt)||Au(yt))&&o.isChildOf(yt,r)&&o.isEditable(yt.parentNode),D=yt=>{yt&&n.setRng(yt)},R=(yt,Ge,ze,lt=!0)=>e.dispatch("ShowCaret",{target:Ge,direction:yt,before:ze}).isDefaultPrevented()?null:(lt&&n.scrollIntoView(Ge,yt===-1),a.show(ze,Ge)),M=yt=>{yt.hasAttribute("data-mce-caret")&&(El(yt),n.scrollIntoView(yt))},L=()=>{e.on("click",Ge=>{o.isEditable(Ge.target)||(Ge.preventDefault(),e.focus())}),e.on("blur NewBlock",Ze),e.on("ResizeWindow FullscreenStateChanged",a.reposition),e.on("tap",Ge=>{const ze=Ge.target,lt=E7(e,ze);s4(lt)?(Ge.preventDefault(),pw(e,lt).each(Se)):w(ze)&&pw(e,ze).each(Se)},!0),e.on("mousedown",Ge=>{const ze=Ge.target;if(ze!==r&&ze.nodeName!=="HTML"&&!o.isChildOf(ze,r)||!sw(e,Ge.clientX,Ge.clientY))return;Ze(),$t();const lt=E7(e,ze);s4(lt)?(Ge.preventDefault(),pw(e,lt).each(Se)):WR(r,Ge.clientX,Ge.clientY).each(sn=>{Ge.preventDefault();const Nn=R(1,sn.node,sn.position===My.Before,!1);D(Nn),gr(lt)?lt.focus():e.getBody().focus()})}),e.on("keypress",Ge=>{jt.modifierPressed(Ge)||s4(n.getNode())&&Ge.preventDefault()}),e.on("GetSelectionRange",Ge=>{let ze=Ge.range;if(h){if(!h.parentNode){h=null;return}ze=ze.cloneRange(),ze.selectNode(h),Ge.range=ze}}),e.on("focusin",Ge=>{if(!Au(Ge.target)&&e.getBody().contains(Ge.target)&&Ge.target!==e.getBody()&&!e.dom.isEditable(Ge.target.parentNode)){a.isShowing()&&a.hide(),Ge.target.contains(e.selection.getNode())||(e.selection.select(Ge.target,!0),e.selection.collapse(!0));const ze=Se(e.selection.getRng(),!0);ze&&e.selection.setRng(ze)}}),e.on("SetSelectionRange",Ge=>{Ge.range=J(Ge.range);const ze=Se(Ge.range,Ge.forward);ze&&(Ge.range=ze)});const yt=Ge=>gn(Ge)&&Ge.id==="mcepastebin";e.on("AfterSetSelectionRange",Ge=>{const ze=Ge.range,lt=ze.startContainer.parentElement;!W(ze)&&!yt(lt)&&$t(),v(lt)||Ze()}),Fq(e),KR(e),x7(e)},K=yt=>ja(yt)||cm(yt)||Hf(yt),W=yt=>K(yt.startContainer)||K(yt.endContainer),J=yt=>{const Ge=e.schema.getVoidElements(),ze=o.createRng(),lt=yt.startContainer,sn=yt.startOffset,Nn=yt.endContainer,bo=yt.endOffset;return Jt(Ge,lt.nodeName.toLowerCase())?sn===0?ze.setStartBefore(lt):ze.setStartAfter(lt):ze.setStart(lt,sn),Jt(Ge,Nn.nodeName.toLowerCase())?bo===0?ze.setEndBefore(Nn):ze.setEndAfter(Nn):ze.setEnd(Nn,bo),ze},pe=(yt,Ge)=>{const ze=ee.fromDom(e.getBody()),lt=e.getDoc(),sn=Eu(ze,"#"+u).getOrThunk(()=>{const Zo=ee.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',lt);return Sr(Zo,"id",u),is(ze,Zo),Zo}),Nn=o.createRng();bl(sn),Zi(sn,[ee.fromText(mr,lt),ee.fromDom(Ge),ee.fromText(mr,lt)]),Nn.setStart(sn.dom.firstChild,1),Nn.setEnd(sn.dom.lastChild,0),ri(sn,{top:o.getPos(yt,e.getBody()).y+"px"}),Sg(sn);const bo=n.getSel();return bo&&(bo.removeAllRanges(),bo.addRange(Nn)),Nn},be=yt=>{const Ge=yt.cloneNode(!0),ze=e.dispatch("ObjectSelected",{target:yt,targetClone:Ge});if(ze.isDefaultPrevented())return null;const lt=pe(yt,ze.targetClone),sn=ee.fromDom(yt);return te(ge(ee.fromDom(e.getBody()),`*[${f}]`),Nn=>{Io(sn,Nn)||cc(Nn,f)}),o.getAttrib(yt,f)||yt.setAttribute(f,"1"),h=yt,$t(),lt},Se=(yt,Ge)=>{if(!yt)return null;if(yt.collapsed){if(!W(yt)){const Nn=Ge?1:-1,bo=Ad(Nn,r,yt),Zo=bo.getNode(!Ge);if(xe(Zo)){if(i0(Zo))return R(Nn,Zo,Ge?!bo.isAtEnd():!1,!1);if(Cs(Zo)&&hr(Zo.nextSibling)){const yr=o.createRng();return yr.setStart(Zo,0),yr.setEnd(Zo,0),yr}}const rr=bo.getNode(Ge);if(xe(rr)){if(i0(rr))return R(Nn,rr,Ge?!1:!bo.isAtEnd(),!1);if(Cs(rr)&&hr(rr.previousSibling)){const yr=o.createRng();return yr.setStart(rr,1),yr.setEnd(rr,1),yr}}}return null}let ze=yt.startContainer,lt=yt.startOffset;const sn=yt.endOffset;if(pt(ze)&&lt===0&&s4(ze.parentNode)&&(ze=ze.parentNode,lt=o.nodeIndex(ze),ze=ze.parentNode),!gn(ze))return null;if(sn===lt+1&&ze===yt.endContainer){const Nn=ze.childNodes[lt];if(w(Nn))return be(Nn)}return null},Ze=()=>{h&&h.removeAttribute(f),Eu(ee.fromDom(e.getBody()),"#"+u).each(Ws),h=null},it=()=>{a.destroy(),h=null},$t=()=>{a.hide()};return Bd(e)||L(),{showCaret:R,showBlockCaretContainer:M,hideFakeCaret:$t,destroy:it}},Nq=(e,n)=>{let o=n;for(let r=e.previousSibling;pt(r);r=r.previousSibling)o+=r.data.length;return o},r4=(e,n,o,r,a)=>{if(pt(o)&&(r<0||r>o.data.length))return[];const u=a&&pt(o)?[Nq(o,r)]:[r];let f=o;for(;f!==n&&f.parentNode;)u.push(e.nodeIndex(f,a)),f=f.parentNode;return f===n?u.reverse():[]},YR=(e,n,o,r,a,u,f=!1)=>{const h=r4(e,n,o,r,f),v=r4(e,n,a,u,f);return{start:h,end:v}},A7=(e,n)=>{const o=n.slice(),r=o.pop();return vs(r)?$e(o,(u,f)=>u.bind(h=>F.from(h.childNodes[f])),F.some(e)).bind(u=>pt(u)&&(r<0||r>u.data.length)?F.none():F.some({node:u,offset:r})):F.none()},k7=(e,n)=>A7(e,n.start).bind(({node:o,offset:r})=>A7(e,n.end).map(({node:a,offset:u})=>{const f=document.createRange();return f.setStart(o,r),f.setEnd(a,u),f})),D7=(e,n,o,r=!1)=>YR(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),Fh=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n,pt(n.firstChild)&&Vm(n.firstChild.data)),Fh(e,r,o)}},Uw=(e,n,o,r=!0)=>{const a=n.startContainer.parentNode,u=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(pt(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),pt(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),Fh(e,a,o),a!==u&&Fh(e,u,o))},Ww=(e,n)=>F.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),XR=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:Qm(r).concat(e.blockPatterns),inlinePatterns:Qg(r).concat(e.inlinePatterns)}},JR=(e,n,o,r)=>{const a=e.createRng();return a.setStart(n,0),a.setEnd(o,r),a.toString()},QR=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),c4=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},O7=(e,n,o)=>{const r=k7(e.getRoot(),o).getOrDie("Unable to resolve path range"),a=r.startContainer,u=r.endContainer,f=r.endOffset===0?u:u.splitText(r.endOffset),h=r.startOffset===0?a:a.splitText(r.startOffset),v=h.parentNode,w=f.parentNode;return{prefix:n,end:w.insertBefore(QR(e,n+"-end"),f),start:v.insertBefore(QR(e,n+"-start"),h)}},_7=(e,n,o)=>{Fh(e,e.get(n.prefix+"-end"),o),Fh(e,e.get(n.prefix+"-start"),o)},Zw=e=>e.start.length===0,Pq=e=>(n,o)=>{const a=n.data.substring(0,o),u=a.lastIndexOf(e.charAt(e.length-1)),f=a.lastIndexOf(e);return f!==-1?f+e.length:u!==-1?u+1:-1},R7=(e,n,o,r)=>{const a=n.start;return DA(e,r.container,r.offset,Pq(a),o).bind(f=>{var w;const h=((w=o.textContent)==null?void 0:w.indexOf(a))??-1;if(h!==-1&&f.offset>=h+a.length){const D=e.createRng();return D.setStart(f.container,f.offset-a.length),D.setEnd(f.container,f.offset),F.some(D)}else{const D=f.offset-a.length;return z_(f.container,D,o).map(R=>{const M=e.createRng();return M.setStart(R.container,R.offset),M.setEnd(f.container,f.offset),M}).filter(R=>R.toString()===a).orThunk(()=>R7(e,n,o,Pd(f.container,0)))}})},$q=(e,n,o,r,a,u=!1)=>{if(n.start.length===0&&!u){const f=e.createRng();return f.setStart(o,r),f.setEnd(o,r),F.some(f)}return H_(o,r,a).bind(f=>R7(e,n,a,f).bind(v=>{var w;if(u){if(v.endContainer===f.container&&v.endOffset===f.offset)return F.none();if(f.offset===0&&((w=v.endContainer.textContent)==null?void 0:w.length)===v.endOffset)return F.none()}return F.some(v)}))},Iq=(e,n,o,r)=>{const a=e.dom,u=a.getRoot(),f=o.pattern,h=o.position.container,v=o.position.offset;return z_(h,v-o.pattern.end.length,n).bind(w=>{const D=YR(a,u,w.container,w.offset,h,v,r);if(Zw(f))return F.some({matches:[{pattern:f,startRng:D,endRng:D}],position:w});{const R=a4(e,o.remainingPatterns,w.container,w.offset,n,r),M=R.getOr({matches:[],position:w}),L=M.position;return $q(a,f,L.container,L.offset,n,R.isNone()).map(W=>{const J=D7(a,u,W,r);return{matches:M.matches.concat([{pattern:f,startRng:J,endRng:D}]),position:Pd(W.startContainer,W.startOffset)}})}})},a4=(e,n,o,r,a,u)=>{const f=e.dom;return H_(o,r,f.getRoot()).bind(h=>{const v=JR(f,a,o,r);for(let w=0;w<n.length;w++){const D=n[w];if(!vc(v,D.end))continue;const R=n.slice();R.splice(w,1);const M=Iq(e,a,{pattern:D,remainingPatterns:R,position:h},u);if(M.isNone()&&r>0)return a4(e,n,o,r-1,a,u);if(M.isSome())return M}return F.none()})},B7=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?te(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},e5=(e,n,o,r)=>{const a=c4(e.dom,o);Uw(e.dom,a,r),B7(e,n,a)},Lq=(e,n,o,r,a)=>{const u=e.dom,f=c4(u,r),h=c4(u,o);Uw(u,h,a),Uw(u,f,a);const v={prefix:o.prefix,start:o.end,end:r.start},w=c4(u,v);B7(e,n,w)},Hq=(e,n)=>{const o=Jn("mce_textpattern"),r=bn(n,(a,u)=>{const f=O7(e,o+`_end${a.length}`,u.endRng);return a.concat([{...u,endMarker:f}])},[]);return bn(r,(a,u)=>{const f=r.length-a.length-1,h=Zw(u.pattern)?u.endMarker:O7(e,o+`_start${f}`,u.startRng);return a.concat([{...u,startMarker:h}])},[])},zq=e=>Ls(e,(n,o)=>o.end.length-n.end.length),M7=(e,n)=>{const o=ns(e,r=>ve(n,a=>r.pattern.start===a.pattern.start&&r.pattern.end===a.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},F7=(e,n,o,r,a,u)=>{const f=a4(e,a.inlinePatterns,o,r,n,u).fold(()=>[],v=>v.matches),h=a4(e,zq(a.inlinePatterns),o,r,n,u).fold(()=>[],v=>v.matches);return M7(f,h)},N7=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),a=Hq(o,n);te(a,u=>{const f=o.getParent(u.startMarker.start,o.isBlock),h=v=>v===f;Zw(u.pattern)?e5(e,u.pattern,u.endMarker,h):Lq(e,u.pattern,u.startMarker,u.endMarker,h),_7(o,u.endMarker,h),_7(o,u.startMarker,h)}),e.selection.moveToBookmark(r)},P7=(e,n,o)=>UZ(n,0,n).map(r=>{const a=r.container;return RP(a,o.start.length,n).each(u=>{const f=e.createRng();f.setStart(a,0),f.setEnd(u.container,u.offset),Uw(e,f,h=>h===n)}),a}),$7=e=>(n,o)=>{const r=n.dom,a=o.pattern,u=k7(r.getRoot(),o.range).getOrDie("Unable to resolve path range"),f=(h,v)=>{const w=v.get(h);return je(w)&&Wo(w).exists(D=>Jt(D,"block"))};return Ww(n,u).each(h=>{a.type==="block-format"?f(a.format,n.formatter)&&n.undoManager.transact(()=>{e(n.dom,h,a),n.formatter.apply(a.format)}):a.type==="block-command"&&n.undoManager.transact(()=>{e(n.dom,h,a),n.execCommand(a.cmd,!1,a.value)})}),!0},Vq=e=>Ls(e,(n,o)=>o.start.length-n.start.length),I7=e=>(n,o)=>{const r=Vq(n),a=o.replace(mr," ");return Xt(r,u=>e(u,o,a))},L7=(e,n)=>(o,r,a,u,f=r.textContent??"")=>{const h=o.dom,v=Sa(o);return h.is(r,v)?e(a.blockPatterns,f).map(w=>n&&Ct.trim(f).length===w.start.length?[]:[{pattern:w,range:YR(h,h.getRoot(),r,0,r,0,u)}]).getOr([]):[]},Uq=e=>/^\s[^\s]/.test(e),Zq=$7((e,n,o)=>{P7(e,n,o).each(r=>{const a=ee.fromDom(r),u=ga(a);Uq(u)&&b1(a,u.slice(1))})}),t5=I7((e,n,o)=>n.indexOf(e.start)===0||o.indexOf(e.start)===0),jq=L7(t5,!0),Gq=(e,n)=>{const o=e.selection.getRng();return Ww(e,o).map(r=>{const a=Math.max(0,o.startOffset),u=XR(n,r,r.textContent??""),f=F7(e,r,o.startContainer,a,u,!0),h=jq(e,r,u,!0);return{inlineMatches:f,blockMatches:h}}).filter(({inlineMatches:r,blockMatches:a})=>a.length>0||r.length>0)},qq=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();te(n,r=>Zq(e,r)),e.selection.moveToBookmark(o)},Kq=$7(P7),Yq=I7((e,n,o)=>n===e.start||o===e.start),Xq=L7(Yq,!1),i4=(e,n)=>{const o=e.selection.getRng();return Ww(e,o).map(r=>{const a=Math.max(0,o.startOffset),u=JR(e.dom,r,o.startContainer,a),f=XR(n,r,u);return Xq(e,r,f,!1,u)}).filter(r=>r.length>0)},Jq=(e,n)=>{te(n,o=>Kq(e,o))},Qq=(e,n)=>Gq(e,n).fold(Ae,({inlineMatches:o,blockMatches:r})=>(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{IS(e),N7(e,o),qq(e,r);const a=e.selection.getRng(),u=H_(a.startContainer,a.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),u.each(f=>{const h=f.container;h.data.charAt(f.offset-1)===Yc&&(h.deleteData(f.offset-1,1),Fh(e.dom,h.parentNode,v=>v===e.dom.getRoot()))})}),!0)),eK=(e,n)=>{const o=e.selection.getRng();Ww(e,o).map(r=>{const a=Math.max(0,o.startOffset-1),u=JR(e.dom,r,o.startContainer,a),f=XR(n,r,u),h=F7(e,r,o.startContainer,a,f,!1);h.length>0&&e.undoManager.transact(()=>{N7(e,h)})})},tK=(e,n)=>i4(e,n).fold(Ae,o=>(e.undoManager.transact(()=>{Jq(e,o)}),!0)),H7=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},nK=(e,n)=>H7(e,n,(o,r)=>o===r.keyCode&&!jt.modifierPressed(r)),oK=(e,n)=>H7(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),sK=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>eh(lC(e).filter(f=>f.type==="inline-command"||f.type==="block-command"?e.queryCommandSupported(f.cmd):!0),u3(e)),a=()=>m3(e);e.on("keydown",f=>{if(f.keyCode===13&&!jt.modifierPressed(f)&&e.selection.isCollapsed()&&e.selection.isEditable()){const h=q2(r(),"enter");(h.inlinePatterns.length>0||h.blockPatterns.length>0||a())&&Qq(e,h)&&f.preventDefault()}},!0),e.on("keydown",f=>{if(f.keyCode===32&&e.selection.isCollapsed()&&e.selection.isEditable()){const h=q2(r(),"space");(h.blockPatterns.length>0||a())&&tK(e,h)&&f.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()&&e.selection.isEditable()){const f=q2(r(),"space");(f.inlinePatterns.length>0||a())&&eK(e,f)}};e.on("keyup",f=>{nK(o,f)&&u()}),e.on("keypress",f=>{oK(n,f)&&Vu.setEditorTimeout(e,u)})},rK=e=>{sK(e)},z7=e=>{const n=Ct.each,o=jt.BACKSPACE,r=jt.DELETE,a=e.dom,u=e.selection,f=e.parser,h=wo.browser,v=h.isFirefox(),w=h.isChromium()||h.isSafari(),D=wo.deviceType.isiPhone()||wo.deviceType.isiPad(),R=wo.os.isMacOS()||wo.os.isiOS(),M=(wt,Ut)=>{try{e.getDoc().execCommand(wt,!1,String(Ut))}catch{}},L=wt=>wt.isDefaultPrevented(),K=()=>{const wt=Pn=>{const io=a.create("body"),rs=Pn.cloneContents();return io.appendChild(rs),u.serializer.serialize(io,{format:"html"})},Ut=Pn=>{const io=wt(Pn),rs=a.createRng();rs.selectNode(e.getBody());const Cr=wt(rs);return io===Cr};e.on("keydown",Pn=>{const io=Pn.keyCode;if(!L(Pn)&&(io===r||io===o)&&e.selection.isEditable()){const rs=e.selection.isCollapsed(),Cr=e.getBody();if(rs&&!Kl(e.schema,Cr)||!rs&&!Ut(e.selection.getRng()))return;Pn.preventDefault(),e.setContent(""),Cr.firstChild&&a.isBlock(Cr.firstChild)?e.selection.setCursorLocation(Cr.firstChild,0):e.selection.setCursorLocation(Cr,0),e.nodeChanged()}})},W=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},J=()=>{e.inline||a.bind(e.getDoc(),"mousedown mouseup",wt=>{var Pn;let Ut;if(wt.target===e.getDoc().documentElement)if(Ut=u.getRng(),((Pn=e.getDoc().getSelection())==null?void 0:Pn.anchorNode)!==null&&e.getBody().focus(),wt.type==="mousedown"){if(ja(Ut.startContainer))return;u.placeCaretAt(wt.clientX,wt.clientY)}else u.setRng(Ut)})},pe=()=>{e.on("keydown",wt=>{if(!L(wt)&&wt.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const Ut=u.getNode(),Pn=Ut.previousSibling;if(Ut.nodeName==="HR"){a.remove(Ut),wt.preventDefault();return}Pn&&Pn.nodeName&&Pn.nodeName.toLowerCase()==="hr"&&(a.remove(Pn),wt.preventDefault())}}})},be=()=>{Range.prototype.getClientRects||e.on("mousedown",wt=>{if(!L(wt)&&wt.target.nodeName==="HTML"){const Ut=e.getBody();Ut.blur(),Vu.setEditorTimeout(e,()=>{Ut.focus()})}})},Se=()=>{const wt=aC(e);e.on("click",Ut=>{const Pn=Ut.target;/^(IMG|HR)$/.test(Pn.nodeName)&&a.isEditable(Pn)&&(Ut.preventDefault(),e.selection.select(Pn),e.nodeChanged()),Pn.nodeName==="A"&&a.hasClass(Pn,wt)&&Pn.childNodes.length===0&&a.isEditable(Pn.parentNode)&&(Ut.preventDefault(),u.select(Pn))})},Ze=()=>{const wt=Ut=>Ut.nodeName==="IMG"&&e.dom.isEditable(Ut);e.on("mousedown",Ut=>{Qt(F.from(Ut.clientX),F.from(Ut.clientY),(Pn,io)=>{var hf;const rs=e.getDoc().caretPositionFromPoint(Pn,io),Cr=((hf=rs==null?void 0:rs.offsetNode)==null?void 0:hf.childNodes[rs.offset-(rs.offset>0?1:0)])||(rs==null?void 0:rs.offsetNode);if(xe(Cr)&&wt(Cr)){const Qa=Cr.getBoundingClientRect();Ut.preventDefault(),e.hasFocus()||e.focus(),e.selection.select(Cr),Ut.clientX<Qa.left||Ut.clientY<Qa.top?e.selection.collapse(!0):(Ut.clientX>Qa.right||Ut.clientY>Qa.bottom)&&e.selection.collapse(!1)}})})},it=()=>{const wt=()=>{const Pn=a.getAttribs(u.getStart().cloneNode(!1));return()=>{const io=u.getStart();io!==e.getBody()&&(a.setAttrib(io,"style",null),n(Pn,rs=>{io.setAttributeNode(rs.cloneNode(!0))}))}},Ut=()=>!u.isCollapsed()&&a.getParent(u.getStart(),a.isBlock)!==a.getParent(u.getEnd(),a.isBlock);e.on("keypress",Pn=>{let io;return!L(Pn)&&(Pn.keyCode===8||Pn.keyCode===46)&&Ut()?(io=wt(),e.getDoc().execCommand("delete",!1),io(),Pn.preventDefault(),!1):!0}),a.bind(e.getDoc(),"cut",Pn=>{if(!L(Pn)&&Ut()){const io=wt();Vu.setEditorTimeout(e,()=>{io()})}})},$t=()=>{e.on("keydown",wt=>{if(!L(wt)&&wt.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const Ut=u.getNode().previousSibling;if(Ut&&Ut.nodeName&&Ut.nodeName.toLowerCase()==="table")return wt.preventDefault(),!1}return!0})},yt=()=>{e.on("keydown",wt=>{if(L(wt)||wt.keyCode!==jt.BACKSPACE)return;let Ut=u.getRng();const Pn=Ut.startContainer,io=Ut.startOffset,rs=a.getRoot();let Cr=Pn;if(!(!Ut.collapsed||io!==0)){for(;Cr.parentNode&&Cr.parentNode.firstChild===Cr&&Cr.parentNode!==rs;)Cr=Cr.parentNode;Cr.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,Cr),Ut=a.createRng(),Ut.setStart(Pn,0),Ut.setEnd(Pn,0),u.setRng(Ut))}})},Ge=()=>{const wt=sc("figcaption");e.on("keydown",Ut=>{if(Ut.keyCode===jt.LEFT||Ut.keyCode===jt.RIGHT){const Pn=ee.fromDom(e.selection.getNode());wt(Pn)&&e.selection.isCollapsed()&&Va(Pn).bind(io=>{var rs;return e.selection.getRng().startOffset===0&&Ut.keyCode===jt.LEFT?Vi(io):e.selection.getRng().endOffset===((rs=Pn.dom.textContent)==null?void 0:rs.length)&&Ut.keyCode===jt.RIGHT?Ua(io):F.none()}).each(io=>{e.selection.setCursorLocation(io.dom,0)})}})},ze=()=>{const wt=()=>{M("StyleWithCSS",!1),M("enableInlineTableEditing",!1),sC(e)||M("enableObjectResizing",!1)};Q1(e)||e.on("BeforeExecCommand mousedown",wt)},lt=()=>{const wt=()=>{n(a.select("a:not([data-mce-block])"),Ut=>{var rs;let Pn=Ut.parentNode;const io=a.getRoot();if((Pn==null?void 0:Pn.lastChild)===Ut){for(;Pn&&!a.isBlock(Pn);){if(((rs=Pn.parentNode)==null?void 0:rs.lastChild)!==Pn||Pn===io)return;Pn=Pn.parentNode}a.add(Pn,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",Ut=>{(Ut.type==="setcontent"||Ut.command==="mceInsertLink")&&wt()})},sn=()=>{e.on("init",()=>{M("DefaultParagraphSeparator",Sa(e))})},Nn=wt=>{const Ut=wt.getBody(),Pn=wt.selection.getRng();return Pn.startContainer===Pn.endContainer&&Pn.startContainer===Ut&&Pn.startOffset===0&&Pn.endOffset===Ut.childNodes.length},bo=()=>{e.on("keyup focusin mouseup",wt=>{!jt.modifierPressed(wt)&&!Nn(e)&&u.normalize()},!0)},Zo=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},rr=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},yr=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",wt=>{let Ut;wt.target.nodeName==="HTML"&&(Ut=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(Ut),e.selection.normalize(),e.nodeChanged())}))},Tc=()=>{R&&e.on("keydown",wt=>{jt.metaKeyPressed(wt)&&!wt.shiftKey&&(wt.keyCode===37||wt.keyCode===39)&&(wt.preventDefault(),e.selection.getSel().modify("move",wt.keyCode===37?"backward":"forward","lineboundary"))})},Kc=()=>{e.on("click",wt=>{let Ut=wt.target;do if(Ut.tagName==="A"){wt.preventDefault();return}while(Ut=Ut.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Ld=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",wt=>{wt.preventDefault()})})},Vt=()=>{f.addNodeFilter("br",wt=>{let Ut=wt.length;for(;Ut--;)wt[Ut].attr("class")==="Apple-interchange-newline"&&wt[Ut].remove()})},Rn=rt,ks=()=>{if(!v||e.removed)return!1;const wt=e.selection.getSel();return!wt||!wt.rangeCount||wt.rangeCount===0},Ds=()=>{w&&(J(),Se(),Ld(),W(),D&&(rr(),yr(),Kc())),v&&(be(),ze(),Zo(),Tc())},Tn=()=>{yt(),K(),wo.windowsPhone||bo(),w&&(J(),Se(),sn(),Ld(),$t(),Vt(),D?(rr(),yr(),Kc()):W()),v&&(Ge(),Ze(),pe(),be(),it(),ze(),lt(),Zo(),Tc(),$t())};return Bd(e)?Ds():Tn(),{refreshContentEditable:Rn,isHidden:ks}};class V7 extends Error{constructor(o,r){super(o);Xe(this,"url");this.url=r}}const l4={},cK=(e,n,o)=>new Promise((r,a)=>{const u=ee.fromTag("script");zc(u,{type:"text/javascript",src:e,...o});const f=()=>{Ws(u)};wg(u,"load",()=>{f(),r()}),wg(u,"error",()=>{f(),a(new Error(`Failed to load script url: ${e}`))}),is(l1(n),u)}),U7=async(e,n)=>{const o=fc.ScriptLoader.getScriptAttributes(e);return await cK(e,n,o).catch(()=>Promise.reject(new V7(`Failed to load component url: ${e}`,e))),e},W7=e=>an(e,(n,o)=>dn(l4,n).getOrThunk(()=>{if(pn(window.customElements.get(o))){const r=U7(n,Zh());return l4[n]=r,r}else return Promise.resolve(n)}).catch(r=>(delete l4[n],Promise.reject(r)))),jw=(e,n)=>{const o=Hr(tn(e));return ae(o,r=>U7(r,ee.fromDom(n)))},aK=e=>{const n=e.schema.getComponentUrls();return e.inline?W7(n):jw(n,e.getDoc())},Z7=async e=>{const n=aK(e),o=Ce(await Promise.allSettled(n),r=>r.status==="rejected");o.length>0&&te(o,r=>{if(r.reason instanceof V7){const{url:a}=r.reason;yV(e,a)}})},iK=e=>{Z7(e)},n5=Bs.DOM,lK=(e,n)=>{const o=ee.fromDom(e.getBody()),r=u1(Oc(o)),a=ee.fromTag("style");Sr(a,"type","text/css"),is(a,ee.fromText(n)),is(r,a),e.on("remove",()=>{Ws(a)})},uK=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,u4=e=>Ot(e,n=>ro(n)===!1),j7=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return u4({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_html_in_comments:n("allow_html_in_comments"),allow_mathml_annotation_encodings:n("allow_mathml_annotation_encodings"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_unsafe_embeds:n("convert_unsafe_embeds"),convert_fonts_to_spans:n("convert_fonts_to_spans"),extended_mathml_attributes:n("extended_mathml_attributes"),extended_mathml_elements:n("extended_mathml_elements"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),inline_styles:n("inline_styles"),root_name:uK(e),sandbox_iframes:n("sandbox_iframes"),sandbox_iframes_exclusions:r0(e),sanitize:n("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},o5=e=>{const n=e.options.get;return u4({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},dK=e=>{const n=e.options.get;return{...j7(e),...o5(e),...u4({remove_trailing_brs:n("remove_trailing_brs"),pad_empty_with_br:n("pad_empty_with_br"),url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},mK=e=>{const n=O0(j7(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const a=e.dom,u="data-mce-"+r;let f=o.length;for(;f--;){const h=o[f];let v=h.attr(r);if(v&&!h.attr(u)){if(v.indexOf("data:")===0||v.indexOf("blob:")===0)continue;r==="style"?(v=a.serializeStyle(a.parseStyle(v),h.name),v.length||(v=null),h.attr(u,v),h.attr(r,v)):r==="tabindex"?(h.attr(u,v),h.attr(r,null)):h.attr(u,e.convertURL(v,r,h.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const a=o[r],u=a.attr("type")||"no/type";u.indexOf("mce-")!==0&&a.attr("type","mce-"+u)}}),s0(e)&&n.addNodeFilter("#cdata",o=>{let r=o.length;for(;r--;){const a=o[r];a.type=8,a.name="#comment",a.value="[CDATA["+e.dom.encode(a.value??"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const a=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(a)&&u.getAll("br").length===0&&u.append(new hi("br",1))}}),n},fK=e=>{const n=i3(e);n&&Vu.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},gK=e=>{const n=e.dom.getRoot();!e.inline&&(!Vv(e)||e.selection.getStart(!0)===n)&&ca(n).each(o=>{const r=o.getNode(),a=Jd(r)?ca(r).getOr(o):o;e.selection.setRng(a.toRange())})},hK=e=>{e.bindPendingEventDelegates(),e.initialized=!0,K4(e),e.focus(!0),gK(e),e.nodeChanged({initial:!0});const n=Sx(e);le(n)&&n.call(e,e),fK(e),ng(e)&&tO(e,!0)},s5=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,pK=(e,n,o)=>{const{pass:r,fail:a}=Ee(n,h=>tinymce.Resource.has(aw(h))),f=[...r.map(h=>{const v=tinymce.Resource.get(aw(h));return re(v)?Promise.resolve(s5(e).loadRawCss(h,v)):Promise.resolve()}),s5(e).loadAll(a)];return e.inline?f:f.concat([e.ui.styleSheetLoader.loadAll(o)])},G7=e=>{const n=s5(e),o=fx(e),r=e.contentCSS,a=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?a():e.on("remove",a)};if(e.contentStyles.length>0){let v="";Ct.each(e.contentStyles,w=>{v+=w+`\r
`}),e.dom.addStyle(v)}const f=Promise.all(pK(e,r,o)).then(u).catch(u),h=mx(e);return h&&lK(e,h),f},bK=e=>{const n=e.getDoc(),o=e.getBody();G4(e),wv(e)||(n.body.spellcheck=!1,n5.setAttrib(o,"spellcheck","false")),e.quirks=z7(e),q4(e);const r=gx(e);r!==void 0&&(o.dir=r);const a=Cp(e);a&&e.on("BeforeSetContent",u=>{Ct.each(a,f=>{u.content=u.content.replace(f,h=>"<!--mce:protected "+escape(h)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},q7=e=>{Bd(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},Gw=e=>{e.removed!==!0&&(q7(e),hK(e))},K7=e=>{let n=!1;const o=setTimeout(()=>{n||e.setProgressState(!0)},500);return()=>{clearTimeout(o),n=!0,e.setProgressState(!1)}},r5=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(n5.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=Q1(e),e._editableRoot=e0(e),!a0(e)&&e.hasEditableRoot()&&(e.inline&&n5.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=$V(e),e.schema=Ru(o5(e)),e.dom=Bs(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:pv(e),referrerPolicy:eC(e),crossOrigin:K1(e),onSetAttrib:f=>{e.dispatch("SetAttrib",f)}}),e.parser=mK(e),e.serializer=$T(dK(e),e),e.selection=PD(e.dom,e.getWin(),e.serializer,e),e.annotator=V3(e),e.formatter=oN(e),e.undoManager=iw(e),e._nodeChangeDispatcher=new xG(e),e._selectionOverrides=T7(e),SG(e),bA(e),o7(e),cZ(e),Bd(e)||(iq(e),rK(e));const a=P$(e);M8(e,a),P8(e),dO(e),e4(e,a);const u=OD(e);bK(e),iK(e),u.fold(()=>{const f=K7(e);G7(e).then(()=>{Gw(e),f()})},f=>{e.setProgressState(!0),G7(e).then(()=>{f().then(h=>{e.setProgressState(!1),Gw(e),BD(e)},h=>{e.notificationManager.open({type:"error",text:String(h)}),Gw(e),BD(e)})})})},c5=Bs.DOM,vK=(e,n,o,r)=>{const a=ee.fromTag("iframe");return r.each(u=>Sr(a,"tabindex",u)),zc(a,o),zc(a,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",...wo.browser.isFirefox()?{title:n}:{}}),ci(a,"tox-edit-area__iframe"),a},yK=e=>{let n=vp(e)+"<html><head>";G1(e)!==e.editorManager.documentBaseURL&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=nf(e),r=Ba(e),a=e.translate(Cv(e)),u=wo.browser.isFirefox()?"":`aria-label="${a}"`;return lm(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+lm(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" ${u}><br></body></html>`,n},Y7=(e,n)=>{const o=Cv(e),r=e.translate(o),a=ji(ee.fromDom(e.getElement()),"tabindex").bind(td),u=vK(e.id,r,hv(e),a).dom;u.onload=()=>{u.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=u,e.iframeHTML=yK(e),c5.add(n.iframeContainer,u)},X7=e=>{const n=e.iframeElement,o=()=>{e.contentDocument=n.contentDocument,r5(e)};if(mC(e)||wo.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close(),o()}else{const r=wg(ee.fromDom(n),"load",()=>{r.unbind(),o()});n.srcdoc=e.iframeHTML}},CK=(e,n)=>{Y7(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=c5.isHidden(n.editorContainer)),e.getElement().style.display="none",c5.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,X7(e)},J7=Bs.DOM,a5=(e,n,o)=>{const r=tg.get(o),a=tg.urls[o]||e.editorManager.documentBaseURL.replace(/\/$/,"");if(o=Ct.trim(o),r&&Ct.inArray(n,o)===-1){if(e.plugins[o])return;try{const u=r(e,a)||{};e.plugins[o]=u,le(u.init)&&(u.init(e,a),n.push(o))}catch(u){qD(e,o,u)}}},d4=e=>{const n=o=>{o.keyCode===jt.ESC&&!o.defaultPrevented&&lx(e).isDefaultPrevented()&&o.preventDefault()};document.addEventListener("keyup",n),e.inline||e.on("keyup",n),e.on("remove",()=>{document.removeEventListener("keyup",n),e.inline||e.off("keyup",n)})},Q7=e=>e.replace(/^\-/,""),eI=e=>{const n=[];te(sh(e),o=>{a5(e,n,Q7(o))})},tI=e=>{const n=Ct.trim(ux(e)),o=e.ui.registry.getAll().icons,r={...IT.get("default").icons,...IT.get(n).icons};yo(r,(a,u)=>{Jt(o,u)||e.ui.registry.addIcon(u,a)})},wK=e=>{const n=eu(e);if(re(n)){const o=M0.get(n);e.theme=o(e,M0.urls[n])||{},le(e.theme.init)&&e.theme.init(e,M0.urls[n]||e.editorManager.documentBaseURL.replace(/\/$/,""))}else e.theme={}},SK=e=>{const n=cC(e),o=ly.get(n);e.model=o(e,ly.urls[n])},xK=e=>{QD.init(e)},EK=e=>{const n=e.theme.renderUI;return n?n():l5(e)},ag=e=>{const n=e.getElement(),r=eu(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},i5=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),TK=e=>{const n=J7.create("div");return J7.insertAfter(n,e),i5(n,n)},l5=e=>{const n=e.getElement();return e.inline?i5(null):TK(n)},AK=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,re(eu(e))?EK(e):le(eu(e))?ag(e):l5(e)},kK=(e,n)=>{const o={show:F.from(n.show).getOr(rt),hide:F.from(n.hide).getOr(rt),isEnabled:F.from(n.isEnabled).getOr(Ve),setEnabled:r=>{r&&(e.mode.get()==="readonly"||ng(e))||F.from(n.setEnabled).each(u=>u(r))}};e.ui={...e.ui,...o}},u5=async e=>{e.dispatch("ScriptsLoaded"),tI(e),d4(e),wK(e),SK(e),xK(e),eI(e);const n=await AK(e);kK(e,F.from(n.api).getOr({})),e.editorContainer=n.editorContainer,RV(e),e.inline?r5(e):CK(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},ig=Bs.DOM,nI=e=>e.charAt(0)==="-",DK=(e,n)=>{const o=dx(n),r=o3(n);if(!Mu.hasCode(o)&&o!=="en"){const a=Qs(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(a).catch(()=>{rw(n,a,o)})}},OK=(e,n)=>{const o=eu(e);if(re(o)&&!nI(o)&&!Jt(M0.urls,o)){const r=px(e),a=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;M0.load(o,a).catch(()=>{P6(e,a,o)})}},oI=(e,n)=>{const o=cC(e);if(o!=="plugin"&&!Jt(ly.urls,o)){const r=s3(e),a=re(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;ly.load(o,a).catch(()=>{jD(e,a,o)})}},_K=(e,n)=>{QD.load(e,n)},sI=e=>F.from(P5(e)).filter(Qs).map(n=>({url:n,name:F.none()})),rI=(e,n,o)=>F.from(n).filter(r=>Qs(r)&&!IT.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:F.some(r)})),RK=(e,n,o)=>{const r=rI(n,"default",o),a=sI(n).orThunk(()=>rI(n,ux(n),""));te(An([r,a]),u=>{e.add(u.url).catch(()=>{kh(n,u.url,u.name.getOrUndefined())})})},BK=(e,n)=>{const o=(r,a)=>{r!=="licensekeymanager"&&tg.load(r,a).catch(()=>{vV(e,a,r)})};yo(yv(e),(r,a)=>{o(a,r),e.options.set("plugins",sh(e).concat(a))}),te(sh(e),r=>{r=Ct.trim(r),r&&!tg.urls[r]&&!nI(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},MK=e=>{const n=eu(e);return!re(n)||xe(M0.get(n))},FK=e=>{const n=cC(e);return xe(ly.get(n))},cI=(e,n)=>{const o=fc.ScriptLoader,r=()=>{!e.removed&&MK(e)&&FK(e)&&u5(e)};OK(e,n),oI(e,n),_K(e,n),DK(o,e),RK(o,e,n),BK(e,n),o.loadQueue().then(r,r)},m4=(e,n)=>Du.forElement(e,{contentCssCors:t0(n),referrerPolicy:eC(n)}),d5=e=>{const n=e.id;Mu.setCode(dx(e));const o=()=>{ig.unbind(window,"ready",o),e.render()};if(!Bu.Event.domLoaded){ig.bind(window,"ready",o);return}if(!e.getElement())return;const r=ee.fromDom(e.getElement()),a=Ro(r);e.on("remove",()=>{Dt(r.dom.attributes,f=>cc(r,f.name)),zc(r,a)}),e.ui.styleSheetLoader=m4(r,e),vv(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||ig.getParent(n,"form");u&&(e.formElement=u,bx(e)&&!d2(e.getElement())&&(ig.insertAfter(ig.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=f=>{e.dispatch(f.type,f)},ig.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),a3(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=Tm(e),e.notificationManager=ZD(e),Rx(e)&&e.on("GetContent",f=>{f.save&&(f.content=ig.encode(f.content))}),vx(e)&&e.on("submit",()=>{e.initialized&&e.save()}),L5(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),cI(e,e.suffix)},aI=["#E41B60","#AD1457","#1939EC","#001CB5","#648000","#465B00","#006CE7","#0054B4","#00838F","#006064","#00866F","#004D40","#51742F","#385021","#CF4900","#A84600","#CC0000","#6A1B9A","#9C27B0","#6A00AB","#3041BA","#0A1877","#774433","#452B24","#607D8B","#455A64"],iI=e=>{var n;return Intl.Segmenter?`${(n=new Intl.Segmenter().segment(e)[Symbol.iterator]().next().value)==null?void 0:n.segment}`:e.trim()[0]},lI=(e,n)=>{let o=5381;for(let r=0;r<e.length;r++)o=(o<<5)+o+e.charCodeAt(r);return(o>>>0)%(n+1)},NK=e=>{const n=lI(e??"",aI.length-1);return aI[n]},uI=(e,n,o)=>{const r=o/2;return`<svg height="${o}" width="${o}" xmlns="http://www.w3.org/2000/svg"><circle cx="${r}" cy="${r}" r="${r}" fill="${n}"/><text x="50%" y="50%" text-anchor="middle" dominant-baseline="central" fill="#FFF" font-family="sans-serif" font-size="${r}">`+e+"</text></svg>"},PK=(e,n,o)=>"data:image/svg+xml,"+encodeURIComponent(uI(e,n,o)),m5=(e,n={size:36})=>PK(iI(e.name),NK(e.id),n.size),$K=GP([tR("id"),QP("name"),QP("avatar"),ij("custom")]),IK=e=>{const n={};return yo(e,(o,r)=>{o.each(a=>{n[r]=a})}),n},dI=e=>{if(!Array.isArray(e))throw new Error("fetch_users must return an array");const n=ae(e,a=>qP("Invalid user object",$K,a)),{errors:o,values:r}=_r(n);if(o.length>0){const a=ae(o,(u,f)=>`User at index ${f}: ${KP(u)}`);console.warn(`User validation errors:
`+a.join(`
`))}return ae(r,a=>{const{id:u,name:f,avatar:h,...v}=a;return{id:u,name:f.getOr(u),avatar:h.getOr(m5({id:u,name:f.getOr(u)})),...IK(v)}})},mI=e=>{const n=new Map,o=new Map,r=w=>F.from(n.get(w)),a=(w,D)=>{n.set(D,w)},u=(w,D)=>F.from(o.get(w)).each(({reject:R})=>{R(D),o.delete(w)}),f=(w,D)=>F.from(o.get(w)).each(({resolve:R})=>{R(D),o.delete(w)}),h=w=>{const D=Av(e);if(Array.isArray(w)){if(!D)return Ns(w,M=>Promise.resolve({id:M,name:M,avatar:m5({id:M,name:M})}))}else return{};const R=Hr(Ce(w,M=>!r(M).isSome()));return te(R,M=>{const L=new Promise((K,W)=>{o.set(M,{resolve:K,reject:W})});a(L,M)}),R.length>0&&D(R).then(dI).then(M=>{const L=new Set(ae(M,K=>K.id));te(M,K=>f(K.id,K)),te(R,K=>{L.has(K)||u(K,new Error(`User ${K} not found`))})}).catch(M=>{te(R,L=>u(L,M instanceof Error?M:new Error("Network error")))}),$e(w,(M,L)=>(M[L]=r(L).getOr(Promise.resolve({id:L,name:L,avatar:m5({id:L,name:L})})),M),{})},v=b3(e);return Object.freeze({userId:v,fetchUsers:h})},fI=e=>mI(e),gI=(e,n)=>{e._editableRoot!==n&&(e._editableRoot=n,ng(e)||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),M5(e,n))},hI=e=>e._editableRoot,pI=(e,n)=>({sections:tt(e),options:tt(n)}),f4=wn().deviceType,f5=f4.isPhone(),bI=f4.isTablet(),Py=e=>{if(pn(e))return[];{const n=je(e)?e:e.split(/[ ,]/),o=ae(n,dr);return Ce(o,Qs)}},LK=(e,n)=>{const o=Ue(n,(r,a)=>De(e,a));return pI(o.t,o.f)},HK=(e,n,o={})=>{const r=e.sections(),a=dn(r,n).getOr({});return Ct.extend({},o,a)},g4=(e,n)=>Jt(e.sections(),n),vI=(e,n)=>g4(e,n)?e.sections()[n]:{},yI=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:dn(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),CI=(e,n)=>{const o=n.external_plugins??{};return e&&e.external_plugins?Ct.extend({},e.external_plugins,o):o},g5=(e,n)=>[...Py(e),...Py(n)],h5=(e,n,o,r)=>e&&g4(n,"mobile")?r:o,h4=(e,n,o,r)=>{const a=Py(o.forced_plugins),u=Py(r.plugins),f=vI(n,"mobile"),h=f.plugins?Py(f.plugins):u,v=h5(e,n,u,h),w=g5(a,v);return Ct.extend(r,{forced_plugins:a,plugins:w})},wI=(e,n)=>e&&g4(n,"mobile"),SI=(e,n,o,r,a)=>{const u=e?{mobile:yI(a.mobile??{},n)}:{},f=LK(["mobile"],fe(u,a)),h=Ct.extend(o,r,f.options(),wI(e,f)?HK(f,"mobile"):{},{external_plugins:CI(r,f.options())});return h4(e,f,r,h)},xI=(e,n)=>{const o=Qe(n);return SI(f5||bI,f5,o,e,o)},p5=(e,n)=>S6(e,n),EI=e=>{const n=(r,a)=>{e.formatter.toggle(r,a),e.nodeChanged()},o=r=>()=>{te("left,center,right,justify".split(","),a=>{r!==a&&e.formatter.remove("align"+a)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},TI=e=>{const n=o=>()=>{const r=e.selection,a=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return ve(a,u=>xe(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},zK=e=>{EI(e),TI(e)},AI=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let a=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(wo.os.isMacOS()||wo.os.isiOS())&&(a=a.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:a,type:"error"})}}})},VK=(e,n,o,r)=>{const a=ee.fromDom(e.getRoot());return BC(a,Le.fromRangeStart(n),r)?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),Kv(a,Le.fromRangeEnd(n),r)?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},UK=e=>{if(typeof e!="string"){const n=Ct.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},WK=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?VK(r,o.getRng(),n,e.schema):n},qw=(e,n)=>{if(e.selection.isEditable()){const{content:o,details:r}=UK(n);lT(e,{...r,content:WK(e,o),format:"html",set:!1,selection:!0}).each(a=>{const u=C6(e,a.content,r);uT(e,u,a),e.addVisual()})}},ZK=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{qw(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{qw(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{qw(e,r)},mceInsertContent:(n,o,r)=>{qw(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(Ax(e))}})},kI={"font-size":"size","font-family":"face"},p4=sc("font"),jK=(e,n,o)=>{const r=u=>Yr(u,e).orThunk(()=>p4(u)?dn(kI,e).bind(f=>ji(u,f)):F.none()),a=u=>Io(ee.fromDom(n),u);return Wr(ee.fromDom(o),u=>r(u),a)},DI=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),GK=(e,n)=>F.from(Bs.DOM.getStyle(n,e,!0)),b5=e=>(n,o)=>F.from(o).map(ee.fromDom).filter(Rr).bind(r=>jK(e,n,r.dom).or(GK(e,r.dom))).getOr(""),v5=b5("font-size"),qK=k(DI,b5("font-family")),KK=e=>ca(e.getBody()).bind(n=>{const o=n.container();return F.from(pt(o)?o.parentNode:o)}),OI=e=>F.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?F.none():F.from(e.selection.getStart(!0))}),YK=(e,n)=>OI(e).orThunk(He(KK,e)).map(ee.fromDom).filter(Rr).bind(n),y5=(e,n)=>YK(e,ho(F.some,n)),_I=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=f3(e),a=ah(e);return a.length>0?a[o-1]||n:r[o-1]||n}else return n}else return n},XK=e=>{const n=e.split(/\s*,\s*/);return ae(n,o=>o.indexOf(" ")!==-1&&!(Ln(o,'"')||Ln(o,"'"))?`'${o}'`:o).join(",")},JK=(e,n)=>{const o=_I(e,n);e.formatter.toggle("fontname",{value:XK(o)}),e.nodeChanged()},RI=e=>y5(e,n=>qK(e.getBody(),n.dom)).getOr(""),BI=(e,n)=>{e.formatter.toggle("fontsize",{value:_I(e,n)}),e.nodeChanged()},QK=e=>y5(e,n=>v5(e.getBody(),n.dom)).getOr(""),eY=e=>y5(e,n=>{const o=ee.fromDom(e.getBody()),r=Wr(n,u=>Yr(u,"line-height"),He(Io,o)),a=()=>{const u=parseFloat($r(n,"line-height")),f=parseFloat($r(n,"font-size"));return String(u/f)};return r.getOrThunk(a)}).getOr(""),tY=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},nY=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,a)=>{n(o,{value:a})},BackColor:(o,r,a)=>{n("hilitecolor",{value:a})},FontName:(o,r,a)=>{JK(e,a)},FontSize:(o,r,a)=>{BI(e,a)},LineHeight:(o,r,a)=>{tY(e,a)},Lang:(o,r,a)=>{n(o,{value:a.code,customValue:a.customCode??null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,a)=>{n(re(a)?a:"p")},mceToggleFormat:(o,r,a)=>{n(a)}})},Mm=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>RI(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>QK(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>eY(e))},t=e=>{nY(e),Mm(e)},s=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},c=e=>{e.editorCommands.addCommands({Indent:()=>{R8(e)},Outdent:()=>{gA(e)}}),e.editorCommands.addCommands({Outdent:()=>D8(e),Indent:()=>XW(e)},"state")},i=e=>{const n=(o,r,a)=>{if(e.mode.isReadOnly())return;const u=re(a)?{href:a}:a,f=e.dom.getParent(e.selection.getNode(),"a");En(u)&&re(u.href)&&(u.href=u.href.replace(/ /g,"%20").replace(/&amp;/g,"&"),(!f||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,f))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})},d=(e,n,o,r)=>{const a=e.dom,u=h=>a.isBlock(h)&&h.parentElement===o,f=u(n)?n:a.getParent(r,u,o);return F.from(f).map(ee.fromDom)},g=(e,n)=>{if(e.mode.isReadOnly())return;const o=e.dom,r=e.selection.getRng(),a=n?e.selection.getStart():e.selection.getEnd(),u=n?r.startContainer:r.endContainer,f=Dy(o,u);if(!f||!f.isContentEditable)return;const h=n?ea:Wi,v=Sa(e);d(e,a,f,u).each(w=>{const D=b$(e,u,w.dom,f,!1,v);h(w,ee.fromDom(D)),e.selection.setCursorLocation(D,0),e.dispatch("NewBlock",{newBlock:D}),Pw(e,"insertParagraph")})},p=e=>g(e,!0),C=e=>g(e,!1),S=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{p(e)},InsertNewBlockAfter:()=>{C(e)}})},E=e=>{e.editorCommands.addCommands({insertParagraph:()=>{Oy(hR,e)},mceInsertNewLine:(n,o,r)=>{jA(e,r)},InsertLineBreak:(n,o,r)=>{Oy(A$,e)}})},O=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let a=0;e.dom.getParent(e.selection.getNode(),u=>gn(u)&&a++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),ai);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},B=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const a=r??e.selection.getNode();if(a!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(a,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{XI(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},I=e=>{zK(e),AI(e),s(e),O(e),ZK(e),i(e),c(e),S(e),E(e),t(e),B(e)},U=["toggleview"],j=e=>De(U,e.toLowerCase());class Q{constructor(n){Xe(this,"editor");Xe(this,"commands",{state:{},exec:{},value:{}});this.editor=n}execCommand(n,o=!1,r,a){const u=this.editor,f=n.toLowerCase(),h=a==null?void 0:a.skip_focus;if(u.removed||(f!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(f)&&!h?u.focus():VI(u)),u.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const w=this.commands.exec[f];return le(w)?(w(f,o,r,a),u.dispatch("ExecCommand",{command:n,ui:o,value:r,args:a}),!0):!1}queryCommandState(n){if(!j(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return le(r)?r(o):!1}queryCommandValue(n){if(!j(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return le(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;yo(n,(a,u)=>{te(u.toLowerCase().split(","),f=>{r[o][f]=a})})}addCommand(n,o,r){const a=n.toLowerCase();this.commands.exec[a]=(u,f,h,v)=>o.call(r??this.editor,f,h,v)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r??this.editor)}}const ie=Ct.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class X{constructor(n){Xe(this,"settings");Xe(this,"scope");Xe(this,"toggleEvent");Xe(this,"bindings",{});this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Ae}static isNative(n){return!!ie[n.toLowerCase()]}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),a=O1(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(a);const u=this.bindings[r];if(u)for(let f=0,h=u.length;f<h;f++){const v=u[f];if(!v.removed){if(v.once&&this.off(r,v.func),a.isImmediatePropagationStopped())return a;if(v.func.call(this.scope,a)===!1)return a.preventDefault(),a}}return a}on(n,o,r,a){if(o===!1&&(o=Ae),o){const u={func:o,removed:!1};a&&Ct.extend(u,a);const f=n.toLowerCase().split(" ");let h=f.length;for(;h--;){const v=f[h];let w=this.bindings[v];w||(w=[],this.toggleEvent(v,!0)),r?w=[u,...w]:w=[...w,u],this.bindings[v]=w}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let a=r.length;for(;a--;){const u=r[a];let f=this.bindings[u];if(!u)return yo(this.bindings,(h,v)=>{this.toggleEvent(v,!1),delete this.bindings[v]}),this;if(f){if(!o)f.length=0;else{const h=Ee(f,v=>v.func===o);f=h.fail,this.bindings[u]=f,te(h.pass,v=>{v.removed=!0})}f.length||(this.toggleEvent(n,!1),delete this.bindings[u])}}}else yo(this.bindings,(r,a)=>{this.toggleEvent(a,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const he=e=>(e._eventDispatcher||(e._eventDispatcher=new X({scope:e,toggleEvent:(n,o)=>{X.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),we={fire(e,n,o){return AF("fire"),this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return O1(e.toLowerCase(),n??{},r);const a=he(r).dispatch(e,n);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!a.isPropagationStopped();)u.dispatch(e,a,!1),u=u.parent?u.parent():void 0}return a},on(e,n,o){return he(this).on(e,n,o)},off(e,n){return he(this).off(e,n)},once(e,n){return he(this).once(e,n)},hasEventListeners(e){return he(this).has(e)}},Me=Bs.DOM;let Fe;const Mt=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const o=bv(e);return o?(e.eventRoot||(e.eventRoot=Me.select(o)[0]),e.eventRoot):e.getBody()},at=e=>!e.hidden&&!ng(e),vt=(e,n,o)=>{at(e)?e.dispatch(n,o):ng(e)&&FY(e,o)},gt=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=Mt(e,n);if(bv(e)){if(Fe||(Fe={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||Fe&&(yo(Fe,(a,u)=>{e.dom.unbind(Mt(e,u))}),Fe=null)})),Fe[n])return;const r=a=>{const u=a.target,f=e.editorManager.get();let h=f.length;for(;h--;){const v=f[h].getBody();(v===u||Me.isChildOf(u,v))&&vt(f[h],n,a)}};Fe[n]=r,Me.bind(o,n,r)}else{const r=a=>{vt(e,n,a)};Me.bind(o,n,r),e.delegates[n]=r}},_n={...we,bindPendingEventDelegates(){const e=this;Ct.each(e._pendingNativeEvents,n=>{gt(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?gt(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(Mt(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(yo(e.delegates,(r,a)=>{e.dom.unbind(Mt(e,a),a,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},hn=e=>re(e)?{value:e.split(/[ ,]/),valid:!0}:qe(e,re)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},$o=e=>{const n=(()=>{switch(e){case"array":return je;case"boolean":return St;case"function":return le;case"number":return vs;case"object":return En;case"string":return re;case"string[]":return hn;case"object[]":return o=>qe(o,En);case"regexp":return o=>nn(o,RegExp);default:return Ve}})();return o=>ot(o,n,`The value must be a ${e}.`)},In=e=>re(e.processor),ao=(e,n)=>{const o=vi(n.message)?"":`. ${n.message}`;return e+o},mn=e=>e.valid,ot=(e,n,o="")=>{const r=n(e);return St(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},Rt=(e,n,o)=>{if(!ro(n)){const r=ot(n,o);if(mn(r))return r.value;console.error(ao(`Invalid default value passed for the "${e}" option`,r))}},Hn=(e,n,o=n)=>{const r={},a={},u=(L,K,W)=>{const J=ot(K,W);return mn(J)?(a[L]=J.value,!0):(console.warn(ao(`Invalid value passed for the ${L} option`,J)),!1)},f=(L,K)=>{const W=In(K)?$o(K.processor):K.processor,J=Rt(L,K.default,W);r[L]={...K,default:J,processor:W},dn(a,L).orThunk(()=>dn(n,L)).each(be=>u(L,be,W))},h=L=>Jt(r,L);return{register:f,isRegistered:h,get:L=>dn(a,L).orThunk(()=>dn(r,L).map(K=>K.default)).getOrUndefined(),set:(L,K)=>{if(h(L)){const W=r[L];return W.immutable?(console.error(`"${L}" is an immutable option and cannot be updated`),!1):u(L,K,W.processor)}else return console.warn(`"${L}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:L=>{const K=h(L);return K&&delete a[L],K},isSet:L=>Jt(a,L),debug:()=>{try{console.log(JSON.parse(JSON.stringify(o,(L,K)=>St(K)||vs(K)||re(K)||G(K)||je(K)||Vo(K)?K:Object.prototype.toString.call(K))))}catch(L){console.error(L)}}}},uo=(e,n)=>{e.dom.contentEditable="true"},xn=(e,n)=>{const o=ee.fromDom(e.getBody());n?(e.readonly=!0,e.hasEditableRoot()&&uo(o),jT(e)):(e.readonly=!1,eO(e))},Yn=e=>e.readonly,Vs=e=>{const n=e.undoManager.add();xe(n)&&(e.undoManager.undo(),e.undoManager.reset())},ps=e=>ve(e,n=>n.type==="characterData"||n.type==="childList"),Ni=e=>{const n=r=>{Yn(e)&&ps(r)&&Vs(e)},o=new MutationObserver(n);e.on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",r=>{Yn(e)&&r.preventDefault()}),e.on("BeforeExecCommand",r=>{(r.command==="Undo"||r.command==="Redo")&&Yn(e)&&r.preventDefault()}),e.on("compositionstart",()=>{Yn(e)&&o.observe(e.getBody(),{characterData:!0,childList:!0,subtree:!0})}),e.on("compositionend",()=>{if(Yn(e)){const r=o.takeRecords();n(r)}o.disconnect()})},kr=["design","readonly"],il=(e,n,o,r)=>{const a=o[n.get()],u=o[r];try{u.activate()}catch(f){console.error(`problem while activating editor mode ${r}:`,f);return}a.deactivate(),a.editorReadOnly!==u.editorReadOnly&&xn(e,u.editorReadOnly),n.set(r),Z4(e,r)},Ea=(e,n,o,r)=>{if(!(r===o.get()||e.initialized&&ng(e))){if(!Jt(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?il(e,o,n,r):e.on("init",()=>il(e,o,n,r))}},Xu=(e,n,o)=>{if(De(kr,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},Fl=e=>{const n=Yt("design"),o=Yt({design:{activate:rt,deactivate:rt,editorReadOnly:!1},readonly:{activate:rt,deactivate:rt,editorReadOnly:!0}});return Ni(e),oO(e),{isReadOnly:()=>Yn(e),set:r=>Ea(e,o.get(),n,r),get:()=>n.get(),register:(r,a)=>{o.set(Xu(o.get(),r,a))}}},lu=Ct.each,lg=Ct.explode,ug={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},ub=Ct.makeMap("alt,ctrl,shift,meta,access"),Nh=e=>e in ub,Kw=e=>{const n={},o=wo.os.isMacOS()||wo.os.isiOS();lu(lg(e.toLowerCase(),"+"),u=>{Nh(u)?n[u]=!0:/^[0-9]{2,}$/.test(u)?n.keyCode=parseInt(u,10):(n.charCode=u.charCodeAt(0),n.keyCode=ug[u]||u.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let a;for(a in ub)n[a]?r.push(a):n[a]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class b4{constructor(n){Xe(this,"editor");Xe(this,"shortcuts",{});Xe(this,"pendingPatterns",[]);this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(lu(o.shortcuts,a=>{o.matchShortcut(r,a)&&(o.pendingPatterns=a.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(a))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,a){const u=this,f=u.normalizeCommandFunc(r);return lu(lg(Ct.trim(n)),h=>{const v=u.createShortcut(h,o,f,a);u.shortcuts[v.id]=v}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:Ct.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,a){const u=Ct.map(lg(n,">"),Kw);return u[u.length-1]=Ct.extend(u[u.length-1],{func:r,scope:a||this.editor}),Ct.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const $y=()=>{const e=fj();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,addContext:e.addContext,getAll:e.getAll}},dg=Bs.DOM,Yw=Ct.extend,MI=Ct.each;class Xw{constructor(n,o,r){Xe(this,"baseUri");Xe(this,"id");Xe(this,"editorUid");Xe(this,"plugins",{});Xe(this,"documentBaseURI");Xe(this,"baseURI");Xe(this,"contentCSS",[]);Xe(this,"contentStyles",[]);Xe(this,"ui");Xe(this,"mode");Xe(this,"options");Xe(this,"editorUpload");Xe(this,"userLookup");Xe(this,"shortcuts");Xe(this,"loadedCSS",{});Xe(this,"editorCommands");Xe(this,"suffix");Xe(this,"editorManager");Xe(this,"hidden");Xe(this,"inline");Xe(this,"hasVisual");Xe(this,"isNotDirty",!1);Xe(this,"annotator");Xe(this,"bodyElement");Xe(this,"bookmark");Xe(this,"composing",!1);Xe(this,"container");Xe(this,"contentAreaContainer");Xe(this,"contentDocument");Xe(this,"contentWindow");Xe(this,"delegates");Xe(this,"destroyed",!1);Xe(this,"dom");Xe(this,"editorContainer");Xe(this,"eventRoot");Xe(this,"formatter");Xe(this,"formElement");Xe(this,"formEventDelegate");Xe(this,"hasHiddenInput",!1);Xe(this,"iframeElement",null);Xe(this,"iframeHTML");Xe(this,"initialized",!1);Xe(this,"notificationManager");Xe(this,"orgDisplay");Xe(this,"orgVisibility");Xe(this,"parser");Xe(this,"quirks");Xe(this,"readonly",!1);Xe(this,"removed",!1);Xe(this,"schema");Xe(this,"selection");Xe(this,"serializer");Xe(this,"startContent","");Xe(this,"targetElm");Xe(this,"theme");Xe(this,"model");Xe(this,"undoManager");Xe(this,"windowManager");Xe(this,"licenseKeyManager");Xe(this,"_beforeUnload");Xe(this,"_eventDispatcher");Xe(this,"_nodeChangeDispatcher");Xe(this,"_pendingNativeEvents",[]);Xe(this,"_selectionOverrides");Xe(this,"_skinLoaded",!1);Xe(this,"_editableRoot",!0);Xe(this,"bindPendingEventDelegates");Xe(this,"toggleNativeEvent");Xe(this,"unbindAllNativeEvents");Xe(this,"fire");Xe(this,"dispatch");Xe(this,"on");Xe(this,"off");Xe(this,"once");Xe(this,"hasEventListeners");this.editorManager=r,Yw(this,_n);const a=this;this.id=n,this.editorUid=cr(),this.hidden=!1;const u=xI(r.defaultOptions,o);this.options=Hn(a,u,o),j1(a),this.userLookup=fI(this);const f=this.options.get;f("deprecation_warnings")&&jH(o,u);const h=f("suffix");h&&(r.suffix=h),this.suffix=r.suffix;const v=f("base_url");v&&r._setBaseUrl(v),this.baseUri=r.baseURI;const w=eC(a);w&&(fc.ScriptLoader._setReferrerPolicy(w),Bs.DOM.styleSheetLoader._setReferrerPolicy(w)),fc.ScriptLoader._setCrossOrigin(L=>K1(a)(L,"script")),Bs.DOM.styleSheetLoader._setCrossOrigin(L=>K1(a)(L,"stylesheet"));const D=t0(a);xe(D)&&Bs.DOM.styleSheetLoader._setContentCssCors(D),Ra.languageLoad=f("language_load"),Ra.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new wm(G1(a),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=vv(a),this.hasVisual=of(a),this.shortcuts=new b4(this),this.editorCommands=new Q(this),I(this);const R=f("cache_suffix");R&&(wo.cacheSuffix=R.replace(/^[\?\&]+/,"")),this.ui={registry:$y(),styleSheetLoader:void 0,show:rt,hide:rt,setEnabled:rt,isEnabled:Ve},this.mode=Fl(a),Object.defineProperty(this,"editorUid",{writable:!1,configurable:!1,enumerable:!0}),r.dispatch("SetupEditor",{editor:this});const M=wx(a);le(M)&&M.call(a,a)}render(){d5(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return Uu(this)}translate(n){return Mu.translate(n)}getParam(n,o,r){const a=this.options;return a.isRegistered(n)||(xe(r)?a.register(n,{processor:r,default:o}):a.register(n,{processor:Ve,default:o})),!a.isSet(n)&&!ro(o)?o:a.get(n)}hasPlugin(n,o){return De(sh(this),n)?o?tg.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,a){this.shortcuts.add(n,o,r,a)}execCommand(n,o,r,a){return this.editorCommands.execCommand(n,o,r,a)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(dg.show(n.getContainer()),dg.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(dg.hide(n.getContainer()),dg.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(!o.removed&&r){const a={...n,load:!0},u=d2(r)?r.value:r.innerHTML;o.setContent(u,a),a.no_events||o.dispatch("LoadContent",{...a,element:r})}}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const a={...n,save:!0,element:r};let u=o.getContent(a);const f={...a,content:u};if(f.no_events||o.dispatch("SaveContent",f),f.format==="raw"&&o.dispatch("RawSaveContent",f),u=f.content,d2(r))r.value=u;else{(n.is_removing||!o.inline)&&(r.innerHTML=u);const h=dg.getParent(o.id,"form");h&&MI(h.elements,v=>v.name===o.id?(v.value=u,!1):!0)}return f.element=a.element=r=null,f.set_dirty!==!1&&o.setDirty(!1),u}setContent(n,o){zD(this,n,o)}getContent(n){return Hp(this,n)}insertContent(n,o){o&&(n=Yw({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?zD(this,this.startContent,{initial:!0,format:"raw"}):zD(this,n,{initial:!0}),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||dg.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=dg.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){const n=this.getDoc();return this.bodyElement??(n==null?void 0:n.body)??null}convertURL(n,o,r){const a=this,u=a.options.get,f=xx(a);if(le(f))return f.call(a,n,r,!0,o);if(!u("convert_urls")||r==="link"||En(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0)return n;const h=new wm(n);return h.protocol!=="http"&&h.protocol!=="https"&&h.protocol!==""?n:u("relative_urls")?a.documentBaseURI.toRelative(n):(n=a.documentBaseURI.toAbsolute(n,u("remove_script_host")),n)}addVisual(n){p5(this,n)}setEditableRoot(n){gI(this,n)}hasEditableRoot(){return hI(this)}remove(){B0(this)}destroy(n){B6(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Iy=Bs.DOM,Ly=Ct.each;let Hy=!1,Ph,Ia=[];const Jw=e=>{const n=e.type;Ly(ff.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},C5=e=>{if(e!==Hy){const n=Bs.DOM;e?(n.bind(window,"resize",Jw),n.bind(window,"scroll",Jw)):(n.unbind(window,"resize",Jw),n.unbind(window,"scroll",Jw)),Hy=e}},w5=e=>{const n=Ia;return Ia=Ce(Ia,o=>e!==o),ff.activeEditor===e&&(ff.activeEditor=Ia.length>0?Ia[0]:null),ff.focusedEditor===e&&(ff.focusedEditor=null),n.length!==Ia.length},S5=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(w5(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},FI=document.compatMode!=="CSS1Compat",ff={...we,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,pageUid:cr(),majorVersion:"8",minorVersion:"2.0",releaseDate:"2025-10-23",i18n:Mu,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=wm.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const a=window.tinymce||window.tinyMCEPreInit;if(a)n=a.base||a.baseURL,o=a.suffix;else{const u=document.getElementsByTagName("script");for(let f=0;f<u.length;f++){const h=u[f].src||"";if(h==="")continue;const v=h.substring(h.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(h)){v.indexOf(".min")!==-1&&(o=".min"),n=h.substring(0,h.lastIndexOf("/"));break}}if(!n&&document.currentScript){const f=document.currentScript.src;f.indexOf(".min")!==-1&&(o=".min"),n=f.substring(0,f.lastIndexOf("/"))}}e.baseURL=new wm(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new wm(e.baseURL),e.suffix=o,dY(e),te(["majorVersion","minorVersion","releaseDate","pageUid","_addLicenseKeyManager"],u=>Object.defineProperty(e,u,{writable:!1,configurable:!1,enumerable:!0}))},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&yo(r,(a,u)=>{Ra.PluginManager.urls[u]=a})},init(e){const n=this;let o;const r=Ct.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),a=(D,R)=>D.inline&&R.tagName.toLowerCase()in r,u=D=>{let R=D.id;return R||(R=dn(D,"name").filter(M=>!Iy.get(M)).getOrThunk(Iy.uniqueId),D.setAttribute("id",R)),R},f=D=>{const R=e[D];if(R)return R.apply(n,[])},h=D=>wo.browser.isIE()||wo.browser.isEdge()?(zT("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/8/support/#supportedwebbrowsers"),[]):FI?(zT("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):re(D.selector)?Iy.select(D.selector):xe(D.target)?[D.target]:[];let v=D=>{o=D};const w=()=>{let D=0;const R=[];let M;const L=(K,W,J)=>{const pe=new Xw(K,W,n);R.push(pe),pe.on("init",()=>{++D===M.length&&v(R)}),pe.targetElm=pe.targetElm||J,pe.render()};Iy.unbind(window,"ready",w),f("onpageload"),M=Hr(h(e)),Ct.each(M,K=>{S5(n.get(K.id))}),M=Ct.grep(M,K=>!n.get(K.id)),M.length===0?v([]):Ly(M,K=>{a(e,K)?zT("Could not initialize inline editor on invalid inline target element",K):L(u(K),e,K)})};return Iy.bind(window,"ready",w),new Promise(D=>{o?D(o):v=R=>{D(R)}})},get(e){return arguments.length===0?Ia.slice(0):re(e)?Xt(Ia,n=>n.id===e).getOr(null):vs(e)&&Ia[e]?Ia[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&Ia.push(e),C5(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),Ph||(Ph=r=>{const a=n.dispatch("BeforeUnload");if(a.returnValue)return r.preventDefault(),r.returnValue=a.returnValue,a.returnValue},window.addEventListener("beforeunload",Ph))),e},createEditor(e,n){return this.add(new Xw(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=Ia.length-1;r>=0;r--)n.remove(Ia[r]);return}if(re(e)){Ly(Iy.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,G(n.get(o.id))?null:(w5(o)&&n.dispatch("RemoveEditor",{editor:o}),Ia.length===0&&window.removeEventListener("beforeunload",Ph),o.remove(),C5(Ia.length>0),o)},execCommand(e,n,o){const r=this,a=En(o)?o.id??o.index:o;switch(e){case"mceAddEditor":{if(!r.get(a)){const u=o.options;new Xw(a,u,r).render()}return!0}case"mceRemoveEditor":{const u=r.get(a);return u&&u.remove(),!0}case"mceToggleEditor":{const u=r.get(a);return u?(u.isHidden()?u.show():u.hide(),!0):(r.execCommand("mceAddEditor",!1,o),!0)}}return r.activeEditor?r.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{Ly(Ia,e=>{e.save()})},addI18n:(e,n)=>{Mu.add(e,n)},translate:e=>Mu.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new wm(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new wm(this.baseURL)},_addLicenseKeyManager:e=>QD.add(e)};ff.setup();const $h=(()=>{const e=fs(),n=u=>({items:u,types:on(u),getType:f=>dn(u,f).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),a=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:a}})(),db=Math.min,e1=Math.max,zy=Math.round,NI=(e,n,o)=>{let r=n.x,a=n.y;const u=e.w,f=e.h,h=n.w,v=n.h,w=(o||"").split("");return w[0]==="b"&&(a+=v),w[1]==="r"&&(r+=h),w[0]==="c"&&(a+=zy(v/2)),w[1]==="c"&&(r+=zy(h/2)),w[3]==="b"&&(a-=f),w[4]==="r"&&(r-=u),w[3]==="c"&&(a-=zy(f/2)),w[4]==="c"&&(r-=zy(u/2)),Vy(r,a,u,f)},v4=(e,n,o,r)=>{for(let a=0;a<r.length;a++){const u=NI(e,n,r[a]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[a]}return null},y4=(e,n,o)=>Vy(e.x-n,e.y-o,e.w+n*2,e.h+o*2),oY=(e,n)=>{const o=e1(e.x,n.x),r=e1(e.y,n.y),a=db(e.x+e.w,n.x+n.w),u=db(e.y+e.h,n.y+n.h);return a-o<0||u-r<0?null:Vy(o,r,a-o,u-r)},Qw=(e,n,o)=>{let r=e.x,a=e.y,u=e.x+e.w,f=e.y+e.h;const h=n.x+n.w,v=n.y+n.h,w=e1(0,n.x-r),D=e1(0,n.y-a),R=e1(0,u-h),M=e1(0,f-v);return r+=w,a+=D,o&&(u+=w,f+=D,r-=R,a-=M),u-=R,f-=M,Vy(r,a,u-r,f-a)},Vy=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),Pi={inflate:y4,relativePosition:NI,findBestRelativePosition:v4,intersect:oY,clamp:Qw,create:Vy,fromClientRect:e=>Vy(e.left,e.top,e.width,e.height)},Uy=(e,n,o=1e3)=>{let r=!1,a=null;const u=w=>(...D)=>{r||(r=!0,a!==null&&(window.clearTimeout(a),a=null),w.apply(null,D))},f=u(e),h=u(n);return{start:(...w)=>{!r&&a===null&&(a=window.setTimeout(()=>h.apply(null,w),o))},resolve:f,reject:h}},PI=(()=>{const e={},n={},o={};return{load:(v,w)=>{const D=`Script at URL "${w}" failed to load`,R=`Script at URL "${w}" did not call \`tinymce.Resource.add('${v}', data)\` within 1 second`;if(e[v]!==void 0)return e[v];{const M=new Promise((L,K)=>{const W=Uy(L,K);n[v]=W.resolve,fc.ScriptLoader.loadScript(w).then(()=>W.start(R),()=>W.reject(D))});return e[v]=M,M}},add:(v,w)=>{n[v]!==void 0&&(n[v](w),delete n[v]),e[v]=Promise.resolve(w),o[v]=w},has:v=>v in o,get:v=>o[v],unload:v=>{delete e[v],delete o[v]}}})(),E5=()=>(()=>{let e={},n=[];const o={getItem:r=>{const a=e[r];return a||null},setItem:(r,a)=>{n.push(r),e[r]=String(a)},key:r=>n[r],removeItem:r=>{n=n.filter(a=>a===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let Wy;try{const e="__storage_test__";Wy=window.localStorage,Wy.setItem(e,e),Wy.removeItem(e)}catch{Wy=E5()}var $I=Wy;const sY={geom:{Rect:Pi},util:{Delay:Vu,Tools:Ct,VK:jt,URI:wm,EventDispatcher:X,Observable:we,I18n:Mu,LocalStorage:$I,ImageUploader:J6},dom:{EventUtils:Bu,TreeWalker:tr,TextSeeker:vd,DOMUtils:Bs,ScriptLoader:fc,RangeUtils:Yf,Serializer:$T,StyleSheetLoader:Ai,ControlSelection:X5,BookmarkManager:y0,Selection:PD,Event:Bu.Event},html:{Styles:Wg,Entities:Pg,Node:hi,Schema:Ru,DomParser:O0,Writer:SL,Serializer:x0},Env:wo,AddOnManager:Ra,Annotator:V3,Formatter:oN,UndoManager:iw,EditorCommands:Q,WindowManager:Tm,NotificationManager:ZD,EditorObservable:_n,Shortcuts:b4,Editor:Xw,FocusManager:j5,EditorManager:ff,DOM:Bs.DOM,ScriptLoader:fc.ScriptLoader,PluginManager:tg,ThemeManager:M0,ModelManager:ly,IconManager:IT,Resource:PI,FakeClipboard:$h,trim:Ct.trim,isArray:Ct.isArray,is:Ct.is,toArray:Ct.toArray,makeMap:Ct.makeMap,each:Ct.each,map:Ct.map,grep:Ct.grep,inArray:Ct.inArray,extend:Ct.extend,walk:Ct.walk,resolve:Ct.resolve,explode:Ct.explode,_addCacheSuffix:Ct._addCacheSuffix},gf=Ct.extend(ff,sY),Zy=e=>{try{Ko.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(gf),Zy(gf)})()})(mX);var bX=mX.exports;const vX=pX(bX);(function(){const Ko=Object.getPrototypeOf,Yo=(t,s,c)=>{var i;return c(t,s.prototype)?!0:((i=t.constructor)==null?void 0:i.name)===s.name},bs=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&Yo(t,String,(c,i)=>i.isPrototypeOf(c))?"string":s},jo=t=>s=>bs(s)===t,as=t=>s=>typeof s===t,ds=t=>s=>t===s,ls=(t,s)=>vn(t)&&Yo(t,s,(c,i)=>Ko(c)===i),Nt=jo("string"),vn=jo("object"),zt=t=>ls(t,Object),ts=jo("array"),Go=ds(null),cn=as("boolean"),Fn=ds(void 0),Eo=t=>t==null,qn=t=>!Eo(t),dt=as("function"),Fo=as("number"),nn=(t,s)=>{if(ts(t)){for(let c=0,i=t.length;c<i;++c)if(!s(t[c]))return!1;return!0}return!1},re=()=>{},En=t=>()=>t(),Vo=(t,s)=>(...c)=>t(s.apply(null,c)),je=(t,s)=>c=>t(s(c)),G=t=>()=>t,St=t=>t,ro=(t,s)=>t===s;function pn(t,...s){return(...c)=>{const i=s.concat(c);return t.apply(null,i)}}const xe=t=>s=>!t(s),le=t=>()=>{throw new Error(t)},vs=t=>t(),qe=G(!1),rt=G(!0),Mm=class Mm{constructor(s,c){Xe(this,"tag");Xe(this,"value");this.tag=s,this.value=c}static some(s){return new Mm(!0,s)}static none(){return Mm.singletonNone}fold(s,c){return this.tag?c(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?Mm.some(s(this.value)):Mm.none()}bind(s){return this.tag?s(this.value):Mm.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:Mm.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return qn(s)?Mm.some(s):Mm.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};Xe(Mm,"singletonNone",new Mm(!1));let k=Mm;const ho=Array.prototype.slice,tt=Array.prototype.indexOf,No=Array.prototype.push,ln=(t,s)=>tt.call(t,s),He=(t,s)=>{const c=ln(t,s);return c===-1?k.none():k.some(c)},Je=(t,s)=>ln(t,s)>-1,Bt=(t,s)=>{for(let c=0,i=t.length;c<i;c++){const d=t[c];if(s(d,c))return!0}return!1},Be=(t,s)=>{const c=[];for(let i=0;i<t;i++)c.push(s(i));return c},xt=(t,s)=>{const c=[];for(let i=0;i<t.length;i+=s){const d=ho.call(t,i,i+s);c.push(d)}return c},Ae=(t,s)=>{const c=t.length,i=new Array(c);for(let d=0;d<c;d++){const g=t[d];i[d]=s(g,d)}return i},Ve=(t,s)=>{for(let c=0,i=t.length;c<i;c++){const d=t[c];s(d,c)}},F=(t,s)=>{for(let c=t.length-1;c>=0;c--){const i=t[c];s(i,c)}},Fs=(t,s)=>{const c=[],i=[];for(let d=0,g=t.length;d<g;d++){const p=t[d];(s(p,d)?c:i).push(p)}return{pass:c,fail:i}},jn=(t,s)=>{const c=[];for(let i=0,d=t.length;i<d;i++){const g=t[i];s(g,i)&&c.push(g)}return c},Xn=(t,s,c)=>(F(t,(i,d)=>{c=s(c,i,d)}),c),co=(t,s,c)=>(Ve(t,(i,d)=>{c=s(c,i,d)}),c),ms=(t,s,c)=>{for(let i=0,d=t.length;i<d;i++){const g=t[i];if(s(g,i))return k.some(g);if(c(g,i))break}return k.none()},De=(t,s)=>ms(t,s,qe),ve=(t,s)=>{for(let c=0,i=t.length;c<i;c++){const d=t[c];if(s(d,c))return k.some(c)}return k.none()},ae=t=>{const s=[];for(let c=0,i=t.length;c<i;++c){if(!ts(t[c]))throw new Error("Arr.flatten item "+c+" was not an array, input: "+t);No.apply(s,t[c])}return s},te=(t,s)=>ae(Ae(t,s)),Dt=(t,s)=>{for(let c=0,i=t.length;c<i;++c){const d=t[c];if(s(d,c)!==!0)return!1}return!0},Ee=t=>{const s=ho.call(t,0);return s.reverse(),s},Ce=(t,s)=>jn(t,c=>!Je(s,c)),_t=(t,s)=>{const c={};for(let i=0,d=t.length;i<d;i++){const g=t[i];c[String(g)]=s(g,i)}return c},bn=t=>[t],$e=(t,s)=>{const c=ho.call(t,0);return c.sort(s),c},et=(t,s)=>s>=0&&s<t.length?k.some(t[s]):k.none(),Xt=t=>et(t,0),oo=t=>et(t,t.length-1),vo=dt(Array.from)?Array.from:t=>ho.call(t),Lo=(t,s)=>{for(let c=0;c<t.length;c++){const i=s(t[c],c);if(i.isSome())return i}return k.none()},zn=Object.keys,ns=Object.hasOwnProperty,ko=(t,s)=>{const c=zn(t);for(let i=0,d=c.length;i<d;i++){const g=c[i],p=t[g];s(p,g)}},mo=(t,s)=>Ns(t,(c,i)=>({k:i,v:s(c,i)})),Ns=(t,s)=>{const c={};return ko(t,(i,d)=>{const g=s(i,d);c[g.k]=g.v}),c},Ls=t=>(s,c)=>{t[c]=s},Uo=(t,s,c,i)=>{ko(t,(d,g)=>{(s(d,g)?c:i)(d,g)})},Wo=(t,s)=>{const c={},i={};return Uo(t,s,Ls(c),Ls(i)),{t:c,f:i}},Js=(t,s)=>{const c={};return Uo(t,s,Ls(c),re),c},Xo=(t,s)=>{const c=[];return ko(t,(i,d)=>{c.push(s(i,d))}),c},Os=(t,s)=>{const c=zn(t);for(let i=0,d=c.length;i<d;i++){const g=c[i],p=t[g];if(s(p,g,t))return k.some(p)}return k.none()},Hr=t=>Xo(t,St),on=(t,s)=>So(t,s)?k.from(t[s]):k.none(),So=(t,s)=>ns.call(t,s),yo=(t,s)=>So(t,s)&&t[s]!==void 0&&t[s]!==null,nc={generate:t=>{if(!ts(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],c={};return Ve(t,(i,d)=>{const g=zn(i);if(g.length!==1)throw new Error("one and only one name per case");const p=g[0],C=i[p];if(c[p]!==void 0)throw new Error("duplicate key detected:"+p);if(p==="cata")throw new Error("cannot have a case named cata (sorry)");if(!ts(C))throw new Error("case arguments must be an array");s.push(p),c[p]=(...S)=>{const E=S.length;if(E!==C.length)throw new Error("Wrong number of arguments to case "+p+". Expected "+C.length+" ("+C+"), got "+E);return{fold:(...B)=>{if(B.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+B.length);return B[d].apply(null,S)},match:B=>{const I=zn(B);if(s.length!==I.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+I.join(","));if(!Dt(s,j=>Je(I,j)))throw new Error("Not all branches were specified when using match. Specified: "+I.join(", ")+`
Required: `+s.join(", "));return B[p].apply(null,S)},log:B=>{console.log(B,{constructors:s,constructor:p,params:S})}}}}),c}},qt=t=>{let s=t;return{get:()=>s,set:d=>{s=d}}},Dr=t=>{let s=k.none(),c=[];const i=E=>Dr(O=>{d(B=>{O(E(B))})}),d=E=>{p()?S(E):c.push(E)},g=E=>{p()||(s=k.some(E),C(c),c=[])},p=()=>s.isSome(),C=E=>{Ve(E,S)},S=E=>{s.each(O=>{setTimeout(()=>{E(O)},0)})};return t(g),{get:d,map:i,isReady:p}},Ot={nu:Dr,pure:t=>Dr(s=>{s(t)})},an=t=>{setTimeout(()=>{throw t},0)},tn=t=>{const s=S=>{t().then(S,an)};return{map:S=>tn(()=>t().then(S)),bind:S=>tn(()=>t().then(E=>S(E).toPromise())),anonBind:S=>tn(()=>t().then(()=>S.toPromise())),toLazy:()=>Ot.nu(s),toCached:()=>{let S=null;return tn(()=>(S===null&&(S=t()),S))},toPromise:t,get:s}},lo={nu:t=>tn(()=>new Promise(t)),pure:t=>tn(()=>Promise.resolve(t))},zr=t=>{const s=g=>g(t),c=G(t),i=()=>d,d={tag:!0,inner:t,fold:(g,p)=>p(t),isValue:rt,isError:qe,map:g=>Yt.value(g(t)),mapError:i,bind:s,exists:s,forall:s,getOr:c,or:i,getOrThunk:c,orThunk:i,getOrDie:c,each:g=>{g(t)},toOptional:()=>k.some(t)};return d},Vr=t=>{const s=()=>c,c={tag:!1,inner:t,fold:(i,d)=>i(t),isValue:qe,isError:rt,map:s,mapError:i=>Yt.error(i(t)),bind:s,exists:qe,forall:rt,getOr:St,or:St,getOrThunk:vs,orThunk:vs,getOrDie:le(String(t)),each:re,toOptional:k.none};return c},Yt={value:zr,error:Vr,fromOption:(t,s)=>t.fold(()=>Vr(s),zr)},Or=t=>({...t,toCached:()=>Or(t.toCached()),bindFuture:S=>Or(t.bind(E=>E.fold(O=>lo.pure(Yt.error(O)),O=>S(O)))),bindResult:S=>Or(t.map(E=>E.bind(S))),mapResult:S=>Or(t.map(E=>E.map(S))),mapError:S=>Or(t.map(E=>E.mapError(S))),foldResult:(S,E)=>t.map(O=>O.fold(S,E)),withTimeout:(S,E)=>Or(lo.nu(O=>{let B=!1;const I=setTimeout(()=>{B=!0,O(Yt.error(E()))},S);t.get(U=>{B||(clearTimeout(I),O(U))})}))}),wr=t=>Or(lo.nu(t)),pi=t=>Or(lo.pure(Yt.value(t))),Tt={nu:wr,wrap:Or,pure:pi,value:pi,error:t=>Or(lo.pure(Yt.error(t))),fromResult:t=>Or(lo.pure(t)),fromFuture:t=>Or(t.map(Yt.value)),fromPromise:t=>wr(s=>{t.then(c=>{s(Yt.value(c))},c=>{s(Yt.error(c))})})},Wn=typeof window<"u"?window:Function("return this;")(),kn=(t,s,c,i)=>{const d=t+s;return d>i?c:d<c?i:d},Jn=(t,s,c)=>Math.min(Math.max(t,s),c),cr=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let Kn=0;const nt=t=>{const c=new Date().getTime(),i=Math.floor(cr()*1e9);return Kn++,t+"_"+i+Kn+String(c)},ue=(t,s)=>s,fe=(t,s)=>zt(t)&&zt(s)?ht(t,s):s,Qe=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const c={};for(let i=0;i<s.length;i++){const d=s[i];for(const g in d)So(d,g)&&(c[g]=t(c[g],d[g]))}return c},ht=Qe(fe),It=Qe(ue),An=(t,s,c=ro)=>t.exists(i=>c(i,s)),Qt=(t,s,c=ro)=>To(t,s,c).getOr(t.isNone()&&s.isNone()),Cn=t=>{const s=[],c=i=>{s.push(i)};for(let i=0;i<t.length;i++)t[i].each(c);return s},Co=t=>{const s=[];for(let c=0;c<t.length;c++){const i=t[c];if(i.isSome())s.push(i.getOrDie());else return k.none()}return k.some(s)},To=(t,s,c)=>t.isSome()&&s.isSome()?k.some(c(t.getOrDie(),s.getOrDie())):k.none(),Po=(t,s,c,i)=>t.isSome()&&s.isSome()&&c.isSome()?k.some(i(t.getOrDie(),s.getOrDie(),c.getOrDie())):k.none(),qs=(t,s)=>t!=null?k.some(s(t)):k.none(),_r=(t,s)=>t?k.some(s):k.none(),bi=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),$i=(t,s)=>{let c=s??Wn;for(let i=0;i<t.length&&c!==void 0&&c!==null;++i)c=c[t[i]];return c},fs=(t,s)=>{const c=t.split(".");return $i(c,s)};nc.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const gs=t=>{const s=[],c=[];return Ve(t,i=>{i.fold(d=>{s.push(d)},d=>{c.push(d)})}),{errors:s,values:c}},Hs=t=>{const s=qt(k.none()),c=()=>s.get().each(t);return{clear:()=>{c(),s.set(k.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:C=>{c(),s.set(k.some(C))}}},Aa=()=>Hs(t=>t.destroy()),zs=()=>Hs(t=>t.unbind()),Ln=()=>{const t=Hs(re);return{...t,on:c=>t.get().each(c)}},vc=(t,s)=>t+s,Ac=(t,s)=>t.substring(s),dr=(t,s,c)=>s===""||t.length>=s.length&&t.substr(c,c+s.length)===s,ed=(t,s)=>vi(t,s)?Ac(t,s.length):t,mu=(t,s)=>ei(t,s)?t:vc(t,s),Qs=(t,s,c=0,i)=>{const d=t.indexOf(s,c);return d!==-1?Fn(i)?!0:d+s.length<=i:!1},vi=(t,s)=>dr(t,s,0),ei=(t,s)=>dr(t,s,t.length-s.length),Pt=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),La=t=>t.length>0,Pc=t=>!La(t),Yc=t=>{const s=parseFloat(t);return isNaN(s)?k.none():k.some(s)},mr=(t,s)=>{let c=null,i=null;return{cancel:()=>{Go(c)||(clearTimeout(c),c=null,i=null)},throttle:(...p)=>{i=p,Go(c)&&(c=setTimeout(()=>{const C=i;c=null,i=null,t.apply(null,C)},s))}}},fu=(t,s)=>{let c=null;return{cancel:()=>{Go(c)||(clearTimeout(c),c=null)},throttle:(...g)=>{Go(c)&&(c=setTimeout(()=>{c=null,t.apply(null,g)},s))}}},Xc=(t,s)=>{let c=null;const i=()=>{Go(c)||(clearTimeout(c),c=null)};return{cancel:i,throttle:(...g)=>{i(),c=setTimeout(()=>{c=null,t.apply(null,g)},s)}}},ka=t=>{let s=!1,c;return(...i)=>(s||(s=!0,c=t.apply(null,i)),c)},Pl="\uFEFF",nd=" ",Ii=(t,s)=>{const i=(s||document).createElement("div");if(i.innerHTML=t,!i.hasChildNodes()||i.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,t),new Error(d)}return Li(i.childNodes[0])},gu=(t,s)=>{const i=(s||document).createElement(t);return Li(i)},$l=(t,s)=>{const i=(s||document).createTextNode(t);return Li(i)},Li=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},At={fromHtml:Ii,fromTag:gu,fromText:$l,fromDom:Li,fromPoint:(t,s,c)=>k.from(t.dom.elementFromPoint(s,c)).map(Li)},dl=(t,s)=>{s.fold(c=>{t.setStartBefore(c.dom)},(c,i)=>{t.setStart(c.dom,i)},c=>{t.setStartAfter(c.dom)})},od=(t,s)=>{s.fold(c=>{t.setEndBefore(c.dom)},(c,i)=>{t.setEnd(c.dom,i)},c=>{t.setEndAfter(c.dom)})},Nr=(t,s,c)=>{const i=t.document.createRange();return dl(i,s),od(i,c),i},H=(t,s,c,i,d)=>{const g=t.document.createRange();return g.setStart(s.dom,c),g.setEnd(i.dom,d),g},ce=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),ye=t=>{const s=t.getClientRects(),c=s.length>0?s[0]:t.getBoundingClientRect();return c.width>0||c.height>0?k.some(c).map(ce):k.none()},Ke=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?k.some(s).map(ce):k.none()},kt=nc.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),en=(t,s,c)=>s(At.fromDom(c.startContainer),c.startOffset,At.fromDom(c.endContainer),c.endOffset),Dn=(t,s)=>s.match({domRange:c=>({ltr:G(c),rtl:k.none}),relative:(c,i)=>({ltr:ka(()=>Nr(t,c,i)),rtl:ka(()=>k.some(Nr(t,i,c)))}),exact:(c,i,d,g)=>({ltr:ka(()=>H(t,c,i,d,g)),rtl:ka(()=>k.some(H(t,d,g,c,i)))})}),ar=(t,s)=>{const c=s.ltr();return c.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>kt.rtl(At.fromDom(d.endContainer),d.endOffset,At.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>en(t,kt.ltr,c)):en(t,kt.ltr,c)},Ao=(t,s)=>{const c=Dn(t,s);return ar(t,c)},N=(t,s)=>Ao(t,s).match({ltr:(i,d,g,p)=>{const C=t.document.createRange();return C.setStart(i.dom,d),C.setEnd(g.dom,p),C},rtl:(i,d,g,p)=>{const C=t.document.createRange();return C.setStart(g.dom,p),C.setEnd(i.dom,d),C}});kt.ltr,kt.rtl;const V=9,se=11,Pe=1,fn=3,po=(t,s)=>{const c=t.dom;if(c.nodeType!==Pe)return!1;{const i=c;if(i.matches!==void 0)return i.matches(s);if(i.msMatchesSelector!==void 0)return i.msMatchesSelector(s);if(i.webkitMatchesSelector!==void 0)return i.webkitMatchesSelector(s);if(i.mozMatchesSelector!==void 0)return i.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},Us=t=>t.nodeType!==Pe&&t.nodeType!==V&&t.nodeType!==se||t.childElementCount===0,qr=(t,s)=>{const c=s===void 0?document:s.dom;return Us(c)?[]:Ae(c.querySelectorAll(t),At.fromDom)},la=(t,s)=>{const c=s===void 0?document:s.dom;return Us(c)?k.none():k.from(c.querySelector(t)).map(At.fromDom)},Jo=(t,s)=>t.dom===s.dom,ua=(t,s)=>{const c=t.dom,i=s.dom;return c===i?!1:c.contains(i)},Ll=(t,s,c,i)=>{const d=t.isiOS()&&/ipad/i.test(c)===!0,g=t.isiOS()&&!d,p=t.isiOS()||t.isAndroid(),C=p||i("(pointer:coarse)"),S=d||!g&&p&&i("(min-device-width:768px)"),E=g||p&&!S,O=s.isSafari()&&t.isiOS()&&/safari/i.test(c)===!1,B=!E&&!S&&!O;return{isiPad:G(d),isiPhone:G(g),isTablet:G(S),isPhone:G(E),isTouch:G(C),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:G(O),isDesktop:G(B)}},Hi=(t,s)=>{for(let c=0;c<t.length;c++){const i=t[c];if(i.test(s))return i}},gg=(t,s)=>{const c=Hi(t,s);if(!c)return{major:0,minor:0};const i=d=>Number(s.replace(c,"$"+d));return Da(i(1),i(2))},Pm=(t,s)=>{const c=String(s).toLowerCase();return t.length===0?sd():gg(t,c)},sd=()=>Da(0,0),Da=(t,s)=>({major:t,minor:s}),rd={nu:Da,detect:Pm,unknown:sd},vf=(t,s)=>Lo(s.brands,c=>{const i=c.brand.toLowerCase();return De(t,d=>{var g;return i===((g=d.brand)==null?void 0:g.toLowerCase())}).map(d=>({current:d.name,version:rd.nu(parseInt(c.version,10),0)}))}),hg=(t,s)=>{const c=String(s).toLowerCase();return De(t,i=>i.search(c))},pg=(t,s)=>hg(t,s).map(c=>{const i=rd.detect(c.versionRegexes,s);return{current:c.name,version:i}}),Hh=(t,s)=>hg(t,s).map(c=>{const i=rd.detect(c.versionRegexes,s);return{current:c.name,version:i}}),yf=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,zi=t=>s=>Qs(s,t),zh=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>Qs(t,"edge/")&&Qs(t,"chrome")&&Qs(t,"safari")&&Qs(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,yf],search:t=>Qs(t,"chrome")&&!Qs(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>Qs(t,"msie")||Qs(t,"trident")},{name:"Opera",versionRegexes:[yf,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:zi("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:zi("firefox")},{name:"Safari",versionRegexes:[yf,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(Qs(t,"safari")||Qs(t,"mobile/"))&&Qs(t,"applewebkit")}],Vh=[{name:"Windows",search:zi("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>Qs(t,"iphone")||Qs(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:zi("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:zi("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:zi("linux"),versionRegexes:[]},{name:"Solaris",search:zi("sunos"),versionRegexes:[]},{name:"FreeBSD",search:zi("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:zi("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ha={browsers:G(zh),oses:G(Vh)},Z="Edge",oe="Chromium",Oe="IE",st="Opera",wn="Firefox",Qo="Safari",Pr=()=>Jc({current:void 0,version:rd.unknown()}),Jc=t=>{const s=t.current,c=t.version,i=d=>()=>s===d;return{current:s,version:c,isEdge:i(Z),isChromium:i(oe),isIE:i(Oe),isOpera:i(st),isFirefox:i(wn),isSafari:i(Qo)}},yc={unknown:Pr,nu:Jc},yi="Windows",Hl="iOS",Qc="Android",Oa="Linux",$c="macOS",hu="Solaris",bg="FreeBSD",wo="ChromeOS",pu=()=>cd({current:void 0,version:rd.unknown()}),cd=t=>{const s=t.current,c=t.version,i=d=>()=>s===d;return{current:s,version:c,isWindows:i(yi),isiOS:i(Hl),isAndroid:i(Qc),isMacOS:i($c),isLinux:i(Oa),isSolaris:i(hu),isFreeBSD:i(bg),isChromeOS:i(wo)}},jr={unknown:pu,nu:cd},t1={detect:(t,s,c)=>{const i=Ha.browsers(),d=Ha.oses(),g=s.bind(S=>vf(i,S)).orThunk(()=>pg(i,t)).fold(yc.unknown,yc.nu),p=Hh(d,t).fold(jr.unknown,jr.nu),C=Ll(p,g,t,c);return{browser:g,os:p,deviceType:C}}},oS=t=>window.matchMedia(t).matches;let gb=ka(()=>t1.detect(window.navigator.userAgent,k.from(window.navigator.userAgentData),oS));const Ur=()=>gb(),$m=(t,s)=>fs(t,s),Xy=(t,s)=>{const c=$m(t,s);if(c==null)throw new Error(t+" not available on this browser");return c},Ct=Object.getPrototypeOf,Ci=t=>Xy("HTMLElement",t),vg=t=>{const s=fs("ownerDocument.defaultView",t);return vn(t)&&(Ci(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(Ct(t).constructor.name))},ml=t=>t.dom.nodeName.toLowerCase(),Cf=t=>t.dom.nodeType,n1=t=>s=>Cf(s)===t,ee=t=>ti(t)&&vg(t.dom),ti=n1(Pe),zd=n1(fn),o1=n1(V),wf=n1(se),da=t=>s=>ti(s)&&ml(s)===t,ni=t=>At.fromDom(t.dom.ownerDocument),s1=t=>o1(t)?t:ni(t),r1=t=>At.fromDom(s1(t).dom.documentElement),yg=t=>At.fromDom(s1(t).dom.defaultView),oi=t=>k.from(t.dom.parentNode).map(At.fromDom),c1=t=>oi(t),bu=t=>k.from(t.dom.parentElement).map(At.fromDom),Cg=(t,s)=>{const c=dt(s)?s:qe;let i=t.dom;const d=[];for(;i.parentNode!==null&&i.parentNode!==void 0;){const g=i.parentNode,p=At.fromDom(g);if(d.push(p),c(p)===!0)break;i=g}return d},a1=t=>k.from(t.dom.offsetParent).map(At.fromDom),wi=t=>k.from(t.dom.previousSibling).map(At.fromDom),i1=t=>k.from(t.dom.nextSibling).map(At.fromDom),zl=t=>Ae(t.dom.childNodes,At.fromDom),Vd=(t,s)=>{const c=t.dom.childNodes;return k.from(c[s]).map(At.fromDom)},Io=t=>Vd(t,0),za=(t,s)=>({element:t,offset:s}),Sf=(t,s)=>{const c=zl(t);return c.length>0&&s<c.length?za(c[s],0):za(t,s)},hb=(t,s,c,i)=>{const g=ni(t).dom.createRange();return g.setStart(t.dom,s),g.setEnd(c.dom,i),g},xo=(t,s,c,i)=>{const d=hb(t,s,c,i),g=Jo(t,c)&&s===i;return d.collapsed&&!g},ad=t=>wf(t)&&qn(t.dom.host),oc=t=>At.fromDom(t.dom.getRootNode()),Vl=t=>ad(t)?t:At.fromDom(s1(t).dom.body),Ul=t=>Rr(t).isSome(),Rr=t=>{const s=oc(t);return ad(s)?k.some(s):k.none()},ys=t=>At.fromDom(t.dom.host),Jy=t=>{if(qn(t.target)){const s=At.fromDom(t.target);if(ti(s)&&Qy(s)&&t.composed&&t.composedPath){const c=t.composedPath();if(c)return Xt(c)}}return k.from(t.target)},Qy=t=>qn(t.dom.shadowRoot),sc=(t,s,c,i,d,g,p)=>({target:t,x:s,y:c,stop:i,prevent:d,kill:g,raw:p}),fl=t=>{const s=At.fromDom(Jy(t).getOr(t.target)),c=()=>t.stopPropagation(),i=()=>t.preventDefault(),d=Vo(i,c);return sc(s,t.clientX,t.clientY,c,i,d,t)},gl=(t,s)=>c=>{t(c)&&s(fl(c))},rc=(t,s,c,i,d)=>{const g=gl(c,i);return t.dom.addEventListener(s,g,d),{unbind:pn(Si,t,s,g,d)}},Wl=(t,s,c,i)=>rc(t,s,c,i,!1),Va=(t,s,c,i)=>rc(t,s,c,i,!0),Si=(t,s,c,i)=>{t.dom.removeEventListener(s,c,i)},ma=rt,Es=(t,s,c)=>Wl(t,s,ma,c),Vi=(t,s,c)=>Va(t,s,ma,c),Ua=fl,Ic=()=>At.fromDom(document),kc=(t,s=!1)=>t.dom.focus({preventScroll:s}),Er=t=>t.dom.blur(),hl=t=>{const s=oc(t).dom;return t.dom===s.activeElement},Dc=(t=Ic())=>k.from(t.dom.activeElement).map(At.fromDom),Kr=t=>Dc(oc(t)).filter(s=>t.dom.contains(s.dom)),Ud=(t,s)=>{oi(t).each(i=>{i.dom.insertBefore(s.dom,t.dom)})},l1=(t,s)=>{i1(t).fold(()=>{oi(t).each(d=>{Oc(d,s)})},i=>{Ud(i,s)})},Uh=(t,s)=>{Io(t).fold(()=>{Oc(t,s)},i=>{t.dom.insertBefore(s.dom,i.dom)})},Oc=(t,s)=>{t.dom.appendChild(s.dom)},u1=(t,s,c)=>{Vd(t,c).fold(()=>{Oc(t,s)},i=>{Ud(i,s)})},pb=(t,s)=>{Ve(s,c=>{Oc(t,c)})},Im=(t,s,c)=>{if(Nt(c)||cn(c)||Fo(c))t.setAttribute(s,c+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",c,":: Element ",t),new Error("Attribute value was not simple")},$n=(t,s,c)=>{Im(t.dom,s,c)},d1=(t,s)=>{const c=t.dom;ko(s,(i,d)=>{Im(c,d,i)})},Cc=(t,s)=>{const c=t.dom.getAttribute(s);return c===null?void 0:c},Lc=(t,s)=>k.from(Cc(t,s)),Hc=(t,s)=>{const c=t.dom;return c&&c.hasAttribute?c.hasAttribute(s):!1},ir=(t,s)=>{t.dom.removeAttribute(s)},Wd=t=>co(t.dom.attributes,(s,c)=>(s[c.name]=c.value,s),{}),Wh=t=>{t.dom.textContent="",Ve(zl(t),s=>{Ui(s)})},Ui=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},Zl=(t,s)=>At.fromDom(t.dom.cloneNode(s)),wg=t=>Zl(t,!1),Zh=t=>Zl(t,!0),Sg=(t,s)=>{const i=(s||document).createElement("div");return i.innerHTML=t,zl(At.fromDom(i))},vu=t=>t.dom.innerHTML,pl=(t,s)=>{const i=ni(t).dom,d=At.fromDom(i.createDocumentFragment()),g=Sg(s,i);pb(d,g),Wh(t),Oc(t,d)},m1=t=>{const s=At.fromTag("div"),c=At.fromDom(t.dom.cloneNode(!0));return Oc(s,c),vu(s)},ea=t=>{if(ad(t))return"#shadow-root";{const s=wg(t);return m1(s)}},Wi=t=>new Promise((s,c)=>{const i=()=>{g(),s(t)},d=[Es(t,"load",i),Es(t,"error",()=>{g(),c("Unable to load data from image: "+t.dom.src)})],g=()=>Ve(d,p=>p.unbind());t.dom.complete&&i()}),yu=t=>t.style!==void 0&&dt(t.style.getPropertyValue),is=t=>{const s=zd(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const c=s.ownerDocument;return Rr(At.fromDom(s)).fold(()=>c.body.contains(s),je(is,ys))},xi=()=>bb(At.fromDom(document)),bb=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return At.fromDom(s)},xg=(t,s,c)=>{if(!Nt(c))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",c,":: Element ",t),new Error("CSS value must be a string: "+c);yu(t)&&t.style.setProperty(s,c)},Zi=(t,s)=>{yu(t)&&t.style.removeProperty(s)},Vn=(t,s,c)=>{const i=t.dom;xg(i,s,c)},Sr=(t,s)=>{const c=t.dom;ko(s,(i,d)=>{xg(c,d,i)})},zc=(t,s)=>{const c=t.dom;ko(s,(i,d)=>{i.fold(()=>{Zi(c,d)},g=>{xg(c,d,g)})})},lr=(t,s)=>{const c=t.dom,d=window.getComputedStyle(c).getPropertyValue(s);return d===""&&!is(t)?ji(c,s):d},ji=(t,s)=>yu(t)?t.style.getPropertyValue(s):"",fr=(t,s)=>{const c=t.dom,i=ji(c,s);return k.from(i).filter(d=>d.length>0)},cc=t=>{const s={},c=t.dom;if(yu(c))for(let i=0;i<c.style.length;i++){const d=c.style.item(i);s[d]=c.style[d]}return s},xf=(t,s,c)=>{const i=At.fromTag(t);return Vn(i,s,c),fr(i,s).isSome()},Ro=(t,s)=>{const c=t.dom;Zi(c,s),An(Lc(t,"style").map(Pt),"")&&ir(t,"style")},bl=t=>t.dom.offsetWidth,Ws=(t,s)=>{const c=(C,S)=>{if(!Fo(S)&&!S.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+S);const E=C.dom;yu(E)&&(E.style[t]=S+"px")},i=C=>{const S=s(C);if(S<=0||S===null){const E=lr(C,t);return parseFloat(E)||0}return S},d=i,g=(C,S)=>co(S,(E,O)=>{const B=lr(C,O),I=B===void 0?0:parseInt(B,10);return isNaN(I)?E:E+I},0);return{set:c,get:i,getOuter:d,aggregate:g,max:(C,S,E)=>{const O=g(C,E);return S>O?S-O:0}}},si=Ws("height",t=>{const s=t.dom;return is(t)?s.getBoundingClientRect().height:s.offsetHeight}),ac=t=>si.get(t),ic=t=>si.getOuter(t),Cu=(t,s)=>{const c=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],i=si.max(t,s,c);Vn(t,"max-height",i+"px")},Ef=t=>t.offsetWidth<=0&&t.offsetHeight<=0,id=t=>!Ef(t.dom),Zd=Ws("width",t=>{const s=t.dom;return is(t)?s.getBoundingClientRect().width:s.offsetWidth}),jd=(t,s)=>Zd.set(t,s),ta=t=>Zd.get(t),ld=t=>Zd.getOuter(t),e2=(t,s)=>{const c=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],i=Zd.max(t,s,c);Vn(t,"max-width",i+"px")},Gd=(t,s)=>({left:t,top:s,translate:(i,d)=>Gd(t+i,s+d)}),Ts=Gd,f1=t=>{const s=t.getBoundingClientRect();return Ts(s.left,s.top)},Tf=(t,s)=>t!==void 0?t:s!==void 0?s:0,fa=t=>{const s=t.dom.ownerDocument,c=s.body,i=s.defaultView,d=s.documentElement;if(c===t.dom)return Ts(c.offsetLeft,c.offsetTop);const g=Tf(i==null?void 0:i.pageYOffset,d.scrollTop),p=Tf(i==null?void 0:i.pageXOffset,d.scrollLeft),C=Tf(d.clientTop,c.clientTop),S=Tf(d.clientLeft,c.clientLeft);return ri(t).translate(p-S,g-C)},ri=t=>{const s=t.dom,i=s.ownerDocument.body;return i===s?Ts(i.offsetLeft,i.offsetTop):is(t)?f1(s):Ts(0,0)},$r=t=>{const s=t!==void 0?t.dom:document,c=s.body.scrollLeft||s.documentElement.scrollLeft,i=s.body.scrollTop||s.documentElement.scrollTop;return Ts(c,i)},ud=(t,s,c)=>{const d=(c!==void 0?c.dom:document).defaultView;d&&d.scrollTo(t,s)},Af=((t,s)=>{const c=g=>{if(!t(g))throw new Error("Can only get "+s+" value of a "+s+" node");return i(g).getOr("")},i=g=>t(g)?k.from(g.dom.nodeValue):k.none();return{get:c,getOption:i,set:(g,p)=>{if(!t(g))throw new Error("Can only set raw "+s+" value of a "+s+" node");g.dom.nodeValue=p}}})(zd,"text"),jh=t=>Af.get(t),g1=(t,s)=>c=>sS(c)==="rtl"?s:t,sS=t=>lr(t,"direction")==="rtl"?"rtl":"ltr",jl=(t,s)=>{const c=Cc(t,s);return c===void 0||c===""?[]:c.split(" ")},t2=(t,s,c)=>{const d=jl(t,s).concat([c]);return $n(t,s,d.join(" ")),!0},h1=(t,s,c)=>{const i=jn(jl(t,s),d=>d!==c);return i.length>0?$n(t,s,i.join(" ")):ir(t,s),!1};var Gl=(t,s,c,i,d)=>t(c,i)?k.some(c):dt(d)&&d(c)?k.none():s(c,i,d);const vb=(t,s,c)=>{let i=t.dom;const d=dt(c)?c:qe;for(;i.parentNode;){i=i.parentNode;const g=At.fromDom(i);if(s(g))return k.some(g);if(d(g))break}return k.none()},kf=(t,s,c)=>Gl((d,g)=>g(d),vb,t,s,c),Eg=(t,s)=>{const c=t.dom;return c.parentNode?Tg(At.fromDom(c.parentNode),i=>!Jo(t,i)&&s(i)):k.none()},Tg=(t,s)=>{const c=d=>s(At.fromDom(d));return De(t.dom.childNodes,c).map(At.fromDom)},p1=(t,s)=>{const c=i=>{for(let d=0;d<i.childNodes.length;d++){const g=At.fromDom(i.childNodes[d]);if(s(g))return k.some(g);const p=c(i.childNodes[d]);if(p.isSome())return p}return k.none()};return c(t.dom)},yb=t=>la(t),vl=(t,s,c)=>vb(t,i=>po(i,s),c),n2=(t,s)=>Eg(t,c=>po(c,s)),qd=(t,s)=>Tg(t,c=>po(c,s)),As=(t,s)=>la(s,t),ga=(t,s,c)=>Gl((d,g)=>po(d,g),vl,t,s,c),wu=(t,s)=>{t.dom.checked=s},b1=t=>t.dom.checked,Kd=t=>t.dom.classList!==void 0,v1=t=>jl(t,"class"),Cb=(t,s)=>t2(t,"class",s),Su=(t,s)=>h1(t,"class",s),xu=(t,s)=>Je(v1(t),s)?Su(t,s):Cb(t,s),Ps=(t,s)=>{Kd(t)?t.dom.classList.add(s):Cb(t,s)},wb=t=>{(Kd(t)?t.dom.classList:v1(t)).length===0&&ir(t,"class")},Tr=(t,s)=>{Kd(t)?t.dom.classList.remove(s):Su(t,s),wb(t)},Df=(t,s)=>{const c=Kd(t)?t.dom.classList.toggle(s):xu(t,s);return wb(t),c},Xr=(t,s)=>Kd(t)&&t.dom.classList.contains(s),Eu=(t,s)=>{Ve(s,c=>{Ps(t,c)})},ha=(t,s)=>{Ve(s,c=>{Tr(t,c)})},dd=(t,s)=>{Ve(s,c=>{Df(t,c)})},Gh=(t,s)=>Dt(s,c=>Xr(t,c)),y1=t=>{const s=t.dom.classList,c=new Array(s.length);for(let i=0;i<s.length;i++){const d=s.item(i);d!==null&&(c[i]=d)}return c},C1=t=>Kd(t)?y1(t):v1(t),o2=t=>t.dom.textContent,ci=t=>t.dom.value,ql=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},Jr=(t,s,c)=>jn(Cg(t,c),s),_c=(t,s)=>qr(s,t),qh=(t,s,c)=>kf(t,s,c).isSome(),Ag=(t,s,c)=>ga(t,s,c).isSome(),Kh=t=>dt(t)?t:qe,Sb=(t,s,c)=>{let i=t.dom;const d=Kh(c);for(;i.parentNode;){i=i.parentNode;const g=At.fromDom(i),p=s(g);if(p.isSome())return p;if(d(g))break}return k.none()},yl=(t,s,c)=>{const i=s(t),d=Kh(c);return i.orThunk(()=>d(t)?k.none():Sb(t,s,d))},pa={create:(t,s,c,i)=>({start:t,soffset:s,finish:c,foffset:i})},x=nc.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),A=(t,s,c,i)=>t.fold(s,c,i),$=t=>t.fold(St,St,St),q=x.before,ge=x.on,Ye=x.after,Ht={before:q,on:ge,after:Ye,cata:A,getStart:$},un=nc.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),fo=t=>un.exact(t.start,t.soffset,t.finish,t.foffset),Oo=t=>t.match({domRange:s=>At.fromDom(s.startContainer),relative:(s,c)=>Ht.getStart(s),exact:(s,c,i,d)=>s}),Zs=un.domRange,Br=un.relative,Wr=un.exact,Ei=t=>{const s=Oo(t);return yg(s)},md=pa.create,Gi={domRange:Zs,relative:Br,exact:Wr,exactFromRange:fo,getWin:Ei,range:md},Lm=t=>k.from(t.getSelection()),kg=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),c=t.getRangeAt(t.rangeCount-1);return k.some(pa.create(At.fromDom(s.startContainer),s.startOffset,At.fromDom(c.endContainer),c.endOffset))}else return k.none()},w1=t=>{if(t.anchorNode===null||t.focusNode===null)return kg(t);{const s=At.fromDom(t.anchorNode),c=At.fromDom(t.focusNode);return xo(s,t.anchorOffset,c,t.focusOffset)?k.some(pa.create(s,t.anchorOffset,c,t.focusOffset)):kg(t)}},Hm=t=>Lm(t).filter(s=>s.rangeCount>0).bind(w1),Yd=(t,s)=>{const c=N(t,s);return ye(c)},S1=(t,s)=>{const c=N(t,s);return Ke(c)},Yh={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Xh=(()=>{const t="[0-9]+",c="[eE]"+("[+-]?"+t),i="\\.",d=C=>`(?:${C})?`,p=`[+-]?(?:${["Infinity",t+i+d(t)+d(c),i+t+d(c),t+d(c)].join("|")})`;return new RegExp(`^(${p})(.*)$`)})(),s2=(t,s)=>Bt(s,c=>Bt(Yh[c],i=>t===i)),Jh=(t,s)=>k.from(Xh.exec(t)).bind(i=>{const d=Number(i[1]),g=i[2];return s2(g,s)?k.some({value:d,unit:g}):k.none()}),Ho=(t,s)=>Jh(t,s).map(({value:c,unit:i})=>c+i),er=t=>{const s=t===void 0?window:t;return Ur().browser.isFirefox()?k.none():k.from(s.visualViewport)},ba=(t,s,c,i)=>({x:t,y:s,width:c,height:i,right:t+c,bottom:s+i}),Wa=t=>{const s=t===void 0?window:t,c=s.document,i=$r(At.fromDom(c));return er(s).fold(()=>{const d=s.document.documentElement,g=d.clientWidth,p=d.clientHeight;return ba(i.left,i.top,g,p)},d=>ba(Math.max(d.pageLeft,i.left),Math.max(d.pageTop,i.top),d.width,d.height))},Dg=(t,s)=>t.view(s).fold(G([]),i=>{const d=t.owner(i),g=Dg(t,d);return[i].concat(g)}),r2=(t,s)=>{const c=s.owner(t),i=Dg(s,c);return k.some(i)};var zm=Object.freeze({__proto__:null,view:t=>{var c;return(t.dom===document?k.none():k.from((c=t.dom.defaultView)==null?void 0:c.frameElement)).map(At.fromDom)},owner:t=>ni(t)});const Xd=t=>{const s=Ic(),c=$r(s);return r2(t,zm).fold(pn(fa,t),d=>{const g=ri(t),p=Xn(d,(C,S)=>{const E=ri(S);return{left:C.left+E.left,top:C.top+E.top}},{left:0,top:0});return Ts(p.left+g.left+c.left,p.top+g.top+c.top)})},c2=(t,s,c)=>({point:t,width:s,height:c}),A4=(t,s,c,i)=>({x:t,y:s,width:c,height:i}),wc=(t,s,c,i)=>({x:t,y:s,width:c,height:i,right:t+c,bottom:s+i}),mc=t=>{const s=fa(t),c=ld(t),i=ic(t);return wc(s.left,s.top,c,i)},fd=t=>{const s=Xd(t),c=ld(t),i=ic(t);return wc(s.left,s.top,c,i)},ep=(t,s)=>{const c=Math.max(t.x,s.x),i=Math.max(t.y,s.y),d=Math.min(t.right,s.right),g=Math.min(t.bottom,s.bottom),p=d-c,C=g-i;return wc(c,i,p,C)},xb=(t,s)=>co(s,(c,i)=>ep(c,i),t),Za=()=>Wa(window),a2=(t,s)=>Jo(t.element,s.event.target),Of=t=>(An(fr(t,"position"),"fixed")?k.none():a1(t)).orThunk(()=>{const i=At.fromTag("span");return oi(t).bind(d=>{Oc(d,i);const g=a1(i);return Ui(i),g})}),Eb=t=>Of(t).map(fa).getOrThunk(()=>Ts(0,0)),qi=(t,s)=>{const c=k.from(Cc(t,"id")).getOrThunk(()=>{const i=nt("aria");return $n(s,"id",i),i});$n(t,"aria-describedby",c)},i2=t=>{ir(t,"aria-describedby")};var tr;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(tr||(tr={}));const tp=(t,s,c)=>t.stype===tr.Error?s(t.serror):c(t.svalue),Vm=t=>{const s=[],c=[];return Ve(t,i=>{tp(i,d=>c.push(d),d=>s.push(d))}),{values:s,errors:c}},k4=(t,s)=>t.stype===tr.Error?{stype:tr.Error,serror:s(t.serror)}:t,cS=(t,s)=>t.stype===tr.Value?{stype:tr.Value,svalue:s(t.svalue)}:t,Tb=(t,s)=>t.stype===tr.Value?s(t.svalue):t,D4=(t,s)=>t.stype===tr.Error?s(t.serror):t,l2=t=>({stype:tr.Value,svalue:t}),Um=t=>({stype:tr.Error,serror:t}),gr={fromResult:t=>t.fold(Um,l2),toResult:t=>tp(t,Yt.error,Yt.value),svalue:l2,partition:Vm,serror:Um,bind:Tb,bindError:D4,map:cS,mapError:k4,fold:tp},np=t=>vn(t)&&zn(t).length>100?" removed due to size":JSON.stringify(t,null,2),_g=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:G("... (only showing first ten failures)")}]):t;return Ae(s,c=>"Failed path: ("+c.path.join(" > ")+`)
`+c.getErrorInfo())},na=(t,s)=>gr.serror([{path:t,getErrorInfo:s}]),op=(t,s,c)=>na(t,()=>'Could not find valid *required* value for "'+s+'" in '+np(c)),O4=(t,s)=>na(t,()=>'Choice schema did not contain choice key: "'+s+'"'),Rg=(t,s,c)=>na(t,()=>'The chosen schema: "'+c+'" did not exist in branches: '+np(s)),aS=(t,s)=>na(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),Jd=(t,s)=>na(t,G(s)),_f=t=>{const s=(i,d)=>gr.bindError(t(d),g=>Jd(i,g)),c=G("val");return{extract:s,toString:c}},d2=_f(gr.svalue),pt=G(d2),m2=(t,s)=>_f(c=>{const i=typeof c;return t(c)?gr.svalue(c):gr.serror(`Expected type: ${s} but got: ${i}`)}),f2=m2(Fo,"number"),Zr=m2(Nt,"string"),_o=m2(cn,"boolean"),Bg=m2(dt,"function"),Ar=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>Ar(t[s]));default:return!1}},g2=_f(t=>Ar(t)?gr.svalue(t):gr.serror("Expected value to be acceptable for sending via postMessage")),Tu=()=>({tag:"required",process:{}}),ai=t=>({tag:"defaultedThunk",process:t}),hr=t=>ai(G(t)),Ab=()=>({tag:"option",process:{}}),Qd=t=>({tag:"mergeWithThunk",process:t}),h2=t=>Qd(G(t)),kb=(t,s,c,i)=>({tag:"field",key:t,newKey:s,presence:c,prop:i}),Au=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),p2=(t,s,c)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return c(t.newKey,t.instantiator)}},Db=(t,s)=>gr.svalue(ht(s,It.apply(void 0,t))),b2=t=>Vo(gr.serror,ae)(t),v2={consolidateObj:(t,s)=>{const c=gr.partition(t);return c.errors.length>0?b2(c.errors):Db(c.values,s)},consolidateArr:t=>{const s=gr.partition(t);return s.errors.length>0?b2(s.errors):gr.svalue(s.values)}},lS=(t,s,c,i)=>on(s,c).fold(()=>op(t,c,s),i),Ob=(t,s,c,i)=>{const d=on(t,s).getOrThunk(()=>c(t));return i(d)},R4=(t,s,c)=>c(on(t,s)),B4=(t,s,c,i)=>{const d=on(t,s).map(g=>g===!0?c(t):g);return i(d)},y2=(t,s,c,i,d)=>{const g=C=>d.extract(s.concat([i]),C),p=C=>C.fold(()=>gr.svalue(k.none()),S=>{const E=d.extract(s.concat([i]),S);return gr.map(E,k.some)});switch(t.tag){case"required":return lS(s,c,i,g);case"defaultedThunk":return Ob(c,i,t.process,g);case"option":return R4(c,i,p);case"defaultedOptionThunk":return B4(c,i,t.process,p);case"mergeWithThunk":return Ob(c,i,G({}),C=>{const S=ht(t.process(c),C);return g(S)})}},C2=(t,s,c)=>{const i={},d=[];for(const g of c)p2(g,(p,C,S,E)=>{const O=y2(S,t,s,p,E);gr.fold(O,B=>{d.push(...B)},B=>{i[C]=B})},(p,C)=>{i[p]=C(s)});return d.length>0?gr.serror(d):gr.svalue(i)},Kl=t=>({extract:(i,d)=>t().extract(i,d),toString:()=>t().toString()}),ii=t=>zn(Js(t,qn)),Cl=t=>{const s=Un(t),c=Xn(t,(d,g)=>p2(g,p=>ht(d,{[p]:!0}),G(d)),{});return{extract:(d,g)=>{const p=cn(g)?[]:ii(g),C=jn(p,S=>!yo(c,S));return C.length===0?s.extract(d,g):aS(d,C)},toString:s.toString}},Un=t=>({extract:(i,d)=>C2(i,d,t),toString:()=>`obj{
`+Ae(t,d=>p2(d,(g,p,C,S)=>g+" -> "+S.toString(),(g,p)=>"state("+g+")")).join(`
`)+"}"}),li=t=>({extract:(i,d)=>{const g=Ae(d,(p,C)=>t.extract(i.concat(["["+C+"]"]),p));return v2.consolidateArr(g)},toString:()=>"array("+t.toString()+")"}),Mg=(t,s)=>{const c=s!==void 0?s:St;return{extract:(g,p)=>{const C=[];for(const S of t){const E=S.extract(g,p);if(E.stype===tr.Value)return{stype:tr.Value,svalue:c(E.svalue)};C.push(E)}return v2.consolidateArr(C)},toString:()=>"oneOf("+Ae(t,g=>g.toString()).join(", ")+")"}},uS=(t,s)=>{const c=(g,p)=>li(_f(t)).extract(g,p);return{extract:(g,p)=>{const C=zn(p),S=c(g,C);return gr.bind(S,E=>{const O=Ae(E,B=>kb(B,B,Tu(),s));return Un(O).extract(g,p)})},toString:()=>"setOf("+s.toString()+")"}},M4=(t,s)=>{const c=ka(s);return{extract:(g,p)=>c().extract(g,p),toString:()=>c().toString()}},_b=Vo(li,Un),x1=(t,s,c,i)=>on(c,i).fold(()=>Rg(t,c,i),g=>g.extract(t.concat(["branch: "+i]),s)),Fg=(t,s)=>({extract:(d,g)=>on(g,t).fold(()=>O4(d,t),C=>x1(d,g,s,C)),toString:()=>"chooseOn("+t+"). Possible values: "+zn(s)}),Rb=()=>li(d2),Rf=t=>_f(s=>t(s).fold(gr.serror,gr.svalue)),w2=(t,s)=>uS(c=>gr.fromResult(t(c)),s),dS=(t,s,c)=>{const i=s.extract([t],c);return gr.mapError(i,d=>({input:c,errors:d}))},Ir=(t,s,c)=>gr.toResult(dS(t,s,c)),ku=t=>t.fold(s=>{throw new Error(Bf(s))},St),Ti=(t,s,c)=>ku(Ir(t,s,c)),Bf=t=>`Errors: 
`+_g(t.errors).join(`
`)+`

Input object: `+np(t.input),ui=(t,s)=>Fg(t,mo(s,Un)),Ng=(t,s)=>M4(t,s),Vc=kb,_a=Au,sp=t=>Rf(s=>Je(t,s)?Yt.value(s):Yt.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),ct=t=>Vc(t,t,Tu(),pt()),wl=(t,s)=>Vc(t,t,Tu(),s),E1=t=>wl(t,f2),Rc=t=>wl(t,Zr),Yl=(t,s)=>Vc(t,t,Tu(),sp(s)),Xl=t=>wl(t,Bg),mS=(t,s)=>Vc(t,t,Ab(),_f(c=>gr.serror("The field: "+t+" is forbidden. "+s))),Wm=(t,s)=>Vc(t,t,Tu(),Un(s)),fS=(t,s)=>Vc(t,t,Tu(),_b(s)),Ai=(t,s)=>Vc(t,t,Tu(),li(s)),$s=t=>Vc(t,t,Ab(),pt()),Du=(t,s)=>Vc(t,t,Ab(),s),T1=t=>Du(t,f2),Gr=t=>Du(t,Zr),gS=(t,s)=>Du(t,sp(s)),Bb=t=>Du(t,_o),gd=t=>Du(t,Bg),S2=(t,s)=>Du(t,li(s)),Ki=(t,s)=>Du(t,Un(s)),x2=(t,s)=>Du(t,Cl(s)),Re=(t,s)=>Vc(t,t,hr(s),pt()),di=(t,s,c)=>Vc(t,t,hr(s),c),rp=(t,s)=>di(t,s,f2),Lr=(t,s)=>di(t,s,Zr),Sl=(t,s,c)=>di(t,s,sp(c)),va=(t,s)=>di(t,s,_o),Rs=(t,s)=>di(t,s,Bg),hS=(t,s)=>di(t,s,g2),Mf=(t,s,c)=>di(t,s,li(c)),E2=(t,s,c)=>di(t,s,Un(c)),Ff=(t,s)=>{const c={};return ko(t,(i,d)=>{Je(s,d)||(c[d]=i)}),c},cp=(t,s)=>({[t]:s}),pS=t=>{const s={};return Ve(t,c=>{s[c.key]=c.value}),s},bS=(t,s)=>Ff(t,s),Zm=(t,s)=>cp(t,s),A1=t=>pS(t),O5=(t,s)=>t.length===0?Yt.value(s):Yt.value(ht(s,It.apply(void 0,t))),Pg=t=>Yt.error(ae(t)),ya=(t,s)=>{const c=gs(t);return c.errors.length>0?Pg(c.errors):O5(c.values,s)},oa=G,jm=oa("touchstart"),Gm=oa("touchmove"),$g=oa("touchend"),ap=oa("touchcancel"),mi=oa("mousedown"),Nf=oa("mousemove"),Bc=oa("mouseout"),Mb=oa("mouseup"),Ou=oa("mouseover"),_u=oa("focusin"),Fb=oa("focusout"),Uc=oa("keydown"),ip=oa("keyup"),qm=oa("input"),Ig=oa("change"),em=oa("click"),k1=oa("transitioncancel"),xl=oa("transitionend"),Lg=oa("transitionstart"),vS=oa("selectstart"),Qr=t=>G("alloy."+t),yS={tap:Qr("tap")},tm=Qr("focus"),Ru=Qr("blur.post"),T2=Qr("paste.post"),Hg=Qr("receive"),Yi=Qr("execute"),zg=Qr("focus.item"),Vg=yS.tap,A2=Qr("longpress"),Nb=Qr("sandbox.close"),Pb=Qr("typeahead.cancel"),$b=Qr("system.init"),k2=Qr("system.touchmove"),CS=Qr("system.touchend"),Ug=Qr("system.scroll"),Wg=Qr("system.resize"),hd=Qr("system.attached"),Km=Qr("system.detached"),Zg=Qr("system.dismissRequested"),wS=Qr("system.repositionRequested"),D1=Qr("focusmanager.shifted"),O1=Qr("slotcontainer.visibility"),SS=Qr("system.external.element.scroll"),xS=Qr("change.tab"),Ib=Qr("dismiss.tab"),jg=Qr("highlight"),Lb=Qr("dehighlight"),Jl=t=>ea(t),ES="unknown";var Bu;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(Bu||(Bu={}));const _1=qt({}),TS=(t,s)=>{const c=[],i=new Date().getTime();return{logEventCut:(d,g,p)=>{c.push({outcome:"cut",target:g,purpose:p})},logEventStopped:(d,g,p)=>{c.push({outcome:"stopped",target:g,purpose:p})},logNoParent:(d,g,p)=>{c.push({outcome:"no-parent",target:g,purpose:p})},logEventNoHandlers:(d,g)=>{c.push({outcome:"no-handlers-left",target:g})},logEventResponse:(d,g,p)=>{c.push({outcome:"response",purpose:p,target:g})},write:()=>{const d=new Date().getTime();Je(["mousemove","mouseover","mouseout",$b()],t)||console.log(t,{event:t,time:d-i,target:s.dom,sequence:Ae(c,g=>Je(["cut","stopped","response"],g.outcome)?"{"+g.purpose+"} "+g.outcome+" at ("+Jl(g.target)+")":g.outcome)})}}},AS=(t,s,c)=>{switch(on(_1.get(),t).orThunk(()=>{const d=zn(_1.get());return Lo(d,g=>t.indexOf(g)>-1?k.some(_1.get()[g]):k.none())}).getOr(Bu.NORMAL)){case Bu.NORMAL:return c(F4());case Bu.LOGGING:{const d=TS(t,s),g=c(d);return d.write(),g}case Bu.STOP:return!0}},Xi=["alloy/data/Fields","alloy/debugging/Debugging"],R1=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return De(s,c=>c.indexOf("alloy")>0&&!Bt(Xi,i=>c.indexOf(i)>-1)).getOr(ES)}else return ES},kS={logEventCut:re,logEventStopped:re,logNoParent:re,logEventNoHandlers:re,logEventResponse:re,write:re},Pf=(t,s,c)=>AS(t,s,c),F4=G(kS),N4=G([ct("menu"),ct("selectedMenu")]),D2=G([ct("item"),ct("selectedItem")]);G(Un(D2().concat(N4())));const P4=G(Un(D2())),Bs=Wm("initSize",[ct("numColumns"),ct("numRows")]),DS=()=>wl("markers",P4()),OS=()=>Wm("markers",[ct("backgroundMenu")].concat(N4()).concat(D2())),Ql=t=>Wm("markers",Ae(t,ct)),Gg=(t,s,c)=>(R1(),Vc(s,s,c,Rf(i=>Yt.value((...d)=>i.apply(void 0,d))))),os=t=>Gg("onHandler",t,hr(re)),fc=t=>Gg("onKeyboardHandler",t,hr(k.none)),B1=t=>Gg("onHandler",t,Tu()),Hb=t=>Gg("onKeyboardHandler",t,Tu()),pr=(t,s)=>_a(t,G(s)),lp=t=>_a(t,St),zb=G(Bs),_S=(t,s,c)=>{const i=c.toString(),d=i.indexOf(")")+1,g=i.indexOf("("),p=i.substring(g+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:RS(p.slice(0,1).concat(p.slice(3)))}),t},RS=t=>Ae(t,s=>ei(s,"/*")?s.substring(0,s.length-2):s),BS=(t,s)=>{const c=t.toString(),i=c.indexOf(")")+1,d=c.indexOf("("),g=c.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:RS(g)}),t},_5=(t,s)=>{const c=s.toString(),i=c.indexOf(")")+1,d=c.indexOf("("),g=c.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:RS(g.slice(1))}),t},$4=(t,s)=>{let c=null;return{cancel:()=>{c!==null&&(clearTimeout(c),c=null)},schedule:(...g)=>{c=setTimeout(()=>{t.apply(null,g),c=null},s)}}},I4=5,MS=400,FS=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?k.none():k.some(s.touches[0])},Mu=(t,s)=>{const c=Math.abs(t.clientX-s.x),i=Math.abs(t.clientY-s.y);return c>I4||i>I4},Ra=t=>{const s=Ln(),c=qt(!1),i=$4(E=>{t.triggerEvent(A2(),E),c.set(!0)},MS),d=E=>(FS(E).each(O=>{i.cancel();const B={x:O.clientX,y:O.clientY,target:E.target};i.schedule(E),c.set(!1),s.set(B)}),k.none()),g=E=>(i.cancel(),FS(E).each(O=>{s.on(B=>{Mu(O,B)&&s.clear()})}),k.none()),p=E=>{i.cancel();const O=B=>Jo(B.target,E.target);return s.get().filter(O).map(B=>c.get()?(E.prevent(),!1):t.triggerEvent(Vg(),E))},C=A1([{key:jm(),value:d},{key:Gm(),value:g},{key:$g(),value:p}]);return{fireIfReady:(E,O)=>on(C,O).bind(B=>B(E))}};var Fu;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(Fu||(Fu={}));const pd="placeholder",bd=nc.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),$f=t=>So(t,"uiType"),nm=(t,s,c,i)=>t.exists(d=>d!==c.owner)?bd.single(!0,G(c)):on(i,c.name).fold(()=>{throw new Error("Unknown placeholder component: "+c.name+`
Known: [`+zn(i)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(c,null,2))},d=>d.replace()),Ym=(t,s,c,i)=>$f(c)&&c.uiType===pd?nm(t,s,c,i):bd.single(!1,G(c)),O2=(t,s,c,i)=>Ym(t,s,c,i).fold((g,p)=>{const C=$f(c)?p(s,c.config,c.validated):p(s),S=on(C,"components").getOr([]),E=te(S,O=>O2(t,s,O,i));return[{...C,components:E}]},(g,p)=>{if($f(c)){const C=p(s,c.config,c.validated);return c.validated.preprocess.getOr(St)(C)}else return p(s)}),_2=(t,s,c,i)=>te(c,d=>O2(t,s,d,i)),R5=(t,s)=>{let c=!1;const i=()=>c,d=()=>{if(c)throw new Error("Trying to use the same placeholder more than once: "+t);return c=!0,s},g=()=>s.fold((p,C)=>p,(p,C)=>p);return{name:G(t),required:g,used:i,replace:d}},L4=(t,s,c,i)=>{const d=mo(i,(p,C)=>R5(C,p)),g=_2(t,s,c,d);return ko(d,p=>{if(p.used()===!1&&p.required())throw new Error("Placeholder: "+p.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),g},Vb=bd.single,Ub=bd.multiple,NS=G(pd),Wb=nc.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),If=Re("factory",{sketch:St}),M1=Re("schema",[]),vd=ct("name"),Zb=Vc("pname","pname",ai(t=>"<alloy."+nt(t.name)+">"),pt()),H4=_a("schema",()=>[$s("preprocess")]),jb=Re("defaults",G({})),Gb=Re("overrides",G({})),PS=Un([If,M1,vd,Zb,jb,Gb]),z4=Un([If,M1,vd,jb,Gb]),up=Un([If,M1,vd,Zb,jb,Gb]),$S=Un([If,H4,vd,ct("unit"),Zb,jb,Gb]),om=t=>t.fold(k.some,k.none,k.some,k.some),dp=t=>{const s=c=>c.name;return t.fold(s,s,s,s)},qb=t=>t.fold(St,St,St,St),sm=(t,s)=>c=>{const i=Ti("Converting part type",s,c);return t(i)},fi=sm(Wb.required,PS),Ji=sm(Wb.external,z4),Qi=sm(Wb.optional,up),Kb=sm(Wb.group,$S),R2=G("entirety");var mp=Object.freeze({__proto__:null,required:fi,external:Ji,optional:Qi,group:Kb,asNamedPart:om,name:dp,asCommon:qb,original:R2});const rm=(t,s,c,i)=>ht(s.defaults(t,c,i),c,{uid:t.partUids[s.name]},s.overrides(t,c,i)),V4=(t,s,c)=>{const i={},d={};return Ve(c,g=>{g.fold(p=>{i[p.pname]=Vb(!0,(C,S,E)=>p.factory.sketch(rm(C,p,S,E)))},p=>{const C=s.parts[p.name];d[p.name]=G(p.factory.sketch(rm(s,p,C[R2()]),C))},p=>{i[p.pname]=Vb(!1,(C,S,E)=>p.factory.sketch(rm(C,p,S,E)))},p=>{i[p.pname]=Ub(!0,(C,S,E)=>{const O=C[p.name];return Ae(O,B=>p.factory.sketch(ht(p.defaults(C,B,E),B,p.overrides(C,B))))})})}),{internals:G(i),externals:G(d)}},Sc=(t,s)=>{const c={};return Ve(s,i=>{om(i).each(d=>{const g=Yb(t,d.pname);c[d.name]=p=>{const C=Ti("Part: "+d.name+" in "+t,Un(d.schema),p);return{...g,config:p,validated:C}}})}),c},Yb=(t,s)=>({uiType:NS(),owner:t,name:s}),ki=(t,s,c)=>({uiType:NS(),owner:t,name:s,config:c,validated:{}}),IS=t=>te(t,s=>s.fold(k.none,k.some,k.none,k.none).map(c=>Wm(c.name,c.schema.concat([lp(R2())]))).toArray()),LS=t=>Ae(t,dp),Lf=(t,s,c)=>V4(t,s,c),Xm=(t,s,c)=>L4(k.some(t),s,s.components,c),Cs=(t,s,c)=>{const i=s.partUids[c];return t.getSystem().getByUid(i).toOptional()},ja=(t,s,c)=>Cs(t,s,c).getOrDie("Could not find part: "+c),F1=(t,s,c)=>{const i={},d=s.partUids,g=t.getSystem();return Ve(c,p=>{i[p]=G(g.getByUid(d[p]))}),i},Xb=(t,s)=>{const c=t.getSystem();return mo(s.partUids,(i,d)=>G(c.getByUid(i)))},Jb=t=>zn(t.partUids),N1=(t,s,c)=>{const i={},d=s.partUids,g=t.getSystem();return Ve(c,p=>{i[p]=G(g.getByUid(d[p]).getOrDie())}),i},HS=(t,s)=>{const c=LS(s);return A1(Ae(c,i=>({key:i,value:t+"-"+i})))},cm=t=>Vc("partUids","partUids",Qd(s=>HS(s.uid,t)),pt());var Hf=Object.freeze({__proto__:null,generate:Sc,generateOne:ki,schemas:IS,names:LS,substitutes:Lf,components:Xm,defaultUids:HS,defaultUidsSchema:cm,getAllParts:Xb,getAllPartNames:Jb,getPart:Cs,getPartOrDie:ja,getParts:F1,getPartsOrDie:N1});const B2=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],El=(t,s,c,i=1)=>{const d=t*i,g=s*i,p=S=>on(c,S).getOr([]),C=(S,E,O)=>{const B=Ce(B2,O);return{offset:Ts(S,E),classesOn:te(O,p),classesOff:te(B,p)}};return{southeast:()=>C(-t,s,["top","alignLeft"]),southwest:()=>C(t,s,["top","alignRight"]),south:()=>C(-t/2,s,["top","alignCentre"]),northeast:()=>C(-t,-s,["bottom","alignLeft"]),northwest:()=>C(t,-s,["bottom","alignRight"]),north:()=>C(-t/2,-s,["bottom","alignCentre"]),east:()=>C(t,-s/2,["valignCentre","left"]),west:()=>C(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>C(d,g,["top","alignLeft","inset"]),insetNorthwest:()=>C(-d,g,["top","alignRight","inset"]),insetNorth:()=>C(-d/2,g,["top","alignCentre","inset"]),insetSoutheast:()=>C(d,-g,["bottom","alignLeft","inset"]),insetSouthwest:()=>C(-d,-g,["bottom","alignRight","inset"]),insetSouth:()=>C(-d/2,-g,["bottom","alignCentre","inset"]),insetEast:()=>C(-d,-g/2,["valignCentre","right","inset"]),insetWest:()=>C(d,-g/2,["valignCentre","left","inset"])}},fp=()=>El(0,0,{}),gc=(t,s,c,i,d,g,p,C=!1)=>({x:t,y:s,bubble:c,direction:i,placement:d,restriction:g,label:`${p}-${d}`,alwaysFit:C}),Di=nc.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Qb=(t,s,c,i,d,g,p,C,S)=>t.fold(s,c,i,d,g,p,C,S),zS=(t,s,c,i)=>t.fold(s,s,i,i,s,i,c,c),M2=(t,s,c,i)=>t.fold(s,i,s,i,c,c,s,i),zf=Di.southeast,qg=Di.southwest,F2=Di.northeast,N2=Di.northwest,P1=Di.south,P2=Di.north,Vf=Di.east,Jm=Di.west,VS=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},Ca=(t,s)=>_t(["left","right","top","bottom"],c=>on(s,c).map(i=>VS(t,i))),US=(t,s,c)=>{const i=(S,E)=>s[S].map(O=>{const B=S==="top"||S==="bottom",I=B?c.top:c.left,j=(S==="left"||S==="top"?Math.max:Math.min)(O,E)+I;return B?Jn(j,t.y,t.bottom):Jn(j,t.x,t.right)}).getOr(E),d=i("left",t.x),g=i("top",t.y),p=i("right",t.right),C=i("bottom",t.bottom);return wc(d,g,p-d,C-g)},Uf="layout",WS=t=>t.x,ev=(t,s)=>t.x+t.width/2-s.width/2,$2=(t,s)=>t.x+t.width-s.width,$1=(t,s)=>t.y-s.height,I2=t=>t.y+t.height,ZS=(t,s)=>t.y+t.height/2-s.height/2,jS=t=>t.x+t.width,I1=(t,s)=>t.x-s.width,xc=(t,s,c)=>gc(WS(t),I2(t),c.southeast(),zf(),"southeast",Ca(t,{left:1,top:3}),Uf),br=(t,s,c)=>gc($2(t,s),I2(t),c.southwest(),qg(),"southwest",Ca(t,{right:0,top:3}),Uf),wa=(t,s,c)=>gc(WS(t),$1(t,s),c.northeast(),F2(),"northeast",Ca(t,{left:1,bottom:2}),Uf),Mc=(t,s,c)=>gc($2(t,s),$1(t,s),c.northwest(),N2(),"northwest",Ca(t,{right:0,bottom:2}),Uf),Wc=(t,s,c)=>gc(ev(t,s),$1(t,s),c.north(),P2(),"north",Ca(t,{bottom:2}),Uf),hc=(t,s,c)=>gc(ev(t,s),I2(t),c.south(),P1(),"south",Ca(t,{top:3}),Uf),tv=(t,s,c)=>gc(jS(t),ZS(t,s),c.east(),Vf(),"east",Ca(t,{left:0}),Uf),nv=(t,s,c)=>gc(I1(t,s),ZS(t,s),c.west(),Jm(),"west",Ca(t,{right:1}),Uf),ov=()=>[xc,br,wa,Mc,hc,Wc,tv,nv],GS=()=>[br,xc,Mc,wa,hc,Wc,tv,nv],sv=()=>[wa,Mc,xc,br,Wc,hc],qS=()=>[Mc,wa,br,xc,Wc,hc],Kg=()=>[xc,br,wa,Mc,hc,Wc],L2=()=>[br,xc,Mc,wa,hc,Wc],Yg="data-alloy-placement",rv=(t,s)=>{$n(t,Yg,s)},H2=t=>Lc(t,Yg),cv=t=>ir(t,Yg),yd="layout-inset",L1=t=>t.x,z2=(t,s)=>t.x+t.width/2-s.width/2,gp=(t,s)=>t.x+t.width-s.width,H1=t=>t.y,av=(t,s)=>t.y+t.height-s.height,V2=(t,s)=>t.y+t.height/2-s.height/2,Nu=(t,s,c)=>gc(gp(t,s),av(t,s),c.insetSouthwest(),N2(),"southwest",Ca(t,{right:0,bottom:3}),yd),am=(t,s,c)=>gc(L1(t),av(t,s),c.insetSoutheast(),F2(),"southeast",Ca(t,{left:1,bottom:3}),yd),hp=(t,s,c)=>gc(gp(t,s),H1(t),c.insetNorthwest(),qg(),"northwest",Ca(t,{right:0,top:2}),yd),Le=(t,s,c)=>gc(L1(t),H1(t),c.insetNortheast(),zf(),"northeast",Ca(t,{left:1,top:2}),yd),Oi=(t,s,c)=>gc(z2(t,s),H1(t),c.insetNorth(),P1(),"north",Ca(t,{top:2}),yd),pp=(t,s,c)=>gc(z2(t,s),av(t,s),c.insetSouth(),P2(),"south",Ca(t,{bottom:3}),yd),z1=(t,s,c)=>gc(gp(t,s),V2(t,s),c.insetEast(),Jm(),"east",Ca(t,{right:0}),yd),iv=(t,s,c)=>gc(L1(t),V2(t,s),c.insetWest(),Vf(),"west",Ca(t,{left:1}),yd),Cd=t=>{switch(t){case"north":return Oi;case"northeast":return Le;case"northwest":return hp;case"south":return pp;case"southeast":return am;case"southwest":return Nu;case"east":return z1;case"west":return iv}},Ga=(t,s,c,i,d)=>H2(i).map(Cd).getOr(Oi)(t,s,c,i,d),V1=t=>{switch(t){case"north":return pp;case"northeast":return am;case"northwest":return Nu;case"south":return Oi;case"southeast":return Le;case"southwest":return hp;case"east":return iv;case"west":return z1}},KS=(t,s,c,i,d)=>H2(i).map(V1).getOr(Oi)(t,s,c,i,d),lv=(t,s)=>{Cu(t,Math.floor(s))},YS=G((t,s)=>{lv(t,s),Sr(t,{"overflow-x":"hidden","overflow-y":"auto"})}),Xg=G((t,s)=>{lv(t,s)}),U2=G((t,s)=>{e2(t,Math.floor(s))});var im;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(im||(im={}));const W2="data-alloy-vertical-dir",XS=t=>qh(t,s=>ti(s)&&Cc(s,"data-alloy-vertical-dir")===im.BottomToTop);var qa;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(qa||(qa={}));const wd={init:()=>el({readState:G("No State required")})},el=t=>t,uv={can:rt,abort:qe,run:re},bp=t=>{if(!yo(t,"can")&&!yo(t,"abort")&&!yo(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...uv,...t}},JS=(t,s)=>(...c)=>co(t,(i,d)=>i&&s(d).apply(void 0,c),!0),U4=(t,s)=>(...c)=>co(t,(i,d)=>i||s(d).apply(void 0,c),!1),Z2=t=>dt(t)?{can:rt,abort:qe,run:t}:t,QS=t=>{const s=JS(t,d=>d.can),c=U4(t,d=>d.abort);return{can:s,abort:c,run:(...d)=>{Ve(t,g=>{g.run.apply(void 0,d)})}}},Do=(t,s)=>{j2(t,t.element,s,{})},On=(t,s,c)=>{j2(t,t.element,s,c)},U1=t=>{Do(t,Yi())},dv=(t,s,c)=>{j2(t,s,c,{})},j2=(t,s,c,i)=>{const d={target:s,...i};t.getSystem().triggerEvent(c,s,d)},W4=(t,s,c,i)=>{const d={...i,target:s};t.getSystem().triggerEvent(c,s,d)},G2=(t,s,c,i)=>{t.getSystem().triggerEvent(c,s,i.event)},vr=t=>A1(t),mv=(t,s)=>({key:t,value:bp({abort:s})}),W1=(t,s)=>({key:t,value:bp({can:s})}),Jg=t=>({key:t,value:bp({run:(s,c)=>{c.event.prevent()}})}),We=(t,s)=>({key:t,value:bp({run:s})}),fv=(t,s,c)=>({key:t,value:bp({run:(i,d)=>{s.apply(void 0,[i,d].concat(c))}})}),ex=t=>s=>We(t,s),gv=t=>s=>({key:t,value:bp({run:(c,i)=>{a2(c,i)&&s(c,i)}})}),tx=(t,s)=>We(t,(c,i)=>{c.getSystem().getByUid(s).each(d=>{G2(d,d.element,t,i)})}),Qm=(t,s,c)=>{const i=s.partUids[c];return tx(t,i)},Qg=(t,s)=>We(t,(c,i)=>{const d=i.event,g=c.getSystem().getByDom(d.target).getOrThunk(()=>yl(d.target,C=>c.getSystem().getByDom(C).toOptional(),qe).getOr(c));s(c,g,i)}),eh=t=>We(t,(s,c)=>{c.cut()}),q2=t=>We(t,(s,c)=>{c.stop()}),th=(t,s)=>gv(t)(s),ur=gv(hd()),Sd=gv(Km()),nx=gv($b()),ef=ex(Yi()),Pu=t=>({classes:Fn(t.classes)?[]:t.classes,attributes:Fn(t.attributes)?{}:t.attributes,styles:Fn(t.styles)?{}:t.styles}),Z4=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),j4=(t,s,c)=>ef(i=>{c(i,t,s)}),K2=(t,s,c)=>nx((i,d)=>{c(i,t,s)}),G4=(t,s,c,i,d,g)=>{const p=Cl(t),C=Ki(s,[x2("config",t)]);return Y2(p,C,s,c,i,d,g)},q4=(t,s,c,i,d,g)=>{const p=t,C=Ki(s,[Du("config",t)]);return Y2(p,C,s,c,i,d,g)},K4=(t,s,c)=>_S((d,...g)=>{const p=[d].concat(g);return d.config({name:G(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+c)},C=>{const S=Array.prototype.slice.call(p,1);return s.apply(void 0,[d,C.config,C.state].concat(S))})},c,s),Y4=t=>({key:t,value:void 0}),Y2=(t,s,c,i,d,g,p)=>{const C=B=>yo(B,c)?B[c]():k.none(),S=mo(d,(B,I)=>K4(c,B,I)),O={...mo(g,(B,I)=>BS(B,I)),...S,revoke:pn(Y4,c),config:B=>{const I=Ti(c+"-config",t,B);return{key:c,value:{config:I,me:O,configAsRaw:ka(()=>Ti(c+"-config",t,B)),initialConfig:B,state:p}}},schema:G(s),exhibit:(B,I)=>To(C(B),on(i,"exhibit"),(U,j)=>j(I,U.config,U.state)).getOrThunk(()=>Pu({})),name:G(c),handlers:B=>C(B).map(I=>on(i,"events").getOr(()=>({}))(I.config,I.state)).getOr({})};return O},Et=t=>A1(t),ox=Cl([ct("fields"),ct("name"),Re("active",{}),Re("apis",{}),Re("state",wd),Re("extra",{})]),sa=t=>{const s=Ti("Creating behaviour: "+t.name,ox,t);return G4(s.fields,s.name,s.active,s.apis,s.extra,s.state)},sx=Cl([ct("branchKey"),ct("branches"),ct("name"),Re("active",{}),Re("apis",{}),Re("state",wd),Re("extra",{})]),rx=t=>{const s=Ti("Creating behaviour: "+t.name,sx,t);return q4(ui(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},cx=G(void 0),X4=(t,s)=>{const c=vr(s);return sa({fields:[ct("enabled")],name:t,active:{events:G(c)}})},Qn=(t,s)=>{const c=X4(t,s);return{key:t,value:{config:{},me:c,configAsRaw:G({}),initialConfig:{},state:wd}}},X2=t=>({init:()=>{const c=qt(t);return{get:()=>c.get(),set:C=>c.set(C),clear:()=>c.set(t),readState:()=>c.get()}}}),ax=(t,s)=>{s.ignore||(kc(t.element),s.onFocus(t))};var ix=Object.freeze({__proto__:null,focus:ax,blur:(t,s)=>{s.ignore||Er(t.element)},isFocused:t=>hl(t.element)}),lx=Object.freeze({__proto__:null,exhibit:(t,s)=>{const c=s.ignore?{}:{attributes:{tabindex:"-1"}};return Pu(c)},events:t=>vr([We(tm(),(s,c)=>{ax(s,t),c.stop()})].concat(t.stopMousedown?[We(mi(),(s,c)=>{c.event.prevent()})]:[]))}),J2=[os("onFocus"),Re("stopMousedown",!1),Re("ignore",!1)];const to=sa({fields:J2,name:"focusing",active:lx,apis:ix}),Q2=[8],tf=[9],Tl=[13],Kt=[27],Ka=[32],Z1=[37],j1=[38],hv=[39],vp=[40],G1=G("tooltipping.close.all"),nf=G("dismiss.popups"),Ba=G("reposition.popups"),lm=G("mouse.released"),e3=(t,s,c)=>{const i=Ee(t.slice(0,s)),d=Ee(t.slice(s+1));return De(i.concat(d),c)},Sa=(t,s,c)=>{const i=Ee(t.slice(0,s));return De(i,c)},yp=(t,s,c)=>{const i=t.slice(0,s),d=t.slice(s+1);return De(d.concat(i),c)},t3=(t,s,c)=>{const i=t.slice(s+1);return De(i,c)},es=t=>s=>{const c=s.raw;return Je(t,c.which)},xd=t=>s=>Dt(t,c=>c(s)),nh=t=>t.raw.shiftKey===!0,F5=t=>t.raw.ctrlKey===!0,oh=xe(nh),ss=(t,s)=>({matches:t,classification:s}),N5=(t,s)=>De(t,i=>i.matches(s)).map(i=>i.classification),ux=(t,s,c,i)=>{const d=_c(t.element,"."+s.highlightClass);Ve(d,g=>{Bt(i,C=>Jo(C.element,g))||(Tr(g,s.highlightClass),t.getSystem().getByDom(g).each(C=>{s.onDehighlight(t,C),Do(C,Lb())}))})},P5=(t,s,c)=>ux(t,s,c,[]),$5=(t,s,c,i)=>{K1(t,s,c,i)&&(Tr(i.element,s.highlightClass),s.onDehighlight(t,i),Do(i,Lb()))},q1=(t,s,c,i)=>{ux(t,s,c,[i]),K1(t,s,c,i)||(Ps(i.element,s.highlightClass),s.onHighlight(t,i),Do(i,jg()))},n3=(t,s,c)=>{Y1(t,s).each(i=>{q1(t,s,c,i)})},I5=(t,s,c)=>{tC(t,s).each(i=>{q1(t,s,c,i)})},pv=(t,s,c,i)=>{o3(t,s,c,i).fold(d=>{throw d},d=>{q1(t,s,c,d)})},eC=(t,s,c,i)=>{const d=gx(t,s);De(d,i).each(p=>{q1(t,s,c,p)})},K1=(t,s,c,i)=>Xr(i.element,s.highlightClass),dx=(t,s,c)=>As(t.element,"."+s.highlightClass).bind(i=>t.getSystem().getByDom(i).toOptional()),o3=(t,s,c,i)=>{const d=_c(t.element,"."+s.itemClass);return k.from(d[i]).fold(()=>Yt.error(new Error("No element found with index "+i)),t.getSystem().getByDom)},Y1=(t,s,c)=>As(t.element,"."+s.itemClass).bind(i=>t.getSystem().getByDom(i).toOptional()),tC=(t,s,c)=>{const i=_c(t.element,"."+s.itemClass);return(i.length>0?k.some(i[i.length-1]):k.none()).bind(g=>t.getSystem().getByDom(g).toOptional())},nC=(t,s,c,i)=>{const d=_c(t.element,"."+s.itemClass);return ve(d,p=>Xr(p,s.highlightClass)).bind(p=>{const C=kn(p,i,0,d.length-1);return t.getSystem().getByDom(d[C]).toOptional()})},mx=(t,s,c)=>nC(t,s,c,-1),fx=(t,s,c)=>nC(t,s,c,1),gx=(t,s,c)=>{const i=_c(t.element,"."+s.itemClass);return Cn(Ae(i,d=>t.getSystem().getByDom(d).toOptional()))};var oC=Object.freeze({__proto__:null,dehighlightAll:P5,dehighlight:$5,highlight:q1,highlightFirst:n3,highlightLast:I5,highlightAt:pv,highlightBy:eC,isHighlighted:K1,getHighlighted:dx,getFirst:Y1,getLast:tC,getPrevious:mx,getNext:fx,getCandidates:gx}),sC=[ct("highlightClass"),ct("itemClass"),os("onHighlight"),os("onDehighlight")];const hs=sa({fields:sC,name:"highlighting",apis:oC}),hx=(t,s,c)=>{s.exists(d=>c.exists(g=>Jo(g,d)))||On(t,D1(),{prevFocus:s,newFocus:c})},bv=()=>{const t=c=>Kr(c.element);return{get:t,set:(c,i)=>{const d=t(c);c.getSystem().triggerFocus(i,c.element);const g=t(c);hx(c,d,g)}}},rC=()=>{const t=c=>hs.getHighlighted(c).map(i=>i.element);return{get:t,set:(c,i)=>{const d=t(c);c.getSystem().getByDom(i).fold(re,p=>{hs.highlight(c,p)});const g=t(c);hx(c,d,g)}}},eu=(t,s,c,i,d)=>{const g=()=>t.concat([Re("focusManager",bv()),di("focusInside","onFocus",Rf(E=>Je(["onFocus","onEnterOrSpace","onApi"],E)?Yt.value(E):Yt.error("Invalid value for focusInside"))),pr("handler",S),pr("state",s),pr("sendFocusIn",d)]),p=(E,O,B,I,U)=>{const j=B(E,O,I,U);return N5(j,O.event).bind(Q=>Q(E,O,I,U))},S={schema:g,processKey:p,toEvents:(E,O)=>{const B=E.focusInside!==Fu.OnFocusMode?k.none():d(E).map(j=>We(tm(),(Q,ie)=>{j(Q,E,O),ie.stop()})),I=(j,Q)=>{const ie=es(Ka.concat(Tl))(Q.event);E.focusInside===Fu.OnEnterOrSpaceMode&&ie&&a2(j,Q)&&d(E).each(X=>{X(j,E,O),Q.stop()})},U=[We(Uc(),(j,Q)=>{p(j,Q,c,E,O).fold(()=>{I(j,Q)},ie=>{Q.stop()})}),We(ip(),(j,Q)=>{p(j,Q,i,E,O).each(ie=>{Q.stop()})})];return vr(B.toArray().concat(U))}};return S},px=t=>{const s=[$s("onEscape"),$s("onEnter"),Re("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),Re("firstTabstop",0),Re("useTabstopAt",rt),$s("visibilitySelector")].concat([t]),c=(X,he)=>{const we=X.visibilitySelector.bind(Me=>ga(he,Me)).getOr(he);return ac(we)>0},i=(X,he)=>{const we=_c(X.element,he.selector),Me=jn(we,Fe=>c(he,Fe));return k.from(Me[he.firstTabstop])},d=(X,he)=>he.focusManager.get(X).bind(we=>ga(we,he.selector)),g=(X,he)=>c(X,he)&&X.useTabstopAt(he),p=(X,he,we)=>{i(X,he).each(Me=>{he.focusManager.set(X,Me)})},C=(X,he,we,Me,Fe)=>Fe(he,we,Mt=>g(Me,Mt)).fold(()=>Me.cyclic?k.some(!0):k.none(),Mt=>(Me.focusManager.set(X,Mt),k.some(!0))),S=(X,he,we,Me)=>{const Fe=jn(_c(X.element,we.selector),Mt=>c(we,Mt));return d(X,we).bind(Mt=>ve(Fe,pn(Jo,Mt)).bind(vt=>C(X,Fe,vt,we,Me)))},E=(X,he,we)=>{const Me=we.cyclic?e3:Sa;return S(X,he,we,Me)},O=(X,he,we)=>{const Me=we.cyclic?yp:t3;return S(X,he,we,Me)},B=X=>c1(X).bind(Io).exists(he=>Jo(he,X)),I=(X,he,we)=>d(X,we).filter(Me=>!we.useTabstopAt(Me)).bind(Me=>(B(Me)?E:O)(X,he,we)),U=(X,he,we)=>we.onEnter.bind(Me=>Me(X,he)),j=(X,he,we)=>(X.getSystem().broadcastOn([G1()],{closedTooltip:()=>{he.stop()}}),he.isStopped()?k.none():we.onEscape.bind(Me=>Me(X,he))),Q=G([ss(xd([nh,es(tf)]),E),ss(es(tf),O),ss(xd([oh,es(Tl)]),U)]),ie=G([ss(es(Kt),j),ss(es(tf),I)]);return eu(s,wd.init,Q,ie,()=>k.some(p))};var cC=px(_a("cyclic",qe)),s3=px(_a("cyclic",rt));const um=t=>da("input")(t)&&Cc(t,"type")!=="radio"||da("textarea")(t),r3=(t,s,c)=>(dv(t,c,Yi()),k.some(!0)),X1=(t,s,c)=>um(c)&&es(Ka)(s.event)?k.none():r3(t,s,c),J1=(t,s)=>k.some(!0),c3=[Re("execute",X1),Re("useSpace",!1),Re("useEnter",!0),Re("useControlEnter",!1),Re("useDown",!1)],Wf=(t,s,c)=>c.execute(t,s,t.element),vv=(t,s,c,i)=>{const d=c.useSpace&&!um(t.element)?Ka:[],g=c.useEnter?Tl:[],p=c.useDown?vp:[],C=d.concat(g).concat(p);return[ss(es(C),Wf)].concat(c.useControlEnter?[ss(xd([F5,es(Tl)]),Wf)]:[])},bx=(t,s,c,i)=>c.useSpace&&!um(t.element)?[ss(es(Ka),J1)]:[];var a3=eu(c3,wd.init,vv,bx,()=>k.none());const vx=()=>{const t=Ln();return el({readState:()=>t.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,g)=>{t.set({numRows:d,numColumns:g})},getNumRows:()=>t.get().map(d=>d.numRows),getNumColumns:()=>t.get().map(d=>d.numColumns)})};var yx=Object.freeze({__proto__:null,flatgrid:vx,init:t=>t.state(t)});const Cx=t=>(s,c,i,d)=>{const g=t(s.element);return sh(g,s,c,i,d)},Q1=(t,s)=>{const c=g1(t,s);return Cx(c)},e0=(t,s)=>{const c=g1(s,t);return Cx(c)},t0=t=>(s,c,i,d)=>sh(t,s,c,i,d),sh=(t,s,c,i,d)=>i.focusManager.get(s).bind(p=>t(s.element,p,i,d)).map(p=>(i.focusManager.set(s,p),!0)),yv=t0,n0=t0,of=t0,o0=(t,s)=>ve(t,s).map(c=>({index:c,candidates:t})),aC=(t,s,c)=>{const i=p=>Jo(p,s),d=_c(t,c),g=jn(d,id);return o0(g,i)},Cv=(t,s)=>ve(t,c=>Jo(s,c)),wx=(t,s,c,i)=>{const d=Math.floor(s/c),g=s%c;return i(d,g).bind(p=>{const C=p.row*c+p.column;return C>=0&&C<t.length?k.some(t[C]):k.none()})},Sx=(t,s,c,i,d)=>wx(t,s,i,(g,p)=>{const S=g===c-1?t.length-g*i:i,E=kn(p,d,0,S-1);return k.some({row:g,column:E})}),xx=(t,s,c,i,d)=>wx(t,s,i,(g,p)=>{const C=kn(g,d,0,c-1),E=C===c-1?t.length-C*i:i,O=Jn(p,0,E-1);return k.some({row:C,column:O})}),i3=(t,s,c,i)=>Sx(t,s,c,i,1),wv=(t,s,c,i)=>Sx(t,s,c,i,-1),Cp=(t,s,c,i)=>xx(t,s,c,i,-1),rh=(t,s,c,i)=>xx(t,s,c,i,1),ch=[ct("selector"),Re("execute",X1),fc("onEscape"),Re("captureTab",!1),zb()],Ex=(t,s,c)=>{As(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},Tx=(t,s)=>s.focusManager.get(t).bind(c=>ga(c,s.selector)),Ax=(t,s,c,i)=>Tx(t,c).bind(d=>c.execute(t,s,d)),Sv=t=>(s,c,i,d)=>aC(s,c,i.selector).bind(g=>t(g.candidates,g.index,d.getNumRows().getOr(i.initSize.numRows),d.getNumColumns().getOr(i.initSize.numColumns))),kx=(t,s,c)=>c.captureTab?k.some(!0):k.none(),l3=(t,s,c)=>c.onEscape(t,s),Dx=Sv(wv),xv=Sv(i3),iC=Sv(Cp),Ev=Sv(rh),lC=G([ss(es(Z1),Q1(Dx,xv)),ss(es(hv),e0(Dx,xv)),ss(es(j1),yv(iC)),ss(es(vp),n0(Ev)),ss(xd([nh,es(tf)]),kx),ss(xd([oh,es(tf)]),kx),ss(es(Ka.concat(Tl)),Ax)]),u3=G([ss(es(Kt),l3),ss(es(Ka),J1)]);var uC=eu(ch,vx,lC,u3,()=>k.some(Ex));const Ox=(t,s,c,i,d)=>{const g=C=>ml(C)==="button"&&Cc(C,"disabled")==="disabled",p=(C,S,E)=>d(C,S,i,0,E.length-1,E[S],O=>g(E[O])?p(C,O,E):k.from(E[O]));return aC(t,c,s).bind(C=>{const S=C.index,E=C.candidates;return p(S,S,E)})},_x=(t,s,c,i)=>Ox(t,s,c,i,(d,g,p,C,S,E,O)=>{const B=Jn(g+p,C,S);return B===d?k.from(E):O(B)}),s0=(t,s,c,i)=>Ox(t,s,c,i,(d,g,p,C,S,E,O)=>{const B=kn(g,p,C,S);return B===d?k.none():O(B)}),d3=[ct("selector"),Re("getInitial",k.none),Re("execute",X1),fc("onEscape"),Re("executeOnMove",!1),Re("allowVertical",!0),Re("allowHorizontal",!0),Re("cycles",!0)],dC=(t,s)=>s.focusManager.get(t).bind(c=>ga(c,s.selector)),mC=(t,s,c)=>dC(t,c).bind(i=>c.execute(t,s,i)),m3=(t,s,c)=>{s.getInitial(t).orThunk(()=>As(t.element,s.selector)).each(i=>{s.focusManager.set(t,i)})},f3=(t,s,c)=>(c.cycles?s0:_x)(t,c.selector,s,-1),ah=(t,s,c)=>(c.cycles?s0:_x)(t,c.selector,s,1),Rx=t=>(s,c,i,d)=>t(s,c,i,d).bind(()=>i.executeOnMove?mC(s,c,i):k.some(!0)),Bx=(t,s,c)=>c.onEscape(t,s),g3=(t,s,c,i)=>{const d=[...c.allowHorizontal?Z1:[]].concat(c.allowVertical?j1:[]),g=[...c.allowHorizontal?hv:[]].concat(c.allowVertical?vp:[]);return[ss(es(d),Rx(Q1(f3,ah))),ss(es(g),Rx(e0(f3,ah))),ss(es(Tl),mC),ss(es(Ka),mC)]},h3=G([ss(es(Ka),J1),ss(es(Kt),Bx)]);var p3=eu(d3,wd.init,g3,h3,()=>k.some(m3));const Tv=(t,s,c)=>k.from(t[s]).bind(i=>k.from(i[c]).map(d=>({rowIndex:s,columnIndex:c,cell:d}))),r0=(t,s,c,i)=>{const g=t[s].length,p=kn(c,i,0,g-1);return Tv(t,s,p)},fC=(t,s,c,i)=>{const d=kn(c,i,0,t.length-1),g=t[d].length,p=Jn(s,0,g-1);return Tv(t,d,p)},c0=(t,s,c,i)=>{const g=t[s].length,p=Jn(c+i,0,g-1);return Tv(t,s,p)},Mx=(t,s,c,i)=>{const d=Jn(c+i,0,t.length-1),g=t[d].length,p=Jn(s,0,g-1);return Tv(t,d,p)},a0=(t,s,c)=>r0(t,s,c,1),b3=(t,s,c)=>r0(t,s,c,-1),Av=(t,s,c)=>fC(t,c,s,-1),v3=(t,s,c)=>fC(t,c,s,1),Fx=(t,s,c)=>c0(t,s,c,-1),H5=(t,s,c)=>c0(t,s,c,1),y3=(t,s,c)=>Mx(t,c,s,-1),ih=(t,s,c)=>Mx(t,c,s,1),kv=[Wm("selectors",[ct("row"),ct("cell")]),Re("cycles",!0),Re("previousSelector",k.none),Re("execute",X1)],Dv=(t,s,c)=>{s.previousSelector(t).orThunk(()=>{const d=s.selectors;return As(t.element,d.cell)}).each(d=>{s.focusManager.set(t,d)})},Nx=(t,s,c)=>Kr(t.element).bind(i=>c.execute(t,s,i)),C3=(t,s)=>Ae(t,c=>_c(c,s.selectors.cell)),Ov=(t,s)=>(c,i,d)=>{const g=d.cycles?t:s;return ga(i,d.selectors.row).bind(p=>{const C=_c(p,d.selectors.cell);return Cv(C,i).bind(S=>{const E=_c(c,d.selectors.row);return Cv(E,p).bind(O=>{const B=C3(E,d);return g(B,O,S).map(I=>I.cell)})})})},Px=Ov(b3,Fx),$x=Ov(a0,H5),_v=Ov(Av,y3),dm=Ov(v3,ih),Ix=G([ss(es(Z1),Q1(Px,$x)),ss(es(hv),e0(Px,$x)),ss(es(j1),yv(_v)),ss(es(vp),n0(dm)),ss(es(Ka.concat(Tl)),Nx)]),w3=G([ss(es(Ka),J1)]);var S3=eu(kv,wd.init,Ix,w3,()=>k.some(Dv));const x3=[ct("selector"),Re("execute",X1),Re("moveOnTab",!1)],wp=(t,s,c)=>c.focusManager.get(t).bind(i=>c.execute(t,s,i)),Lx=(t,s,c)=>{As(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},gC=(t,s,c)=>s0(t,c.selector,s,-1),Rv=(t,s,c)=>s0(t,c.selector,s,1),Ed=(t,s,c,i)=>c.moveOnTab?of(gC)(t,s,c,i):k.none(),i0=(t,s,c,i)=>c.moveOnTab?of(Rv)(t,s,c,i):k.none(),mm=G([ss(es(j1),of(gC)),ss(es(vp),of(Rv)),ss(xd([nh,es(tf)]),Ed),ss(xd([oh,es(tf)]),i0),ss(es(Tl),wp),ss(es(Ka),wp)]),Bv=G([ss(es(Ka),J1)]);var Hx=eu(x3,wd.init,mm,Bv,()=>k.some(Lx));const zx=[fc("onSpace"),fc("onEnter"),fc("onShiftEnter"),fc("onLeft"),fc("onRight"),fc("onTab"),fc("onShiftTab"),fc("onUp"),fc("onDown"),fc("onEscape"),Re("stopSpaceKeyup",!1),$s("focusIn")],E3=(t,s,c)=>[ss(es(Ka),c.onSpace),ss(xd([oh,es(Tl)]),c.onEnter),ss(xd([nh,es(Tl)]),c.onShiftEnter),ss(xd([nh,es(tf)]),c.onShiftTab),ss(xd([oh,es(tf)]),c.onTab),ss(es(j1),c.onUp),ss(es(vp),c.onDown),ss(es(Z1),c.onLeft),ss(es(hv),c.onRight),ss(es(Ka),c.onSpace)],Vx=(t,s,c)=>[...c.stopSpaceKeyup?[ss(es(Ka),J1)]:[],ss(es(Kt),c.onEscape)];var T3=eu(zx,wd.init,E3,Vx,t=>t.focusIn);const A3=cC.schema(),k3=s3.schema(),Sp=p3.schema(),l0=uC.schema(),Ux=S3.schema(),u0=a3.schema(),D3=Hx.schema(),O3=T3.schema();var fm=Object.freeze({__proto__:null,acyclic:A3,cyclic:k3,flow:Sp,flatgrid:l0,matrix:Ux,execution:u0,menu:D3,special:O3});const Td=t=>yo(t,"setGridSize"),Sn=rx({branchKey:"mode",branches:fm,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,c)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},i=>{i(t,s,c)})},setGridSize:(t,s,c,i,d)=>{Td(c)?c.setGridSize(i,d):console.error("Layout does not support setGridSize")}},state:yx}),d0=nt("alloy-premade"),Wx=t=>(Object.defineProperty(t.element.dom,d0,{value:t.uid,writable:!0}),Zm(d0,t)),Zx=t=>So(t.dom,d0),lh=t=>on(t,d0),sf=t=>_5((s,...c)=>t(s.getApis(),s,...c),t),m0=t=>t.getSystem().isConnected(),xp=t=>{Do(t,Km());const s=t.components();Ve(s,xp)},Ad=t=>{const s=t.components();Ve(s,Ad),Do(t,hd())},Ep=(t,s)=>{t.getSystem().addToWorld(s),is(t.element)&&Ad(s)},hC=t=>{xp(t),t.getSystem().removeFromWorld(t)},Mv=(t,s)=>{Oc(t.element,s.element)},f0=t=>{Ve(t.components(),s=>Ui(s.element)),Wh(t.element),t.syncComponents()},jx=(t,s,c)=>{const i=t.components();f0(t);const d=c(s),g=Ce(i,d);Ve(g,p=>{xp(p),t.getSystem().removeFromWorld(p)}),Ve(d,p=>{m0(p)?Mv(t,p):(t.getSystem().addToWorld(p),Mv(t,p),is(t.element)&&Ad(p))}),t.syncComponents()},tl=(t,s,c)=>{const i=t.components(),d=te(s,C=>lh(C).toArray());Ve(i,C=>{Je(d,C)||hC(C)});const g=c(s),p=Ce(i,g);Ve(p,C=>{m0(C)&&hC(C)}),Ve(g,C=>{m0(C)||Ep(t,C)}),t.syncComponents()},gm=(t,s)=>{uh(t,s,Oc)},uh=(t,s,c)=>{t.getSystem().addToWorld(s),c(t.element,s.element),is(t.element)&&Ad(s),t.syncComponents()},$u=t=>{xp(t),Ui(t.element),t.getSystem().removeFromWorld(t)},hm=t=>{const s=oi(t.element).bind(c=>t.getSystem().getByDom(c).toOptional());$u(t),s.each(c=>{c.syncComponents()})},g0=t=>{const s=t.components();Ve(s,$u),Wh(t.element),t.syncComponents()},h0=(t,s)=>{pC(t,s,Oc)},pm=(t,s)=>{pC(t,s,l1)},pC=(t,s,c)=>{c(t,s.element);const i=zl(s.element);Ve(i,d=>{s.getByDom(d).each(Ad)})},Gx=t=>{const s=zl(t.element);Ve(s,c=>{t.getByDom(c).each(xp)}),Ui(t.element)},p0=(t,s,c)=>Vd(t,s).map(d=>{if(c.exists(p=>!Jo(p,d))){const p=c.map(ml).getOr("span"),C=At.fromTag(p);return Ud(d,C),C}else return d}),kd=(t,s,c)=>{c.fold(()=>Oc(t,s),i=>{Jo(i,s)||(Ud(i,s),Ui(i))})},qx=(t,s,c)=>{const i=Ae(s,c),d=zl(t);return Ve(d.slice(i.length),Ui),i},_3=(t,s,c,i)=>{const d=Vd(t,s),g=i(c,d),p=p0(t,s,d);return kd(t,g.element,p),g},R3=(t,s,c)=>qx(t,s,(i,d)=>_3(t,d,i,c)),Kx=(t,s)=>qx(t,s,(c,i)=>{const d=Vd(t,i);return kd(t,c,d),c}),dh=(t,s)=>{const c=oc(s),i=Dc(c).bind(g=>{const p=C=>Jo(g,C);return p(s)?k.some(s):p1(s,p)}),d=t(s);return i.each(g=>{Dc(c).filter(p=>Jo(p,g)).fold(()=>{kc(g)},re)}),d},Yx=(t,s)=>{dh(()=>{jx(t,s,()=>Ae(s,t.getSystem().build))},t.element)},Xx=(t,s)=>{dh(()=>{tl(t,s,()=>R3(t.element,s,t.getSystem().buildOrPatch))},t.element)},nl=(t,s,c,i)=>{hC(s);const d=_3(t.element,c,i,t.getSystem().buildOrPatch);Ep(t,d),t.syncComponents()},Zf=(t,s,c)=>{const i=t.getSystem().build(c);uh(t,i,s)},Fv=(t,s,c,i)=>{hm(s),Zf(t,(d,g)=>u1(d,g,c),i)},Tp=(t,s,c,i)=>(s.reuseDom?Xx:Yx)(t,i),_i=(t,s,c,i)=>{Zf(t,Oc,i)},ra=(t,s,c,i)=>{Zf(t,Uh,i)},ca=(t,s,c,i)=>{const d=ol(t);De(d,p=>Jo(i.element,p.element)).each(hm)},ol=(t,s)=>t.components(),Nv=(t,s,c,i,d)=>{const g=ol(t);return k.from(g[i]).map(p=>(d.fold(()=>hm(p),C=>{(s.reuseDom?nl:Fv)(t,p,i,C)}),p))};var jf=Object.freeze({__proto__:null,append:_i,prepend:ra,remove:ca,replaceAt:Nv,replaceBy:(t,s,c,i,d)=>{const g=ol(t);return ve(g,i).bind(p=>Nv(t,s,c,p,d))},set:Tp,contents:ol});const so=sa({fields:[va("reuseDom",!0)],name:"replacing",apis:jf}),bC=(t,s,c)=>Jo(s,t.element)&&!Jo(s,c),bm=vr([W1(tm(),(t,s)=>{const c=s.event,i=c.originator,d=c.target;return bC(t,i,d)?(console.warn(tm()+` did not get interpreted by the desired target. 
Originator: `+Jl(i)+`
Target: `+Jl(d)+`
Check the `+tm()+" event handlers"),!1):!0})]);var Jx=Object.freeze({__proto__:null,events:bm});const Qx=G("alloy-id-"),Pv=G("data-alloy-id"),eE=Qx(),tE=Pv(),nE=(t,s)=>{const c=nt(eE+t);return $v(s,c),c},$v=(t,s)=>{Object.defineProperty(t.dom,tE,{value:s,writable:!0})},Dd=t=>{const s=ti(t)?t.dom[tE]:null;return k.from(s)},mh=t=>nt(t),oE=St,Ap=t=>{const s=d=>`The component must be in a context to execute: ${d}`+(t?`
`+Jl(t().element)+" is not in context.":""),c=d=>()=>{throw new Error(s(d))},i=d=>()=>{console.warn(s(d))};return{debugInfo:G("fake"),triggerEvent:i("triggerEvent"),triggerFocus:i("triggerFocus"),triggerEscape:i("triggerEscape"),broadcast:i("broadcast"),broadcastOn:i("broadcastOn"),broadcastEvent:i("broadcastEvent"),build:c("build"),buildOrPatch:c("buildOrPatch"),addToWorld:c("addToWorld"),removeFromWorld:c("removeFromWorld"),addToGui:c("addToGui"),removeFromGui:c("removeFromGui"),getByUid:c("getByUid"),getByDom:c("getByDom"),isConnected:qe}},sE=Ap(),Iv=(t,s)=>{const c=Ae(s,d=>Ki(d.name(),[ct("config"),Re("state",wd)])),i=Ir("component.behaviours",Un(c),t.behaviours).fold(d=>{throw new Error(Bf(d)+`
Complete spec:
`+JSON.stringify(t,null,2))},St);return{list:s,data:mo(i,d=>{const g=d.map(p=>({config:p.config,state:p.state.init(p.config)}));return G(g)})}},aa=t=>t.list,B3=t=>t.data,vC=(t,s)=>{const c={};return ko(t,(i,d)=>{ko(i,(g,p)=>{const C=on(c,p).getOr([]);c[p]=C.concat([s(d,g)])})}),c},M3=(t,s,c,i)=>{const d={...s};Ve(c,O=>{d[O.name()]=O.exhibit(t,i)});const g=vC(d,(O,B)=>({name:O,modification:B})),p=O=>Xn(O,(B,I)=>({...I.modification,...B}),{}),C=Xn(g.classes,(O,B)=>B.modification.concat(O),[]),S=p(g.attributes),E=p(g.styles);return Pu({classes:C,attributes:S,styles:E})},F3=(t,s,c,i)=>{try{const d=$e(c,(g,p)=>{const C=g[s],S=p[s],E=i.indexOf(C),O=i.indexOf(S);if(E===-1)throw new Error("The ordering for "+t+" does not have an entry for "+C+`.
Order specified: `+JSON.stringify(i,null,2));if(O===-1)throw new Error("The ordering for "+t+" does not have an entry for "+S+`.
Order specified: `+JSON.stringify(i,null,2));return E<O?-1:O<E?1:0});return Yt.value(d)}catch(d){return Yt.error([d])}},tu=(t,s)=>({handler:t,purpose:s}),z5=(t,s)=>({cHandler:t,purpose:s}),Lv=(t,s)=>z5(pn.apply(void 0,[t.handler].concat(s)),t.purpose),rf=t=>t.cHandler,yC=(t,s)=>({name:t,handler:s}),kp=(t,s)=>{const c={};return Ve(t,i=>{c[i.name()]=i.handlers(s)}),c},rE=(t,s,c)=>{const i={...c,...kp(s,t)};return vC(i,yC)},CC=(t,s,c,i)=>{const d=rE(t,c,i);return fh(d,s)},wC=t=>{const s=Z2(t);return(c,i,...d)=>{const g=[c,i].concat(d);s.abort.apply(void 0,g)?i.stop():s.can.apply(void 0,g)&&s.run.apply(void 0,g)}},cE=(t,s)=>Yt.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(Ae(s,c=>c.name),null,2)]),Hv=(t,s,c)=>{const i=s[c];return i?F3("Event: "+c,"name",t,i).map(d=>{const g=Ae(d,p=>p.handler);return QS(g)}):cE(c,t)},fh=(t,s)=>{const c=Xo(t,(i,d)=>(i.length===1?Yt.value(i[0].handler):Hv(i,s,d)).map(p=>{const C=wC(p),S=i.length>1?jn(s[d],E=>Bt(i,O=>O.name===E)).join(" > "):i[0].name;return Zm(d,tu(C,S))}));return ya(c,{})},Lu="alloy.base.behaviour",aE=Un([Vc("dom","dom",Tu(),Un([ct("tag"),Re("styles",{}),Re("classes",[]),Re("attributes",{}),$s("value"),$s("innerHtml")])),ct("components"),ct("uid"),Re("events",{}),Re("apis",{}),Vc("eventOrder","eventOrder",h2({[Yi()]:["disabling",Lu,"toggling","typeaheadevents"],[tm()]:[Lu,"focusing","keying"],[$b()]:[Lu,"disabling","toggling","representing","tooltipping"],[qm()]:[Lu,"representing","streaming","invalidating"],[Km()]:[Lu,"representing","item-events","toolbar-button-events","tooltipping"],[mi()]:["focusing",Lu,"item-type-events"],[jm()]:["focusing",Lu,"item-type-events"],[Ou()]:["item-type-events","tooltipping"],[Hg()]:["receiving","reflecting","tooltipping"]}),pt()),$s("domModification")]),N3=t=>Ir("custom.definition",aE,t),SC=t=>({...t.dom,uid:t.uid,domChildren:Ae(t.components,s=>s.element)}),zv=t=>t.domModification.fold(()=>Pu({}),Pu),xC=t=>t.events,Dp=(t,s)=>{const c=zn(t),i=zn(s),d=Ce(i,c),g=Wo(t,(p,C)=>!So(s,C)||p!==s[C]).t;return{toRemove:d,toSet:g}},Vv=(t,s)=>{const{class:c,style:i,...d}=Wd(s),{toSet:g,toRemove:p}=Dp(t.attributes,d),C=()=>{Ve(p,we=>ir(s,we)),d1(s,g)},S=cc(s),{toSet:E,toRemove:O}=Dp(t.styles,S),B=()=>{Ve(O,we=>Ro(s,we)),Sr(s,E)},I=C1(s),U=Ce(I,t.classes),j=Ce(t.classes,I),Q=()=>{Eu(s,j),ha(s,U)},ie=we=>{pl(s,we)},X=()=>{const we=t.domChildren;Kx(s,we)},he=()=>{const we=s,Me=t.value.getOrUndefined();Me!==ci(we)&&ql(we,Me??"")};return C(),Q(),B(),t.innerHtml.fold(X,ie),he(),s},EC=t=>{const s=At.fromTag(t.tag);d1(s,t.attributes),Eu(s,t.classes),Sr(s,t.styles),t.innerHtml.each(i=>pl(s,i));const c=t.domChildren;return pb(s,c),t.value.each(i=>{ql(s,i)}),s},iE=(t,s)=>{try{const c=Vv(t,s);return k.some(c)}catch{return k.none()}},b0=t=>t.innerHtml.isSome()&&t.domChildren.length>0,P3=(t,s)=>{const c=d=>ml(d)===t.tag&&!b0(t)&&!Zx(d),i=s.filter(c).bind(d=>iE(t,d)).getOrThunk(()=>EC(t));return $v(i,t.uid),i},$3=t=>{const s=on(t,"behaviours").getOr({});return te(zn(s),c=>{const i=s[c];return qn(i)?[i.me]:[]})},lE=(t,s)=>Iv(t,s),gh=t=>{const s=$3(t);return lE(t,s)},TC=(t,s,c)=>{const i=SC(t),d=zv(t),g={"alloy.base.modification":d},p=s.length>0?M3(c,g,s,i):d;return Z4(i,p)},I3=(t,s,c)=>{const i={"alloy.base.behaviour":xC(t)};return CC(c,t.eventOrder,s,i).getOrDie()},uE=(t,s)=>{const c=()=>we,i=qt(sE),d=ku(N3(t)),g=gh(t),p=aa(g),C=B3(g),S=TC(d,p,C),E=P3(S,s),O=I3(d,p,C),B=qt(d.components),I=Me=>{i.set(Me)},U=()=>{i.set(Ap(c))},j=()=>{const Me=zl(E),Fe=te(Me,Mt=>i.get().getByDom(Mt).fold(()=>[],bn));B.set(Fe)},Q=Me=>{const Fe=C;return(dt(Fe[Me.name()])?Fe[Me.name()]:()=>{throw new Error("Could not find "+Me.name()+" in "+JSON.stringify(t,null,2))})()},ie=Me=>dt(C[Me.name()]),X=()=>d.apis,he=Me=>C[Me]().map(Fe=>Fe.state.readState()).getOr("not enabled"),we={uid:t.uid,getSystem:i.get,config:Q,hasConfigured:ie,spec:t,readState:he,getApis:X,connect:I,disconnect:U,element:E,syncComponents:j,components:B.get,events:O};return we},L3=(t,s)=>{const c=on(t,"components").getOr([]);return s.fold(()=>Ae(c,m),i=>Ae(c,(d,g)=>l(d,Vd(i,g))))},dE=(t,s)=>{const{events:c,...i}=oE(t),d=L3(i,s),g={...i,events:{...Jx,...c},components:d};return Yt.value(uE(g,s))},nr=t=>{const s=At.fromText(t);return hh({element:s})},hh=t=>{const s=Ti("external.component",Cl([ct("element"),$s("uid")]),t),c=qt(Ap()),i=C=>{c.set(C)},d=()=>{c.set(Ap(()=>p))},g=s.uid.getOrThunk(()=>mh("external"));$v(s.element,g);const p={uid:g,getSystem:c.get,config:k.none,hasConfigured:qe,connect:i,disconnect:d,getApis:()=>({}),element:s.element,spec:t,readState:G("No state"),syncComponents:re,components:G([]),events:{}};return Wx(p)},AC=mh,Hu=t=>So(t,"uid"),l=(t,s)=>lh(t).getOrThunk(()=>{const c=Hu(t)?t:{uid:AC(""),...t};return dE(c,s).getOrDie()}),m=t=>l(t,k.none()),b=Wx;var P=Object.freeze({__proto__:null,block:(t,s,c,i)=>{$n(t.element,"aria-busy",!0);const d=s.getRoot(t).getOr(t),g=Et([Sn.config({mode:"special",onTab:()=>k.some(!0),onShiftTab:()=>k.some(!0)}),to.config({})]),p=i(d,g),C=d.getSystem().build(p);so.append(d,b(C)),C.hasConfigured(Sn)&&s.focus&&Sn.focusIn(C),c.isBlocked()||s.onBlock(t),c.blockWith(()=>so.remove(d,C))},unblock:(t,s,c)=>{ir(t.element,"aria-busy"),c.isBlocked()&&s.onUnblock(t),c.clear()},isBlocked:(t,s,c)=>c.isBlocked()}),z=[Rs("getRoot",k.none),va("focus",!0),os("onBlock"),os("onUnblock")],de=Object.freeze({__proto__:null,init:()=>{const t=Aa(),s=c=>{t.set({destroy:c})};return el({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const ke=sa({fields:z,name:"blocking",apis:P,state:de});var Gt=Object.freeze({__proto__:null,getCurrent:(t,s,c)=>s.find(t)});const Zt=[ct("find")],ut=sa({fields:Zt,name:"composing",apis:Gt});var Bn=Object.freeze({__proto__:null,getCoupled:(t,s,c,i)=>c.getOrCreate(t,s,i),getExistingCoupled:(t,s,c,i)=>c.getExisting(t,s,i)}),go=[wl("others",w2(Yt.value,pt()))],ws=Object.freeze({__proto__:null,init:()=>{const t={},s=(g,p)=>{if(zn(g.others).length===0)throw new Error("Cannot find any known coupled components");return on(t,p)},c=(g,p,C)=>s(p,C).getOrThunk(()=>{const E=on(p.others,C).getOrDie("No information found for coupled component: "+C)(g),O=g.getSystem().build(E);return t[C]=O,O}),i=(g,p,C)=>s(p,C).orThunk(()=>(on(p.others,C).getOrDie("No information found for coupled component: "+C),k.none())),d=G({});return el({readState:d,getExisting:i,getOrCreate:c})}});const eo=sa({fields:go,name:"coupling",apis:Bn,state:ws}),Ms=["input","button","textarea","select"],ec=(t,s,c)=>{(s.disabled()?sl:Ri)(t,s)},Al=(t,s)=>s.useNative===!0&&Je(Ms,ml(t.element)),ph=t=>Hc(t.element,"disabled"),cf=t=>{$n(t.element,"disabled","disabled")},Gf=t=>{ir(t.element,"disabled")},js=t=>Cc(t.element,"aria-disabled")==="true",gi=t=>{$n(t.element,"aria-disabled","true")},Ya=t=>{$n(t.element,"aria-disabled","false")},sl=(t,s,c)=>{s.disableClass.each(d=>{Ps(t.element,d)}),(Al(t,s)?cf:gi)(t),s.onDisabled(t)},Ri=(t,s,c)=>{s.disableClass.each(d=>{Tr(t.element,d)}),(Al(t,s)?Gf:Ya)(t),s.onEnabled(t)},qf=(t,s)=>Al(t,s)?ph(t):js(t);var Uv=Object.freeze({__proto__:null,enable:Ri,disable:sl,isDisabled:qf,onLoad:ec,set:(t,s,c,i)=>{(i?sl:Ri)(t,s)}}),Fa=Object.freeze({__proto__:null,exhibit:(t,s)=>Pu({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>vr([mv(Yi(),(c,i)=>qf(c,t)),K2(t,s,ec)])}),H3=[Rs("disabled",qe),Re("useNative",!0),$s("disableClass"),os("onDisabled"),os("onEnabled")];const yn=sa({fields:H3,name:"disabling",active:Fa,apis:Uv}),zu=(t,s,c,i,d)=>{const g=p=>p+"px";return{position:t,left:s.map(g),top:c.map(g),right:i.map(g),bottom:d.map(g)}},mE=t=>({...t,position:k.some(t.position)}),fE=(t,s)=>{zc(t,mE(s))},Wv=(t,s)=>{const c=t.element;Ps(c,s.transitionClass),Tr(c,s.fadeOutClass),Ps(c,s.fadeInClass),s.onShow(t)},z3=(t,s)=>{const c=t.element;Ps(c,s.transitionClass),Tr(c,s.fadeInClass),Ps(c,s.fadeOutClass),s.onHide(t)},v0=(t,s)=>t.y<s.bottom&&t.bottom>s.y,V3=(t,s)=>t.y>=s.y,y0=(t,s)=>t.bottom<=s.bottom,gE=(t,s,c)=>({location:"top",leftX:s,topY:c.bounds.y-t.y}),hE=(t,s,c)=>({location:"bottom",leftX:s,bottomY:t.bottom-c.bounds.bottom}),U3=t=>t.box.x-t.win.x,V5=(t,s,c)=>{const i=s.win,d=s.box,g=U3(s);return Lo(t,p=>{switch(p){case"bottom":return y0(d,c.bounds)?k.none():k.some(hE(i,g,c));case"top":return V3(d,c.bounds)?k.none():k.some(gE(i,g,c));default:return k.none()}}).getOr({location:"no-dock"})},U5=(t,s,c)=>Dt(t,i=>{switch(i){case"bottom":return y0(s,c.bounds);case"top":return V3(s,c.bounds)}}),LI=(t,s)=>{const c=s.optScrollEnv.fold(G(t.bounds.y),i=>i.scrollElmTop+(t.bounds.y-i.currentScrollTop));return Ts(t.bounds.x,c)},HI=(t,s)=>{const c=s.optScrollEnv.fold(G(t.y),i=>t.y+i.currentScrollTop-i.scrollElmTop);return Ts(t.x,c)},W3=(t,s,c)=>c.getInitialPos().map(i=>{const d=LI(i,s);return{box:wc(d.left,d.top,ta(t),ac(t)),location:i.location}}),W5=(t,s,c,i,d)=>{const g=HI(s,c),p=wc(g.left,g.top,s.width,s.height);i.setInitialPos({style:cc(t),position:lr(t,"position")||"static",bounds:p,location:d.location})},zI=(t,s,c,i,d)=>{i.getInitialPos().fold(()=>W5(t,s,c,i,d),()=>re)},Z5=(t,s,c)=>c.getInitialPos().bind(i=>{switch(c.clearInitialPos(),i.position){case"static":return k.some({morph:"static"});case"absolute":const d=Of(t).getOr(xi()),g=mc(d),p=d.dom.scrollTop??0;return k.some({morph:"absolute",positionCss:zu("absolute",on(i.style,"left").map(C=>s.x-g.x),on(i.style,"top").map(C=>s.y-g.y+p),on(i.style,"right").map(C=>g.right-s.right),on(i.style,"bottom").map(C=>g.bottom-s.bottom))});default:return k.none()}}),pE=(t,s,c)=>W3(t,s,c).filter(({box:i})=>U5(c.getModes(),i,s)).bind(({box:i})=>Z5(t,i,c)),kC=t=>{switch(t.location){case"top":return k.some({morph:"fixed",positionCss:zu("fixed",k.some(t.leftX),k.some(t.topY),k.none(),k.none())});case"bottom":return k.some({morph:"fixed",positionCss:zu("fixed",k.some(t.leftX),k.none(),k.none(),k.some(t.bottomY))});default:return k.none()}},VI=(t,s,c)=>{const i=mc(t),d=Za(),g=V5(c.getModes(),{win:d,box:i},s);return g.location==="top"||g.location==="bottom"?(W5(t,i,s,c,g),kC(g)):k.none()},iY=(t,s,c)=>pE(t,s,c).orThunk(()=>s.optScrollEnv.bind(i=>W3(t,s,c)).bind(({box:i,location:d})=>{const g=Za(),p=U3({win:g,box:i}),C=d==="top"?gE(g,p,s):hE(g,p,s);return kC(C)})),j5=(t,s,c)=>{const i=t.element;return An(fr(i,"position"),"fixed")?iY(i,s,c):VI(i,s,c)},UI=(t,s,c)=>{const i=t.element;return W3(i,s,c).bind(({box:d})=>Z5(i,d,c))},WI=(t,s,c,i)=>{const d=mc(t),g=Za(),p=U3({win:g,box:d}),C=i(g,p,s);return C.location==="bottom"||C.location==="top"?(zI(t,d,s,c,C),kC(C)):k.none()},Vu=(t,s,c)=>{c.setDocked(!1),Ve(["left","right","top","bottom","position"],i=>Ro(t.element,i)),s.onUndocked(t)},Z3=(t,s,c,i)=>{const d=i.position==="fixed";c.setDocked(d),fE(t.element,i),(d?s.onDocked:s.onUndocked)(t)},G5=(t,s,c,i,d=!1)=>{s.contextual.each(g=>{g.lazyContext(t).each(p=>{const C=v0(p,i.bounds);C!==c.isVisible()&&(c.setVisible(C),d&&!C?(Eu(t.element,[g.fadeOutClass]),g.onHide(t)):(C?Wv:z3)(t,g))})})},q5=(t,s,c,i,d)=>{G5(t,s,c,i,!0),Z3(t,s,c,d.positionCss)},ZI=(t,s,c,i,d)=>{switch(d.morph){case"static":return Vu(t,s,c);case"absolute":return Z3(t,s,c,d.positionCss);case"fixed":return q5(t,s,c,i,d)}},jI=(t,s,c)=>{const i=s.lazyViewport(t);G5(t,s,c,i),j5(t,i,c).each(d=>{ZI(t,s,c,i,d)})},Zv=(t,s,c)=>{const i=t.element;c.setDocked(!1);const d=s.lazyViewport(t);UI(t,d,c).each(g=>{switch(g.morph){case"static":{Vu(t,s,c);break}case"absolute":{Z3(t,s,c,g.positionCss);break}}}),c.setVisible(!0),s.contextual.each(g=>{ha(i,[g.fadeInClass,g.fadeOutClass,g.transitionClass]),g.onShow(t)}),jv(t,s,c)},jv=(t,s,c)=>{t.getSystem().isConnected()&&jI(t,s,c)},K5=(t,s,c)=>{c.isDocked()&&Zv(t,s,c)},bE=t=>(s,c,i)=>{const d=c.lazyViewport(s);WI(s.element,d,i,t).each(p=>{q5(s,c,i,d,p)})},vE=bE(gE),j3=bE(hE);var GI=Object.freeze({__proto__:null,refresh:jv,reset:K5,isDocked:(t,s,c)=>c.isDocked(),getModes:(t,s,c)=>c.getModes(),setModes:(t,s,c,i)=>c.setModes(i),forceDockToTop:vE,forceDockToBottom:j3}),qI=Object.freeze({__proto__:null,events:(t,s)=>vr([th(xl(),(c,i)=>{t.contextual.each(d=>{Xr(c.element,d.transitionClass)&&(ha(c.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(c)),i.stop()})}),We(Ug(),(c,i)=>{jv(c,t,s)}),We(SS(),(c,i)=>{jv(c,t,s)}),We(Wg(),(c,i)=>{K5(c,t,s)})])}),KI=[Ki("contextual",[Rc("fadeInClass"),Rc("fadeOutClass"),Rc("transitionClass"),Xl("lazyContext"),os("onShow"),os("onShown"),os("onHide"),os("onHidden")]),Rs("lazyViewport",()=>({bounds:Za(),optScrollEnv:k.none()})),Mf("modes",["top","bottom"],Zr),os("onDocked"),os("onUndocked")],yE=Object.freeze({__proto__:null,init:t=>{const s=qt(!1),c=qt(!0),i=Ln(),d=qt(t.modes),g=()=>`docked:  ${s.get()}, visible: ${c.get()}, modes: ${d.get().join(",")}`;return el({isDocked:s.get,setDocked:s.set,getInitialPos:i.get,setInitialPos:i.set,clearInitialPos:i.clear,isVisible:c.get,setVisible:c.set,getModes:d.get,setModes:d.set,readState:g})}});const Mr=sa({fields:KI,name:"docking",active:qI,apis:GI,state:yE}),G3=nc.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),CE=t=>s=>s.translate(-t.left,-t.top),wE=t=>s=>s.translate(t.left,t.top),Uu=t=>(s,c)=>co(t,(i,d)=>d(i),Ts(s,c)),Gv=(t,s,c)=>t.fold(Uu([wE(c),CE(s)]),Uu([CE(s)]),Uu([])),qv=(t,s,c)=>t.fold(Uu([wE(c)]),Uu([]),Uu([wE(s)])),SE=(t,s,c)=>t.fold(Uu([]),Uu([CE(c)]),Uu([wE(s),CE(c)])),XI=(t,s,c,i,d,g)=>{const p=qv(t,d,g),C=qv(s,d,g);return Math.abs(p.left-C.left)<=c&&Math.abs(p.top-C.top)<=i},jt=(t,s,c,i,d,g)=>{const p=qv(t,d,g),C=qv(s,d,g),S=Math.abs(p.left-C.left),E=Math.abs(p.top-C.top);return Ts(S,E)},q3=(t,s,c)=>{const i=t.fold((d,g)=>({position:k.some("absolute"),left:k.some(d+"px"),top:k.some(g+"px")}),(d,g)=>({position:k.some("absolute"),left:k.some(d-c.left+"px"),top:k.some(g-c.top+"px")}),(d,g)=>({position:k.some("fixed"),left:k.some(d+"px"),top:k.some(g+"px")}));return{right:k.none(),bottom:k.none(),...i}},Y5=(t,s,c)=>t.fold((i,d)=>xE(i+s,d+c),(i,d)=>vh(i+s,d+c),(i,d)=>Kf(i+s,d+c)),bh=(t,s,c,i)=>{const d=(g,p)=>(C,S)=>{const E=g(s,c,i);return p(C.getOr(E.left),S.getOr(E.top))};return t.fold(d(SE,xE),d(qv,vh),d(Gv,Kf))},xE=G3.offset,vh=G3.absolute,Kf=G3.fixed,EE=(t,s)=>{const c=Cc(t,s);return Fn(c)?NaN:parseInt(c,10)},JI=(t,s)=>{const c=t.element,i=EE(c,s.leftAttr),d=EE(c,s.topAttr);return isNaN(i)||isNaN(d)?k.none():k.some(Ts(i,d))},X5=(t,s,c)=>{const i=t.element;$n(i,s.leftAttr,c.left+"px"),$n(i,s.topAttr,c.top+"px")},J5=(t,s)=>{const c=t.element;ir(c,s.leftAttr),ir(c,s.topAttr)},K3=(t,s,c,i)=>JI(t,s).fold(()=>c,d=>Kf(d.left+i.left,d.top+i.top)),QI=(t,s,c,i,d,g)=>{const p=K3(t,s,c,i),C=s.mustSnap?eL(t,s,p,d,g):tB(t,s,p,d,g),S=Gv(p,d,g);return X5(t,s,S),C.fold(()=>({coord:Kf(S.left,S.top),extra:k.none()}),E=>({coord:E.output,extra:E.extra}))},Q5=(t,s)=>{J5(t,s)},eB=(t,s,c,i)=>Lo(t,d=>{const g=d.sensor;return XI(s,g,d.range.left,d.range.top,c,i)?k.some({output:bh(d.output,s,c,i),extra:d.extra}):k.none()}),eL=(t,s,c,i,d)=>{const g=s.getSnapPoints(t);return eB(g,c,i,d).orThunk(()=>co(g,(S,E)=>{const O=E.sensor,B=jt(c,O,E.range.left,E.range.top,i,d);return S.deltas.fold(()=>({deltas:k.some(B),snap:k.some(E)}),I=>{const U=(B.left+B.top)/2,j=(I.left+I.top)/2;return U<=j?{deltas:k.some(B),snap:k.some(E)}:S})},{deltas:k.none(),snap:k.none()}).snap.map(S=>({output:bh(S.output,c,i,d),extra:S.extra})))},tB=(t,s,c,i,d)=>{const g=s.getSnapPoints(t);return eB(g,c,i,d)},tL=(t,s,c)=>({coord:bh(t.output,t.output,s,c),extra:t.extra});var Y3=Object.freeze({__proto__:null,snapTo:(t,s,c,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=ni(t.element),p=$r(g),C=Eb(d),S=tL(i,p,C),E=q3(S.coord,p,C);zc(d,E)}}});const xa=(t,s)=>E2(t,{},Ae(s,c=>mS(c.name(),"Cannot configure "+c.name()+" for "+t)).concat([_a("dump",St)])),C0=t=>t.dump,ia=(t,s)=>({...Et(s),...t.dump}),ou={field:xa,augment:ia,get:C0},Yf=(t,s)=>(t.length>0?[Wm("parts",t)]:[]).concat([ct("uid"),Re("dom",{}),Re("components",[]),lp("originalSpec"),Re("debug.sketcher",{})]).concat(s),X3=(t,s,c,i,d)=>{const g=Yf(i,d);return Ti(t+" [SpecSchema]",Cl(g.concat(s)),c)},nL=(t,s,c,i)=>{const d=oB(i),g=X3(t,s,d,[],[]);return c(g,d)},nB=(t,s,c,i,d)=>{const g=oB(d),p=IS(c),C=cm(c),S=X3(t,s,g,p,[C]),E=Lf(t,S,c),O=Xm(t,S,E.internals());return i(S,O,g,E.externals())},gY=t=>So(t,"uid"),oB=t=>gY(t)?t:{...t,uid:mh("uid")},oL=t=>t.uid!==void 0,J3=Cl([ct("name"),ct("factory"),ct("configFields"),Re("apis",{}),Re("extraApis",{})]),sL=Cl([ct("name"),ct("factory"),ct("configFields"),ct("partFields"),Re("apis",{}),Re("extraApis",{})]),Wu=t=>{const s=Ti("Sketcher for "+t.name,J3,t),c=g=>nL(s.name,s.configFields,s.factory,g),i=mo(s.apis,sf),d=mo(s.extraApis,(g,p)=>BS(g,p));return{name:s.name,configFields:s.configFields,sketch:c,...i,...d}},rl=t=>{const s=Ti("Sketcher for "+t.name,sL,t),c=p=>nB(s.name,s.configFields,s.partFields,s.factory,p),i=Sc(s.name,s.partFields),d=mo(s.apis,sf),g=mo(s.extraApis,(p,C)=>BS(p,C));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:c,parts:i,...d,...g}},af=Wu({name:"Container",factory:t=>{const{attributes:s,...c}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...c},components:t.components,behaviours:C0(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[Re("components",[]),xa("containerBehaviours",[]),Re("events",{}),Re("domModification",{}),Re("eventOrder",{})]}),Q3="data-initial-z-index",sB=t=>{oi(t.element).filter(ti).each(s=>{Lc(s,Q3).fold(()=>Ro(s,"z-index"),c=>Vn(s,"z-index",c)),ir(s,Q3)})},rB=t=>{oi(t.element).filter(ti).each(s=>{fr(s,"z-index").each(c=>{$n(s,Q3,c)}),Vn(s,"z-index",lr(t.element,"z-index"))})},cB=(t,s)=>{t.getSystem().addToGui(s),rB(s)},aB=t=>{sB(t),t.getSystem().removeFromGui(t)},iB=(t,s,c)=>t.getSystem().build(af.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:c}));var ek=Ki("snaps",[ct("getSnapPoints"),os("onSensor"),ct("leftAttr"),ct("topAttr"),Re("lazyViewport",Za),Re("mustSnap",!1)]);const TE=[Re("useFixed",qe),ct("blockerClass"),Re("getTarget",St),Re("onDrag",re),Re("repositionTarget",!0),Re("onDrop",re),Rs("getBounds",Za),ek],lB=t=>Po(fr(t,"left"),fr(t,"top"),fr(t,"position"),(s,c,i)=>(i==="fixed"?Kf:xE)(parseInt(s,10),parseInt(c,10))).getOrThunk(()=>{const s=fa(t);return vh(s.left,s.top)}),uB=(t,s,c,i,d)=>{const g=d.bounds,p=qv(s,c,i),C=Jn(p.left,g.x,g.x+g.width-d.width),S=Jn(p.top,g.y,g.y+g.height-d.height),E=vh(C,S);return s.fold(()=>{const O=SE(E,c,i);return xE(O.left,O.top)},G(E),()=>{const O=Gv(E,c,i);return Kf(O.left,O.top)})},cL=(t,s,c,i,d,g,p)=>{const C=s.fold(()=>{const S=Y5(c,g.left,g.top),E=Gv(S,i,d);return Kf(E.left,E.top)},S=>{const E=QI(t,S,c,g,i,d);return E.extra.each(O=>{S.onSensor(t,O)}),E.coord});return uB(t,C,i,d,p)},aL=(t,s,c,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=ni(t.element),p=$r(g),C=Eb(d),S=lB(d),E=cL(t,s.snaps,S,p,C,i,c),O=q3(E,p,C);zc(d,O)}s.onDrag(t,d,i)},dB=(t,s)=>({bounds:t.getBounds(),height:ic(s.element),width:ld(s.element)}),tk=(t,s,c,i,d)=>{const g=c.update(i,d),p=c.getStartData().getOrThunk(()=>dB(s,t));g.each(C=>{aL(t,s,p,C)})},mB=(t,s,c,i)=>{s.each(aB),c.snaps.each(g=>{Q5(t,g)});const d=c.getTarget(t.element);i.reset(),c.onDrop(t,d)},w0=t=>(s,c)=>{const i=d=>{c.setStartData(dB(s,d))};return vr([We(Ug(),d=>{c.getStartData().each(()=>i(d))}),...t(s,c,i)])},fB=t=>vr([We(mi(),t.forceDrop),We(Mb(),t.drop),We(Nf(),(s,c)=>{t.move(c.event)}),We(Bc(),t.delayDrop)]);var gB=Object.freeze({__proto__:null,getData:t=>k.from(Ts(t.x,t.y)),getDelta:(t,s)=>Ts(s.left-t.left,s.top-t.top)});const nk=(t,s,c)=>[We(mi(),(i,d)=>{if(d.event.raw.button!==0)return;d.stop();const p=()=>mB(i,k.some(E),t,s),C=$4(p,200),S={drop:p,delayDrop:C.schedule,forceDrop:p,move:B=>{C.cancel(),tk(i,t,s,gB,B)}},E=iB(i,t.blockerClass,fB(S));(()=>{c(i),cB(i,E)})()})],uL=[...TE,pr("dragger",{handlers:w0(nk)})],dL=t=>vr([We(jm(),t.forceDrop),We($g(),t.drop),We(ap(),t.drop),We(Gm(),(s,c)=>{t.move(c.event)})]),mL=t=>{const s=t[0];return k.some(Ts(s.clientX,s.clientY))};var DC=Object.freeze({__proto__:null,getData:t=>{const c=t.raw.touches;return c.length===1?mL(c):k.none()},getDelta:(t,s)=>Ts(s.left-t.left,s.top-t.top)});const pB=(t,s,c)=>{const i=Ln(),d=g=>{mB(g,i.get(),t,s),i.clear()};return[We(jm(),(g,p)=>{p.stop();const C=()=>d(g),S={drop:C,delayDrop:re,forceDrop:C,move:B=>{tk(g,t,s,DC,B)}},E=iB(g,t.blockerClass,dL(S));i.set(E),(()=>{c(g),cB(g,E)})()}),We(Gm(),(g,p)=>{p.stop(),tk(g,t,s,DC,p.event)}),We($g(),(g,p)=>{p.stop(),d(g)}),We(ap(),d)]},bB=[...TE,pr("dragger",{handlers:w0(pB)})],hi=(t,s,c)=>[...nk(t,s,c),...pB(t,s,c)],fL=[...TE,pr("dragger",{handlers:w0(hi)})];var vB=Object.freeze({__proto__:null,mouse:uL,touch:bB,mouseOrTouch:fL}),bL=Object.freeze({__proto__:null,init:()=>{let t=k.none(),s=k.none();const c=()=>{t=k.none(),s=k.none()},i=(S,E)=>{const O=t.map(B=>S.getDelta(B,E));return t=k.some(E),O},d=(S,E)=>S.getData(E).bind(O=>i(S,O)),g=S=>{s=k.some(S)},p=()=>s,C=G({});return el({readState:C,reset:c,update:d,getStartData:p,setStartData:g})}});const S0=rx({branchKey:"mode",branches:vB,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:k.from(t.extra)})},state:bL,apis:Y3}),vL=["input","textarea"],yB=t=>{const s=ml(t);return Je(vL,s)},ok=(t,s)=>{const c=s.getRoot(t).getOr(t.element);Tr(c,s.invalidClass),s.notify.each(i=>{yB(t.element)&&$n(t.element,"aria-invalid",!1),i.getContainer(t).each(d=>{pl(d,i.validHtml)}),i.onValid(t)})},CB=(t,s,c,i)=>{const d=s.getRoot(t).getOr(t.element);Ps(d,s.invalidClass),s.notify.each(g=>{yB(t.element)&&$n(t.element,"aria-invalid",!0),g.getContainer(t).each(p=>{pl(p,i)}),g.onInvalid(t,i)})},wB=(t,s,c)=>s.validator.fold(()=>lo.pure(Yt.value(!0)),i=>i.validate(t)),AE=(t,s,c)=>(s.notify.each(i=>{i.onValidate(t)}),wB(t,s).map(i=>t.getSystem().isConnected()?i.fold(d=>(CB(t,s,c,d),Yt.error(d)),d=>(ok(t,s),Yt.value(d))):Yt.error("No longer in system")));var SB=Object.freeze({__proto__:null,markValid:ok,markInvalid:CB,query:wB,run:AE,isInvalid:(t,s)=>{const c=s.getRoot(t).getOr(t.element);return Xr(c,s.invalidClass)}}),CL=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(c=>vr([We(c.onEvent,i=>{AE(i,t,s).get(St)})].concat(c.validateOnLoad?[ur(i=>{AE(i,t,s).get(re)})]:[]))).getOr({})}),wL=[ct("invalidClass"),Re("getRoot",k.none),Ki("notify",[Re("aria","alert"),Re("getContainer",k.none),Re("validHtml",""),os("onValid"),os("onInvalid"),os("onValidate")]),Ki("validator",[ct("validate"),Re("onEvent","input"),Re("validateOnLoad",!0)])];const sk=(t,s,c)=>{s.store.manager.onLoad(t,s,c)},rk=(t,s,c)=>{s.store.manager.onUnload(t,s,c)};var xB=Object.freeze({__proto__:null,onLoad:sk,onUnload:rk,setValue:(t,s,c,i)=>{s.store.manager.setValue(t,s,c,i)},getValue:(t,s,c)=>s.store.manager.getValue(t,s,c),getState:(t,s,c)=>c}),TL=Object.freeze({__proto__:null,events:(t,s)=>{const c=t.resetOnDom?[ur((i,d)=>{sk(i,t,s)}),Sd((i,d)=>{rk(i,t,s)})]:[K2(t,s,sk)];return vr(c)}});const E0=()=>{const t=qt(null),s=()=>({mode:"memory",value:t.get()}),c=()=>t.get()===null,i=()=>{t.set(null)};return el({set:t.set,get:t.get,isNotSet:c,clear:i,readState:s})},AL=()=>el({readState:re}),EB=()=>{const t=qt({}),s=qt({});return el({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:p=>on(t.get(),p).orThunk(()=>on(s.get(),p)),update:p=>{const C=t.get(),S=s.get(),E={},O={};Ve(p,B=>{E[B.value]=B,on(B,"meta").each(I=>{on(I,"text").each(U=>{O[U]=B})})}),t.set({...C,...E}),s.set({...S,...O})},clear:()=>{t.set({}),s.set({})}})};var DL=Object.freeze({__proto__:null,memory:E0,dataset:EB,manual:AL,init:t=>t.store.manager.state(t)});const TB=(t,s,c,i)=>{const d=s.store;c.update([i]),d.setValue(t,i),s.onSetValue(t,i)},OL=(t,s,c)=>{const i=s.store,d=i.getDataKey(t);return c.lookup(d).getOrThunk(()=>i.getFallbackEntry(d))},AB=(t,s,c)=>{s.store.initialValue.each(d=>{TB(t,s,c,d)})},ck=(t,s,c)=>{c.clear()};var ak=[$s("initialValue"),ct("getFallbackEntry"),ct("getDataKey"),ct("setValue"),pr("manager",{setValue:TB,getValue:OL,onLoad:AB,onUnload:ck,state:EB})];const _L=(t,s,c)=>s.store.getValue(t),Op=(t,s,c,i)=>{s.store.setValue(t,i),s.onSetValue(t,i)},kB=(t,s,c)=>{s.store.initialValue.each(i=>{s.store.setValue(t,i)})};var DB=[ct("getValue"),Re("setValue",re),$s("initialValue"),pr("manager",{setValue:Op,getValue:_L,onLoad:kB,onUnload:re,state:wd.init})];const RL=(t,s,c,i)=>{c.set(i),s.onSetValue(t,i)},BL=(t,s,c)=>c.get(),OC=(t,s,c)=>{s.store.initialValue.each(i=>{c.isNotSet()&&c.set(i)})},_C=(t,s,c)=>{c.clear()};var OB=[$s("initialValue"),pr("manager",{setValue:RL,getValue:BL,onLoad:OC,onUnload:_C,state:E0})],ik=[di("store",{mode:"memory"},ui("mode",{memory:OB,manual:DB,dataset:ak})),os("onSetValue"),Re("resetOnDom",!1)];const Lt=sa({fields:ik,name:"representing",active:TL,apis:xB,extra:{setValueFrom:(t,s)=>{const c=Lt.getValue(s);Lt.setValue(t,c)}},state:DL}),cl=sa({fields:wL,name:"invalidating",active:CL,apis:SB,extra:{validation:t=>s=>{const c=Lt.getValue(s);return lo.pure(t(c))}}});var ML=Object.freeze({__proto__:null,exhibit:(t,s)=>Pu({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const kE=nc.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),Xf=(t,s,c,i,d,g)=>{const p=s.rect,C=p.x-c,S=p.y-i,E=p.width,O=p.height,B=d-(C+E),I=g-(S+O),U=k.some(C),j=k.some(S),Q=k.some(B),ie=k.some(I),X=k.none();return Qb(s.direction,()=>zu(t,U,j,X,X),()=>zu(t,X,j,Q,X),()=>zu(t,U,X,X,ie),()=>zu(t,X,X,Q,ie),()=>zu(t,U,j,X,X),()=>zu(t,U,X,X,ie),()=>zu(t,U,j,X,X),()=>zu(t,X,j,Q,X))},DE=(t,s)=>t.fold(()=>{const c=s.rect;return zu("absolute",k.some(c.x),k.some(c.y),k.none(),k.none())},(c,i,d,g)=>Xf("absolute",s,c,i,d,g),(c,i,d,g)=>Xf("fixed",s,c,i,d,g)),lk=(t,s)=>{const c=pn(Xd,s),i=t.fold(c,c,()=>{const p=$r();return Xd(s).translate(-p.left,-p.top)}),d=ld(s),g=ic(s);return wc(i.left,i.top,d,g)},_B=(t,s)=>s.fold(()=>t.fold(Za,Za,wc),c=>t.fold(G(c),G(c),()=>{const i=uk(t,c.x,c.y);return wc(i.left,i.top,c.width,c.height)})),uk=(t,s,c)=>{const i=Ts(s,c),d=()=>{const g=$r();return i.translate(-g.left,-g.top)};return t.fold(G(i),G(i),d)},RB=(t,s,c,i)=>t.fold(s,c,i);kE.none;const dk=kE.relative,BB=kE.fixed,FL=(t,s)=>({anchorBox:t,origin:s}),NL=(t,s)=>FL(t,s),OE=nc.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),_E=(t,s)=>{const{x:c,y:i,right:d,bottom:g}=s,{x:p,y:C,right:S,bottom:E,width:O,height:B}=t,I=p>=c&&p<=d,U=C>=i&&C<=g,j=I&&U,Q=S<=d&&S>=c,ie=E<=g&&E>=i,X=Q&&ie,he=Math.min(O,p>=c?d-p:S-c),we=Math.min(B,C>=i?g-C:E-i);return{originInBounds:j,sizeInBounds:X,visibleW:he,visibleH:we}},mk=(t,s)=>{const{x:c,y:i,right:d,bottom:g}=s,{x:p,y:C,width:S,height:E}=t,O=Math.max(c,d-S),B=Math.max(i,g-E),I=Jn(p,c,O),U=Jn(C,i,B),j=Math.min(I+S,d)-I,Q=Math.min(U+E,g)-U;return wc(I,U,j,Q)},RE=(t,s,c)=>{const i=G(s.bottom-c.y),d=G(c.bottom-s.y),g=zS(t,d,d,i),p=G(s.right-c.x),C=G(c.right-s.x);return{maxWidth:M2(t,C,C,p),maxHeight:g}},MB=(t,s,c,i)=>{const d=t.bubble,g=d.offset,p=US(i,t.restriction,g),C=t.x+g.left,S=t.y+g.top,E=wc(C,S,s,c),{originInBounds:O,sizeInBounds:B,visibleW:I,visibleH:U}=_E(E,p),j=O&&B,Q=j?E:mk(E,p),ie=Q.width>0&&Q.height>0,{maxWidth:X,maxHeight:he}=RE(t.direction,Q,i),we={rect:Q,maxHeight:he,maxWidth:X,direction:t.direction,placement:t.placement,classes:{on:d.classesOn,off:d.classesOff},layout:t.label,testY:S};return j||t.alwaysFit?OE.fit(we):OE.nofit(we,I,U,ie)},PL=(t,s,c,i,d,g)=>{const p=i.width,C=i.height,S=(O,B,I,U,j)=>{const Q=O(c,i,d,t,g),ie=MB(Q,p,C,g);return ie.fold(G(ie),(X,he,we,Me)=>(j===Me?we>U||he>I:!j&&Me)?ie:OE.nofit(B,I,U,j))};return co(s,(O,B)=>{const I=pn(S,B);return O.fold(G(O),I)},OE.nofit({rect:c,maxHeight:i.height,maxWidth:i.width,direction:zf(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:c.y},-1,-1,!1)).fold(St,St)},fk=["top","bottom","right","left"],RC="data-alloy-transition-timer",FB=(t,s)=>Gh(t,s.classes),NB=(t,s,c)=>c.exists(i=>{const d=t.mode;return d==="all"?!0:i[d]!==s[d]}),$L=(t,s)=>{const c=i=>parseFloat(i).toFixed(3);return Os(s,(i,d)=>{const g=t[d].map(c),p=i.map(c);return!Qt(g,p)}).isSome()},gk=t=>{const s=g=>{const C=lr(t,g).split(/\s*,\s*/);return jn(C,La)},c=g=>{if(Nt(g)&&/^[\d.]+/.test(g)){const p=parseFloat(g);return ei(g,"ms")?p:p*1e3}else return 0},i=s("transition-delay"),d=s("transition-duration");return co(d,(g,p,C)=>{const S=c(i[C])+c(p);return Math.max(g,S)},0)},IL=(t,s)=>{const c=zs(),i=zs();let d;const g=E=>{const O=E.raw.pseudoElement??"";return Jo(E.target,t)&&Pc(O)&&Je(fk,E.raw.propertyName)},p=E=>{if(Eo(E)||g(E)){c.clear(),i.clear();const O=E==null?void 0:E.raw.type;(Eo(O)||O===xl())&&(clearTimeout(d),ir(t,RC),ha(t,s.classes))}},C=Es(t,Lg(),E=>{g(E)&&(C.unbind(),c.set(Es(t,xl(),p)),i.set(Es(t,k1(),p)))}),S=gk(t);window.requestAnimationFrame(()=>{d=setTimeout(p,S+17),$n(t,RC,d)})},LL=(t,s)=>{Eu(t,s.classes),Lc(t,RC).each(c=>{clearTimeout(parseInt(c,10)),ir(t,RC)}),IL(t,s)},HL=(t,s,c,i,d,g)=>{const p=NB(i,d,g);if(p||FB(t,i)){Vn(t,"position",c.position);const C=lk(s,t),S=DE(s,{...d,rect:C}),E=_t(fk,O=>S[O]);$L(c,E)&&(zc(t,E),p&&LL(t,i),bl(t))}else ha(t,i.classes)},zL=t=>({width:Math.ceil(ld(t)),height:ic(t)}),PB=(t,s,c,i)=>{Ro(s,"max-height"),Ro(s,"max-width");const d=zL(s);return PL(s,i.preference,t,d,c,i.bounds)},VL=(t,s)=>{const c=s.classes;ha(t,c.off),Eu(t,c.on)},UL=(t,s,c)=>{const i=c.maxHeightFunction;i(t,s.maxHeight)},$B=(t,s,c)=>{const i=c.maxWidthFunction;i(t,s.maxWidth)},BC=(t,s,c)=>{const i=DE(c.origin,s);c.transition.each(d=>{HL(t,c.origin,i,d,s,c.lastPlacement)}),fE(t,i)},WL=(t,s)=>{rv(t,s.placement)},Kv=(t,s,c)=>t[s]===void 0?c:t[s],hk=(t,s,c,i,d,g,p,C)=>{const S=Kv(p,"maxHeightFunction",YS()),E=Kv(p,"maxWidthFunction",re),O=t.anchorBox,B=t.origin,I={bounds:_B(B,g),origin:B,preference:i,maxHeightFunction:S,maxWidthFunction:E,lastPlacement:d,transition:C};return IB(O,s,c,I)},IB=(t,s,c,i)=>{const d=PB(t,s,c,i);return BC(s,d,i),WL(s,d),VL(s,d),UL(s,d,i),$B(s,d,i),{layout:d.layout,placement:d.placement}},MC=St,T0=()=>Ki("layouts",[ct("onLtr"),ct("onRtl"),$s("onBottomLtr"),$s("onBottomRtl")]),BE=(t,s,c,i,d,g,p)=>{const C=p.map(XS).getOr(!1),S=s.layouts.map(U=>U.onLtr(t)),E=s.layouts.map(U=>U.onRtl(t)),O=C?s.layouts.bind(U=>U.onBottomLtr.map(j=>j(t))).or(S).getOr(d):S.getOr(c),B=C?s.layouts.bind(U=>U.onBottomRtl.map(j=>j(t))).or(E).getOr(g):E.getOr(i);return g1(O,B)(t)},LB=(t,s,c)=>{const i=s.hotspot,d=lk(c,i.element),g=BE(t.element,s,Kg(),L2(),sv(),qS(),k.some(s.hotspot.element));return k.some(MC({anchorBox:d,bubble:s.bubble.getOr(fp()),overrides:s.overrides,layouts:g}))};var ZL=[ct("hotspot"),$s("bubble"),Re("overrides",{}),T0(),pr("placement",LB)];const HB=(t,s,c)=>{const i=uk(c,s.x,s.y),d=wc(i.left,i.top,s.width,s.height),g=BE(t.element,s,ov(),GS(),ov(),GS(),k.none());return k.some(MC({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:g}))};var jL=[ct("x"),ct("y"),Re("height",0),Re("width",0),Re("bubble",fp()),Re("overrides",{}),T0(),pr("placement",HB)];const zB=nc.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),VB=t=>t.fold(St,(s,c,i)=>s.translate(-c,-i)),ME=t=>t.fold(St,St),FE=t=>co(t,(s,c)=>s.translate(c.left,c.top),Ts(0,0)),pk=t=>{const s=Ae(t,VB);return FE(s)},UB=t=>{const s=Ae(t,ME);return FE(s)},GL=zB.screen,qL=zB.absolute,KL=(t,s,c)=>{const i=yg(c.root).dom,d=g=>{const p=ni(g),C=ni(t.element);return Jo(p,C)};return k.from(i.frameElement).map(At.fromDom).filter(d).map(fa)},bk=(t,s,c)=>{const i=ni(t.element),d=$r(i),g=KL(t,s,c).getOr(d);return qL(g,d.left,d.top)},NE=(t,s,c,i)=>{const d=GL(Ts(t,s));return k.some(c2(d,c,i))},WB=(t,s,c,i,d)=>t.map(g=>{const p=[s,g.point],C=RB(i,()=>UB(p),()=>UB(p),()=>pk(p)),S=A4(C.left,C.top,g.width,g.height),E=c.showAbove?sv():Kg(),O=c.showAbove?qS():L2(),B=BE(d,c,E,O,E,O,k.none());return MC({anchorBox:S,bubble:c.bubble.getOr(fp()),overrides:c.overrides,layouts:B})}),YL=(t,s,c)=>{const i=bk(t,c,s);return s.node.filter(is).bind(d=>{const g=d.dom.getBoundingClientRect(),p=NE(g.left,g.top,g.width,g.height),C=s.node.getOr(t.element);return WB(p,i,s,c,C)})};var XL=[ct("node"),ct("root"),$s("bubble"),T0(),Re("overrides",{}),Re("showAbove",!1),pr("placement",YL)];const PE=(t,s)=>({element:t,offset:s}),JL=(t,s)=>{const c=zl(t);if(c.length===0)return PE(t,s);if(s<c.length)return PE(c[s],0);{const i=c[c.length-1],d=zd(i)?jh(i).length:zl(i).length;return PE(i,d)}},ZB=(t,s)=>zd(t)?PE(t,s):JL(t,s),$E=t=>t.foffset!==void 0,jB=(t,s)=>s.getSelection.getOrThunk(()=>()=>Hm(t))().map(i=>{if($E(i)){const d=ZB(i.start,i.soffset),g=ZB(i.finish,i.foffset);return Gi.range(d.element,d.offset,g.element,g.offset)}else return i}),QL=(t,s,c)=>{const i=yg(s.root).dom,d=bk(t,c,s),g=jB(i,s).bind(S=>{if($E(S))return S1(i,Gi.exactFromRange(S)).orThunk(()=>{const O=At.fromText(Pl);Ud(S.start,O);const B=Yd(i,Gi.exact(O,0,O,1));return Ui(O),B}).bind(O=>NE(O.left,O.top,O.width,O.height));{const E=mo(S,B=>B.dom.getBoundingClientRect()),O={left:Math.min(E.firstCell.left,E.lastCell.left),right:Math.max(E.firstCell.right,E.lastCell.right),top:Math.min(E.firstCell.top,E.lastCell.top),bottom:Math.max(E.firstCell.bottom,E.lastCell.bottom)};return NE(O.left,O.top,O.right-O.left,O.bottom-O.top)}}),C=jB(i,s).bind(S=>$E(S)?ti(S.start)?k.some(S.start):bu(S.start):k.some(S.firstCell)).getOr(t.element);return WB(g,d,s,c,C)};var e9=[$s("getSelection"),ct("root"),$s("bubble"),T0(),Re("overrides",{}),Re("showAbove",!1),pr("placement",QL)];const IE="link-layout",GB=t=>t.x+t.width,yh=(t,s)=>t.x-s.width,qB=(t,s)=>t.y-s.height+t.height,KB=t=>t.y,_p=(t,s,c)=>gc(GB(t),KB(t),c.southeast(),zf(),"southeast",Ca(t,{left:0,top:2}),IE),vk=(t,s,c)=>gc(yh(t,s),KB(t),c.southwest(),qg(),"southwest",Ca(t,{right:1,top:2}),IE),YB=(t,s,c)=>gc(GB(t),qB(t,s),c.northeast(),F2(),"northeast",Ca(t,{left:0,bottom:3}),IE),Ch=(t,s,c)=>gc(yh(t,s),qB(t,s),c.northwest(),N2(),"northwest",Ca(t,{right:1,bottom:3}),IE),XB=()=>[_p,vk,YB,Ch],JB=()=>[vk,_p,Ch,YB],Od=(t,s,c)=>{const i=lk(c,s.item.element),d=BE(t.element,s,XB(),JB(),XB(),JB(),k.none());return k.some(MC({anchorBox:i,bubble:fp(),overrides:s.overrides,layouts:d}))};var QB=[ct("item"),T0(),Re("overrides",{}),pr("placement",Od)],eM=ui("type",{selection:e9,node:XL,hotspot:ZL,submenu:QB,makeshift:jL});const tM=[Ai("classes",Zr),Sl("mode","all",["all","layout","placement"])],t9=[Re("useFixed",qe),$s("getBounds")],LE=[wl("anchor",eM),Ki("transition",tM)],nM=()=>{const t=document.documentElement;return BB(0,0,t.clientWidth,t.clientHeight)},n9=t=>{const s=fa(t.element),c=t.element.dom.getBoundingClientRect();return dk(s.left,s.top,c.width,c.height)},o9=(t,s,c,i,d,g)=>{const p=NL(s.anchorBox,t);return hk(p,i.element,s.bubble,s.layouts,d,c,s.overrides,g)},HE=(t,s,c,i,d)=>{const g=k.none();zE(t,s,c,i,d,g)},zE=(t,s,c,i,d,g)=>{const p=Ti("placement.info",Un(LE),d),C=p.anchor,S=i.element,E=c.get(i.uid);dh(()=>{Vn(S,"position","fixed");const O=fr(S,"visibility");Vn(S,"visibility","hidden");const B=s.useFixed()?nM():n9(t);C.placement(t,C,B).each(I=>{const U=g.orThunk(()=>s.getBounds.map(vs)),j=o9(B,I,U,i,E,p.transition);c.set(i.uid,j)}),O.fold(()=>{Ro(S,"visibility")},I=>{Vn(S,"visibility",I)}),fr(S,"left").isNone()&&fr(S,"top").isNone()&&fr(S,"right").isNone()&&fr(S,"bottom").isNone()&&An(fr(S,"position"),"fixed")&&Ro(S,"position")},S)};var oM=Object.freeze({__proto__:null,position:HE,positionWithinBounds:zE,getMode:(t,s,c)=>s.useFixed()?"fixed":"absolute",reset:(t,s,c,i)=>{const d=i.element;Ve(["position","left","right","top","bottom"],g=>Ro(d,g)),cv(d),c.clear(i.uid)}}),yk=Object.freeze({__proto__:null,init:()=>{let t={};return el({readState:()=>t,clear:d=>{qn(d)?delete t[d]:t={}},set:(d,g)=>{t[d]=g},get:d=>on(t,d)})}});const Xa=sa({fields:t9,name:"positioning",active:ML,apis:oM,state:yk}),c9=(t,s)=>s.universal?t:jn(t,c=>Je(s.channels,c));var a9=Object.freeze({__proto__:null,events:t=>vr([We(Hg(),(s,c)=>{const i=t.channels,d=zn(i),g=c,p=c9(d,g);Ve(p,C=>{const S=i[C],E=S.schema,O=Ti("channel["+C+`] data
Receiver: `+Jl(s.element),E,g.data);S.onReceive(s,O)})})])}),Ck=[wl("channels",w2(Yt.value,Cl([B1("onReceive"),Re("schema",pt())])))];const su=sa({fields:Ck,name:"receiving",active:a9});var UE=Object.freeze({__proto__:null,events:(t,s)=>{const c=(i,d)=>{t.updateState.each(g=>{const p=g(i,d);s.set(p)}),t.renderComponents.each(g=>{const p=g(d,s.get());(t.reuseDom?Xx:Yx)(i,p)})};return vr([We(Hg(),(i,d)=>{const g=d;if(!g.universal){const p=t.channel;Je(g.channels,p)&&c(i,g.data)}}),ur((i,d)=>{t.initialData.each(g=>{c(i,g)})})])}}),sM=Object.freeze({__proto__:null,getState:(t,s,c)=>c}),l9=[ct("channel"),$s("renderComponents"),$s("updateState"),$s("initialData"),va("reuseDom",!0)],u9=Object.freeze({__proto__:null,init:()=>{const t=qt(k.none()),s=()=>t.set(k.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const ru=sa({fields:l9,name:"reflecting",active:UE,apis:sM,state:u9}),WE=(t,s,c,i)=>{c.get().each(p=>{g0(t)});const d=s.getAttachPoint(t);gm(d,t);const g=t.getSystem().build(i);return gm(t,g),c.set(g),g},wk=(t,s,c,i)=>{const d=WE(t,s,c,i);return s.onOpen(t,d),d},rM=(t,s,c,i)=>c.get().map(()=>WE(t,s,c,i)),Sk=(t,s,c,i,d)=>{iM(t,s),wk(t,s,c,i),d(),ZE(t,s)},cM=(t,s,c)=>{c.get().each(i=>{g0(t),hm(t),s.onClose(t,i),c.clear()})},xk=(t,s,c)=>c.isOpen(),d9=(t,s,c,i)=>xk(t,s,c)&&c.get().exists(d=>s.isPartOf(t,d,i)),m9=(t,s,c)=>c.get(),f9=(t,s,c,i)=>{fr(t.element,s).fold(()=>{ir(t.element,c)},d=>{$n(t.element,c,d)}),Vn(t.element,s,i)},aM=(t,s,c)=>{Lc(t.element,c).fold(()=>Ro(t.element,s),i=>Vn(t.element,s,i))},iM=(t,s,c)=>{const i=s.getAttachPoint(t);Vn(t.element,"position",Xa.getMode(i)),f9(t,"visibility",s.cloakVisibilityAttr,"hidden")},g9=t=>Bt(["top","left","right","bottom"],s=>fr(t,s).isSome()),ZE=(t,s,c)=>{g9(t.element)||Ro(t.element,"position"),aM(t,"visibility",s.cloakVisibilityAttr)};var lM=Object.freeze({__proto__:null,cloak:iM,decloak:ZE,open:wk,openWhileCloaked:Sk,close:cM,isOpen:xk,isPartOf:d9,getState:m9,setContent:rM}),p9=Object.freeze({__proto__:null,events:(t,s)=>vr([We(Nb(),(c,i)=>{cM(c,t,s)})])}),Ek=[os("onOpen"),os("onClose"),ct("isPartOf"),ct("getAttachPoint"),Re("cloakVisibilityAttr","data-precloak-visibility")],b9=Object.freeze({__proto__:null,init:()=>{const t=Ln(),s=G("not-implemented");return el({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const us=sa({fields:Ek,name:"sandboxing",active:p9,apis:lM,state:b9}),FC=(t,s)=>s.getAnimationRoot.fold(()=>t.element,c=>c(t)),wh=t=>t.dimension.property,Rp=(t,s)=>t.dimension.getDimension(s),Yv=(t,s)=>{const c=FC(t,s);ha(c,[s.shrinkingClass,s.growingClass])},Tk=(t,s)=>{Tr(t.element,s.openClass),Ps(t.element,s.closedClass),Vn(t.element,wh(s),"0px"),bl(t.element)},Xv=(t,s)=>{Tr(t.element,s.closedClass),Ps(t.element,s.openClass),Ro(t.element,wh(s))},uM=(t,s,c,i)=>{c.setCollapsed(),Vn(t.element,wh(s),Rp(s,t.element)),Yv(t,s),Tk(t,s),s.onStartShrink(t),s.onShrunk(t)},v9=(t,s,c,i)=>{const d=i.getOrThunk(()=>Rp(s,t.element));c.setCollapsed(),Vn(t.element,wh(s),d),bl(t.element);const g=FC(t,s);Tr(g,s.growingClass),Ps(g,s.shrinkingClass),Tk(t,s),s.onStartShrink(t)},dM=(t,s,c)=>{const i=Rp(s,t.element);(i==="0px"?uM:v9)(t,s,c,k.some(i))},mM=(t,s,c)=>{const i=FC(t,s),d=Xr(i,s.shrinkingClass),g=Rp(s,t.element);Xv(t,s);const p=Rp(s,t.element);(d?()=>{Vn(t.element,wh(s),g),bl(t.element)}:()=>{Tk(t,s)})(),Tr(i,s.shrinkingClass),Ps(i,s.growingClass),Xv(t,s),Vn(t.element,wh(s),p),c.setExpanded(),s.onStartGrow(t)},y9=(t,s,c)=>{if(c.isExpanded()){Ro(t.element,wh(s));const i=Rp(s,t.element);Vn(t.element,wh(s),i)}},C9=(t,s,c)=>{c.isExpanded()||mM(t,s,c)},fM=(t,s,c)=>{c.isExpanded()&&dM(t,s,c)},w9=(t,s,c)=>{c.isExpanded()&&uM(t,s,c)},S9=(t,s,c)=>c.isExpanded(),Ak=(t,s,c)=>c.isCollapsed(),Bp=(t,s,c)=>{const i=FC(t,s);return Xr(i,s.growingClass)===!0},gM=(t,s,c)=>{const i=FC(t,s);return Xr(i,s.shrinkingClass)===!0};var E9=Object.freeze({__proto__:null,refresh:y9,grow:C9,shrink:fM,immediateShrink:w9,hasGrown:S9,hasShrunk:Ak,isGrowing:Bp,isShrinking:gM,isTransitioning:(t,s,c)=>Bp(t,s)||gM(t,s),toggleGrow:(t,s,c)=>{(c.isExpanded()?dM:mM)(t,s,c)},disableTransitions:Yv,immediateGrow:(t,s,c)=>{c.isExpanded()||(Xv(t,s),Vn(t.element,wh(s),Rp(s,t.element)),Yv(t,s),c.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),pM=Object.freeze({__proto__:null,exhibit:(t,s,c)=>{const i=s.expanded;return Pu(i?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:Zm(s.dimension.property,"0px")})},events:(t,s)=>vr([th(xl(),(c,i)=>{i.event.raw.propertyName===t.dimension.property&&(Yv(c,t),s.isExpanded()&&Ro(c.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(c))})])}),bM=[ct("closedClass"),ct("openClass"),ct("shrinkingClass"),ct("growingClass"),$s("getAnimationRoot"),os("onShrunk"),os("onStartShrink"),os("onGrown"),os("onStartGrow"),Re("expanded",!1),wl("dimension",ui("property",{width:[pr("property","width"),pr("getDimension",t=>ta(t)+"px")],height:[pr("property","height"),pr("getDimension",t=>ac(t)+"px")]}))],Sh=Object.freeze({__proto__:null,init:t=>{const s=qt(t.expanded),c=()=>"expanded: "+s.get();return el({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:pn(s.set,!1),setExpanded:pn(s.set,!0),readState:c})}});const Zc=sa({fields:bM,name:"sliding",active:pM,apis:E9,state:Sh});var Jv=Object.freeze({__proto__:null,events:(t,s)=>{const i=t.stream.streams.setup(t,s);return vr([We(t.event,i),Sd(()=>s.cancel())].concat(t.cancelEvent.map(d=>[We(d,()=>s.cancel())]).getOr([])))}});const vM=t=>{const s=qt(null);return el({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:g=>{s.set(g)},cancel:()=>{const g=s.get();g!==null&&g.cancel()}})};var CM=Object.freeze({__proto__:null,throttle:vM,init:t=>t.stream.streams.state(t)});const kk=(t,s)=>{const c=t.stream,i=Xc(t.onStream,c.delay);return s.setTimer(i),(d,g)=>{i.throttle(d,g),c.stopEvent&&g.stop()}};var GE=[wl("stream",ui("mode",{throttle:[ct("delay"),Re("stopEvent",!0),pr("streams",{setup:kk,state:vM})]})),Re("event","input"),$s("cancelEvent"),B1("onStream")];const qE=sa({fields:GE,name:"streaming",active:Jv,state:CM});var Dk=Object.freeze({__proto__:null,exhibit:(t,s)=>Pu({attributes:A1([{key:s.tabAttr,value:"true"}])})}),k9=[Re("tabAttr","data-alloy-tabstop")];const or=sa({fields:k9,name:"tabstopping",active:Dk}),D9=(t,s,c)=>{const i=s.aria;i.update(t,i,c.get())},O9=(t,s,c)=>{s.toggleClass.each(i=>{c.get()?Ps(t.element,i):Tr(t.element,i)})},xh=(t,s,c,i)=>{const d=c.get();c.set(i),O9(t,s,c),D9(t,s,c),d!==i&&s.onToggled(t,i)},wM=(t,s,c)=>{xh(t,s,c,!c.get())},SM=(t,s,c)=>{xh(t,s,c,!0)},Ok=(t,s,c)=>{xh(t,s,c,!1)},_9=(t,s,c)=>c.get(),KE=(t,s,c)=>{xh(t,s,c,s.selected)};var _k=Object.freeze({__proto__:null,onLoad:KE,toggle:wM,isOn:_9,on:SM,off:Ok,set:xh}),xM=Object.freeze({__proto__:null,exhibit:()=>Pu({}),events:(t,s)=>{const c=j4(t,s,wM),i=K2(t,s,KE);return vr(ae([t.toggleOnExecute?[c]:[],[i]]))}});const B9=(t,s,c)=>{$n(t.element,"aria-pressed",c),s.syncWithExpanded&&AM(t,s,c)},EM=(t,s,c)=>{$n(t.element,"aria-selected",c)},TM=(t,s,c)=>{$n(t.element,"aria-checked",c)},AM=(t,s,c)=>{$n(t.element,"aria-expanded",c)};var M9=[Re("selected",!1),$s("toggleClass"),Re("toggleOnExecute",!0),os("onToggled"),di("aria",{mode:"none"},ui("mode",{pressed:[Re("syncWithExpanded",!1),pr("update",B9)],checked:[pr("update",TM)],expanded:[pr("update",AM)],selected:[pr("update",EM)],none:[pr("update",re)]}))];const zo=sa({fields:M9,name:"toggling",active:xM,apis:_k,state:X2(!1)}),kM=nt("tooltip.exclusive"),NC=nt("tooltip.show"),Qv=nt("tooltip.hide"),ey=nt("tooltip.immediateHide"),PC=nt("tooltip.immediateShow"),Rk=(t,s,c)=>{t.getSystem().broadcastOn([kM],{})};var DM=Object.freeze({__proto__:null,hideAllExclusive:Rk,immediateOpenClose:(t,s,c,i)=>Do(t,i?PC:ey),isEnabled:(t,s,c)=>c.isEnabled(),setComponents:(t,s,c,i)=>{c.getTooltip().each(d=>{d.getSystem().isConnected()&&so.set(d,i)})},setEnabled:(t,s,c,i)=>c.setEnabled(i)}),OM=Object.freeze({__proto__:null,events:(t,s)=>{const c=p=>{s.getTooltip().each(C=>{C.getSystem().isConnected()&&(hm(C),t.onHide(p,C),s.clearTooltip())}),s.clearTimer()},i=p=>{if(!s.isShowing()&&s.isEnabled()){Rk(p);const C=t.lazySink(p).getOrDie(),S=p.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:vr(t.mode==="normal"?[We(Ou(),E=>{Do(p,NC)}),We(Bc(),E=>{Do(p,Qv)})]:[]),behaviours:Et([so.config({})])});s.setTooltip(S),gm(C,S),t.onShow(p,S),Xa.position(C,S,{anchor:t.anchor(p)})}},d=p=>{s.getTooltip().each(C=>{const S=t.lazySink(p).getOrDie();Xa.position(S,C,{anchor:t.anchor(p)})})},g=()=>{switch(t.mode){case"normal":return[We(_u(),p=>{Do(p,PC)}),We(Ru(),p=>{Do(p,ey)}),We(Ou(),p=>{Do(p,NC)}),We(Bc(),p=>{Do(p,Qv)})];case"follow-highlight":return[We(jg(),(p,C)=>{Do(p,NC)}),We(Lb(),p=>{Do(p,Qv)})];case"children-normal":return[We(_u(),(p,C)=>{Kr(p.element).each(S=>{po(C.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{Do(p,PC)},E=>{s.isShowing()&&(t.onShow(p,E),d(p))})})}),We(Ru(),p=>{Kr(p.element).fold(()=>{Do(p,ey)},re)}),We(Ou(),p=>{As(p.element,"[data-mce-tooltip]:hover").each(C=>{s.getTooltip().fold(()=>{Do(p,NC)},S=>{s.isShowing()&&(t.onShow(p,S),d(p))})})}),We(Bc(),p=>{As(p.element,"[data-mce-tooltip]:hover").fold(()=>{Do(p,Qv)},re)})];default:return[We(_u(),(p,C)=>{Kr(p.element).each(S=>{po(C.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{Do(p,PC)},E=>{s.isShowing()&&(t.onShow(p,E),d(p))})})}),We(Ru(),p=>{Kr(p.element).fold(()=>{Do(p,ey)},re)})]}};return vr(ae([[nx(p=>{t.onSetup(p)}),We(NC,p=>{s.resetTimer(()=>{i(p)},t.delayForShow())}),We(Qv,p=>{s.resetTimer(()=>{c(p)},t.delayForHide())}),We(PC,p=>{s.resetTimer(()=>{i(p)},0)}),We(ey,p=>{s.resetTimer(()=>{c(p)},0)}),We(Hg(),(p,C)=>{const S=C;S.universal||(Je(S.channels,kM)||Je(S.channels,G1()))&&(S.data.closedTooltip&&s.isShowing()&&S.data.closedTooltip(),c(p))}),Sd(p=>{c(p)})],g()]))}}),$9=[ct("lazySink"),ct("tooltipDom"),Re("exclusive",!0),Re("tooltipComponents",[]),Rs("delayForShow",G(300)),Rs("delayForHide",G(100)),Rs("onSetup",re),Sl("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),Re("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:G([hc,Wc,xc,wa,br,Mc]),onRtl:G([hc,Wc,xc,wa,br,Mc])},bubble:El(0,-2,{})})),os("onHide"),os("onShow")],_M=Object.freeze({__proto__:null,init:()=>{const t=qt(!0),s=Ln(),c=Ln(),i=()=>{s.on(clearTimeout)},d=(p,C)=>{i(),s.set(setTimeout(p,C))},g=G("not-implemented");return el({getTooltip:c.get,isShowing:c.isSet,setTooltip:c.set,clearTooltip:c.clear,clearTimer:i,resetTimer:d,readState:g,isEnabled:()=>t.get(),setEnabled:p=>t.set(p)})}});const sr=sa({fields:$9,name:"tooltipping",active:OM,state:_M,apis:DM});var BM=Object.freeze({__proto__:null,events:()=>vr([mv(vS(),rt)]),exhibit:()=>Pu({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const ty=sa({fields:[],name:"unselecting",active:BM}),L9=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return co(s,(c,i)=>i.name==="class"?c:{...c,[i.name]:i.value},{})},Bk=t=>Array.prototype.slice.call(t.dom.classList,0),Eh=t=>{const s=At.fromHtml(t),c=zl(s),i=L9(s),d=Bk(s),g=c.length===0?{}:{innerHtml:vu(s)};return{tag:ml(s),classes:d,attributes:i,...g}},Ss=t=>{const s=oL(t)&&yo(t,"uid")?t.uid:mh("memento");return{get:g=>g.getSystem().getByUid(s).getOrDie(),getOpt:g=>g.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}},jc=Hf,kl=mp,H9=(t,s)=>{const c=qt(!1),i=qt(!1);return{stop:()=>{c.set(!0)},cut:()=>{i.set(!0)},isStopped:c.get,isCut:i.get,event:t,setSource:s.set,getSource:s.get}},Mk=t=>{const s=qt(!1);return{stop:()=>{s.set(!0)},cut:re,isStopped:s.get,isCut:qe,event:t,setSource:le("Cannot set source of a broadcasted event"),getSource:le("Cannot get source of a broadcasted event")}},YE=t=>t.raw.which===Q2[0]&&!Je(["input","textarea"],ml(t.target))&&!Ag(t.target,'[contenteditable="true"]'),z9=(t,s)=>{const c={stopBackspace:!0,...s},i=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=Ra(c),g=Ae(i.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),U=>Es(t,U,j=>{d.fireIfReady(j,U).each(ie=>{ie&&j.kill()}),c.triggerEvent(U,j)&&j.kill()})),p=Ln(),C=Es(t,"paste",U=>{d.fireIfReady(U,"paste").each(Q=>{Q&&U.kill()}),c.triggerEvent("paste",U)&&U.kill(),p.set(setTimeout(()=>{c.triggerEvent(T2(),U)},0))}),S=Es(t,"keydown",U=>{c.triggerEvent("keydown",U)?U.kill():c.stopBackspace&&YE(U)&&U.prevent()}),E=Es(t,"focusin",U=>{c.triggerEvent("focusin",U)&&U.kill()}),O=Ln(),B=Es(t,"focusout",U=>{c.triggerEvent("focusout",U)&&U.kill(),O.set(setTimeout(()=>{c.triggerEvent(Ru(),U)},0))});return{unbind:()=>{Ve(g,U=>{U.unbind()}),S.unbind(),E.unbind(),B.unbind(),C.unbind(),p.on(clearTimeout),O.on(clearTimeout)}}},Fk=(t,s)=>{const c=on(t,"target").getOr(s);return qt(c)},ny=nc.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),Nk=(t,s,c,i,d,g)=>{const p=t(s,i),C=H9(c,d);return p.fold(()=>(g.logEventNoHandlers(s,i),ny.complete()),S=>{const E=S.descHandler;return rf(E)(C),C.isStopped()?(g.logEventStopped(s,S.element,E.purpose),ny.stopped()):C.isCut()?(g.logEventCut(s,S.element,E.purpose),ny.complete()):oi(S.element).fold(()=>(g.logNoParent(s,S.element,E.purpose),ny.complete()),B=>(g.logEventResponse(s,S.element,E.purpose),ny.resume(B)))})},XE=(t,s,c,i,d,g)=>Nk(t,s,c,i,d,g).fold(rt,p=>XE(t,s,c,p,d,g),qe),MM=(t,s,c,i,d)=>{const g=Fk(c,i);return Nk(t,s,c,i,g,d)},V9=(t,s,c)=>{const i=Mk(s);return Ve(t,d=>{const g=d.descHandler;rf(g)(i)}),i.isStopped()},FM=(t,s,c,i)=>Pk(t,s,c,c.target,i),Pk=(t,s,c,i,d)=>{const g=Fk(c,i);return XE(t,s,c,i,g,d)},NM=(t,s)=>({element:t,descHandler:s}),PM=(t,s)=>({id:t,descHandler:s}),U9=()=>{const t={},s=(p,C,S)=>{ko(S,(E,O)=>{const B=t[O]!==void 0?t[O]:{};B[C]=Lv(E,p),t[O]=B})},c=(p,C)=>Dd(C).bind(S=>on(p,S)).map(S=>NM(C,S));return{registerId:s,unregisterId:p=>{ko(t,(C,S)=>{So(C,p)&&delete C[p]})},filterByType:p=>on(t,p).map(C=>Xo(C,(S,E)=>PM(E,S))).getOr([]),find:(p,C,S)=>on(t,C).bind(E=>yl(S,O=>c(E,O),p))}},$k=()=>{const t=U9(),s={},c=E=>{const O=E.element;return Dd(O).getOrThunk(()=>nE("uid-",E.element))},i=(E,O)=>{const B=s[O];if(B===E)g(E);else throw new Error('The tagId "'+O+'" is already used by: '+Jl(B.element)+`
Cannot use it for: `+Jl(E.element)+`
The conflicting element is`+(is(B.element)?" ":" not ")+"already in the DOM")},d=E=>{const O=c(E);yo(s,O)&&i(E,O);const B=[E];t.registerId(B,O,E.events),s[O]=E},g=E=>{Dd(E.element).each(O=>{delete s[O],t.unregisterId(O)})};return{find:(E,O,B)=>t.find(E,O,B),filter:E=>t.filterByType(E),register:d,unregister:g,getById:E=>on(s,E)}},Ik=t=>{const s=X=>oi(t.element).fold(rt,he=>Jo(X,he)),c=$k(),i=(X,he)=>c.find(s,X,he),d=z9(t.element,{triggerEvent:(X,he)=>Pf(X,he.target,we=>FM(i,X,he,we))}),g={debugInfo:G("real"),triggerEvent:(X,he,we)=>{Pf(X,he,Me=>Pk(i,X,we,he,Me))},triggerFocus:(X,he)=>{Dd(X).fold(()=>{kc(X)},we=>{Pf(tm(),X,Me=>(MM(i,tm(),{originator:he,kill:re,prevent:re,target:X},X,Me),!1))})},triggerEscape:(X,he)=>{g.triggerEvent("keydown",X.element,he.event)},getByUid:X=>Q(X),getByDom:X=>ie(X),build:m,buildOrPatch:l,addToGui:X=>{S(X)},removeFromGui:X=>{E(X)},addToWorld:X=>{p(X)},removeFromWorld:X=>{C(X)},broadcast:X=>{I(X)},broadcastOn:(X,he)=>{U(X,he)},broadcastEvent:(X,he)=>{j(X,he)},isConnected:rt},p=X=>{X.connect(g),zd(X.element)||(c.register(X),Ve(X.components(),p),g.triggerEvent($b(),X.element,{target:X.element}))},C=X=>{zd(X.element)||(Ve(X.components(),C),c.unregister(X)),X.disconnect()},S=X=>{gm(t,X)},E=X=>{hm(X)},O=()=>{d.unbind(),Ui(t.element)},B=X=>{const he=c.filter(Hg());Ve(he,we=>{const Me=we.descHandler;rf(Me)(X)})},I=X=>{B({universal:!0,data:X})},U=(X,he)=>{B({universal:!1,channels:X,data:he})},j=(X,he)=>{const we=c.filter(X);return V9(we,he)},Q=X=>c.getById(X).fold(()=>Yt.error(new Error('Could not find component with uid: "'+X+'" in system.')),Yt.value),ie=X=>{const he=Dd(X).getOr("not found");return Q(he)};return p(t),{root:t,element:t.element,destroy:O,add:S,remove:E,getByUid:Q,getByDom:ie,addToWorld:p,removeFromWorld:C,broadcast:I,broadcastOn:U,broadcastEvent:j}},$M=()=>{const t=(s,c)=>{c.stop(),U1(s)};return[We(em(),t),We(Vg(),t),eh(jm()),eh(mi())]},Lk=t=>{const s=c=>ef((i,d)=>{c(i),d.stop()});return vr(ae([t.map(s).toArray(),$M()]))},Na=Wu({name:"Button",factory:t=>{const s=Lk(t.action),c=t.dom.tag,i=g=>on(t.dom,"attributes").bind(p=>on(p,g)),d=()=>{if(c==="button"){const g=i("type").getOr("button"),p=i("role").map(C=>({role:C})).getOr({});return{type:g,...p}}else return{role:t.role.getOr(i("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:ou.augment(t.buttonBehaviours,[to.config({}),Sn.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:t.eventOrder}},configFields:[Re("uid",void 0),ct("dom"),Re("components",[]),ou.field("buttonBehaviours",[to,Sn]),$s("action"),$s("role"),Re("eventOrder",{})]}),W9=G([Re("shell",!1),ct("makeItem"),Re("setupItem",re),ou.field("listBehaviours",[so])]),IM=Qi({name:"items",overrides:()=>({behaviours:Et([so.config({})])})}),Z9=G([IM]),j9=G("CustomList"),Hk=(t,s,c,i)=>{const d=(C,S)=>{p(C).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},E=>{const O=so.contents(E),B=S.length,I=B-O.length,U=I>0?Be(I,()=>t.makeItem()):[],j=O.slice(B);Ve(j,ie=>so.remove(E,ie)),Ve(U,ie=>so.append(E,ie));const Q=so.contents(E);Ve(Q,(ie,X)=>{t.setupItem(C,ie,S[X],X)})})},g=t.shell?{behaviours:[so.config({})],components:[]}:{behaviours:[],components:s},p=C=>t.shell?k.some(C):Cs(C,t,"items");return{uid:t.uid,dom:t.dom,components:g.components,behaviours:ia(t.listBehaviours,g.behaviours),apis:{setItems:d}}},LM=rl({name:j9(),configFields:W9(),partFields:Z9(),factory:Hk,apis:{setItems:(t,s,c)=>{t.setItems(s,c)}}}),$C="aria-controls",G9=t=>kf(t,c=>{if(!ti(c))return!1;const i=Cc(c,"id");return i!==void 0&&i.indexOf($C)>-1}).bind(c=>{const i=Cc(c,"id"),d=oc(c);return As(d,`[${$C}="${i}"]`)}),HM=()=>{const t=nt($C);return{id:t,link:i=>{$n(i,$C,t)},unlink:i=>{ir(i,$C)}}},q9=(t,s)=>G9(s).exists(c=>Mp(t,c)),Mp=(t,s)=>qh(s,c=>Jo(c,t.element),qe)||q9(t,s),zM="alloy.item-hover",VM="alloy.item-focus",UM="alloy.item-toggled",zk=t=>{(Kr(t.element).isNone()||to.isFocused(t))&&(to.isFocused(t)||to.focus(t),On(t,zM,{item:t}))},WM=t=>{On(t,VM,{item:t})},K9=(t,s)=>{On(t,UM,{item:t,state:s})},Vk=G(zM),Y9=G(VM),ZM=G(UM),jM=t=>t.role.fold(()=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),St),Uk=(t,s)=>({aria:{mode:s?"selected":"checked"},...Js(t,(c,i)=>i!=="exclusive"),onToggled:(c,i)=>{dt(t.onToggled)&&t.onToggled(c,i),K9(c,i)}}),X9=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:jM(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:ou.augment(t.itemBehaviours,[t.toggling.fold(zo.revoke,s=>zo.config(Uk(s,t.role.exists(c=>c==="option")))),to.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{WM(s)}}),Sn.config({mode:"execution"}),Lt.config({store:{mode:"memory",initialValue:t.data}}),Qn("item-type-events",[...$M(),We(Ou(),zk),We(zg(),to.focus)])]),components:t.components,eventOrder:t.eventOrder});var Q9=[ct("data"),ct("components"),ct("dom"),Re("hasSubmenu",!1),$s("toggling"),$s("role"),ou.field("itemBehaviours",[zo,to,Sn,Lt]),Re("ignoreFocus",!1),Re("domModification",{}),pr("builder",X9),Re("eventOrder",{})];const IC=t=>({dom:t.dom,components:t.components,events:vr([q2(zg())])});var eH=[ct("dom"),ct("components"),pr("builder",IC)];const Wk=G("item-widget"),LC=G([fi({name:"widget",overrides:t=>({behaviours:Et([Lt.config({store:{mode:"manual",getValue:s=>t.data,setValue:re}})])})})]),GM=t=>{const s=Lf(Wk(),t,LC()),c=Xm(Wk(),t,s.internals()),i=g=>Cs(g,t,"widget").map(p=>(Sn.focusIn(p),p)),d=(g,p)=>um(p.event.target)?k.none():(t.autofocus&&p.setSource(g.element),k.none());return{dom:t.dom,components:c,domModification:t.domModification,events:vr([ef((g,p)=>{i(g).each(C=>{p.stop()})}),We(Ou(),zk),We(zg(),(g,p)=>{t.autofocus?i(g):to.focus(g)})]),behaviours:ou.augment(t.widgetBehaviours,[Lt.config({store:{mode:"memory",initialValue:t.data}}),to.config({ignore:t.ignoreFocus,onFocus:g=>{WM(g)}}),Sn.config({mode:"special",focusIn:t.autofocus?g=>{i(g)}:cx(),onLeft:d,onRight:d,onEscape:(g,p)=>!to.isFocused(g)&&!t.autofocus?(to.focus(g),k.some(!0)):(t.autofocus&&p.setSource(g.element),k.none())})])}};var Zk=[ct("uid"),ct("data"),ct("components"),ct("dom"),Re("autofocus",!1),Re("ignoreFocus",!1),ou.field("widgetBehaviours",[Lt,to,Sn]),Re("domModification",{}),cm(LC()),pr("builder",GM)];const tH=ui("type",{widget:Zk,item:Q9,separator:eH}),nH=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),QE=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),qM=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),KM=G([Kb({factory:{sketch:t=>{const s=Ti("menu.spec item",tH,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>So(s,"uid")?s:{...s,uid:mh("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),oH=G([Gr("role"),ct("value"),ct("items"),ct("dom"),ct("components"),Re("eventOrder",{}),xa("menuBehaviours",[hs,Lt,ut,Sn]),di("movement",{mode:"menu",moveOnTab:!0},ui("mode",{grid:[zb(),pr("config",nH)],matrix:[pr("config",QE),ct("rowSelector"),Re("previousSelector",k.none)],menu:[Re("moveOnTab",!0),pr("config",qM)]})),DS(),Re("fakeFocus",!1),Re("focusManager",bv()),os("onHighlight"),os("onDehighlight"),Re("showMenuRole",!0)]),YM=G("alloy.menu-focus"),sH=(t,s)=>{const c=_c(t.element,'[role="menuitemradio"][aria-checked="true"]');Ve(c,i=>{Jo(i,s.element)||t.getSystem().getByDom(i).each(d=>{zo.off(d)})})},rH=(t,s,c,i)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:ia(t.menuBehaviours,[hs.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),Lt.config({store:{mode:"memory",initialValue:t.value}}),ut.config({find:k.some}),Sn.config(t.movement.config(t,t.movement))]),events:vr([We(Y9(),(d,g)=>{const p=g.event;d.getSystem().getByDom(p.target).each(C=>{hs.highlight(d,C),g.stop(),On(d,YM(),{menu:d,item:C})})}),We(Vk(),(d,g)=>{const p=g.event.item;hs.highlight(d,p)}),We(ZM(),(d,g)=>{const{item:p,state:C}=g.event;C&&Cc(p.element,"role")==="menuitemradio"&&sH(d,p)})]),components:s,eventOrder:t.eventOrder,...t.showMenuRole?{domModification:{attributes:{role:t.role.getOr("menu")}}}:{}}),Th=rl({name:"Menu",configFields:oH(),partFields:KM(),factory:rH}),cH=t=>Ns(t,(s,c)=>({k:s,v:c})),XM=(t,s,c,i)=>on(c,i).bind(d=>on(t,d).bind(g=>{const p=XM(t,s,c,g);return k.some([g].concat(p))})).getOr([]),aH=(t,s)=>{const c={};ko(t,(p,C)=>{Ve(p,S=>{c[S]=C})});const i=s,d=cH(s),g=mo(d,(p,C)=>[C].concat(XM(c,i,d,C)));return mo(c,p=>on(g,p).getOr([p]))},iH=()=>{const t=qt({}),s=qt({}),c=qt({}),i=Ln(),d=qt({}),g=()=>{t.set({}),s.set({}),c.set({}),i.clear()},p=()=>i.get().isNone(),C=(Fe,Mt)=>{s.set({...s.get(),[Fe]:{type:"prepared",menu:Mt}})},S=(Fe,Mt,at,vt)=>{i.set(Fe),t.set(at),s.set(Mt),d.set(vt);const gt=aH(vt,at);c.set(gt)},E=Fe=>Os(t.get(),(Mt,at)=>Mt===Fe),O=(Fe,Mt,at)=>Q(Fe).bind(vt=>E(Fe).bind(gt=>Mt(gt).map(_n=>({triggeredMenu:vt,triggeringItem:_n,triggeringPath:at})))),B=(Fe,Mt)=>{const at=jn(X(Fe).toArray(),vt=>Q(vt).isSome());return on(c.get(),Fe).bind(vt=>{const gt=Ee(at.concat(vt)),_n=te(gt,(hn,$o)=>O(hn,Mt,gt.slice(0,$o+1)).fold(()=>An(i.get(),hn)?[]:[k.none()],In=>[k.some(In)]));return Co(_n)})},I=Fe=>on(t.get(),Fe).map(Mt=>{const at=on(c.get(),Fe).getOr([]);return[Mt].concat(at)}),U=Fe=>on(c.get(),Fe).bind(Mt=>Mt.length>1?k.some(Mt.slice(1)):k.none()),j=Fe=>on(c.get(),Fe),Q=Fe=>ie(Fe).bind(JM),ie=Fe=>on(s.get(),Fe),X=Fe=>on(t.get(),Fe);return{setMenuBuilt:C,setContents:S,expand:I,refresh:j,collapse:U,lookupMenu:ie,lookupItem:X,otherMenus:Fe=>{const Mt=d.get();return Ce(zn(Mt),Fe)},getPrimary:()=>i.get().bind(Q),getMenus:()=>s.get(),clear:g,isClear:p,getTriggeringPath:B}},JM=t=>t.type==="prepared"?k.some(t.menu):k.none(),eT={init:iH,extractPreparedMenu:JM},jk=nt("tiered-menu-item-highlight"),QM=nt("tiered-menu-item-dehighlight"),lH=(t,s)=>{const c=Ln(),i=(ot,Rt,Hn)=>mo(Hn,(uo,xn)=>{const Yn=()=>Th.sketch({...uo,value:xn,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(Vs,ps)=>{On(Vs,jk,{menuComp:Vs,itemComp:ps})},onDehighlight:(Vs,ps)=>{On(Vs,QM,{menuComp:Vs,itemComp:ps})},focusManager:t.fakeFocus?rC():bv()});return xn===Rt?{type:"prepared",menu:ot.getSystem().build(Yn())}:{type:"notbuilt",nbMenu:Yn}}),d=eT.init(),g=ot=>{const Rt=i(ot,t.data.primary,t.data.menus),Hn=S();return d.setContents(t.data.primary,Rt,t.data.expansions,Hn),d.getPrimary()},p=ot=>Lt.getValue(ot).value,C=(ot,Rt,Hn)=>Lo(Rt,uo=>{if(!uo.getSystem().isConnected())return k.none();const xn=hs.getCandidates(uo);return De(xn,Yn=>p(Yn)===Hn)}),S=ot=>mo(t.data.menus,(Rt,Hn)=>te(Rt.items,uo=>uo.type==="separator"?[]:[uo.data.value])),E=hs.highlight,O=(ot,Rt)=>{E(ot,Rt),hs.getHighlighted(Rt).orThunk(()=>hs.getFirst(Rt)).each(Hn=>{t.fakeFocus?hs.highlight(Rt,Hn):dv(ot,Hn.element,zg())})},B=(ot,Rt)=>Cn(Ae(Rt,Hn=>ot.lookupMenu(Hn).bind(uo=>uo.type==="prepared"?k.some(uo.menu):k.none()))),I=(ot,Rt,Hn)=>{const uo=B(Rt,Rt.otherMenus(Hn));Ve(uo,xn=>{ha(xn.element,[t.markers.backgroundMenu]),t.stayInDom||so.remove(ot,xn)})},U=ot=>c.get().getOrThunk(()=>{const Rt={},Hn=_c(ot.element,`.${t.markers.item}`),uo=jn(Hn,xn=>Cc(xn,"aria-haspopup")==="true");return Ve(uo,xn=>{ot.getSystem().getByDom(xn).each(Yn=>{const Vs=p(Yn);Rt[Vs]=Yn})}),c.set(Rt),Rt}),j=(ot,Rt)=>{const Hn=U(ot);ko(Hn,(uo,xn)=>{const Yn=Je(Rt,xn);$n(uo.element,"aria-expanded",Yn)})},Q=(ot,Rt,Hn)=>k.from(Hn[0]).bind(uo=>Rt.lookupMenu(uo).bind(xn=>{if(xn.type==="notbuilt")return k.none();{const Yn=xn.menu,Vs=B(Rt,Hn.slice(1));return Ve(Vs,ps=>{Ps(ps.element,t.markers.backgroundMenu)}),is(Yn.element)||so.append(ot,b(Yn)),ha(Yn.element,[t.markers.backgroundMenu]),O(ot,Yn),I(ot,Rt,Hn),k.some(Yn)}}));let ie;(function(ot){ot[ot.HighlightSubmenu=0]="HighlightSubmenu",ot[ot.HighlightParent=1]="HighlightParent"})(ie||(ie={}));const X=(ot,Rt,Hn)=>{if(Hn.type==="notbuilt"){const uo=ot.getSystem().build(Hn.nbMenu());return d.setMenuBuilt(Rt,uo),uo}else return Hn.menu},he=(ot,Rt,Hn=ie.HighlightSubmenu)=>{if(Rt.hasConfigured(yn)&&yn.isDisabled(Rt))return k.some(Rt);{const uo=p(Rt);return d.expand(uo).bind(xn=>(j(ot,xn),k.from(xn[0]).bind(Yn=>d.lookupMenu(Yn).bind(Vs=>{const ps=X(ot,Yn,Vs);return is(ps.element)||so.append(ot,b(ps)),t.onOpenSubmenu(ot,Rt,ps,Ee(xn)),Hn===ie.HighlightSubmenu?(hs.highlightFirst(ps),Q(ot,d,xn)):(hs.dehighlightAll(ps),k.some(Rt))}))))}},we=(ot,Rt)=>{const Hn=p(Rt);return d.collapse(Hn).bind(uo=>(j(ot,uo),Q(ot,d,uo).map(xn=>(t.onCollapseMenu(ot,Rt,xn),xn))))},Me=(ot,Rt)=>{const Hn=p(Rt);return d.refresh(Hn).bind(uo=>(j(ot,uo),Q(ot,d,uo)))},Fe=(ot,Rt)=>um(Rt.element)?k.none():he(ot,Rt,ie.HighlightSubmenu),Mt=(ot,Rt)=>um(Rt.element)?k.none():we(ot,Rt),at=(ot,Rt)=>we(ot,Rt).orThunk(()=>t.onEscape(ot,Rt).map(()=>ot)),vt=ot=>(Rt,Hn)=>ga(Hn.getSource(),`.${t.markers.item}`).bind(uo=>Rt.getSystem().getByDom(uo).toOptional().bind(xn=>ot(Rt,xn).map(rt))),gt=vr([We(YM(),(ot,Rt)=>{const Hn=Rt.event.item;d.lookupItem(p(Hn)).each(()=>{const uo=Rt.event.menu;hs.highlight(ot,uo);const xn=p(Rt.event.item);d.refresh(xn).each(Yn=>I(ot,d,Yn))})}),ef((ot,Rt)=>{const Hn=Rt.event.target;ot.getSystem().getByDom(Hn).each(uo=>{p(uo).indexOf("collapse-item")===0&&we(ot,uo),he(ot,uo,ie.HighlightSubmenu).fold(()=>{t.onExecute(ot,uo)},re)})}),ur((ot,Rt)=>{g(ot).each(Hn=>{so.append(ot,b(Hn)),t.onOpenMenu(ot,Hn),t.highlightOnOpen===qa.HighlightMenuAndItem?O(ot,Hn):t.highlightOnOpen===qa.HighlightJustMenu&&E(ot,Hn)})}),We(jk,(ot,Rt)=>{t.onHighlightItem(ot,Rt.event.menuComp,Rt.event.itemComp)}),We(QM,(ot,Rt)=>{t.onDehighlightItem(ot,Rt.event.menuComp,Rt.event.itemComp)}),...t.navigateOnHover?[We(Vk(),(ot,Rt)=>{const Hn=Rt.event.item;Me(ot,Hn),he(ot,Hn,ie.HighlightParent),t.onHover(ot,Hn)})]:[]]),_n=ot=>hs.getHighlighted(ot).bind(hs.getHighlighted),hn=ot=>{_n(ot).each(Rt=>{we(ot,Rt)})},$o=ot=>{d.getPrimary().each(Rt=>{O(ot,Rt)})},In=ot=>k.from(ot.components()[0]).filter(Rt=>Cc(Rt.element,"role")==="menu"),mn={collapseMenu:hn,highlightPrimary:$o,repositionMenus:ot=>{d.getPrimary().bind(Hn=>_n(ot).bind(uo=>{const xn=p(uo),Yn=Hr(d.getMenus()),Vs=Cn(Ae(Yn,eT.extractPreparedMenu));return d.getTriggeringPath(xn,ps=>C(ot,Vs,ps))}).map(uo=>({primary:Hn,triggeringPath:uo}))).fold(()=>{In(ot).each(Hn=>{t.onRepositionMenu(ot,Hn,[])})},({primary:Hn,triggeringPath:uo})=>{t.onRepositionMenu(ot,Hn,uo)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:ia(t.tmenuBehaviours,[Sn.config({mode:"special",onRight:vt(Fe),onLeft:vt(Mt),onEscape:vt(at),focusIn:(ot,Rt)=>{d.getPrimary().each(Hn=>{dv(ot,Hn.element,zg())})}}),hs.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),ut.config({find:ot=>hs.getHighlighted(ot)}),so.config({})]),eventOrder:t.eventOrder,apis:mn,events:gt}},eF=G("collapse-item"),uH=(t,s,c)=>({primary:t,menus:s,expansions:c}),dH=(t,s)=>({primary:t,menus:Zm(t,s),expansions:{}}),tF=t=>({value:nt(eF()),meta:{text:t}}),Fp=Wu({name:"TieredMenu",configFields:[Hb("onExecute"),Hb("onEscape"),B1("onOpenMenu"),B1("onOpenSubmenu"),os("onRepositionMenu"),os("onCollapseMenu"),Re("highlightOnOpen",qa.HighlightMenuAndItem),Wm("data",[ct("primary"),ct("menus"),ct("expansions")]),Re("fakeFocus",!1),os("onHighlightItem"),os("onDehighlightItem"),os("onHover"),OS(),ct("dom"),Re("navigateOnHover",!0),Re("stayInDom",!1),xa("tmenuBehaviours",[Sn,hs,ut,so]),Re("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:lH,extraApis:{tieredData:uH,singleData:dH,collapseItem:tF}}),Gk=G("sink"),mH=G(Qi({name:Gk(),overrides:G({dom:{tag:"div"},behaviours:Et([Xa.config({useFixed:rt})]),events:vr([eh(Uc()),eh(mi()),eh(em())])})})),fH=Cl([Re("isExtraPart",qe),Ki("fireEventInstead",[Re("event",Zg())])]),qk=t=>{const s=Ti("Dismissal",fH,t);return{[nf()]:{schema:Cl([ct("target")]),onReceive:(c,i)=>{us.isOpen(c)&&(us.isPartOf(c,i.target)||s.isExtraPart(c,i.target)||s.fireEventInstead.fold(()=>us.close(c),g=>Do(c,g.event)))}}}},nF=Cl([Ki("fireEventInstead",[Re("event",wS())]),Xl("doReposition")]),HC=t=>{const s=Ti("Reposition",nF,t);return{[Ba()]:{onReceive:c=>{us.isOpen(c)&&s.fireEventInstead.fold(()=>s.doReposition(c),i=>Do(c,i.event))}}}},oF=(t,s)=>{const c=t.getHotspot(s).getOr(s),i="hotspot",d=t.getAnchorOverrides();return t.layouts.fold(()=>({type:i,hotspot:c,overrides:d}),g=>({type:i,hotspot:c,overrides:d,layouts:g}))},gH=(t,s,c)=>{const i=t.fetch;return i(c).map(s)},hH=(t,s,c,i,d,g,p)=>{const C=gH(t,s,i),S=Kk(i,t);return C.map(E=>E.bind(O=>{const B=O.menus[O.primary];return k.from(B).each(I=>{t.listRole.each(U=>{I.role=U})}),k.from(Fp.sketch({...g.menu(),uid:mh(""),data:O,highlightOnOpen:p,onOpenMenu:(I,U)=>{const j=S().getOrDie();Xa.position(j,U,{anchor:c}),us.decloak(d)},onOpenSubmenu:(I,U,j)=>{const Q=S().getOrDie();Xa.position(Q,j,{anchor:{type:"submenu",item:U}}),us.decloak(d)},onRepositionMenu:(I,U,j)=>{const Q=S().getOrDie();Xa.position(Q,U,{anchor:c}),Ve(j,ie=>{Xa.position(Q,ie.triggeredMenu,{anchor:{type:"submenu",item:ie.triggeringItem}})})},onEscape:()=>(to.focus(i),us.close(d),k.some(!0))}))}))},tT=(t,s,c,i,d,g,p)=>{const C=oF(t,c);return hH(t,s,C,c,i,d,p).map(E=>(E.fold(()=>{us.isOpen(i)&&us.close(i)},O=>{us.cloak(i),us.open(i,O),g(i)}),i))},pH=(t,s,c,i,d,g,p)=>(us.close(i),lo.pure(i)),sF=(t,s,c,i,d,g)=>{const p=eo.getCoupled(c,"sandbox");return(us.isOpen(p)?pH:tT)(t,s,c,p,i,d,g)},rF=(t,s,c)=>{const i=ut.getCurrent(s).getOr(s),d=ta(t.element);c?Vn(i.element,"min-width",d+"px"):jd(i.element,d)},Kk=(t,s)=>t.getSystem().getByUid(s.uid+"-"+Gk()).map(c=>()=>Yt.value(c)).getOrThunk(()=>s.lazySink.fold(()=>()=>Yt.error(new Error("No internal sink is specified, nor could an external sink be found")),c=>()=>c(t))),cF=t=>{us.getState(t).each(s=>{Fp.repositionMenus(s)})},aF=(t,s,c)=>{const i=HM(),d=(C,S)=>{const E=oF(t,s);i.link(s.element),t.matchWidth&&rF(E.hotspot,S,t.useMinWidth),t.onOpen(E,C,S),c!==void 0&&c.onOpen!==void 0&&c.onOpen(C,S)},g=(C,S)=>{i.unlink(s.element),p().getOr(S).element.dom.dispatchEvent(new window.FocusEvent("focusout")),c!==void 0&&c.onClose!==void 0&&c.onClose(C,S)},p=Kk(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:i.id}},behaviours:ou.augment(t.sandboxBehaviours,[Lt.config({store:{mode:"memory",initialValue:s}}),us.config({onOpen:d,onClose:g,isPartOf:(C,S,E)=>Mp(S,E)||Mp(s,E),getAttachPoint:()=>p().getOrDie()}),ut.config({find:C=>us.getState(C).bind(S=>ut.getCurrent(S))}),su.config({channels:{...qk({isExtraPart:qe}),...HC({doReposition:cF})}})])}},bH=t=>{const s=eo.getCoupled(t,"sandbox");cF(s)},Dl=()=>[Re("sandboxClasses",[]),ou.field("sandboxBehaviours",[ut,su,us,Lt])],Cm=G([ct("dom"),ct("fetch"),os("onOpen"),fc("onExecute"),Re("getHotspot",k.some),Re("getAnchorOverrides",G({})),T0(),xa("dropdownBehaviours",[zo,eo,Sn,to]),ct("toggleClass"),Re("eventOrder",{}),$s("lazySink"),Re("matchWidth",!1),Re("useMinWidth",!1),$s("role"),$s("listRole")].concat(Dl())),iF=G([Ji({schema:[OS(),Re("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),mH()]),Yk=(t,s,c,i)=>{const d=O=>on(t.dom,"attributes").bind(B=>on(B,O)),g=O=>{us.getState(O).each(B=>{Fp.highlightPrimary(B)})},p=(O,B,I)=>sF(t,St,O,i,B,I),C=O=>{p(O,g,qa.HighlightMenuAndItem).get(re)},S={expand:O=>{zo.isOn(O)||p(O,re,qa.HighlightNone).get(re)},open:O=>{zo.isOn(O)||p(O,re,qa.HighlightMenuAndItem).get(re)},refetch:O=>eo.getExistingCoupled(O,"sandbox").fold(()=>p(O,re,qa.HighlightMenuAndItem).map(re),I=>tT(t,St,O,I,i,re,qa.HighlightMenuAndItem).map(re)),isOpen:zo.isOn,close:O=>{zo.isOn(O)&&p(O,re,qa.HighlightMenuAndItem).get(re)},repositionMenus:O=>{zo.isOn(O)&&bH(O)}},E=(O,B)=>(U1(O),k.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:ia(t.dropdownBehaviours,[zo.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),eo.config({others:{sandbox:O=>aF(t,O,{onOpen:()=>zo.on(O),onClose:()=>zo.off(O)})}}),Sn.config({mode:"special",onSpace:E,onEnter:E,onDown:(O,B)=>{if(al.isOpen(O)){const I=eo.getCoupled(O,"sandbox");g(I)}else al.open(O);return k.some(!0)},onEscape:(O,B)=>al.isOpen(O)?(al.close(O),k.some(!0)):k.none()}),to.config({})]),events:Lk(k.some(C)),eventOrder:{...t.eventOrder,[Yi()]:["disabling","toggling","alloy.base.behaviour"]},apis:S,domModification:{attributes:{"aria-haspopup":t.listRole.getOr("true"),...t.role.fold(()=>({}),O=>({role:O})),...t.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},al=rl({name:"Dropdown",configFields:Cm(),partFields:iF(),factory:Yk,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),zC="form",vH=[xa("formBehaviours",[Lt])],Xk=t=>"<alloy.field."+t+">",VC=t=>{const s=(()=>{const g=[];return{field:(C,S)=>(g.push(C),ki(zC,Xk(C),S)),record:G(g)}})(),c=t(s),i=s.record(),d=Ae(i,g=>fi({name:g,pname:Xk(g)}));return nB(zC,vH,d,nT,c)},yH=(t,s)=>t.fold(()=>Yt.error(s),Yt.value),nT=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:ia(t.formBehaviours,[Lt.config({store:{mode:"manual",getValue:c=>{const i=Xb(c,t);return mo(i,(d,g)=>d().bind(p=>{const C=ut.getCurrent(p);return yH(C,new Error(`Cannot find a current component to extract the value from for form part '${g}': `+Jl(p.element)))}).map(Lt.getValue))},setValue:(c,i)=>{ko(i,(d,g)=>{Cs(c,t,g).each(p=>{ut.getCurrent(p).each(C=>{Lt.setValue(C,d)})})})}}})]),apis:{getField:(c,i)=>Cs(c,t,i).bind(ut.getCurrent)}}),Np={getField:sf((t,s,c)=>t.getField(s,c)),sketch:VC},A0=G([ct("dom"),Re("shell",!0),xa("toolbarBehaviours",[so])]),CH=G([Qi({name:"groups",overrides:()=>({behaviours:Et([so.config({})])})})]),wH=(t,s,c,i)=>{const d=(C,S)=>{g(C).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},E=>{so.set(E,S)})},g=C=>t.shell?k.some(C):Cs(C,t,"groups"),p=t.shell?{behaviours:[so.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:p.components,behaviours:ia(t.toolbarBehaviours,p.behaviours),apis:{setGroups:d,refresh:re},domModification:{attributes:{role:"group"}}}},Pa=rl({name:"Toolbar",configFields:A0(),partFields:CH(),factory:wH,apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)}}}),cu=G([Ql(["toggledClass"]),ct("lazySink"),Xl("fetch"),gd("getBounds"),Ki("fireDismissalEventInstead",[Re("event",Zg())]),T0(),os("onToggled")]),UC=G([Ji({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Et([zo.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),Ji({factory:Pa,schema:A0(),name:"toolbar",overrides:t=>({toolbarBehaviours:Et([Sn.config({mode:"cyclic",onEscape:s=>(Cs(s,t,"button").each(to.focus),k.none())})])})})]),Bi=Ln(),SH=(t,s)=>{Bi.set(!0),Xs(t,s),Bi.clear()},Xs=(t,s)=>{const c=eo.getCoupled(t,"toolbarSandbox");us.isOpen(c)?us.close(c):us.open(c,s.toolbar())},Jk=(t,s,c,i)=>{const d=c.getBounds.map(p=>p()),g=c.lazySink(t).getOrDie();Xa.positionWithinBounds(g,s,{anchor:{type:"hotspot",hotspot:t,layouts:i,overrides:{maxWidthFunction:U2()}}},d)},Jf=(t,s,c,i,d)=>{Pa.setGroups(s,d),Jk(t,s,c,i),zo.on(t)},WC=(t,s,c)=>{const i=HM(),d=(p,C)=>{const S=Bi.get().getOr(!1);c.fetch().get(E=>{Jf(t,C,c,s.layouts,E),i.link(t.element),S||Sn.focusIn(C)})},g=()=>{zo.off(t),Bi.get().getOr(!1)||to.focus(t),i.unlink(t.element)};return{dom:{tag:"div",attributes:{id:i.id}},behaviours:Et([Sn.config({mode:"special",onEscape:p=>(us.close(p),k.some(!0))}),us.config({onOpen:d,onClose:g,isPartOf:(p,C,S)=>Mp(C,S)||Mp(t,S),getAttachPoint:()=>c.lazySink(t).getOrDie()}),su.config({channels:{...qk({isExtraPart:qe,...c.fireDismissalEventInstead.map(p=>({fireEventInstead:{event:p.event}})).getOr({})}),...HC({doReposition:()=>{us.getState(eo.getCoupled(t,"toolbarSandbox")).each(p=>{Jk(t,p,c,s.layouts)})}})}})])}},Qf=rl({name:"FloatingToolbarButton",factory:(t,s,c,i)=>({...Na.sketch({...i.button(),action:d=>{Xs(d,i)},buttonBehaviours:ou.augment({dump:i.button().buttonBehaviours},[eo.config({others:{toolbarSandbox:d=>WC(d,c,t)}})])}),apis:{setGroups:(d,g)=>{us.getState(eo.getCoupled(d,"toolbarSandbox")).each(p=>{Jf(d,p,t,c.layouts,g)})},reposition:d=>{us.getState(eo.getCoupled(d,"toolbarSandbox")).each(g=>{Jk(d,g,t,c.layouts)})},toggle:d=>{Xs(d,i)},toggleWithoutFocusing:d=>{SH(d,i)},getToolbar:d=>us.getState(eo.getCoupled(d,"toolbarSandbox")),isOpen:d=>us.isOpen(eo.getCoupled(d,"toolbarSandbox"))}}),configFields:cu(),partFields:UC(),apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggleWithoutFocusing(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),Qk=G([Re("prefix","form-field"),xa("fieldBehaviours",[ut,Lt])]),EH=G([Qi({schema:[ct("dom")],name:"label"}),Qi({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[ct("text")],name:"aria-descriptor"}),fi({factory:{sketch:t=>{const s=bS(t,["factory"]);return t.factory.sketch(s)}},schema:[ct("factory")],name:"field"})]),eD=(t,s,c,i)=>{const d=ia(t.fieldBehaviours,[ut.config({find:C=>Cs(C,t,"field")}),Lt.config({store:{mode:"manual",getValue:C=>ut.getCurrent(C).bind(Lt.getValue),setValue:(C,S)=>{ut.getCurrent(C).each(E=>{Lt.setValue(E,S)})}}})]),g=vr([ur((C,S)=>{const E=F1(C,t,["label","field","aria-descriptor"]);E.field().each(O=>{const B=nt(t.prefix);E.label().each(I=>{$n(I.element,"for",B),$n(O.element,"id",B)}),E["aria-descriptor"]().each(I=>{const U=nt(t.prefix);$n(I.element,"id",U),$n(O.element,"aria-describedby",U)})})})]),p={getField:C=>Cs(C,t,"field"),getLabel:C=>Cs(C,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:d,events:g,apis:p}},Bo=rl({name:"FormField",configFields:Qk(),partFields:EH(),factory:eD,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}}),lF=G([Re("field1Name","field1"),Re("field2Name","field2"),B1("onLockedChange"),Ql(["lockClass"]),Re("locked",!1),ou.field("coupledFieldBehaviours",[ut,Lt]),Rs("onInput",re)]),uF=(t,s,c)=>Cs(t,s,c).bind(ut.getCurrent),sT=(t,s)=>fi({factory:Bo,name:t,overrides:c=>({fieldBehaviours:Et([Qn("coupled-input-behaviour",[We(qm(),i=>{uF(i,c,s).each(d=>{Cs(i,c,"lock").each(g=>{zo.isOn(g)&&c.onLockedChange(i,d,g),c.onInput(i)})})})])])})}),dF=G([sT("field1","field2"),sT("field2","field1"),fi({factory:Na,schema:[ct("dom")],name:"lock",overrides:t=>({buttonBehaviours:Et([zo.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),rT=(t,s,c,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:ou.augment(t.coupledFieldBehaviours,[ut.config({find:k.some}),Lt.config({store:{mode:"manual",getValue:d=>{const g=N1(d,t,["field1","field2"]);return{[t.field1Name]:Lt.getValue(g.field1()),[t.field2Name]:Lt.getValue(g.field2())}},setValue:(d,g)=>{const p=N1(d,t,["field1","field2"]);yo(g,t.field1Name)&&Lt.setValue(p.field1(),g[t.field1Name]),yo(g,t.field2Name)&&Lt.setValue(p.field2(),g[t.field2Name])}}})]),apis:{getField1:d=>Cs(d,t,"field1"),getField2:d=>Cs(d,t,"field2"),getLock:d=>Cs(d,t,"lock")}}),lc=rl({name:"FormCoupledInputs",configFields:lF(),partFields:dF(),factory:rT,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),TH=(t,s)=>{const c=Ae(t.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),i=t.data.map(d=>Zm("initialValue",d)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:c,behaviours:ia(t.selectBehaviours,[to.config({}),Lt.config({store:{mode:"manual",getValue:d=>ci(d.element),setValue:(d,g)=>{const p=Xt(t.options);De(t.options,S=>S.value===g).isSome()?ql(d.element,g):d.element.dom.selectedIndex===-1&&g===""&&p.each(S=>ql(d.element,S.value))},...i}})])}},AH=Wu({name:"HtmlSelect",configFields:[ct("options"),xa("selectBehaviours",[to,Lt]),Re("selectClasses",[]),Re("selectAttributes",{}),$s("data")],factory:TH}),kH=(t,s,c,i,d)=>{const g=()=>t.lazySink(s),p=i.type==="horizontal"?{layouts:{onLtr:()=>Kg(),onRtl:()=>L2()}}:{},C=E=>E.length===2,S=E=>C(E)?p:{};return Fp.sketch({dom:{tag:"div"},data:i.data,markers:i.menu.markers,highlightOnOpen:i.menu.highlightOnOpen,fakeFocus:i.menu.fakeFocus,onEscape:()=>(us.close(s),t.onEscape.map(E=>E(s)),k.some(!0)),onExecute:()=>k.some(!0),onOpenMenu:(E,O)=>{Xa.positionWithinBounds(g().getOrDie(),O,c,d())},onOpenSubmenu:(E,O,B,I)=>{const U=g().getOrDie();Xa.position(U,B,{anchor:{type:"submenu",item:O,...S(I)}})},onRepositionMenu:(E,O,B)=>{const I=g().getOrDie();Xa.positionWithinBounds(I,O,c,d()),Ve(B,U=>{const j=S(U.triggeringPath);Xa.position(I,U.triggeredMenu,{anchor:{type:"submenu",item:U.triggeringItem,...j}})})}})},DH=(t,s)=>{const c=(I,U)=>t.getRelated(I).exists(Q=>Mp(Q,U)),i=(I,U)=>{us.setContent(I,U)},d=(I,U,j)=>{const Q=k.none;g(I,U,j,Q)},g=(I,U,j,Q)=>{const ie=t.lazySink(I).getOrDie();us.openWhileCloaked(I,U,()=>Xa.positionWithinBounds(ie,I,j,Q())),Lt.setValue(I,k.some({mode:"position",config:j,getBounds:Q}))},p=(I,U,j)=>{C(I,U,j,k.none)},C=(I,U,j,Q)=>{const ie=kH(t,I,U,j,Q);us.open(I,ie),Lt.setValue(I,k.some({mode:"menu",menu:ie}))},S=I=>{us.isOpen(I)&&(Lt.setValue(I,k.none()),us.close(I))},E=I=>us.getState(I),O=I=>{us.isOpen(I)&&Lt.getValue(I).each(U=>{switch(U.mode){case"menu":us.getState(I).each(Fp.repositionMenus);break;case"position":const j=t.lazySink(I).getOrDie();Xa.positionWithinBounds(j,I,U.config,U.getBounds());break}})},B={setContent:i,showAt:d,showWithinBounds:g,showMenuAt:p,showMenuWithinBounds:C,hide:S,getContent:E,reposition:O,isOpen:us.isOpen};return{uid:t.uid,dom:t.dom,behaviours:ia(t.inlineBehaviours,[us.config({isPartOf:(I,U,j)=>Mp(U,j)||c(I,j),getAttachPoint:I=>t.lazySink(I).getOrDie(),onOpen:I=>{t.onShow(I)},onClose:I=>{t.onHide(I)}}),Lt.config({store:{mode:"memory",initialValue:k.none()}}),su.config({channels:{...qk({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(I=>({fireEventInstead:{event:I.event}})).getOr({})}),...HC({...t.fireRepositionEventInstead.map(I=>({fireEventInstead:{event:I.event}})).getOr({}),doReposition:O})}})]),eventOrder:t.eventOrder,apis:B}},Fr=Wu({name:"InlineView",configFields:[ct("lazySink"),os("onShow"),os("onHide"),gd("onEscape"),xa("inlineBehaviours",[us,Lt,su]),Ki("fireDismissalEventInstead",[Re("event",Zg())]),Ki("fireRepositionEventInstead",[Re("event",wS())]),Re("getRelated",k.none),Re("isExtraPart",qe),Re("eventOrder",k.none)],factory:DH,apis:{showAt:(t,s,c,i)=>{t.showAt(s,c,i)},showWithinBounds:(t,s,c,i,d)=>{t.showWithinBounds(s,c,i,d)},showMenuAt:(t,s,c,i)=>{t.showMenuAt(s,c,i)},showMenuWithinBounds:(t,s,c,i,d)=>{t.showMenuWithinBounds(s,c,i,d)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,c)=>{t.setContent(s,c)},reposition:(t,s)=>{t.reposition(s)}}}),mF=G([Lr("type","text"),$s("data"),Re("inputAttributes",{}),Re("inputStyles",{}),Re("tag","input"),Re("inputClasses",[]),os("onSetValue"),Rs("fromInputValue",St),Rs("toInputValue",St),Re("styles",{}),Re("eventOrder",{}),xa("inputBehaviours",[Lt,to]),Re("selectOnFocus",!0)]),fF=t=>Et([to.config({onFocus:t.selectOnFocus?s=>{const c=s.element,i=ci(c);t.type!=="range"&&c.dom.setSelectionRange(0,i.length)}:re})]),gF=t=>({...fF(t),...ia(t.inputBehaviours,[Lt.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>t.fromInputValue(ci(s.element)),setValue:(s,c)=>{ci(s.element)!==c&&ql(s.element,t.toInputValue(c))}},onSetValue:t.onSetValue})])}),hF=t=>({tag:t.tag,attributes:{type:t.type,...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),pF=(t,s)=>({uid:t.uid,dom:hF(t),components:[],behaviours:gF(t),eventOrder:t.eventOrder}),_d=Wu({name:"Input",configFields:mF(),factory:pF}),tD=Sc(Wk(),LC()),OH=(t,s)=>{const c=Lc(t,"id").fold(()=>{const i=nt("dialog-label");return $n(s,"id",i),i},St);$n(t,"aria-labelledby",c)},bF=G([ct("lazySink"),$s("dragBlockClass"),Rs("getBounds",Za),Re("useTabstopAt",rt),Re("firstTabstop",0),Re("eventOrder",{}),xa("modalBehaviours",[Sn]),fc("onExecute"),Hb("onEscape")]),cT={sketch:St},nD=G([Qi({name:"draghandle",overrides:(t,s)=>({behaviours:Et([S0.config({mode:"mouse",getTarget:c=>vl(c,'[role="dialog"]').getOr(c),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),fi({schema:[ct("dom")],name:"title"}),fi({factory:cT,schema:[ct("dom")],name:"close"}),fi({factory:cT,schema:[ct("dom")],name:"body"}),Qi({factory:cT,schema:[ct("dom")],name:"footer"}),Ji({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[Re("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),Re("components",[])],name:"blocker"})]),vF=(t,s,c,i)=>{const d=Ln(),g=j=>{d.set(j);const Q=t.lazySink(j).getOrDie(),ie=i.blocker(),X=Q.getSystem().build({...ie,components:ie.components.concat([b(j)]),behaviours:Et([to.config({}),Qn("dialog-blocker-events",[th(_u(),()=>{ke.isBlocked(j)?re():Sn.focusIn(j)})])])});gm(Q,X),Sn.focusIn(j)},p=j=>{d.clear(),oi(j.element).each(Q=>{j.getSystem().getByDom(Q).each(ie=>{hm(ie)})})},C=j=>ja(j,t,"body"),S=j=>Cs(j,t,"footer"),E=(j,Q)=>{ke.block(j,Q)},O=j=>{ke.unblock(j)},B=nt("modal-events"),I={...t.eventOrder,[hd()]:[B].concat(t.eventOrder["alloy.system.attached"]||[])},U=Ur();return{uid:t.uid,dom:t.dom,components:s,apis:{show:g,hide:p,getBody:C,getFooter:S,setIdle:O,setBusy:E},eventOrder:I,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:ia(t.modalBehaviours,[so.config({}),Sn.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),ke.config({getRoot:d.get}),Qn(B,[ur(j=>{const Q=ja(j,t,"title").element,ie=o2(Q);U.os.isMacOS()&&qn(ie)?$n(j.element,"aria-label",ie):OH(j.element,Q)})])])}},Gc=rl({name:"ModalDialog",configFields:bF(),partFields:nD(),factory:vF,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,c)=>{t.setBusy(s,c)},setIdle:(t,s)=>{t.setIdle(s)}}}),_H=Qi({schema:[ct("dom")],name:"label"}),Pp=t=>Qi({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),i=>({events:vr([fv(jm(),(d,g,p)=>i(d,p),[s]),fv(mi(),(d,g,p)=>i(d,p),[s]),fv(Nf(),(d,g,p)=>{p.mouseIsDown.get()&&i(d,p)},[s])])}))}),RH=Pp("top-left"),BH=Pp("top"),MH=Pp("top-right"),yF=Pp("right"),wm=Pp("bottom-right"),FH=Pp("bottom"),oD=Pp("bottom-left"),CF=Pp("left"),wF=fi({name:"thumb",defaults:G({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:vr([Qm(jm(),t,"spectrum"),Qm(Gm(),t,"spectrum"),Qm($g(),t,"spectrum"),Qm(mi(),t,"spectrum"),Qm(Nf(),t,"spectrum"),Qm(Mb(),t,"spectrum")])})}),aT=t=>nh(t.event),SF=fi({schema:[_a("mouseIsDown",()=>qt(!1))],name:"spectrum",overrides:t=>{const c=t.model.manager,i=(d,g)=>c.getValueFromEvent(g).map(p=>c.setValueFrom(d,t,p));return{behaviours:Et([Sn.config({mode:"special",onLeft:(d,g)=>c.onLeft(d,t,aT(g)),onRight:(d,g)=>c.onRight(d,t,aT(g)),onUp:(d,g)=>c.onUp(d,t,aT(g)),onDown:(d,g)=>c.onDown(d,t,aT(g))}),or.config({}),to.config({})]),events:vr([We(jm(),i),We(Gm(),i),We(mi(),i),We(Nf(),(d,g)=>{t.mouseIsDown.get()&&i(d,g)})])}}});var xF=[_H,CF,yF,BH,FH,RH,MH,oD,wm,wF,SF];const ZC=G("slider.change.value"),PH=t=>t.type.indexOf("touch")!==-1,sD=t=>{const s=t.event.raw;if(PH(s)){const c=s;return c.touches!==void 0&&c.touches.length===1?k.some(c.touches[0]).map(i=>Ts(i.clientX,i.clientY)):k.none()}else{const c=s;return c.clientX!==void 0?k.some(c).map(i=>Ts(i.clientX,i.clientY)):k.none()}},$H="top",IH="right",LH="bottom",HH="left",$p=t=>t.model.minX,Ip=t=>t.model.minY,jC=t=>t.model.minX-1,GC=t=>t.model.minY-1,k0=t=>t.model.maxX,D0=t=>t.model.maxY,iT=t=>t.model.maxX+1,qC=t=>t.model.maxY+1,O0=(t,s,c)=>s(t)-c(t),oy=t=>O0(t,k0,$p),rD=t=>O0(t,D0,Ip),cD=t=>oy(t)/2,aD=t=>rD(t)/2,_0=(t,s)=>s?t.stepSize*t.speedMultiplier:t.stepSize,iD=t=>t.snapToGrid,lT=t=>t.snapStart,uT=t=>t.rounded,dT=(t,s)=>t[s+"-edge"]!==void 0,EF=t=>dT(t,HH),TF=t=>dT(t,IH),lD=t=>dT(t,$H),uD=t=>dT(t,LH),Ah=t=>t.model.value.get(),Lp=(t,s)=>({x:t,y:s}),Rd=(t,s)=>{On(t,ZC(),{value:s})},zH=(t,s)=>{Rd(t,Lp(jC(s),GC(s)))},VH=(t,s)=>{Rd(t,GC(s))},UH=(t,s)=>{Rd(t,Lp(cD(s),GC(s)))},WH=(t,s)=>{Rd(t,Lp(iT(s),GC(s)))},ZH=(t,s)=>{Rd(t,iT(s))},jH=(t,s)=>{Rd(t,Lp(iT(s),aD(s)))},GH=(t,s)=>{Rd(t,Lp(iT(s),qC(s)))},AF=(t,s)=>{Rd(t,qC(s))},kF=(t,s)=>{Rd(t,Lp(cD(s),qC(s)))},qH=(t,s)=>{Rd(t,Lp(jC(s),qC(s)))},KH=(t,s)=>{Rd(t,jC(s))},YH=(t,s)=>{Rd(t,Lp(jC(s),aD(s)))},mT=(t,s,c,i)=>t<s?t:t>c?c:t===s?s-1:Math.max(s,t-i),dD=(t,s,c,i)=>t>c?t:t<s?s:t===c?c+1:Math.min(c,t+i),DF=(t,s,c)=>Math.max(s,Math.min(c,t)),XH=(t,s,c,i,d)=>d.fold(()=>{const g=t-s,p=Math.round(g/i)*i;return DF(s+p,s-1,c+1)},g=>{const p=(t-g)%i,C=Math.round(p/i),S=Math.floor((t-g)/i),E=Math.floor((c-g)/i),O=Math.min(E,S+C),B=g+O*i;return Math.max(g,B)}),fT=(t,s,c)=>Math.min(c,Math.max(t,s))-s,OF=t=>{const{min:s,max:c,range:i,value:d,step:g,snap:p,snapStart:C,rounded:S,hasMinEdge:E,hasMaxEdge:O,minBound:B,maxBound:I,screenRange:U}=t,j=E?s-1:s,Q=O?c+1:c;if(d<B)return j;if(d>I)return Q;{const ie=fT(d,B,I),X=DF(ie/U*i+s,j,Q);return p&&X>=s&&X<=c?XH(X,s,c,g,C):S?Math.round(X):X}},_F=t=>{const{min:s,max:c,range:i,value:d,hasMinEdge:g,hasMaxEdge:p,maxBound:C,maxOffset:S,centerMinEdge:E,centerMaxEdge:O}=t;return d<s?g?0:E:d>c?p?C:O:(d-s)/i*S},mD="top",RF="right",BF="bottom",fD="left",JH="width",QH="height",eg=t=>t.element.dom.getBoundingClientRect(),Sm=(t,s)=>t[s],gT=t=>{const s=eg(t);return Sm(s,fD)},MF=t=>{const s=eg(t);return Sm(s,RF)},hT=t=>{const s=eg(t);return Sm(s,mD)},pT=t=>{const s=eg(t);return Sm(s,BF)},FF=t=>{const s=eg(t);return Sm(s,JH)},NF=t=>{const s=eg(t);return Sm(s,QH)},PF=(t,s,c)=>(t+s)/2-c,gD=(t,s)=>{const c=eg(t),i=eg(s),d=Sm(c,fD),g=Sm(c,RF),p=Sm(i,fD);return PF(d,g,p)},$F=(t,s)=>{const c=eg(t),i=eg(s),d=Sm(c,mD),g=Sm(c,BF),p=Sm(i,mD);return PF(d,g,p)},bT=(t,s)=>{On(t,ZC(),{value:s})},hD=(t,s,c)=>{const i={min:$p(s),max:k0(s),range:oy(s),value:c,step:_0(s),snap:iD(s),snapStart:lT(s),rounded:uT(s),hasMinEdge:EF(s),hasMaxEdge:TF(s),minBound:gT(t),maxBound:MF(t),screenRange:FF(t)};return OF(i)},ez=(t,s,c)=>{const i=hD(t,s,c);return bT(t,i),i},tz=(t,s)=>{const c=$p(s);bT(t,c)},nz=(t,s)=>{const c=k0(s);bT(t,c)},pD=(t,s,c,i)=>{const g=(t>0?dD:mT)(Ah(c),$p(c),k0(c),_0(c,i));return bT(s,g),k.some(g)},IF=t=>(s,c,i)=>pD(t,s,c,i).map(rt),oz=t=>sD(t).map(c=>c.left),sz=(t,s,c,i,d)=>{const p=FF(t),C=i.bind(O=>k.some(gD(O,t))).getOr(0),S=d.bind(O=>k.some(gD(O,t))).getOr(p),E={min:$p(s),max:k0(s),range:oy(s),value:c,hasMinEdge:EF(s),hasMaxEdge:TF(s),minBound:gT(t),maxBound:MF(t),maxOffset:p,centerMinEdge:C,centerMaxEdge:S};return _F(E)},bD=(t,s,c,i,d,g)=>{const p=sz(s,g,c,i,d);return gT(s)-gT(t)+p},rz=(t,s,c,i)=>{const d=Ah(c),g=bD(t,i.getSpectrum(t),d,i.getLeftEdge(t),i.getRightEdge(t),c),p=ta(s.element)/2;Vn(s.element,"left",g-p+"px")},cz=IF(-1),az=IF(1),iz=k.none,lz=k.none,uz={"top-left":k.none(),top:k.none(),"top-right":k.none(),right:k.some(ZH),"bottom-right":k.none(),bottom:k.none(),"bottom-left":k.none(),left:k.some(KH)};var dz=Object.freeze({__proto__:null,setValueFrom:ez,setToMin:tz,setToMax:nz,findValueOfOffset:hD,getValueFromEvent:oz,findPositionOfValue:bD,setPositionFromValue:rz,onLeft:cz,onRight:az,onUp:iz,onDown:lz,edgeActions:uz});const vT=(t,s)=>{On(t,ZC(),{value:s})},vD=(t,s,c)=>{const i={min:Ip(s),max:D0(s),range:rD(s),value:c,step:_0(s),snap:iD(s),snapStart:lT(s),rounded:uT(s),hasMinEdge:lD(s),hasMaxEdge:uD(s),minBound:hT(t),maxBound:pT(t),screenRange:NF(t)};return OF(i)},mz=(t,s,c)=>{const i=vD(t,s,c);return vT(t,i),i},fz=(t,s)=>{const c=Ip(s);vT(t,c)},yD=(t,s)=>{const c=D0(s);vT(t,c)},gz=(t,s,c,i)=>{const g=(t>0?dD:mT)(Ah(c),Ip(c),D0(c),_0(c,i));return vT(s,g),k.some(g)},LF=t=>(s,c,i)=>gz(t,s,c,i).map(rt),hz=t=>sD(t).map(c=>c.top),KC=(t,s,c,i,d)=>{const p=NF(t),C=i.bind(O=>k.some($F(O,t))).getOr(0),S=d.bind(O=>k.some($F(O,t))).getOr(p),E={min:Ip(s),max:D0(s),range:rD(s),value:c,hasMinEdge:lD(s),hasMaxEdge:uD(s),minBound:hT(t),maxBound:pT(t),maxOffset:p,centerMinEdge:C,centerMaxEdge:S};return _F(E)},yT=(t,s,c,i,d,g)=>{const p=KC(s,g,c,i,d);return hT(s)-hT(t)+p},pz=(t,s,c,i)=>{const d=Ah(c),g=yT(t,i.getSpectrum(t),d,i.getTopEdge(t),i.getBottomEdge(t),c),p=ac(s.element)/2;Vn(s.element,"top",g-p+"px")},bz=k.none,HF=k.none,vz=LF(-1),yz=LF(1),Cz={"top-left":k.none(),top:k.some(VH),"top-right":k.none(),right:k.none(),"bottom-right":k.none(),bottom:k.some(AF),"bottom-left":k.none(),left:k.none()};var wz=Object.freeze({__proto__:null,setValueFrom:mz,setToMin:fz,setToMax:yD,findValueOfOffset:vD,getValueFromEvent:hz,findPositionOfValue:yT,setPositionFromValue:pz,onLeft:bz,onRight:HF,onUp:vz,onDown:yz,edgeActions:Cz});const CT=(t,s)=>{On(t,ZC(),{value:s})},wT=(t,s)=>({x:t,y:s}),Sz=(t,s,c)=>{const i=hD(t,s,c.left),d=vD(t,s,c.top),g=wT(i,d);return CT(t,g),g},xz=(t,s,c,i,d)=>{const g=t>0?dD:mT,p=s?Ah(i).x:g(Ah(i).x,$p(i),k0(i),_0(i,d)),C=s?g(Ah(i).y,Ip(i),D0(i),_0(i,d)):Ah(i).y;return CT(c,wT(p,C)),k.some(p)},YC=(t,s)=>(c,i,d)=>xz(t,s,c,i,d).map(rt),zF=(t,s)=>{const c=$p(s),i=Ip(s);CT(t,wT(c,i))},Ez=(t,s)=>{const c=k0(s),i=D0(s);CT(t,wT(c,i))},VF=t=>sD(t),UF=(t,s,c,i)=>{const d=Ah(c),g=bD(t,i.getSpectrum(t),d.x,i.getLeftEdge(t),i.getRightEdge(t),c),p=yT(t,i.getSpectrum(t),d.y,i.getTopEdge(t),i.getBottomEdge(t),c),C=ta(s.element)/2,S=ac(s.element)/2;Vn(s.element,"left",g-C+"px"),Vn(s.element,"top",p-S+"px")},WF=YC(-1,!1),ZF=YC(1,!1),Tz=YC(-1,!0),Az=YC(1,!0),kz={"top-left":k.some(zH),top:k.some(UH),"top-right":k.some(WH),right:k.some(jH),"bottom-right":k.some(GH),bottom:k.some(kF),"bottom-left":k.some(qH),left:k.some(YH)};var Dz=Object.freeze({__proto__:null,setValueFrom:Sz,setToMin:zF,setToMax:Ez,getValueFromEvent:VF,setPositionFromValue:UF,onLeft:WF,onRight:ZF,onUp:Tz,onDown:Az,edgeActions:kz});const CD=[Re("stepSize",1),Re("speedMultiplier",10),Re("onChange",re),Re("onChoose",re),Re("onInit",re),Re("onDragStart",re),Re("onDragEnd",re),Re("snapToGrid",!1),Re("rounded",!0),$s("snapStart"),wl("model",ui("mode",{x:[Re("minX",0),Re("maxX",100),_a("value",t=>qt(t.mode.minX)),ct("getInitialValue"),pr("manager",dz)],y:[Re("minY",0),Re("maxY",100),_a("value",t=>qt(t.mode.minY)),ct("getInitialValue"),pr("manager",wz)],xy:[Re("minX",0),Re("maxX",100),Re("minY",0),Re("maxY",100),_a("value",t=>qt({x:t.mode.minX,y:t.mode.minY})),ct("getInitialValue"),pr("manager",Dz)]})),xa("sliderBehaviours",[Sn,Lt]),_a("mouseIsDown",()=>qt(!1))],xm=rl({name:"Slider",configFields:CD,partFields:xF,factory:(t,s,c,i)=>{const d=Fe=>ja(Fe,t,"thumb"),g=Fe=>ja(Fe,t,"spectrum"),p=Fe=>Cs(Fe,t,"left-edge"),C=Fe=>Cs(Fe,t,"right-edge"),S=Fe=>Cs(Fe,t,"top-edge"),E=Fe=>Cs(Fe,t,"bottom-edge"),O=t.model,B=O.manager,I=(Fe,Mt)=>{B.setPositionFromValue(Fe,Mt,t,{getLeftEdge:p,getRightEdge:C,getTopEdge:S,getBottomEdge:E,getSpectrum:g})},U=(Fe,Mt)=>{O.value.set(Mt);const at=d(Fe);I(Fe,at)},j=(Fe,Mt)=>{U(Fe,Mt);const at=d(Fe);return t.onChange(Fe,at,Mt),k.some(!0)},Q=Fe=>{B.setToMin(Fe,t)},ie=Fe=>{B.setToMax(Fe,t)},X=Fe=>{const Mt=()=>{Cs(Fe,t,"thumb").each(vt=>{const gt=O.value.get();t.onChoose(Fe,vt,gt)})},at=t.mouseIsDown.get();t.mouseIsDown.set(!1),at&&Mt()},he=(Fe,Mt)=>{Mt.stop(),t.mouseIsDown.set(!0),t.onDragStart(Fe,d(Fe))},we=(Fe,Mt)=>{Mt.stop(),t.onDragEnd(Fe,d(Fe)),X(Fe)},Me=Fe=>{Cs(Fe,t,"spectrum").map(Sn.focusIn)};return{uid:t.uid,dom:t.dom,components:s,behaviours:ia(t.sliderBehaviours,[Sn.config({mode:"special",focusIn:Me}),Lt.config({store:{mode:"manual",getValue:Fe=>O.value.get(),setValue:U}}),su.config({channels:{[lm()]:{onReceive:X}}})]),events:vr([We(ZC(),(Fe,Mt)=>{j(Fe,Mt.event.value)}),ur((Fe,Mt)=>{const at=O.getInitialValue();O.value.set(at);const vt=d(Fe);I(Fe,vt);const gt=g(Fe);t.onInit(Fe,vt,gt,O.value.get())}),We(jm(),he),We($g(),we),We(mi(),(Fe,Mt)=>{Me(Fe),he(Fe,Mt)}),We(Mb(),we)]),apis:{resetToMin:Q,resetToMax:ie,setValue:U,refresh:I},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,c)=>{t.setValue(s,c)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),wD="container",_z=[xa("slotBehaviours",[])],jF=t=>"<alloy.field."+t+">",Rz=t=>{const s=(()=>{const g=[];return{slot:(C,S)=>(g.push(C),ki(wD,jF(C),S)),record:G(g)}})(),c=t(s),i=s.record(),d=Ae(i,g=>fi({name:g,pname:jF(g)}));return nB(wD,_z,d,GF,c)},GF=(t,s)=>{const c=Q=>Jb(t),i=(Q,ie)=>Cs(Q,t,ie),d=(Q,ie)=>(X,he)=>Cs(X,t,he).map(we=>Q(we,he)).getOr(ie),g=Q=>(ie,X)=>{Ve(X,he=>Q(ie,he))},p=(Q,ie)=>Cc(Q.element,"aria-hidden")!=="true",C=(Q,ie)=>{if(!p(Q)){const X=Q.element;Ro(X,"display"),ir(X,"aria-hidden"),On(Q,O1(),{name:ie,visible:!0})}},S=(Q,ie)=>{if(p(Q)){const X=Q.element;Vn(X,"display","none"),$n(X,"aria-hidden","true"),On(Q,O1(),{name:ie,visible:!1})}},E=d(p,!1),O=d(S),B=g(O),I=Q=>B(Q,c()),U=d(C),j={getSlotNames:c,getSlot:i,isShowing:E,hideSlot:O,hideAllSlots:I,showSlot:U};return{uid:t.uid,dom:t.dom,components:s,behaviours:C0(t.slotBehaviours),apis:j}},Ja={...mo({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,c)=>t.getSlot(s,c),isShowing:(t,s,c)=>t.isShowing(s,c),hideSlot:(t,s,c)=>t.hideSlot(s,c),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,c)=>t.showSlot(s,c)},t=>sf(t)),sketch:Rz},Mz=(t,s)=>co(t,(d,g)=>s(g,d.len).fold(G(d),C=>({len:C.finish,list:d.list.concat([C])})),{len:0,list:[]}).list,SD=(t,s,c)=>({within:t,extra:s,withinWidth:c}),qF=(t,s,c)=>{const i=Mz(t,(C,S)=>{const E=c(C);return k.some({element:C,start:S,finish:S+E,width:E})}),d=jn(i,C=>C.finish<=s),g=Xn(d,(C,S)=>C+S.width,0),p=i.slice(d.length);return{within:d,extra:p,withinWidth:g}},ST=t=>Ae(t,s=>s.element),Fz=(t,s,c)=>{const i=ST(t.concat(s));return SD(i,[],c)},Nz=(t,s,c,i)=>{const d=ST(t).concat([c]);return SD(d,ST(s),i)},Pz=(t,s,c)=>SD(ST(t),[],c),$z=(t,s,c)=>{const i=qF(s,t,c);return i.extra.length===0?k.some(i):k.none()},Iz=(t,s,c,i)=>{const d=$z(t,s,c).getOrThunk(()=>qF(s,t-c(i),c)),g=d.within,p=d.extra,C=d.withinWidth;return p.length===1&&p[0].width<=c(i)?Fz(g,p,C):p.length>=1?Nz(g,p,i,C):Pz(g,p,C)},KF=(t,s)=>{const c=Ae(s,i=>b(i));Pa.setGroups(t,c)},Lz=t=>Lo(t,s=>Kr(s.element).bind(c=>s.getSystem().getByDom(c).toOptional())),xD=(t,s,c)=>{const i=s.builtGroups.get();if(i.length===0)return;const d=ja(t,s,"primary"),g=eo.getCoupled(t,"overflowGroup");Vn(d.element,"visibility","hidden");const p=i.concat([g]),C=Lz(p);c([]),KF(d,p);const S=ta(d.element),E=Iz(S,s.builtGroups.get(),O=>Math.ceil(O.element.dom.getBoundingClientRect().width),g);E.extra.length===0?(so.remove(d,g),c([])):(KF(d,E.within),c(E.extra)),Ro(d.element,"visibility"),bl(d.element),C.each(to.focus)},YF=G([xa("splitToolbarBehaviours",[eo]),_a("builtGroups",()=>qt([]))]),Hz=G([Ql(["overflowToggledClass"]),gd("getOverflowBounds"),ct("lazySink"),_a("overflowGroups",()=>qt([])),os("onOpened"),os("onClosed")].concat(YF())),zz=G([fi({factory:Pa,schema:A0(),name:"primary"}),Ji({schema:A0(),name:"overflow"}),Ji({name:"overflow-button"}),Ji({name:"overflow-group"})]),Vz=G([ct("items"),Ql(["itemSelector"]),xa("tgroupBehaviours",[Sn])]),Uz=G([Kb({name:"items",unit:"item"})]),xT=(t,s,c,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:ia(t.tgroupBehaviours,[Sn.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),XC=rl({name:"ToolbarGroup",configFields:Vz(),partFields:Uz(),factory:xT}),XF=t=>Ae(t,s=>b(s)),JF=(t,s,c)=>{xD(t,c,i=>{c.overflowGroups.set(i),s.getOpt(t).each(d=>{Qf.setGroups(d,XF(i))})})},Wz=(t,s,c,i)=>{const d=Ss(Qf.sketch({fetch:()=>lo.nu(g=>{g(XF(t.overflowGroups.get()))}),layouts:{onLtr:()=>[br,xc],onRtl:()=>[xc,br],onBottomLtr:()=>[Mc,wa],onBottomRtl:()=>[wa,Mc]},getBounds:c.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:i["overflow-button"](),toolbar:i.overflow()},onToggled:(g,p)=>t[p?"onOpened":"onClosed"](g)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:ia(t.splitToolbarBehaviours,[eo.config({others:{overflowGroup:()=>XC.sketch({...i["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(g,p)=>{t.builtGroups.set(Ae(p,g.getSystem().build)),JF(g,d,t)},refresh:g=>JF(g,d,t),toggle:g=>{d.getOpt(g).each(p=>{Qf.toggle(p)})},toggleWithoutFocusing:g=>{d.getOpt(g).each(Qf.toggleWithoutFocusing)},isOpen:g=>d.getOpt(g).map(Qf.isOpen).getOr(!1),reposition:g=>{d.getOpt(g).each(p=>{Qf.reposition(p)})},getOverflow:g=>d.getOpt(g).bind(Qf.getToolbar)},domModification:{attributes:{role:"group"}}}},QF=rl({name:"SplitFloatingToolbar",configFields:Hz(),partFields:zz(),factory:Wz,apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),Zz=G([Ql(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),os("onOpened"),os("onClosed")].concat(YF())),jz=G([fi({factory:Pa,schema:A0(),name:"primary"}),fi({factory:Pa,schema:A0(),name:"overflow",overrides:t=>({toolbarBehaviours:Et([Zc.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{Cs(s,t,"overflow-button").each(c=>{zo.off(c)}),t.onClosed(s)},onGrown:s=>{t.onOpened(s)},onStartGrow:s=>{Cs(s,t,"overflow-button").each(zo.on)}}),Sn.config({mode:"acyclic",onEscape:s=>(Cs(s,t,"overflow-button").each(to.focus),k.some(!0))})])})}),Ji({name:"overflow-button",overrides:t=>({buttonBehaviours:Et([zo.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),Ji({name:"overflow-group"})]),ED=(t,s)=>Cs(t,s,"overflow").map(Zc.hasGrown).getOr(!1),ET=(t,s,c)=>{Cs(t,s,"overflow-button").each(i=>{Cs(t,s,"overflow").each(d=>{if(TT(t,s),Zc.hasShrunk(d)){const g=s.onOpened;s.onOpened=p=>{c||Sn.focusIn(d),g(p),s.onOpened=g}}else{const g=s.onClosed;s.onClosed=p=>{c||to.focus(i),g(p),s.onClosed=g}}Zc.toggleGrow(d)})})},TT=(t,s)=>{Cs(t,s,"overflow").each(c=>{xD(t,s,i=>{const d=Ae(i,g=>b(g));Pa.setGroups(c,d)}),Cs(t,s,"overflow-button").each(i=>{Zc.hasGrown(c)&&zo.on(i)}),Zc.refresh(c)})},Gz=(t,s,c,i)=>{const d="alloy.toolbar.toggle",g=(p,C)=>{const S=Ae(C,p.getSystem().build);t.builtGroups.set(S)};return{uid:t.uid,dom:t.dom,components:s,behaviours:ia(t.splitToolbarBehaviours,[eo.config({others:{overflowGroup:p=>XC.sketch({...i["overflow-group"](),items:[Na.sketch({...i["overflow-button"](),action:C=>{Do(p,d)}})]})}}),Qn("toolbar-toggle-events",[We(d,p=>{ET(p,t,!1)})])]),apis:{setGroups:(p,C)=>{g(p,C),TT(p,t)},refresh:p=>TT(p,t),toggle:p=>{ET(p,t,!1)},toggleWithoutFocusing:p=>{ET(p,t,!0)},isOpen:p=>ED(p,t)},domModification:{attributes:{role:"group"}}}},AT=rl({name:"SplitSlidingToolbar",configFields:Zz(),partFields:jz(),factory:Gz,apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),qz=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:Lk(t.action),behaviours:ia(t.tabButtonBehaviours,[to.config({}),Sn.config({mode:"execution",useSpace:!0,useEnter:!0}),Lt.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),Kz=Wu({name:"TabButton",configFields:[Re("uid",void 0),ct("value"),Vc("dom","dom",Qd(()=>({attributes:{role:"tab",id:nt("aria"),"aria-selected":"false"}})),pt()),$s("action"),Re("domModification",{}),xa("tabButtonBehaviours",[to,Sn,Lt]),ct("view")],factory:qz}),Yz=G([ct("tabs"),ct("dom"),Re("clickToDismiss",!1),xa("tabbarBehaviours",[hs,Sn]),Ql(["tabClass","selectedClass"])]),Xz=Kb({factory:Kz,name:"tabs",unit:"tab",overrides:t=>{const s=(i,d)=>{hs.dehighlight(i,d),On(i,Ib(),{tabbar:i,button:d})},c=(i,d)=>{hs.highlight(i,d),On(i,xS(),{tabbar:i,button:d})};return{action:i=>{const d=i.getSystem().getByUid(t.uid).getOrDie(),g=hs.isHighlighted(d,i);(g&&t.clickToDismiss?s:g?re:c)(d,i)},domModification:{classes:[t.markers.tabClass]}}}}),Jz=G([Xz]),Qz=(t,s,c,i)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:ia(t.tabbarBehaviours,[hs.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(d,g)=>{$n(g.element,"aria-selected","true")},onDehighlight:(d,g)=>{$n(g.element,"aria-selected","false")}}),Sn.config({mode:"flow",getInitial:d=>hs.getHighlighted(d).map(g=>g.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),e6=rl({name:"Tabbar",configFields:Yz(),partFields:Jz(),factory:Qz}),eV=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:ia(t.tabviewBehaviours,[so.config({})]),domModification:{attributes:{role:"tabpanel"}}}),tV=Wu({name:"Tabview",configFields:[xa("tabviewBehaviours",[so])],factory:eV}),nV=G([Re("selectFirst",!0),os("onChangeTab"),os("onDismissTab"),Re("tabs",[]),xa("tabSectionBehaviours",[])]),kT=fi({factory:e6,schema:[ct("dom"),Wm("markers",[ct("tabClass"),ct("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),TD=fi({factory:tV,name:"tabview"}),AD=G([kT,TD]),t6=(t,s,c,i)=>{const d=p=>{const C=Lt.getValue(p);Cs(p,t,"tabview").each(S=>{De(t.tabs,O=>O.value===C).each(O=>{const B=O.view();Lc(p.element,"id").each(I=>{$n(S.element,"aria-labelledby",I)}),so.set(S,B),t.onChangeTab(S,p,B)})})},g=(p,C)=>{Cs(p,t,"tabbar").each(S=>{C(S).each(U1)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:C0(t.tabSectionBehaviours),events:vr(ae([t.selectFirst?[ur((p,C)=>{g(p,hs.getFirst)})]:[],[We(xS(),(p,C)=>{const S=C.event.button;d(S)}),We(Ib(),(p,C)=>{const S=C.event.button;t.onDismissTab(p,S)})]])),apis:{getViewItems:p=>Cs(p,t,"tabview").map(C=>so.contents(C)).getOr([]),showTab:(p,C)=>{g(p,E=>{const O=hs.getCandidates(E);return De(O,I=>Lt.getValue(I)===C).filter(I=>!hs.isHighlighted(E,I))})}}}},sy=rl({name:"TabSection",configFields:nV(),partFields:AD(),factory:t6,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,c)=>{t.showTab(s,c)}}}),DT=(t,s,c)=>{const i=Lt.getValue(c);Lt.setValue(s,i),_T(s)},OT=(t,s)=>{const c=t.element,i=ci(c),d=c.dom;Cc(c,"type")!=="number"&&s(d,i)},_T=t=>{OT(t,(s,c)=>s.setSelectionRange(c.length,c.length))},RT=(t,s)=>{OT(t,(c,i)=>c.setSelectionRange(s,i.length))},n6=(t,s,c)=>{if(t.selectsOver){const i=Lt.getValue(s),d=t.getDisplayText(i),g=Lt.getValue(c);return t.getDisplayText(g).indexOf(d)===0?k.some(()=>{DT(t,s,c),RT(s,d.length)}):k.none()}else return k.none()},kD=G("alloy.typeahead.itemexecute"),oV=(t,s,c,i)=>{const d=(B,I,U)=>{t.previewing.set(!1);const j=eo.getCoupled(B,"sandbox");if(us.isOpen(j))ut.getCurrent(j).each(Q=>{hs.getHighlighted(Q).fold(()=>{U(Q)},()=>{G2(j,Q.element,"keydown",I)})});else{const Q=ie=>{ut.getCurrent(ie).each(U)};tT(t,p(B),B,j,i,Q,qa.HighlightMenuAndItem).get(re)}},g=fF(t),p=B=>I=>I.map(U=>{const j=Hr(U.menus),Q=te(j,X=>jn(X.items,he=>he.type==="item"));return Lt.getState(B).update(Ae(Q,X=>X.data)),U}),C=B=>ut.getCurrent(B),S="typeaheadevents",E=[to.config({}),Lt.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:B=>ci(B.element),getFallbackEntry:B=>({value:B,meta:{}}),setValue:(B,I)=>{ql(B.element,t.model.getDisplayText(I))},...t.initialData.map(B=>Zm("initialValue",B)).getOr({})}}),qE.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(B,I)=>{const U=eo.getCoupled(B,"sandbox");if(to.isFocused(B)&&ci(B.element).length>=t.minChars){const Q=C(U).bind(X=>hs.getHighlighted(X).map(Lt.getValue));t.previewing.set(!0);const ie=X=>{C(U).each(he=>{Q.fold(()=>{t.model.selectsOver&&hs.highlightFirst(he)},we=>{hs.highlightBy(he,Me=>Lt.getValue(Me).value===we.value),hs.getHighlighted(he).orThunk(()=>(hs.highlightFirst(he),k.none()))})})};tT(t,p(B),B,U,i,ie,qa.HighlightJustMenu).get(re)}},cancelEvent:Pb()}),Sn.config({mode:"special",onDown:(B,I)=>(d(B,I,hs.highlightFirst),k.some(!0)),onEscape:B=>{const I=eo.getCoupled(B,"sandbox");return us.isOpen(I)?(us.close(I),k.some(!0)):k.none()},onUp:(B,I)=>(d(B,I,hs.highlightLast),k.some(!0)),onEnter:B=>{const I=eo.getCoupled(B,"sandbox"),U=us.isOpen(I);if(U&&!t.previewing.get())return C(I).bind(j=>hs.getHighlighted(j)).map(j=>(On(B,kD(),{item:j}),!0));{const j=Lt.getValue(B);return Do(B,Pb()),t.onExecute(I,B,j),U&&us.close(I),k.some(!0)}}}),zo.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),eo.config({others:{sandbox:B=>aF(t,B,{onOpen:()=>zo.on(B),onClose:()=>{t.lazyTypeaheadComp.get().each(I=>ir(I.element,"aria-activedescendant")),zo.off(B)}})}}),Qn(S,[ur(B=>{t.lazyTypeaheadComp.set(k.some(B))}),Sd(B=>{t.lazyTypeaheadComp.set(k.none())}),ef(B=>{const I=re;sF(t,p(B),B,i,I,qa.HighlightMenuAndItem).get(re)}),We(kD(),(B,I)=>{const U=eo.getCoupled(B,"sandbox");DT(t.model,B,I.event.item),Do(B,Pb()),t.onItemExecute(B,U,I.event.item,Lt.getValue(B)),us.close(U),_T(B)})].concat(t.dismissOnBlur?[We(Ru(),B=>{const I=eo.getCoupled(B,"sandbox");Kr(I.element).isNone()&&us.close(I)})]:[]))],O={[Km()]:[Lt.name(),qE.name(),S],...t.eventOrder};return{uid:t.uid,dom:hF(ht(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...g,...ia(t.typeaheadBehaviours,E)},eventOrder:O}},sV=G([$s("lazySink"),ct("fetch"),Re("minChars",5),Re("responseTime",1e3),os("onOpen"),Re("getHotspot",k.some),Re("getAnchorOverrides",G({})),Re("layouts",k.none()),Re("eventOrder",{}),E2("model",{},[Re("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),Re("selectsOver",!0),Re("populateFromBrowse",!0)]),os("onSetValue"),fc("onExecute"),os("onItemExecute"),Re("inputClasses",[]),Re("inputAttributes",{}),Re("inputStyles",{}),Re("matchWidth",!0),Re("useMinWidth",!1),Re("dismissOnBlur",!0),Ql(["openClass"]),$s("initialData"),$s("listRole"),xa("typeaheadBehaviours",[to,Lt,qE,Sn,zo,eo]),_a("lazyTypeaheadComp",()=>qt(k.none)),_a("previewing",()=>qt(!0))].concat(mF()).concat(Dl())),rV=G([Ji({schema:[OS()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,c,i)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(d=>{n6(t.model,d,i).fold(()=>{t.model.selectsOver?(hs.dehighlight(c,i),t.previewing.set(!0)):t.previewing.set(!1)},g=>{g(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(d=>{t.model.populateFromBrowse&&DT(t.model,d,i),Lc(i.element,"id").each(g=>$n(d.element,"aria-activedescendant",g))})},onExecute:(s,c)=>t.lazyTypeaheadComp.get().map(i=>(On(i,kD(),{item:c}),!0)),onHover:(s,c)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(i=>{t.model.populateFromBrowse&&DT(t.model,i,c)})}})})]),cV=rl({name:"Typeahead",configFields:sV(),partFields:rV(),factory:oV});var aV=tinymce.util.Tools.resolve("tinymce.ThemeManager"),BT=tinymce.util.Tools.resolve("tinymce.util.Delay"),JC=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),iV=tinymce.util.Tools.resolve("tinymce.EditorManager"),ry=tinymce.util.Tools.resolve("tinymce.Env"),Zu;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(Zu||(Zu={}));var QC;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(QC||(QC={}));const Ks=t=>s=>s.options.get(t),cy=t=>s=>k.from(t(s)),o6=t=>{const s=ry.deviceType.isPhone(),c=ry.deviceType.isTablet()||s,i=t.options.register,d=p=>Nt(p)||p===!1,g=p=>Nt(p)||Fo(p);i("skin",{processor:p=>Nt(p)||p===!1,default:"oxide"}),i("skin_url",{processor:"string"}),i("height",{processor:g,default:Math.max(t.getElement().offsetHeight,400)}),i("width",{processor:g,default:JC.DOM.getStyle(t.getElement(),"width")}),i("min_height",{processor:"number",default:100}),i("min_width",{processor:"number"}),i("max_height",{processor:"number"}),i("max_width",{processor:"number"}),i("style_formats",{processor:"object[]"}),i("style_formats_merge",{processor:"boolean",default:!1}),i("style_formats_autohide",{processor:"boolean",default:!1}),i("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),i("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),i("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),i("font_size_input_default_unit",{processor:"string",default:"pt"}),i("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),i("content_langs",{processor:"object[]"}),i("removed_menuitems",{processor:"string",default:""}),i("menubar",{processor:p=>Nt(p)||cn(p),default:!s}),i("menu",{processor:"object",default:{}}),i("toolbar",{processor:p=>cn(p)||Nt(p)||ts(p)?{value:p,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),Be(9,p=>{i("toolbar"+(p+1),{processor:"string"})}),i("toolbar_mode",{processor:"string",default:c?"scrolling":"floating"}),i("toolbar_groups",{processor:"object",default:{}}),i("toolbar_location",{processor:"string",default:QC.auto}),i("toolbar_persist",{processor:"boolean",default:!1}),i("toolbar_sticky",{processor:"boolean",default:t.inline}),i("toolbar_sticky_offset",{processor:"number",default:0}),i("fixed_toolbar_container",{processor:"string",default:""}),i("fixed_toolbar_container_target",{processor:"object"}),i("ui_mode",{processor:"string",default:"combined"}),i("file_picker_callback",{processor:"function"}),i("file_picker_validator_handler",{processor:"function"}),i("file_picker_types",{processor:"string"}),i("typeahead_urls",{processor:"boolean",default:!0}),i("anchor_top",{processor:d,default:"#top"}),i("anchor_bottom",{processor:d,default:"#bottom"}),i("draggable_modal",{processor:"boolean",default:!1}),i("statusbar",{processor:"boolean",default:!0}),i("elementpath",{processor:"boolean",default:!0}),i("branding",{processor:"boolean",default:!0}),i("promotion",{processor:"boolean",default:!0}),i("resize",{processor:p=>p==="both"||cn(p),default:!ry.deviceType.isTouch()}),i("sidebar_show",{processor:"string"}),i("help_accessibility",{processor:"boolean",default:t.hasPlugin("help")}),i("default_font_stack",{processor:"string[]",default:[]})},s6=Ks("readonly"),Bd=Ks("disabled"),DD=Ks("height"),OD=Ks("width"),ew=cy(Ks("min_width")),Fc=cy(Ks("min_height")),MT=cy(Ks("max_width")),_D=cy(Ks("max_height")),r6=cy(Ks("style_formats")),c6=Ks("style_formats_merge"),a6=Ks("style_formats_autohide"),i6=Ks("content_langs"),l6=Ks("removed_menuitems"),R0=Ks("toolbar_mode"),u6=Ks("toolbar_groups"),RD=Ks("toolbar_location"),lV=Ks("fixed_toolbar_container"),uV=Ks("fixed_toolbar_container_target"),d6=Ks("toolbar_persist"),m6=Ks("toolbar_sticky_offset"),f6=Ks("menubar"),FT=Ks("toolbar"),g6=Ks("file_picker_callback"),h6=Ks("file_picker_validator_handler"),p6=Ks("font_size_input_default_unit"),b6=Ks("file_picker_types"),v6=Ks("typeahead_urls"),y6=Ks("anchor_top"),C6=Ks("anchor_bottom"),w6=Ks("draggable_modal"),S6=Ks("statusbar"),BD=Ks("elementpath"),MD=Ks("branding"),FD=Ks("resize"),x6=Ks("paste_as_text"),ND=Ks("sidebar_show"),E6=Ks("promotion"),PD=Ks("help_accessibility"),T6=Ks("default_font_stack"),A6=Ks("skin"),$D=t=>t.options.get("skin")===!1,NT=t=>t.options.get("menubar")!==!1,k6=t=>{const s=t.options.get("skin_url");if($D(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const c=t.options.get("skin");return iV.baseURL+"/skins/ui/"+c}},dV=t=>k.from(t.options.get("skin_url")),D6=t=>t.options.get("line_height_formats").split(" "),PT=t=>{const s=FT(t),c=Nt(s),i=ts(s)&&s.length>0;return!tw(t)&&(i||c||s===!0)},ID=t=>{const s=Be(9,i=>t.options.get("toolbar"+(i+1))),c=jn(s,Nt);return _r(c.length>0,c)},tw=t=>ID(t).fold(()=>{const s=FT(t);return nn(s,Nt)&&s.length>0},rt),LD=t=>RD(t)===QC.bottom,O6=t=>{if(!t.inline)return k.none();const s=lV(t)??"";if(s.length>0)return As(xi(),s);const c=uV(t);return qn(c)?k.some(At.fromDom(c)):k.none()},ay=t=>t.inline&&O6(t).isSome(),$T=t=>O6(t).getOrThunk(()=>Vl(oc(At.fromDom(t.getElement())))),HD=t=>t.inline&&!NT(t)&&!PT(t)&&!tw(t),iy=t=>(t.options.get("toolbar_sticky")||t.inline)&&!ay(t)&&!HD(t),Hp=t=>!ay(t)&&t.options.get("ui_mode")==="split",_6=t=>{const s=t.options.get("menu");return mo(s,c=>({...c,items:c.items}))};var mV=Object.freeze({__proto__:null,get ToolbarMode(){return Zu},get ToolbarLocation(){return QC},register:o6,getSkinUrl:k6,getSkinUrlOption:dV,isReadOnly:s6,isDisabled:Bd,getSkin:A6,isSkinDisabled:$D,getHeightOption:DD,getWidthOption:OD,getMinWidthOption:ew,getMinHeightOption:Fc,getMaxWidthOption:MT,getMaxHeightOption:_D,getUserStyleFormats:r6,shouldMergeStyleFormats:c6,shouldAutoHideStyleFormats:a6,getLineHeightFormats:D6,getContentLanguages:i6,getRemovedMenuItems:l6,isMenubarEnabled:NT,isMultipleToolbars:tw,isToolbarEnabled:PT,isToolbarPersist:d6,getMultipleToolbarsOption:ID,getUiContainer:$T,useFixedContainer:ay,isSplitUiMode:Hp,getToolbarMode:R0,isDraggableModal:w6,isDistractionFree:HD,isStickyToolbar:iy,getStickyToolbarOffset:m6,getToolbarLocation:RD,isToolbarLocationBottom:LD,getToolbarGroups:u6,getMenus:_6,getMenubar:f6,getToolbar:FT,getFilePickerCallback:g6,getFilePickerTypes:b6,useTypeaheadUrls:v6,getAnchorTop:y6,getAnchorBottom:C6,getFilePickerValidatorHandler:h6,getFontSizeInputDefaultUnit:p6,useStatusBar:S6,useElementPath:BD,promotionEnabled:E6,useBranding:MD,getResize:FD,getPasteAsText:x6,getSidebarShow:ND,useHelpAccessibility:PD,getDefaultFontStack:T6});const zD=["visible","hidden","clip"],nw=t=>Pt(t).length>0&&!Je(zD,t),R6=t=>{if(ee(t)){const s=lr(t,"overflow-x"),c=lr(t,"overflow-y");return nw(s)||nw(c)}else return!1},ow=t=>t.plugins.fullscreen&&t.plugins.fullscreen.isFullscreen(),fV=(t,s)=>{const c=Jr(s,R6),i=c.length===0?Rr(s).map(ys).map(d=>Jr(d,R6)).getOr([]):c;return Xt(i).map(d=>({element:d,others:i.slice(1),isFullscreen:()=>ow(t)}))},zp=(t,s)=>Hp(t)?fV(t,s):k.none(),B0=t=>{const s=[...Ae(t.others,mc),Za()];return t.isFullscreen()?Za():xb(mc(t.element),s)};/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:B6,setPrototypeOf:gV,isFrozen:IT,getPrototypeOf:ly,getOwnPropertyDescriptor:M6}=Object;let{freeze:Ol,seal:Em,create:F6}=Object,{apply:VD,construct:UD}=typeof Reflect<"u"&&Reflect;Ol||(Ol=function(s){return s}),Em||(Em=function(s){return s}),VD||(VD=function(s,c,i){return s.apply(c,i)}),UD||(UD=function(s,c){return new s(...c)});const LT=au(Array.prototype.forEach),hV=au(Array.prototype.lastIndexOf),N6=au(Array.prototype.pop),sw=au(Array.prototype.push),pV=au(Array.prototype.splice),HT=au(String.prototype.toLowerCase),WD=au(String.prototype.toString),ZD=au(String.prototype.match),tg=au(String.prototype.replace),M0=au(String.prototype.indexOf),bV=au(String.prototype.trim),Tm=au(Object.prototype.hasOwnProperty),_l=au(RegExp.prototype.test),Vp=F0(TypeError);function au(t){return function(s){s instanceof RegExp&&(s.lastIndex=0);for(var c=arguments.length,i=new Array(c>1?c-1:0),d=1;d<c;d++)i[d-1]=arguments[d];return VD(t,s,i)}}function F0(t){return function(){for(var s=arguments.length,c=new Array(s),i=0;i<s;i++)c[i]=arguments[i];return UD(t,c)}}function Is(t,s){let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:HT;gV&&gV(t,null);let i=s.length;for(;i--;){let d=s[i];if(typeof d=="string"){const g=c(d);g!==d&&(IT(s)||(s[i]=g),d=g)}t[d]=!0}return t}function vV(t){for(let s=0;s<t.length;s++)Tm(t,s)||(t[s]=null);return t}function kh(t){const s=F6(null);for(const[c,i]of B6(t))Tm(t,c)&&(Array.isArray(i)?s[c]=vV(i):i&&typeof i=="object"&&i.constructor===Object?s[c]=kh(i):s[c]=i);return s}function rw(t,s){for(;t!==null;){const i=M6(t,s);if(i){if(i.get)return au(i.get);if(typeof i.value=="function")return au(i.value)}t=ly(t)}function c(){return null}return c}const P6=Ol(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),jD=Ol(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),GD=Ol(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),yV=Ol(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),qD=Ol(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),zT=Ol(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),KD=Ol(["#text"]),$6=Ol(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),VT=Ol(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),I6=Ol(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),UT=Ol(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),YD=Em(/\{\{[\w\W]*|[\w\W]*\}\}/gm),BY=Em(/<%[\w\W]*|[\w\W]*%>/gm),XD=Em(/\$\{[\w\W]*/gm),CV=Em(/^data-[\-\w.\u00B7-\uFFFF]+$/),wV=Em(/^aria-[\-\w]+$/),L6=Em(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),H6=Em(/^(?:\w+script|data):/i),z6=Em(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),V6=Em(/^html$/i),SV=Em(/^[a-z][.\w]*(-[.\w]+)+$/i);var JD=Object.freeze({__proto__:null,ARIA_ATTR:wV,ATTR_WHITESPACE:z6,CUSTOM_ELEMENT:SV,DATA_ATTR:CV,DOCTYPE_NAME:V6,ERB_EXPR:BY,IS_ALLOWED_URI:L6,IS_SCRIPT_OR_DATA:H6,MUSTACHE_EXPR:YD,TMPLIT_EXPR:XD});const cw={element:1,text:3,progressingInstruction:7,comment:8,document:9},xV=function(){return typeof window>"u"?null:window},WT=function(s,c){if(typeof s!="object"||typeof s.createPolicy!="function")return null;let i=null;const d="data-tt-policy-suffix";c&&c.hasAttribute(d)&&(i=c.getAttribute(d));const g="dompurify"+(i?"#"+i:"");try{return s.createPolicy(g,{createHTML(p){return p},createScriptURL(p){return p}})}catch{return console.warn("TrustedTypes policy "+g+" could not be created."),null}},U6=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function EV(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:xV();const s=f=>EV(f);if(s.version="3.2.6",s.removed=[],!t||!t.document||t.document.nodeType!==cw.document||!t.Element)return s.isSupported=!1,s;let{document:c}=t;const i=c,d=i.currentScript,{DocumentFragment:g,HTMLTemplateElement:p,Node:C,Element:S,NodeFilter:E,NamedNodeMap:O=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:B,DOMParser:I,trustedTypes:U}=t,j=S.prototype,Q=rw(j,"cloneNode"),ie=rw(j,"remove"),X=rw(j,"nextSibling"),he=rw(j,"childNodes"),we=rw(j,"parentNode");if(typeof p=="function"){const f=c.createElement("template");f.content&&f.content.ownerDocument&&(c=f.content.ownerDocument)}let Me,Fe="";const{implementation:Mt,createNodeIterator:at,createDocumentFragment:vt,getElementsByTagName:gt}=c,{importNode:_n}=i;let hn=U6();s.isSupported=typeof B6=="function"&&typeof we=="function"&&Mt&&Mt.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:$o,ERB_EXPR:In,TMPLIT_EXPR:ao,DATA_ATTR:mn,ARIA_ATTR:ot,IS_SCRIPT_OR_DATA:Rt,ATTR_WHITESPACE:Hn,CUSTOM_ELEMENT:uo}=JD;let{IS_ALLOWED_URI:xn}=JD,Yn=null;const Vs=Is({},[...P6,...jD,...GD,...qD,...KD]);let ps=null;const Ni=Is({},[...$6,...VT,...I6,...UT]);let kr=Object.seal(F6(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),il=null,Ea=null,Xu=!0,Fl=!0,lu=!1,lg=!0,ug=!1,ub=!0,Nh=!1,Kw=!1,b4=!1,$y=!1,dg=!1,Yw=!1,MI=!0,Xw=!1;const Iy="user-content-";let Ly=!0,Hy=!1,Ph={},Ia=null;const Jw=Is({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let C5=null;const w5=Is({},["audio","video","img","source","image","track"]);let S5=null;const FI=Is({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ff="http://www.w3.org/1998/Math/MathML",x5="http://www.w3.org/2000/svg",$h="http://www.w3.org/1999/xhtml";let db=$h,e1=!1,zy=null;const NI=Is({},[ff,x5,$h],WD);let v4=Is({},["mi","mo","mn","ms","mtext"]),y4=Is({},["annotation-xml"]);const oY=Is({},["title","style","font","a","script"]);let Qw=null;const Vy=["application/xhtml+xml","text/html"],QY="text/html";let Pi=null,Uy=null;const eX=c.createElement("form"),PI=function(h){return h instanceof RegExp||h instanceof Function},E5=function(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Uy&&Uy===h)){if((!h||typeof h!="object")&&(h={}),h=kh(h),Qw=Vy.indexOf(h.PARSER_MEDIA_TYPE)===-1?QY:h.PARSER_MEDIA_TYPE,Pi=Qw==="application/xhtml+xml"?WD:HT,Yn=Tm(h,"ALLOWED_TAGS")?Is({},h.ALLOWED_TAGS,Pi):Vs,ps=Tm(h,"ALLOWED_ATTR")?Is({},h.ALLOWED_ATTR,Pi):Ni,zy=Tm(h,"ALLOWED_NAMESPACES")?Is({},h.ALLOWED_NAMESPACES,WD):NI,S5=Tm(h,"ADD_URI_SAFE_ATTR")?Is(kh(FI),h.ADD_URI_SAFE_ATTR,Pi):FI,C5=Tm(h,"ADD_DATA_URI_TAGS")?Is(kh(w5),h.ADD_DATA_URI_TAGS,Pi):w5,Ia=Tm(h,"FORBID_CONTENTS")?Is({},h.FORBID_CONTENTS,Pi):Jw,il=Tm(h,"FORBID_TAGS")?Is({},h.FORBID_TAGS,Pi):kh({}),Ea=Tm(h,"FORBID_ATTR")?Is({},h.FORBID_ATTR,Pi):kh({}),Ph=Tm(h,"USE_PROFILES")?h.USE_PROFILES:!1,Xu=h.ALLOW_ARIA_ATTR!==!1,Fl=h.ALLOW_DATA_ATTR!==!1,lu=h.ALLOW_UNKNOWN_PROTOCOLS||!1,lg=h.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ug=h.SAFE_FOR_TEMPLATES||!1,ub=h.SAFE_FOR_XML!==!1,Nh=h.WHOLE_DOCUMENT||!1,$y=h.RETURN_DOM||!1,dg=h.RETURN_DOM_FRAGMENT||!1,Yw=h.RETURN_TRUSTED_TYPE||!1,b4=h.FORCE_BODY||!1,MI=h.SANITIZE_DOM!==!1,Xw=h.SANITIZE_NAMED_PROPS||!1,Ly=h.KEEP_CONTENT!==!1,Hy=h.IN_PLACE||!1,xn=h.ALLOWED_URI_REGEXP||L6,db=h.NAMESPACE||$h,v4=h.MATHML_TEXT_INTEGRATION_POINTS||v4,y4=h.HTML_INTEGRATION_POINTS||y4,kr=h.CUSTOM_ELEMENT_HANDLING||{},h.CUSTOM_ELEMENT_HANDLING&&PI(h.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(kr.tagNameCheck=h.CUSTOM_ELEMENT_HANDLING.tagNameCheck),h.CUSTOM_ELEMENT_HANDLING&&PI(h.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(kr.attributeNameCheck=h.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),h.CUSTOM_ELEMENT_HANDLING&&typeof h.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(kr.allowCustomizedBuiltInElements=h.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ug&&(Fl=!1),dg&&($y=!0),Ph&&(Yn=Is({},KD),ps=[],Ph.html===!0&&(Is(Yn,P6),Is(ps,$6)),Ph.svg===!0&&(Is(Yn,jD),Is(ps,VT),Is(ps,UT)),Ph.svgFilters===!0&&(Is(Yn,GD),Is(ps,VT),Is(ps,UT)),Ph.mathMl===!0&&(Is(Yn,qD),Is(ps,I6),Is(ps,UT))),h.ADD_TAGS&&(Yn===Vs&&(Yn=kh(Yn)),Is(Yn,h.ADD_TAGS,Pi)),h.ADD_ATTR&&(ps===Ni&&(ps=kh(ps)),Is(ps,h.ADD_ATTR,Pi)),h.ADD_URI_SAFE_ATTR&&Is(S5,h.ADD_URI_SAFE_ATTR,Pi),h.FORBID_CONTENTS&&(Ia===Jw&&(Ia=kh(Ia)),Is(Ia,h.FORBID_CONTENTS,Pi)),Ly&&(Yn["#text"]=!0),Nh&&Is(Yn,["html","head","body"]),Yn.table&&(Is(Yn,["tbody"]),delete il.tbody),h.TRUSTED_TYPES_POLICY){if(typeof h.TRUSTED_TYPES_POLICY.createHTML!="function")throw Vp('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof h.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Vp('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Me=h.TRUSTED_TYPES_POLICY,Fe=Me.createHTML("")}else Me===void 0&&(Me=WT(U,d)),Me!==null&&typeof Fe=="string"&&(Fe=Me.createHTML(""));Ol&&Ol(h),Uy=h}},Wy=Is({},[...jD,...GD,...yV]),$I=Is({},[...qD,...zT]),sY=function(h){let v=we(h);(!v||!v.tagName)&&(v={namespaceURI:db,tagName:"template"});const w=HT(h.tagName),D=HT(v.tagName);return zy[h.namespaceURI]?h.namespaceURI===x5?v.namespaceURI===$h?w==="svg":v.namespaceURI===ff?w==="svg"&&(D==="annotation-xml"||v4[D]):!!Wy[w]:h.namespaceURI===ff?v.namespaceURI===$h?w==="math":v.namespaceURI===x5?w==="math"&&y4[D]:!!$I[w]:h.namespaceURI===$h?v.namespaceURI===x5&&!y4[D]||v.namespaceURI===ff&&!v4[D]?!1:!$I[w]&&(oY[w]||!Wy[w]):!!(Qw==="application/xhtml+xml"&&zy[h.namespaceURI]):!1},gf=function(h){sw(s.removed,{element:h});try{we(h).removeChild(h)}catch{ie(h)}},Zy=function(h,v){try{sw(s.removed,{attribute:v.getAttributeNode(h),from:v})}catch{sw(s.removed,{attribute:null,from:v})}if(v.removeAttribute(h),h==="is")if($y||dg)try{gf(v)}catch{}else try{v.setAttribute(h,"")}catch{}},rY=function(h){let v=null,w=null;if(b4)h="<remove></remove>"+h;else{const M=ZD(h,/^[\r\n\t ]+/);w=M&&M[0]}Qw==="application/xhtml+xml"&&db===$h&&(h='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+h+"</body></html>");const D=Me?Me.createHTML(h):h;if(db===$h)try{v=new I().parseFromString(D,Qw)}catch{}if(!v||!v.documentElement){v=Mt.createDocument(db,"template",null);try{v.documentElement.innerHTML=e1?Fe:D}catch{}}const R=v.body||v.documentElement;return h&&w&&R.insertBefore(c.createTextNode(w),R.childNodes[0]||null),db===$h?gt.call(v,Nh?"html":"body")[0]:Nh?v.documentElement:R},Id=function(h){return at.call(h.ownerDocument||h,h,E.SHOW_ELEMENT|E.SHOW_COMMENT|E.SHOW_TEXT|E.SHOW_PROCESSING_INSTRUCTION|E.SHOW_CDATA_SECTION,null)},jy=function(h){return h instanceof B&&(typeof h.nodeName!="string"||typeof h.textContent!="string"||typeof h.removeChild!="function"||!(h.attributes instanceof O)||typeof h.removeAttribute!="function"||typeof h.setAttribute!="function"||typeof h.namespaceURI!="string"||typeof h.insertBefore!="function"||typeof h.hasChildNodes!="function")},eS=function(h){return typeof C=="function"&&h instanceof C};function e(f,h,v){LT(f,w=>{w.call(s,h,v,Uy)})}const n=function(h){let v=null;if(e(hn.beforeSanitizeElements,h,null),jy(h))return gf(h),!0;const w=Pi(h.nodeName);if(e(hn.uponSanitizeElement,h,{tagName:w,allowedTags:Yn}),ub&&h.hasChildNodes()&&!eS(h.firstElementChild)&&_l(/<[/\w!]/g,h.innerHTML)&&_l(/<[/\w!]/g,h.textContent)||h.nodeType===cw.progressingInstruction||ub&&h.nodeType===cw.comment&&_l(/<[/\w]/g,h.data))return gf(h),!0;if(!Yn[w]||il[w]){if(!il[w]&&r(w)&&(kr.tagNameCheck instanceof RegExp&&_l(kr.tagNameCheck,w)||kr.tagNameCheck instanceof Function&&kr.tagNameCheck(w)))return!1;if(Ly&&!Ia[w]){const D=we(h)||h.parentNode,R=he(h)||h.childNodes;if(R&&D){const M=R.length;for(let L=M-1;L>=0;--L){const K=Q(R[L],!0);K.__removalCount=(h.__removalCount||0)+1,D.insertBefore(K,X(h))}}}return gf(h),!0}return h instanceof S&&!sY(h)||(w==="noscript"||w==="noembed"||w==="noframes")&&_l(/<\/no(script|embed|frames)/i,h.innerHTML)?(gf(h),!0):(ug&&h.nodeType===cw.text&&(v=h.textContent,LT([$o,In,ao],D=>{v=tg(v,D," ")}),h.textContent!==v&&(sw(s.removed,{element:h.cloneNode()}),h.textContent=v)),e(hn.afterSanitizeElements,h,null),!1)},o=function(h,v,w){if(MI&&(v==="id"||v==="name")&&(w in c||w in eX))return!1;if(!(Fl&&!Ea[v]&&_l(mn,v))){if(!(Xu&&_l(ot,v))){if(!ps[v]||Ea[v]){if(!(r(h)&&(kr.tagNameCheck instanceof RegExp&&_l(kr.tagNameCheck,h)||kr.tagNameCheck instanceof Function&&kr.tagNameCheck(h))&&(kr.attributeNameCheck instanceof RegExp&&_l(kr.attributeNameCheck,v)||kr.attributeNameCheck instanceof Function&&kr.attributeNameCheck(v))||v==="is"&&kr.allowCustomizedBuiltInElements&&(kr.tagNameCheck instanceof RegExp&&_l(kr.tagNameCheck,w)||kr.tagNameCheck instanceof Function&&kr.tagNameCheck(w))))return!1}else if(!S5[v]){if(!_l(xn,tg(w,Hn,""))){if(!((v==="src"||v==="xlink:href"||v==="href")&&h!=="script"&&M0(w,"data:")===0&&C5[h])){if(!(lu&&!_l(Rt,tg(w,Hn,"")))){if(w)return!1}}}}}}return!0},r=function(h){return h!=="annotation-xml"&&ZD(h,uo)},a=function(h){e(hn.beforeSanitizeAttributes,h,null);const{attributes:v}=h;if(!v||jy(h))return;const w={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ps,forceKeepAttr:void 0};let D=v.length;for(;D--;){const R=v[D],{name:M,namespaceURI:L,value:K}=R,W=Pi(M),J=K;let pe=M==="value"?J:bV(J);if(w.attrName=W,w.attrValue=pe,w.keepAttr=!0,w.forceKeepAttr=void 0,e(hn.uponSanitizeAttribute,h,w),pe=w.attrValue,Xw&&(W==="id"||W==="name")&&(Zy(M,h),pe=Iy+pe),ub&&_l(/((--!?|])>)|<\/(style|title)/i,pe)){Zy(M,h);continue}if(w.forceKeepAttr)continue;if(!w.keepAttr){Zy(M,h);continue}if(!lg&&_l(/\/>/i,pe)){Zy(M,h);continue}ug&&LT([$o,In,ao],Se=>{pe=tg(pe,Se," ")});const be=Pi(h.nodeName);if(!o(be,W,pe)){Zy(M,h);continue}if(Me&&typeof U=="object"&&typeof U.getAttributeType=="function"&&!L)switch(U.getAttributeType(be,W)){case"TrustedHTML":{pe=Me.createHTML(pe);break}case"TrustedScriptURL":{pe=Me.createScriptURL(pe);break}}if(pe!==J)try{L?h.setAttributeNS(L,M,pe):h.setAttribute(M,pe),jy(h)?gf(h):N6(s.removed)}catch{Zy(M,h)}}e(hn.afterSanitizeAttributes,h,null)},u=function f(h){let v=null;const w=Id(h);for(e(hn.beforeSanitizeShadowDOM,h,null);v=w.nextNode();)e(hn.uponSanitizeShadowNode,v,null),n(v),a(v),v.content instanceof g&&f(v.content);e(hn.afterSanitizeShadowDOM,h,null)};return s.sanitize=function(f){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v=null,w=null,D=null,R=null;if(e1=!f,e1&&(f="<!-->"),typeof f!="string"&&!eS(f))if(typeof f.toString=="function"){if(f=f.toString(),typeof f!="string")throw Vp("dirty is not a string, aborting")}else throw Vp("toString is not a function");if(!s.isSupported)return f;if(Kw||E5(h),s.removed=[],typeof f=="string"&&(Hy=!1),Hy){if(f.nodeName){const K=Pi(f.nodeName);if(!Yn[K]||il[K])throw Vp("root node is forbidden and cannot be sanitized in-place")}}else if(f instanceof C)v=rY("<!---->"),w=v.ownerDocument.importNode(f,!0),w.nodeType===cw.element&&w.nodeName==="BODY"||w.nodeName==="HTML"?v=w:v.appendChild(w);else{if(!$y&&!ug&&!Nh&&f.indexOf("<")===-1)return Me&&Yw?Me.createHTML(f):f;if(v=rY(f),!v)return $y?null:Yw?Fe:""}v&&b4&&gf(v.firstChild);const M=Id(Hy?f:v);for(;D=M.nextNode();)n(D),a(D),D.content instanceof g&&u(D.content);if(Hy)return f;if($y){if(dg)for(R=vt.call(v.ownerDocument);v.firstChild;)R.appendChild(v.firstChild);else R=v;return(ps.shadowroot||ps.shadowrootmode)&&(R=_n.call(i,R,!0)),R}let L=Nh?v.outerHTML:v.innerHTML;return Nh&&Yn["!doctype"]&&v.ownerDocument&&v.ownerDocument.doctype&&v.ownerDocument.doctype.name&&_l(V6,v.ownerDocument.doctype.name)&&(L="<!DOCTYPE "+v.ownerDocument.doctype.name+`>
`+L),ug&&LT([$o,In,ao],K=>{L=tg(L,K," ")}),Me&&Yw?Me.createHTML(L):L},s.setConfig=function(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};E5(f),Kw=!0},s.clearConfig=function(){Uy=null,Kw=!1},s.isValidAttribute=function(f,h,v){Uy||E5({});const w=Pi(f),D=Pi(h);return o(w,D,v)},s.addHook=function(f,h){typeof h=="function"&&sw(hn[f],h)},s.removeHook=function(f,h){if(h!==void 0){const v=hV(hn[f],h);return v===-1?void 0:pV(hn[f],v,1)[0]}return N6(hn[f])},s.removeHooks=function(f){hn[f]=[]},s.removeAllHooks=function(){hn=U6()},s}var QD=EV();const W6=t=>QD().sanitize(t);var $a=tinymce.util.Tools.resolve("tinymce.util.I18n");const TV={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-disc":!0,"list-bull-default":!0,"list-bull-square":!0},Z6="temporary-placeholder",ZT=t=>()=>on(t,Z6).getOr("!not found!"),jT=(t,s)=>{const c=t.toLowerCase();if($a.isRtl()){const i=mu(c,"-rtl");return So(s,i)?i:c}else return c},eO=(t,s)=>on(s,jT(t,s)),ng=(t,s)=>{const c=s();return eO(t,c).getOrThunk(ZT(c))},N0=(t,s,c)=>{const i=s();return eO(t,i).or(c).getOrThunk(ZT(i))},AV=t=>$a.isRtl()?So(TV,t):!1,j6=()=>Qn("add-focusable",[ur(t=>{qd(t.element,"svg").each(s=>$n(s,"focusable","false"))})]),tO=(t,s,c,i)=>{const d=AV(s)?["tox-icon--flip"]:[],g=on(c,jT(s,c)).or(i).getOrThunk(ZT(c));return{dom:{tag:t.tag,attributes:t.attributes??{},classes:t.classes.concat(d),innerHtml:g},behaviours:Et([...t.behaviours??[],j6()]),eventOrder:t.eventOrder??{}}},ju=(t,s,c,i=k.none())=>tO(s,t,c(),i),G6=(t,s,c)=>{const i=c(),d=De(t,g=>So(i,jT(g,i)));return tO(s,d.getOr(Z6),i,k.none())},kV={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},nO=Wu({name:"Notification",factory:t=>{const s=nt("notification-text"),c=Ss({dom:Eh(`<p id=${s}>${W6(t.backstageProvider.translate(t.text))}</p>`),behaviours:Et([so.config({})])}),i=j=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${j}%`}}}),d=j=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${j}%`}}),g=Ss({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(0)]},d(0)],behaviours:Et([so.config({})])}),S={updateProgress:(j,Q)=>{j.getSystem().isConnected()&&g.getOpt(j).each(ie=>{so.set(ie,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(Q)]},d(Q)])})},updateText:(j,Q)=>{if(j.getSystem().isConnected()){const ie=c.get(j);so.set(ie,[nr(Q)])}}},E=ae([t.icon.toArray(),[t.level],k.from(kV[t.level]).toArray()]),O=Ss(Na.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":t.backstageProvider.translate("Close")}},components:[ju("close",{tag:"span",classes:["tox-icon"]},t.iconProvider)],buttonBehaviours:Et([or.config({}),sr.config({...t.backstageProvider.tooltips.getConfig({tooltipText:t.backstageProvider.translate("Close")})})]),action:j=>{t.onAction(j)}})),B=G6(E,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),I={dom:{tag:"div",classes:["tox-notification__body"]},components:[c.asSpec()],behaviours:Et([so.config({})])},U=[B,I];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":s},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},behaviours:Et([or.config({}),to.config({}),Sn.config({mode:"special",onEscape:j=>(t.onAction(j),k.some(!0))})]),components:U.concat(t.progress?[g.asSpec()]:[]).concat([O.asSpec()]),apis:S}},configFields:[Sl("level","info",["success","error","warning","warn","info"]),ct("progress"),$s("icon"),ct("onAction"),ct("text"),ct("iconProvider"),ct("backstageProvider")],apis:{updateProgress:(t,s,c)=>{t.updateProgress(s,c)},updateText:(t,s,c)=>{t.updateText(s,c)}}});var DV=(t,s,c,i)=>{const d=s.backstage.shared,g=()=>At.fromDom(t.queryCommandValue("ToggleView")===""?t.getContentAreaContainer():t.getContainer()),p=()=>{const B=mc(g());return k.some(B)},C=B=>{p().each(I=>{Ve(B,U=>{Ro(U.element,"width"),ta(U.element)>I.width&&Vn(U.element,"width",I.width+"px")})})};return{open:(B,I,U)=>{const j=()=>{const we=at=>{so.remove(at,ie),X()},Me=(at,vt)=>{zl(at.element).length===0?Fe(at,vt):Mt(at,vt)},Fe=(at,vt)=>{Fr.hide(at),i.clear(),vt&&t.focus()},Mt=(at,vt)=>{vt&&Sn.focusIn(at)};i.on(at=>{I();const vt=U();we(at),Me(at,vt)})},Q=()=>!iy(t)||!d.header.isPositionedAtTop(),ie=m(nO.sketch({text:B.text,level:Je(["success","error","warning","warn","info"],B.type)?B.type:void 0,progress:B.progressBar===!0,icon:B.icon,onAction:j,iconProvider:d.providers.icons,backstageProvider:d.providers}));if(i.isSet()){const we=b(ie);i.on(Me=>{so.append(Me,we),Fr.reposition(Me),ie.hasConfigured(Mr)&&Mr.refresh(Me),C(Me.components())})}else{const we=m(Fr.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:d.getSink,fireDismissalEventInstead:{},...d.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Et([Sn.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),so.config({}),...Q()?[Mr.config({contextual:{lazyContext:()=>k.some(mc(g())),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:at=>zp(t,at.element).map(gt=>({bounds:B0(gt),optScrollEnv:k.some({currentScrollTop:gt.element.dom.scrollTop,scrollElmTop:fa(gt.element).top})})).getOrThunk(()=>({bounds:Za(),optScrollEnv:k.none()}))})]:[]])})),Me=b(ie),Fe={maxHeightFunction:Xg()},Mt={...d.anchors.banner(),overrides:Fe};i.set(we),c.add(we),Fr.showWithinBounds(we,Me,{anchor:Mt},p)}Fo(B.timeout)&&B.timeout>0&&BT.setEditorTimeout(t,()=>{j()},B.timeout);const X=()=>{i.on(we=>{Fr.reposition(we),we.hasConfigured(Mr)&&Mr.refresh(we),C(we.components())})};return{close:j,reposition:X,text:we=>{nO.updateText(ie,we)},settings:B,getEl:()=>ie.element.dom,progressBar:{value:we=>{nO.updateProgress(ie,we)}}}},close:B=>{B.close()},getArgs:B=>B.settings}};const OV={setup:(t,s)=>{const c=(d,g)=>{On(d,Uc(),{raw:g})},i=()=>t.getMenu().bind(hs.getHighlighted);s.on("keydown",d=>{const g=d.which;t.isActive()&&(t.isMenuOpen()?g===13?(i().each(U1),d.preventDefault()):g===40?(i().fold(()=>{t.getMenu().each(hs.highlightFirst)},p=>{c(p,d)}),d.preventDefault(),d.stopImmediatePropagation()):(g===37||g===38||g===39)&&i().each(p=>{c(p,d),d.preventDefault(),d.stopImmediatePropagation()}):(g===13||g===38||g===40)&&t.cancelIfNecessary())}),s.on("NodeChange",()=>{t.isActive()&&!t.isProcessingAction()&&!s.queryCommandState("mceAutoCompleterInRange")&&t.cancelIfNecessary()})}};var oO;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(oO||(oO={}));var Am=oO;const aw="tox-menu-nav__js",GT="tox-collection__item",sO="tox-swatch",_V={normal:aw,color:sO},qT="tox-collection__item--enabled",RV="tox-collection__group-heading",q6="tox-collection__item-icon",BV="tox-collection__item-image",K6="tox-collection__item-image-selector",rO="tox-collection__item-label",MV="tox-collection__item-accessory",Y6="tox-collection__item-caret",FV="tox-collection__item-checkmark",P0="tox-collection__item--active",cO="tox-collection__item-container",X6="tox-collection__item-container--column",J6="tox-collection__item-container--row",NV="tox-collection__item-container--align-right",PV="tox-collection__item-container--align-left",$V="tox-collection__item-container--valign-top",IV="tox-collection__item-container--valign-middle",Q6="tox-collection__item-container--valign-bottom",$0=t=>on(_V,t).getOr(aw),LV=t=>t==="color"?"tox-swatches":"tox-menu",aO=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:LV(t),tieredMenu:"tox-tiered-menu"}),Up=t=>{const s=aO(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:$0(t)}},KT=(t,s,c)=>{const i=aO(c);return{tag:"div",classes:ae([[i.menu,`tox-menu-${s}-column`],t?[i.hasIcons]:[]])}},Md=[Th.parts.items({})],I0=(t,s,c)=>{const i=aO(c);return{dom:{tag:"div",classes:ae([[i.tieredMenu]])},markers:Up(c)}},iO=nt("refetch-trigger-event"),eN=nt("redirect-menu-item-interaction"),tN="tox-menu__searcher",YT=t=>As(t.element,`.${tN}`).bind(s=>t.getSystem().getByDom(s).toOptional()),nN=YT,oN=(t,s)=>{Lt.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},lO=t=>{const s=Lt.getValue(t),c=t.element.dom.selectionStart,i=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:c,selectionEnd:i}},HV=(t,s)=>{Lc(s.element,"id").each(c=>$n(t.element,"aria-activedescendant",c))},zV=t=>{const s=(d,g)=>(g.cut(),k.none()),c=(d,g)=>{const p={interactionEvent:g.event,eventType:g.event.raw.type};return On(d,eN,p),k.some(!0)},i="searcher-events";return{dom:{tag:"div",classes:[GT]},components:[_d.sketch({inputClasses:[tN,"tox-textfield"],inputAttributes:{...t.placeholder.map(d=>({placeholder:t.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:Et([Qn(i,[We(qm(),d=>{Do(d,iO)}),We(Uc(),(d,g)=>{g.event.raw.key==="Escape"&&g.stop()})]),Sn.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:c,onEscape:c,onUp:c,onDown:c})]),eventOrder:{keydown:[i,Sn.name()]}})]}},iw="tox-collection--results__js",sN=t=>t.dom?{...t,dom:{...t.dom,attributes:{...t.dom.attributes??{},id:nt("aria-item-search-result-id"),"aria-selected":"false"}}}:t,uO="Use arrow keys to navigate.",lw=(t,s)=>c=>{const i=xt(c,s);return Ae(i,d=>({dom:t,components:d}))},rN=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"],attributes:{"aria-label":$a.translate(uO)}},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Th.parts.items({preprocess:t!=="auto"?lw({tag:"div",classes:["tox-swatches__row"]},t):St})]}]}),VV=t=>({dom:{tag:"div",classes:["tox-menu","tox-image-selector-menu"]},components:[{dom:{tag:"div",classes:["tox-image-selector"]},components:[Th.parts.items({preprocess:t!=="auto"?lw({tag:"div",classes:["tox-image-selector__row"]},t):St})]}]}),UV=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Th.parts.items({preprocess:lw({tag:"div",classes:["tox-collection__group"]},t)})]}),cN=(t,s)=>{const c=[];let i=[];return Ve(t,(d,g)=>{s(d,g)?(i.length>0&&c.push(i),i=[],(So(d.dom,"innerHtml")||d.components&&d.components.length>0)&&i.push(d)):i.push(d)}),i.length>0&&c.push(i),Ae(c,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},dO=(t,s,c)=>Th.parts.items({preprocess:i=>{const d=Ae(i,c);return t!=="auto"&&t>1?lw({tag:"div",classes:["tox-collection__group"]},t)(d):cN(d,(g,p)=>s[p].type==="separator")}}),WV=t=>Bt(t,s=>s.type==="widget"),uw=(t,s,c=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{...WV(s)?{"aria-label":$a.translate(uO)}:{}}},components:[dO(t,s,St)]}),og=(t,s,c=!0)=>{const i=nt("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",iw].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:i}},components:[dO(t,s,sN)]}},aN=(t,s,c)=>{const i=nt("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[zV({i18n:$a.translate,placeholder:c.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],iw],attributes:{id:i}},components:[dO(t,s,sN)]}]}},Fd=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Th.parts.items({preprocess:c=>cN(c,(i,d)=>t[d].type==="separator")})]}),dw=t=>Bt(t,s=>"icon"in s&&s.icon!==void 0),Gu=t=>(console.error(Bf(t)),console.log(t),k.none()),ZV=(t,s,c,i,d)=>{const g=Fd(c);return{value:t,dom:g.dom,components:g.components,items:c}},Dh=(t,s,c,i,d)=>{const g=()=>d.menuType!=="searchable"?uw(i,c):d.searchMode.searchMode==="search-with-field"?aN(i,c,d.searchMode):og(i,c);if(d.menuType==="color"){const p=rN(i);return{value:t,dom:p.dom,components:p.components,items:c}}else if(d.menuType==="imageselector"&&i!=="auto"){const p=VV(i);return{value:t,dom:p.dom,components:p.components,items:c}}else if(d.menuType==="normal"&&i==="auto"){const p=uw(i,c);return{value:t,dom:p.dom,components:p.components,items:c}}else if(d.menuType==="normal"||d.menuType==="searchable"){const p=g();return{value:t,dom:p.dom,components:p.components,items:c}}else if(d.menuType==="listpreview"&&i!=="auto"){const p=UV(i);return{value:t,dom:p.dom,components:p.components,items:c}}else return{value:t,dom:KT(s,i,d.menuType),components:Md,items:c}},tc=Rc("type"),mw=Rc("name"),uy=Rc("label"),Oh=Rc("text"),iN=Rc("title"),_h=Rc("icon"),lN=Rc("url"),L0=Rc("value"),jV=Xl("fetch"),mO=Xl("getSubmenuItems"),H0=Xl("onAction"),fO=Xl("onItemAction"),Wp=Rs("onSetup",()=>re),uN=Gr("name"),km=Gr("text"),GV=Gr("role"),Nd=Gr("icon"),z0=Gr("tooltip"),qV=Gr("chevronTooltip"),V0=Gr("label"),gO=Gr("shortcut"),hO=gd("select"),dy=va("active",!1),fw=va("borderless",!1),Dm=va("enabled",!0),gw=va("primary",!1),dN=t=>Re("columns",t),pO=Re("meta",{}),bO=Rs("onAction",re),U0=t=>Lr("type",t),my=t=>Vc("name","name",ai(()=>nt(`${t}-name`)),Zr),mN=t=>Vc("value","value",ai(()=>nt(`${t}-value`)),pt()),KV=[tc,Oh,Yl("level",["info","warn","error","success"]),_h,Re("url","")],vO=Un(KV),W0=t=>[tc,t],fN=[tc,Oh,Dm,my("button"),Nd,fw,gS("buttonType",["primary","secondary","toolbar"]),gw,Lr("context","mode:design")],hw=Un(fN),fy=[tc,mw],Om=fy.concat([V0]),YV=fy.concat([uy,Dm,Lr("context","mode:design")]),XV=Un(YV),Z0=_o,gN=Om.concat([dN("auto"),Lr("context","mode:design")]),JV=Un(gN),hN=_b([L0,Oh,_h]),QV=Om.concat([Lr("storageKey","default"),Lr("context","mode:design")]),eU=Un(QV),tU=Zr,oU=Un(Om),sU=Zr,rU=fy.concat([Lr("tag","textarea"),Rc("scriptId"),Rc("scriptUrl"),gd("onFocus"),hS("settings",void 0)]),cU=fy.concat([Lr("tag","textarea"),Xl("init")]),aU=Rf(t=>Ir("customeditor.old",Cl(cU),t).orThunk(()=>Ir("customeditor.new",Cl(rU),t))),iU=Zr,Zp=[Dm,km,GV,gO,mN("menuitem"),pO,Lr("context","mode:design")],lU=Un([tc,mw].concat(Zp)),pN=_o,yO=[my("button"),Nd,Sl("align","end",["start","end"]),gw,Dm,gS("buttonType",["primary","secondary"]),Lr("context","mode:design")],bN=[...yO,Oh],CO=[Yl("type",["submit","cancel","custom"]),...bN],uU=[Yl("type",["menu"]),km,z0,Nd,Ai("items",lU),...yO],dU=[...yO,Yl("type",["togglebutton"]),z0,Nd,km,va("active",!1)],mU=ui("type",{submit:CO,cancel:CO,custom:CO,menu:uU,togglebutton:dU}),vN=Om.concat([Lr("context","mode:design")]),yN=Un(vN),fU=Rb(),XT=t=>[tc,E1("columns"),t],gU=[tc,Rc("html"),Sl("presets","presentation",["presentation","document"]),Rs("onInit",re),va("stretched",!1)],hU=Un(gU),pU=Om.concat([va("border",!1),va("sandboxed",!0),va("streamContent",!1),va("transparent",!0)]),bU=Un(pU),vU=Zr,yU=Un(fy.concat([Gr("height")])),CU=Un([Rc("url"),T1("zoom"),T1("cachedWidth"),T1("cachedHeight")]),wU=Om.concat([Gr("inputMode"),Gr("placeholder"),va("maximized",!1),Dm,Lr("context","mode:design")]),jp=Un(wU),SU=Zr,xU=t=>[tc,uy,t,Sl("align","start",["start","center","end"]),Gr("for")],CN=[Oh,L0],EU=[Oh,Ai("items",Ng("items",()=>wN))],wN=Mg([Un(CN),Un(EU)]),TU=Om.concat([Ai("items",wN),Dm,Lr("context","mode:design")]),AU=Un(TU),wO=Zr,SN=Om.concat([fS("items",[Oh,L0]),rp("size",1),Dm,Lr("context","mode:design")]),SO=Un(SN),JT=Zr,gy=Om.concat([va("constrain",!0),Dm,Lr("context","mode:design")]),kU=Un(gy),xO=Un([Rc("width"),Rc("height")]),DU=fy.concat([uy,rp("min",0),rp("max",0)]),hy=Un(DU),OU=f2,QT=[tc,Ai("header",Zr),Ai("cells",li(Zr))],EO=Un(QT),_U=Om.concat([Gr("placeholder"),va("maximized",!1),Dm,Lr("context","mode:design"),Bb("spellcheck")]),RU=Un(_U),BU=Zr,TO=[Lr("buttonType","default"),Gr("text"),Gr("tooltip"),Gr("icon"),di("search",!1,Mg([_o,Un([Gr("placeholder")])],t=>cn(t)?t?k.some({placeholder:k.none()}):k.none():k.some(t))),Xl("fetch"),Rs("onSetup",()=>re),Lr("context","mode:design")],xN=Un([tc,...TO]),EN=t=>Ir("menubutton",xN,t),TN=[Yl("type",["directory","leaf"]),iN,Rc("id"),Du("menu",xN),Gr("customStateIcon"),Gr("customStateIconTooltip")],eA=Un(TN),FU=TN.concat([Ai("children",Ng("children",()=>Fg("type",{directory:AN,leaf:eA})))]),AN=Un(FU),NU=Fg("type",{directory:AN,leaf:eA}),kN=[tc,Ai("items",NU),gd("onLeafAction"),gd("onToggleExpand"),Mf("defaultExpandedIds",[],Zr),Gr("defaultSelectedId")],PU=Un(kN),AO=Om.concat([Sl("filetype","file",["image","media","file"]),Dm,Gr("picker_text"),Lr("context","mode:design")]),DN=Un(AO),ON=Un([L0,pO]),kO=t=>Vc("items","items",Tu(),li(Rf(s=>Ir(`Checking item of ${t}`,DO,s).fold(c=>Yt.error(Bf(c)),c=>Yt.value(c))))),DO=Kl(()=>Fg("type",{alertbanner:vO,bar:Un(W0(kO("bar"))),button:hw,checkbox:XV,colorinput:eU,colorpicker:oU,dropzone:yN,grid:Un(XT(kO("grid"))),iframe:bU,input:jp,listbox:AU,selectbox:SO,sizeinput:kU,slider:hy,textarea:RU,urlinput:DN,customeditor:aU,htmlpanel:hU,imagepreview:yU,collection:JV,label:Un(xU(kO("label"))),table:EO,tree:PU,panel:tA})),_N=[tc,Re("classes",[]),Ai("items",DO)],tA=Un(_N),$U=[my("tab"),iN,Ai("items",DO)],IU=[tc,fS("tabs",$U)],LU=Un(IU),HU=bN,zU=mU,VU=Un([Rc("title"),wl("body",Fg("type",{panel:tA,tabpanel:LU})),Lr("size","normal"),Mf("buttons",[],zU),Re("initialData",{}),Rs("onAction",re),Rs("onChange",re),Rs("onSubmit",re),Rs("onClose",re),Rs("onCancel",re),Rs("onTabChange",re)]),UU=t=>Ir("dialog",VU,t),OO=Un([Yl("type",["cancel","custom"]),...HU]),WU=Un([Rc("title"),Rc("url"),T1("height"),T1("width"),S2("buttons",OO),Rs("onAction",re),Rs("onCancel",re),Rs("onClose",re),Rs("onMessage",re)]),_O=t=>Ir("dialog",WU,t),RO=t=>vn(t)?[t].concat(te(Hr(t),RO)):ts(t)?te(t,RO):[],ZU=t=>Nt(t.type)&&Nt(t.name),BO={checkbox:Z0,colorinput:tU,colorpicker:sU,dropzone:fU,input:SU,iframe:vU,imagepreview:CU,selectbox:JT,sizeinput:xO,slider:OU,listbox:wO,size:xO,textarea:BU,urlinput:ON,customeditor:iU,collection:hN,togglemenuitem:pN},jU=t=>k.from(BO[t.type]),GU=t=>jn(RO(t),ZU),RN=t=>{const s=GU(t),c=te(s,i=>jU(i).fold(()=>[],d=>[wl(i.name,d)]));return Un(c)},BN=t=>{const s=ku(UU(t)),c=RN(t),i=t.initialData??{};return{internalDialog:s,dataValidator:c,initialData:i}},j0={open:(t,s)=>{const c=BN(s);return t(c.internalDialog,c.initialData,c.dataValidator)},openUrl:(t,s)=>{const c=ku(_O(s));return t(c)},redial:t=>BN(t)},MN=Un([tc,km]),qU=t=>Ir("separatormenuitem",MN,t),KU=Un([U0("autocompleteitem"),dy,Dm,pO,L0,km,Nd]),YU=t=>Ir("Autocompleter.Separator",MN,t),XU=t=>Ir("Autocompleter.Item",KU,t),G0=[Dm,z0,Nd,km,Wp,Lr("context","mode:design")],FN=Un([tc,H0,gO].concat(G0)),MO=t=>Ir("toolbarbutton",FN,t),FO=[dy].concat(G0),JU=Un(FO.concat([tc,H0,gO])),NN=t=>Ir("ToggleButton",JU,t),nA=[Rs("predicate",qe),Sl("scope","node",["node","editor"]),Sl("position","selection",["node","selection","line"])],QU=G0.concat([U0("contextformbutton"),Lr("align","end"),gw,H0,_a("original",St)]),PN=FO.concat([U0("contextformbutton"),Lr("align","end"),gw,H0,_a("original",St)]),$N=G0.concat([U0("contextformbutton")]),IN=FO.concat([U0("contextformtogglebutton")]),NO=ui("type",{contextformbutton:QU,contextformtogglebutton:PN}),PO=[V0,Ai("commands",NO),Du("launch",ui("type",{contextformbutton:$N,contextformtogglebutton:IN})),Rs("onInput",re),Rs("onSetup",re)],LN=[...nA,...PO,Yl("type",["contextform"]),Rs("initValue",G("")),Gr("placeholder")],eW=[...nA,...PO,Yl("type",["contextsliderform"]),Rs("initValue",G(0)),Rs("min",G(0)),Rs("max",G(100))],tW=[...nA,...PO,Yl("type",["contextsizeinputform"]),Rs("initValue",G({width:"",height:""}))],nW=ui("type",{contextform:LN,contextsliderform:eW,contextsizeinputform:tW}),oW=t=>Ir("ContextForm",nW,t),$O=G0.concat([U0("contexttoolbarbutton")]),Rh=Un([U0("contexttoolbar"),Ki("launch",$O),wl("items",Mg([Zr,_b([Gr("name"),Gr("label"),Ai("items",Zr)])]))].concat(nA)),sW=t=>({name:t.name.getOrUndefined(),label:t.label.getOrUndefined(),items:t.items}),pw=t=>({...t,launch:t.launch.getOrUndefined(),items:Nt(t.items)?t.items:Ae(t.items,sW)}),rW=t=>Ir("ContextToolbar",Rh,t),IO=[tc,Rc("src"),Gr("alt"),Mf("classes",[],Zr)],cW=Un(IO),aW=[tc,Oh,uN,Mf("classes",["tox-collection__item-label"],Zr)],iW=Un(aW),LO=Kl(()=>Fg("type",{cardimage:cW,cardtext:iW,cardcontainer:lW})),lW=Un([tc,Lr("direction","horizontal"),Lr("align","left"),Lr("valign","middle"),Ai("items",LO)]),HO=Un([tc,V0,Ai("items",LO),Wp,bO].concat(Zp)),zO=t=>Ir("cardmenuitem",HO,t),VO=Un([tc,dy,Nd,V0].concat(Zp)),uW=t=>Ir("choicemenuitem",VO,t),Rl=[tc,Rc("fancytype"),bO],dW=[Re("initData",{})].concat(Rl),mW=[gd("select"),E2("initData",{},[va("allowCustomColors",!0),Lr("storageKey","default"),S2("colors",pt())])].concat(Rl),HN=[gd("select"),Wm("initData",[E1("columns"),Mf("items",[],pt())])].concat(Rl),zN=ui("fancytype",{inserttable:dW,colorswatch:mW,imageselect:HN}),fW=t=>Ir("fancymenuitem",zN,t),gW=Un([tc,dy,lN,V0,z0].concat(Zp)),hW=Un([tc,dy,_h,uy,z0,L0].concat(Zp)),pW=t=>Ir("imagemenuitem",gW,t),bW=t=>Ir("resetimageitem",hW,t),vW=Un([tc,Wp,bO,Nd].concat(Zp)),yW=t=>Ir("menuitem",vW,t),VN=Un([tc,mO,Wp,Nd].concat(Zp)),CW=t=>Ir("nestedmenuitem",VN,t),wW=Un([tc,Nd,dy,Wp,H0].concat(Zp)),SW=t=>Ir("togglemenuitem",wW,t),UN=Un([Nd,z0,Rs("onShow",re),Rs("onHide",re),Wp]),UO=t=>Ir("sidebar",UN,t),WO=Un([tc,wl("items",Mg([_b([mw,Ai("items",Zr)]),Zr]))].concat(G0)),xW=t=>Ir("GroupToolbarButton",WO,t),ZO=Un([tc,z0,qV,Nd,km,hO,jV,Wp,Sl("presets","normal",["normal","color","listpreview"]),dN(1),H0,fO,Lr("context","mode:design")]),py=t=>Ir("SplitButton",ZO,t),jO=[km,Nd,Gr("tooltip"),Sl("buttonType","secondary",["primary","secondary"]),va("borderless",!1),Xl("onAction"),Lr("context","mode:design")],WN=[...jO,Oh,Yl("type",["button"])],ZN=[...jO,va("active",!1),Yl("type",["togglebutton"])],jN={button:WN,togglebutton:ZN},EW=[Yl("type",["group"]),Mf("buttons",[],ui("type",jN))],oA=ui("type",{...jN,group:EW}),TW=Un([Mf("buttons",[],oA),Xl("onShow"),Xl("onHide")]),AW=t=>Ir("view",TW,t),sA=(t,s,c)=>{const i=_c(t.element,"."+c);if(i.length>0){const d=ve(i,g=>{const p=g.dom.getBoundingClientRect().top,C=i[0].dom.getBoundingClientRect().top;return Math.abs(p-C)>s}).getOr(i.length);return k.some({numColumns:d,numRows:Math.ceil(i.length/d)})}else return k.none()},GO=(t,s)=>Et([Qn(t,s)]),by={namedEvents:GO,unnamedEvents:t=>GO(nt("unnamed-events"),t)},_m={item:t=>yn.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>yn.config({disabled:t}),splitButton:t=>yn.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>yn.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},bw=(t,s)=>{const c=t.getApi(s);return i=>{i(c)}},lf=(t,s)=>ur(c=>{dt(t.onBeforeSetup)&&t.onBeforeSetup(c),bw(t,c)(d=>{const g=t.onSetup(d);dt(g)&&s.set(g)})}),q0=(t,s)=>Sd(c=>bw(t,c)(s.get())),rA=(t,s,c)=>Sd(i=>(c.set(Lt.getValue(i)),bw(t,i)(s.get()))),uf="silver.uistate",K0="setDisabled",qN="setEnabled",vw="init",DW=["switchmode",vw],yw=(t,s)=>{const c=t.mainUi.outerContainer,i=[t.mainUi.mothership,...t.uiMotherships];s===K0&&Ve(i,d=>{d.broadcastOn([nf()],{target:c.element})}),Ve(i,d=>{d.broadcastOn([uf],s)})},YN=(t,s)=>{t.on("init SwitchMode",c=>{yw(s,c.type)}),t.on("DisabledStateChange",c=>{if(!c.isDefaultPrevented()){const i=c.state?K0:vw;yw(s,i),c.state||t.nodeChanged()}}),t.on("NodeChange",c=>{const i=t.ui.isEnabled()?c.type:K0;yw(s,i)}),s6(t)&&t.mode.set("readonly")},Ec=t=>su.config({channels:{[uf]:{onReceive:(s,c)=>{if(c===K0||c===qN){yn.set(s,c===K0);return}const{contextType:i,shouldDisable:d}=t();i==="mode"&&!Je(DW,c)||yn.set(s,d)}}}}),OW=(t,s)=>ef((c,i)=>{bw(t,c)(t.onAction),!t.triggersSubmenu&&s===Am.CLOSE_ON_EXECUTE&&(c.getSystem().isConnected()&&Do(c,Nb()),i.stop())}),_W={[Yi()]:["disabling","alloy.base.behaviour","toggling","item-events"]},vy=Cn,Gp=(t,s,c,i)=>{const d=qt(re);return{type:"item",dom:s.dom,components:vy(s.optComponents),data:t.data,eventOrder:_W,hasSubmenu:t.triggersSubmenu,itemBehaviours:Et([Qn("item-events",[OW(t,c),lf(t,d),q0(t,d)]),_m.item(()=>!t.enabled||i.checkUiComponentContext(t.context).shouldDisable),Ec(()=>i.checkUiComponentContext(t.context)),so.config({})].concat(t.itemBehaviours))}},Y0=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),sg=(t,s)=>{const c=At.fromTag("div");Ps(c,"tox-image-selector-loading-spinner");const i=g=>{Ps(g,"tox-image-selector-loading-spinner-wrapper"),Oc(g,c)},d=g=>{Tr(g,"tox-image-selector-loading-spinner-wrapper"),Ui(c)};return{dom:{tag:t.tag,attributes:t.attributes??{},classes:t.classes},components:[{dom:{tag:"div",classes:["tox-image-selector-image-wrapper"]},components:[{dom:{tag:"img",attributes:{src:s},classes:["tox-image-selector-image-img"]}}]},...t.checkMark.toArray()],behaviours:Et([...t.behaviours??[],Qn("render-image-events",[ur(g=>{i(g.element),As(g.element,"img").each(p=>{Wi(p).catch(C=>{console.error(C)}).finally(()=>{d(g.element)})})})])])}},cA=(t,s)=>sg(s,t),qO=t=>{const s=ry.os.isMacOS()||ry.os.isiOS(),d=s?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},g=t.split("+"),p=Ae(g,C=>{const S=C.toLowerCase().trim();return So(d,S)?d[S]:C});return s?p.join(""):p.join("+")},KO=(t,s,c=[q6])=>ju(t,{tag:"div",classes:c},s),YO=t=>({dom:{tag:"div",classes:[rO]},components:[nr($a.translate(t))]}),XO=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),JO=(t,s)=>({dom:{tag:"div",classes:[rO]},components:[{dom:{tag:t.tag,styles:t.styles},components:[nr($a.translate(s))]}]}),aA=t=>({dom:{tag:"div",classes:[MV]},components:[nr(qO(t))]}),X0=t=>KO("checkmark",t,[FV]),Cw=t=>KO("chevron-right",t,[Y6]),XN=t=>KO("chevron-down",t,[Y6]),JN=(t,s)=>{const c=t.direction==="vertical"?X6:J6,i=t.align==="left"?PV:NV;return{dom:{tag:"div",classes:[cO,c,i,(()=>{switch(t.valign){case"top":return $V;case"middle":return IV;case"bottom":return Q6}})()]},components:s}},QO=(t,s,c)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:c.getOr("")}}}),e_=(t,s,c)=>{const i="custom",d="remove",g=t.value,p=t.iconContent.map(E=>N0(E,s.icons,c)),C=t.ariaLabel.map(E=>({"aria-label":s.translate(E),"data-mce-name":E})).getOr({});return{dom:(()=>{const E=sO,O=p.getOr(""),B={tag:"div",attributes:C,classes:[E]};return g===i?{...B,tag:"button",classes:[...B.classes,"tox-swatches__picker-btn"],innerHtml:O}:g===d?{...B,classes:[...B.classes,"tox-swatch--remove"],innerHtml:O}:qn(g)?{...B,attributes:{...B.attributes,"data-mce-color":g},styles:{"background-color":g},innerHtml:O}:B})(),optComponents:[]}},t_=(t,s)=>{const c=t.map(i=>({attributes:{id:nt("menu-item"),"aria-label":$a.translate(i)}})).getOr({});return{tag:"div",classes:[aw,GT].concat(s),...c}},QN=t=>({dom:{tag:"label"},components:[nr(t)]}),e8=(t,s,c,i)=>{const d={tag:"div",classes:[q6]},g=I=>ju(I,d,s.icons,i),p=()=>k.some({dom:d}),C=c?t.iconContent.map(g).orThunk(p):k.none(),S=t.checkMark,E=k.from(t.meta).fold(()=>YO,I=>So(I,"style")?pn(JO,I.style):YO),O=t.htmlContent.fold(()=>t.textContent.map(E),I=>k.some(XO(I,[rO])));return{dom:t_(t.ariaLabel,[]),optComponents:[C,O,t.shortcutContent.map(aA),S,t.caret,t.labelContent.map(QN)]}},t8=t=>({dom:t_(t.ariaLabel,[K6]),optComponents:[k.some(cA(t.iconContent.getOrDie(),{tag:"div",classes:[BV],checkMark:t.checkMark})),t.labelContent.map(QN)]}),yy=(t,s,c,i=k.none())=>t.presets==="color"?e_(t,s,i):t.presets==="img"?t8(t):e8(t,s,c,i),n_=(t,s,c)=>on(t,"tooltipWorker").map(i=>[sr.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:d=>({type:"submenu",item:d,overrides:{maxHeightFunction:Xg}}),mode:"follow-highlight",onShow:(d,g)=>{i(p=>{sr.setComponents(d,[hh({element:At.fromDom(p)})])})}})]).getOrThunk(()=>c.map(i=>[sr.config({...s.providers.tooltips.getConfig({tooltipText:i}),mode:"follow-highlight"})]).getOr([])),n8=t=>JC.DOM.encode(t),o8=(t,s)=>{const c=$a.translate(t),i=n8(c);if(s.length>0){const d=new RegExp(bi(s),"gi");return i.replace(d,g=>`<span class="tox-autocompleter-highlight">${g}</span>`)}else return i},s8=(t,s,c,i,d,g,p,C=!0)=>{const S=yy({presets:i,textContent:k.none(),htmlContent:c?t.text.map(O=>o8(O,s)):k.none(),ariaLabel:t.text,labelContent:k.none(),iconContent:t.icon,shortcutContent:k.none(),checkMark:k.none(),caret:k.none(),value:t.value},p.providers,C,t.icon),E=t.text.filter(O=>!c&&O!=="");return Gp({context:"mode:design",data:Y0(t),enabled:t.enabled,getApi:G({}),onAction:O=>d(t.value,t.meta),onSetup:G(re),triggersSubmenu:!1,itemBehaviours:n_(t,p,E)},S,g,p.providers)},r8=(t,s)=>Ae(t,c=>{switch(c.type){case"cardcontainer":return JN(c,r8(c.items,s));case"cardimage":return QO(c.src,c.classes,c.alt);case"cardtext":const d=c.name.exists(g=>Je(s.cardText.highlightOn,g))?k.from(s.cardText.matchText).getOr(""):"";return XO(o8(c.text,d),c.classes)}}),c8=(t,s,c,i)=>{const d=p=>({isEnabled:()=>!yn.isDisabled(p),setEnabled:C=>{yn.set(p,!C),Ve(_c(p.element,"*"),S=>{p.getSystem().getByDom(S).each(E=>{E.hasConfigured(yn)&&yn.set(E,!C)})})}}),g={dom:t_(t.label,[]),optComponents:[k.some({dom:{tag:"div",classes:[cO,J6]},components:r8(t.items,i)})]};return Gp({context:"mode:design",data:Y0({text:k.none(),...t}),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:k.from(i.itemBehaviours).getOr([])},g,s,c.providers)},qp=(t,s,c,i,d,g,p,C=!0)=>{const S=B=>({setActive:I=>{zo.set(B,I)},isActive:()=>zo.isOn(B),isEnabled:()=>!yn.isDisabled(B),setEnabled:I=>yn.set(B,!I)}),E=yy({presets:c,textContent:s?t.text:k.none(),htmlContent:k.none(),labelContent:t.label,ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:k.none(),checkMark:s?k.some(X0(p.icons)):k.none(),caret:k.none(),value:t.value},p,C),O=t.text.filter(G(!s)).map(B=>sr.config(p.tooltips.getConfig({tooltipText:p.translate(B)})));return ht(Gp({context:t.context,data:Y0(t),enabled:t.enabled,getApi:S,onAction:B=>i(t.value),onSetup:B=>(B.setActive(d),re),triggersSubmenu:!1,itemBehaviours:[...O.toArray()]},E,g,p),{toggling:{toggleClass:qT,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},a8=t=>({value:u8(t)}),o_=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,i8=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,l8=t=>o_.test(t)||i8.test(t),u8=t=>ed(t,"#").toUpperCase(),RW=t=>l8(t)?k.some({value:u8(t)}):k.none(),d8=t=>({value:t.value.replace(o_,(c,i,d,g)=>i+i+d+d+g+g)}),BW=t=>{const s=d8(t),c=i8.exec(s.value);return c===null?["FFFFFF","FF","FF","FF"]:c},iA=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},J0=t=>{const s=iA(t.red)+iA(t.green)+iA(t.blue);return a8(s)},qu=(t,s,c)=>({hue:t,saturation:s,value:c}),ww=t=>{let s=0,c=0,i=0;const d=t.red/255,g=t.green/255,p=t.blue/255,C=Math.min(d,Math.min(g,p)),S=Math.max(d,Math.max(g,p));if(C===S)return i=C,qu(0,0,i*100);const E=d===C?g-p:p===C?d-g:p-d;return s=d===C?3:p===C?1:5,s=60*(s-E/(S-C)),c=(S-C)/S,i=S,qu(Math.round(s),Math.round(c*100),Math.round(i*100))},s_=Math.min,r_=Math.max,Sw=Math.round,m8=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,c_=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Kp=(t,s,c,i)=>({red:t,green:s,blue:c,alpha:i}),Cy=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},a_=t=>{let s,c,i;const d=(t.hue||0)%360;let g=t.saturation/100,p=t.value/100;if(g=r_(0,s_(g,1)),p=r_(0,s_(p,1)),g===0)return s=c=i=Sw(255*p),Kp(s,c,i,1);const C=d/60,S=p*g,E=S*(1-Math.abs(C%2-1)),O=p-S;switch(Math.floor(C)){case 0:s=S,c=E,i=0;break;case 1:s=E,c=S,i=0;break;case 2:s=0,c=S,i=E;break;case 3:s=0,c=E,i=S;break;case 4:s=E,c=0,i=S;break;case 5:s=S,c=0,i=E;break;default:s=c=i=0}return s=Sw(255*(s+O)),c=Sw(255*(c+O)),i=Sw(255*(i+O)),Kp(s,c,i,1)},wy=t=>{const s=BW(t),c=parseInt(s[1],16),i=parseInt(s[2],16),d=parseInt(s[3],16);return Kp(c,i,d,1)},f8=(t,s,c,i)=>{const d=parseInt(t,10),g=parseInt(s,10),p=parseInt(c,10),C=parseFloat(i);return Kp(d,g,p,C)},i_=t=>{const s=m8.exec(t);if(s!==null)return k.some(f8(s[1],s[2],s[3],"1"));const c=c_.exec(t);return c!==null?k.some(f8(c[1],c[2],c[3],c[4])):k.none()},g8=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,h8=Kp(255,0,0,1),MW=t=>ww(wy(t)),l_=t=>J0(a_(t)),p8=t=>RW(t).orThunk(()=>i_(t).map(J0)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const c=s.getContext("2d");c.clearRect(0,0,s.width,s.height),c.fillStyle="#FFFFFF",c.fillStyle=t,c.fillRect(0,0,1,1);const i=c.getImageData(0,0,1,1).data,d=i[0],g=i[1],p=i[2],C=i[3];return J0(Kp(d,g,p,C))}),FW=t=>{t.dispatch("SkinLoaded")},NW=(t,s)=>{t.dispatch("SkinLoadError",s)},PW=t=>{t.dispatch("ResizeEditor")},Sy=(t,s)=>{t.dispatch("ResizeContent",s)},$W=(t,s)=>{t.dispatch("ScrollContent",s)},b8=(t,s)=>{t.dispatch("TextColorChange",s)},v8=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},y8=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),IW=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})},LW=(t,s)=>{t.dispatch("StylesTextUpdate",s)},u_=(t,s)=>{t.dispatch("AlignTextUpdate",s)},HW=(t,s)=>{t.dispatch("FontSizeTextUpdate",s)},C8=(t,s)=>{t.dispatch("FontSizeInputTextUpdate",s)},zW=(t,s)=>{t.dispatch("BlocksTextUpdate",s)},VW=(t,s)=>{t.dispatch("FontFamilyTextUpdate",s)},UW=t=>{t.dispatch("ToggleSidebar")},w8=t=>{t.dispatch("ToggleView")},lA=t=>{t.dispatch("ContextToolbarClose")},WW=t=>{t.dispatch("ContextFormSlideBack")},uA=(t,s)=>()=>{t(),s()},Mi=(t,s=rt)=>Yp(t,"NodeChange",c=>{c.setEnabled(t.selection.isEditable()&&s())}),ZW=(t,s)=>c=>{const i=zs(),d=()=>{c.setActive(t.formatter.match(s));const g=t.formatter.formatChanged(s,c.setActive);i.set(g)};return t.initialized?d():t.once("init",d),()=>{t.off("init",d),i.clear()}},xw=(t,s)=>c=>{const i=Mi(t)(c),d=ZW(t,s)(c);return()=>{i(),d()}},Yp=(t,s,c)=>i=>{const d=()=>c(i),g=()=>{c(i),t.on(s,d)};return t.initialized?g():t.once("init",g),()=>{t.off("init",g),t.off(s,d)}},d_=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},iu=(t,s)=>()=>t.execCommand(s);var Q0=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const S8={},jW=(t,s=10)=>{const c=Q0.getItem(t),i=Nt(c)?JSON.parse(c):[],g=(E=>s-E.length<0?E.slice(0,s):E)(i),p=E=>{He(g,E).each(C),g.unshift(E),g.length>s&&g.pop(),Q0.setItem(t,JSON.stringify(g))},C=E=>{g.splice(E,1)};return{add:p,state:()=>g.slice(0)}},x8=t=>on(S8,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,c=Q0.getItem(s);if(Eo(c)){const d=Q0.getItem("tinymce-custom-colors");Q0.setItem(s,qn(d)?d:"[]")}const i=jW(s,10);return S8[t]=i,i}),GW=t=>Ae(x8(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),E8=(t,s)=>{x8(t).add(s)},m_="forecolor",f_="hilitecolor",g_=5,qW=t=>T8(t.map((s,c)=>c%2===0?"#"+p8(s).value:s)),T8=t=>{const s=[];for(let c=0;c<t.length;c+=2)s.push({text:t[c+1],value:t[c],icon:"checkmark",type:"choiceitem"});return s},df=t=>s=>s.options.get(t),eb="#000000",h_=t=>{const s=t.options.register,c=g=>nn(g,Nt)?{value:qW(g),valid:!0}:{valid:!1,message:"Must be an array of strings."},i=g=>nn(g,Nt)?{value:T8(g),valid:!0}:{valid:!1,message:"Must be an array of strings."},d=g=>Fo(g)&&g>0?{value:g,valid:!0}:{valid:!1,message:"Must be a positive number."};s("color_map",{processor:c,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_raw",{processor:i}),s("color_map_background",{processor:c}),s("color_map_foreground",{processor:c}),s("color_cols",{processor:d,default:p_(t)}),s("color_cols_foreground",{processor:d,default:mA(t,m_)}),s("color_cols_background",{processor:d,default:mA(t,f_)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:eb}),s("color_default_background",{processor:"string",default:eb})},dA=(t,s)=>s===m_&&t.options.isSet("color_map_foreground")?df("color_map_foreground")(t):s===f_&&t.options.isSet("color_map_background")?df("color_map_background")(t):t.options.isSet("color_map_raw")?df("color_map_raw")(t):df("color_map")(t),p_=(t,s="default")=>Math.max(g_,Math.ceil(Math.sqrt(dA(t,s).length))),mA=(t,s)=>{const c=df("color_cols")(t),i=p_(t,s);return c===p_(t)?i:c},A8=(t,s="default")=>Math.round(s===m_?df("color_cols_foreground")(t):s===f_?df("color_cols_background")(t):df("color_cols")(t)),fA=df("custom_colors"),k8=df("color_default_foreground"),KW=df("color_default_background"),YW="rgba(0, 0, 0, 0)",D8=t=>i_(t).exists(s=>s.alpha!==0),XW=t=>yl(t,s=>{if(ti(s)){const c=lr(s,"background-color");return _r(D8(c),c)}else return k.none()}).getOr(YW),b_=(t,s)=>{const c=At.fromDom(t.selection.getStart()),i=s==="hilitecolor"?XW(c):lr(c,"color");return i_(i).map(d=>"#"+J0(d).value)},JW=(t,s,c)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:c}),t.nodeChanged()})},O8=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},_8=t=>{t.addCommand("mceApplyTextcolor",(s,c)=>{JW(t,s,c)}),t.addCommand("mceRemoveTextcolor",s=>{O8(t,s)})},R8=t=>{const s="choiceitem",c={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[c,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[c]},gA=(t,s,c,i)=>{c==="custom"?F8(t)(g=>{g.each(p=>{E8(s,p),t.execCommand("mceApplyTextcolor",s,p),i(p)})},b_(t,s).getOr(eb)):c==="remove"?(i(""),t.execCommand("mceRemoveTextcolor",s)):(i(c),t.execCommand("mceApplyTextcolor",s,c))},hA=(t,s,c)=>t.concat(GW(s).concat(R8(c))),B8=(t,s,c)=>i=>{i(hA(t,s,c))},Ew=(t,s,c)=>{const i=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(i,c)},v_=(t,s)=>{t.setTooltip(s)},pA=(t,s)=>c=>{const i=b_(t,s);return An(i,c.toUpperCase())},y_=(t,s,c)=>{if(Pc(c))return s==="forecolor"?"Text color":"Background color";const i=s==="forecolor"?"Text color {0}":"Background color {0}",d=hA(dA(t,s),s,!1),g=De(d,p=>p.value===c).getOr({text:""}).text;return t.translate([i,t.translate(g)])},M8=(t,s,c,i)=>{t.ui.registry.addSplitButton(s,{tooltip:y_(t,c,i.get()),chevronTooltip:s==="forecolor"?"Text color menu":"Background color menu",presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:pA(t,c),columns:A8(t,c),fetch:B8(dA(t,c),c,fA(t)),onAction:d=>{gA(t,c,i.get(),re)},onItemAction:(d,g)=>{gA(t,c,g,p=>{i.set(p),b8(t,{name:s,color:p})})},onSetup:d=>{Ew(d,s,i.get());const g=p=>{p.name===s&&(Ew(d,p.name,p.color),v_(d,y_(t,c,p.color)))};return t.on("TextColorChange",g),uA(Mi(t)(d),()=>{t.off("TextColorChange",g)})}})},C_=(t,s,c,i,d)=>{t.ui.registry.addNestedMenuItem(s,{text:i,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:g=>(v_(g,y_(t,c,d.get())),Ew(g,s,d.get()),Mi(t)(g)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:pA(t,c),initData:{storageKey:c},onAction:g=>{gA(t,c,g.value,p=>{d.set(p),b8(t,{name:s,color:p})})}}]})},F8=t=>(s,c)=>{let i=!1;const d=C=>{const E=C.getData().colorpicker;i?(s(k.from(E)),C.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",E]))},g=(C,S)=>{S.name==="hex-valid"&&(i=S.value)},p={colorpicker:c};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:p,onAction:g,onSubmit:d,onClose:re,onCancel:()=>{s(k.none())}})},N8=t=>{_8(t);const s=k8(t),c=KW(t),i=qt(s),d=qt(c);M8(t,"forecolor","forecolor",i),M8(t,"backcolor","hilitecolor",d),C_(t,"forecolor","forecolor","Text color",i),C_(t,"backcolor","hilitecolor","Background color",d)},QW=(t,s,c,i,d)=>{const g=S=>({setActive:E=>{zo.set(S,E)},isActive:()=>zo.isOn(S),isEnabled:()=>!yn.isDisabled(S),setEnabled:E=>yn.set(S,!E)}),p=yy({presets:"img",textContent:k.none(),htmlContent:k.none(),ariaLabel:t.tooltip,iconContent:k.some(t.url),labelContent:t.label,shortcutContent:k.none(),checkMark:k.some(X0(d.icons)),caret:k.none(),value:t.value},d,!0),C=t.tooltip.map(S=>sr.config(d.tooltips.getConfig({tooltipText:d.translate(S)})));return ht(Gp({context:t.context,data:Y0(t),enabled:t.enabled,getApi:g,onAction:S=>{s(t.value),S.setActive(!0)},onSetup:S=>(S.setActive(c),re),triggersSubmenu:!1,itemBehaviours:[...C.toArray()]},p,i,d),{toggling:{toggleClass:qT,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},bA=(t,s,c,i,d,g,p,C)=>{const S=dw(s),O=w_(s,c,i,d!=="color"?"normal":"color",g,p,C);return Dh(t,S,O,i,{menuType:d})},w_=(t,s,c,i,d,g,p)=>Cn(Ae(t,C=>C.type==="choiceitem"?uW(C).fold(Gu,S=>k.some(qp(S,c===1,i,s,g(S.value),d,p,dw(t)))):C.type==="imageitem"?pW(C).fold(Gu,S=>k.some(QW(S,s,g(S.value),d,p))):C.type==="resetimage"?bW(C).fold(Gu,S=>k.some(qp({...S,text:S.tooltip,icon:k.some(S.icon),label:k.some(S.label)},c===1,i,s,g(S.value),d,p,dw(t)))):k.none())),Tw=(t,s)=>{const c=Up(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+c.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+{color:"tox-swatches__row",imageselector:"tox-image-selector__row",listpreview:"tox-collection__group",normal:"tox-collection__group"}[s],previousSelector:d=>s==="color"?As(d.element,"[aria-checked=true]"):k.none()}},eZ=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${sO}`:`.${GT}`}},tZ=(t,s)=>{const c=S_(t,s),i=s.colorinput.getColorCols(t.initData.storageKey),d="color",p={...bA(nt("menu-value"),c,C=>{t.onAction({value:C})},i,d,Am.CLOSE_ON_EXECUTE,t.select.getOr(qe),s.shared.providers),markers:Up(d),movement:Tw(i,d),showMenuRole:!1};return{type:"widget",data:{value:nt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[tD.widget(Th.sketch(p))]}},S_=(t,s)=>{const c=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>hA(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,c),i=>i.concat(R8(c)))},nZ=(t,s)=>{const c="imageselector",i=t.initData.columns,g={...bA(nt("menu-value"),t.initData.items,p=>{t.onAction({value:p})},i,c,Am.CLOSE_ON_EXECUTE,t.select.getOr(qe),s.shared.providers),markers:Up(c),movement:Tw(i,c),showMenuRole:!1};return{type:"widget",data:{value:nt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem","tox-collection--toolbar"]},autofocus:!0,components:[tD.widget(Th.sketch(g))]}},x_=nt("cell-over"),P8=nt("cell-execute"),$8=t=>(s,c)=>t.shared.providers.translate(["{0} columns, {1} rows",c,s]),oZ=(t,s,c)=>{const i=p=>On(p,x_,{row:t,col:s}),d=p=>On(p,P8,{row:t,col:s}),g=(p,C)=>{C.stop(),d(p)};return m({dom:{tag:"div",attributes:{role:"button","aria-label":c}},behaviours:Et([Qn("insert-table-picker-cell",[We(Ou(),to.focus),We(Yi(),d),We(em(),g),We(Vg(),g)]),zo.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),to.config({onFocus:i})])})},sZ=(t,s,c)=>{const i=[];for(let d=0;d<s;d++){const g=[];for(let p=0;p<c;p++){const C=t(d+1,p+1);g.push(oZ(d,p,C))}i.push(g)}return i},rZ=(t,s,c,i,d)=>{for(let g=0;g<i;g++)for(let p=0;p<d;p++)zo.set(t[g][p],g<=s&&p<=c)},cZ=t=>te(t,s=>Ae(s,b)),I8=(t,s)=>nr(`${s}x${t}`),iZ={inserttable:(t,s)=>{const d=$8(s),g=sZ(d,10,10),p=I8(0,0),C=Ss({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[p],behaviours:Et([so.config({})])});return{type:"widget",data:{value:nt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[tD.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:cZ(g).concat(C.asSpec()),behaviours:Et([Qn("insert-table-picker",[ur(S=>{so.set(C.get(S),[p])}),Qg(x_,(S,E,O)=>{const{row:B,col:I}=O.event;rZ(g,B,I,10,10),so.set(C.get(S),[I8(B+1,I+1)])}),Qg(P8,(S,E,O)=>{const{row:B,col:I}=O.event;Do(S,Nb()),t.onAction({numRows:B+1,numColumns:I+1})})]),Sn.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:tZ,imageselect:nZ},lZ=(t,s)=>on(iZ,t.fancytype).map(c=>c(t,s)),L8=(t,s,c,i=!0,d=!1)=>{const g=d?XN(c.icons):Cw(c.icons),p=S=>({isEnabled:()=>!yn.isDisabled(S),setEnabled:E=>yn.set(S,!E),setIconFill:(E,O)=>{As(S.element,`svg path[class="${E}"], rect[class="${E}"]`).each(B=>{$n(B,"fill",O)})},setTooltip:E=>{const O=c.translate(E);$n(S.element,"aria-label",O)}}),C=yy({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:k.none(),ariaLabel:t.text,labelContent:k.none(),caret:k.some(g),checkMark:k.none(),shortcutContent:t.shortcut},c,i);return Gp({context:t.context,data:Y0(t),getApi:p,enabled:t.enabled,onAction:re,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},C,s,c)},uZ=(t,s,c,i=!0)=>{const d=p=>({isEnabled:()=>!yn.isDisabled(p),setEnabled:C=>yn.set(p,!C)}),g=yy({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:k.none(),labelContent:k.none(),ariaLabel:t.text,caret:k.none(),checkMark:k.none(),shortcutContent:t.shortcut},c,i);return Gp({context:t.context,data:Y0(t),getApi:d,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,c)},dZ=t=>({type:"separator",dom:{tag:"div",classes:[GT,RV]},components:t.text.map(nr).toArray()}),mZ=(t,s,c,i=!0)=>{const d=p=>({setActive:C=>{zo.set(p,C)},isActive:()=>zo.isOn(p),isEnabled:()=>!yn.isDisabled(p),setEnabled:C=>yn.set(p,!C)}),g=yy({iconContent:t.icon,textContent:t.text,htmlContent:k.none(),labelContent:k.none(),ariaLabel:t.text,checkMark:k.some(X0(c.icons)),caret:k.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},c,i);return ht(Gp({context:t.context,data:Y0(t),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,c),{toggling:{toggleClass:qT,toggleOnExecute:!1,selected:t.active},role:t.role.getOrUndefined()})},H8=s8,z8=dZ,fZ=uZ,gZ=L8,V8=mZ,U8=lZ,W8=c8,vA=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},Z8=t=>{const s=Lt.getValue(t),c=YT(t).map(lO);al.refetch(s).get(()=>{const i=eo.getCoupled(s,"sandbox");c.each(d=>YT(i).each(g=>oN(g,d)))})},hZ=(t,s)=>{pZ(t).each(c=>{W4(t,c.element,s.event.eventType,s.event.interactionEvent)})},pZ=t=>us.getState(t).bind(hs.getHighlighted).bind(hs.getHighlighted),j8=t=>Xr(t.element,iw)?k.some(t.element):As(t.element,"."+iw),G8=(t,s,c)=>{nN(t).each(i=>{HV(i,c),j8(s).each(g=>{Lc(g,"id").each(p=>$n(i.element,"aria-controls",p))})}),$n(c.element,"aria-selected","true")},bZ=(t,s,c)=>{$n(c.element,"aria-selected","false")},vZ=t=>{nN(t).each(s=>to.focus(s))},yZ=t=>eo.getExistingCoupled(t,"sandbox").bind(YT).map(lO).map(c=>c.fetchPattern).getOr("");var Aw;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(Aw||(Aw={}));const CZ=(t,s,c,i,d)=>{const g=c.shared.providers,p=C=>d?{...C,shortcut:k.none(),icon:C.text.isSome()?k.none():C.icon}:C;switch(t.type){case"menuitem":return yW(t).fold(Gu,C=>k.some(fZ(p(C),s,g,i)));case"nestedmenuitem":return CW(t).fold(Gu,C=>k.some(gZ(p(C),s,g,i,d)));case"togglemenuitem":return SW(t).fold(Gu,C=>k.some(V8(p(C),s,g,i)));case"separator":return qU(t).fold(Gu,C=>k.some(z8(C)));case"fancymenuitem":return fW(t).fold(Gu,C=>U8(C,c));default:return console.error("Unknown item in general menu",t),k.none()}},wZ=(t,s,c,i,d,g,p)=>{const C=i===1,S=!C||dw(t);return Cn(Ae(t,E=>{switch(E.type){case"separator":return YU(E).fold(Gu,O=>k.some(z8(O)));case"cardmenuitem":return zO(E).fold(Gu,O=>k.some(W8({...O,onAction:B=>{O.onAction(B),c(O.value,O.meta)}},d,g,{itemBehaviours:n_(O.meta,g,k.none()),cardText:{matchText:s,highlightOn:p}})));case"autocompleteitem":default:return XU(E).fold(Gu,O=>k.some(H8(O,s,C,"normal",c,d,g,S)))}}))},q8=(t,s,c,i,d,g)=>{const p=dw(s),C=Cn(Ae(s,O=>{const B=U=>d?!So(U,"text"):p,I=U=>CZ(U,c,i,B(U),d);return O.type==="nestedmenuitem"&&O.getSubmenuItems().length<=0?I({...O,enabled:!1}):I(O)})),S=vA(g);return(d?ZV:Dh)(t,p,C,1,S)},yA=t=>Fp.singleData(t.value,t),K8=(t,s,c,i)=>{const d=Tw(s,i),g=Up(i);return{data:yA({...t,movement:d,menuBehaviours:by.unnamedEvents(s!=="auto"?[]:[ur((p,C)=>{sA(p,4,g.item).each(({numColumns:S,numRows:E})=>{Sn.setGridSize(p,E,S)})})])}),menu:{markers:Up(i),fakeFocus:c===Aw.ContentFocus}}},SZ=t=>pa.create(At.fromDom(t.startContainer),t.startOffset,At.fromDom(t.endContainer),t.endOffset),Y8={register:(t,s)=>{const c=nt("autocompleter"),i=qt(!1),d=qt(!1),g=Ln(),p=m(Fr.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:c}},components:[],fireDismissalEventInstead:{},inlineBehaviours:Et([Qn("dismissAutocompleter",[We(Zg(),()=>B()),We(jg(),(X,he)=>{Lc(he.event.target,"id").each(we=>$n(At.fromDom(t.getBody()),"aria-activedescendant",we))})])]),lazySink:s.getSink})),C=()=>Fr.isOpen(p),S=d.get,E=()=>{if(C()){Fr.hide(p),t.dom.remove(c,!1);const X=At.fromDom(t.getBody());Lc(X,"aria-owns").filter(he=>he===c).each(()=>{ir(X,"aria-owns"),ir(X,"aria-activedescendant")})}},O=()=>Fr.getContent(p).bind(X=>et(X.components(),0)),B=()=>t.execCommand("mceAutocompleterClose"),I=X=>{const he=Lo(X,we=>k.from(we.columns)).getOr(1);return te(X,we=>{const Me=we.items;return wZ(Me,we.matchText,(Fe,Mt)=>{const at={hide:()=>B(),reload:vt=>{E(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:vt})}};t.execCommand("mceAutocompleterRefreshActiveRange"),g.get().each(vt=>{i.set(!0),we.onAction(at,vt,Fe,Mt),i.set(!1)})},he,Am.BUBBLE_TO_SANDBOX,s,we.highlightOn)})},U=(X,he)=>{const we=Lo(X,Me=>k.from(Me.columns)).getOr(1);Fr.showMenuAt(p,{anchor:{type:"selection",getSelection:()=>g.get().map(SZ),root:At.fromDom(t.getBody())}},K8(Dh("autocompleter-value",!0,he,we,{menuType:"normal"}),we,Aw.ContentFocus,"normal")),O().each(hs.highlightFirst)},j=X=>{const he=I(X);he.length>0?(U(X,he),$n(At.fromDom(t.getBody()),"aria-owns",c),t.inline||Q()):E()},Q=()=>{t.dom.get(c)&&t.dom.remove(c,!1);const X=t.getDoc().documentElement,he=t.selection.getNode(),we=Zh(p.element);Sr(we,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${he.offsetTop}px`,left:`${he.offsetLeft}px`}),t.dom.add(X,we.dom),As(we,'[role="menu"]').each(Me=>{Ro(Me,"position"),Ro(Me,"max-height")})};t.on("AutocompleterStart",({lookupData:X})=>{d.set(!0),i.set(!1),j(X)}),t.on("AutocompleterUpdate",({lookupData:X})=>j(X)),t.on("AutocompleterUpdateActiveRange",({range:X})=>g.set(X)),t.on("AutocompleterEnd",()=>{E(),d.set(!1),i.set(!1),g.clear()});const ie={cancelIfNecessary:B,isMenuOpen:C,isActive:S,isProcessingAction:i.get,getMenu:O};OV.setup(ie,t)}},xZ=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:Ae(t.items,s.interpreter)});var EZ=tinymce.util.Tools.resolve("tinymce.html.Entities");const Zn=(t,s,c,i)=>{const d=X8(t,s,c,i);return Bo.sketch(d)},kw=(t,s)=>Zn(t,s,[],[]),X8=(t,s,c,i)=>({dom:E_(c),components:t.toArray().concat([s]),fieldBehaviours:Et(i)}),J8=()=>E_([]),E_=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),Bh=(t,s)=>Bo.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[nr(s.translate(t))]}),Ml=nt("form-component-change"),T_=nt("form-component-input"),Dw=nt("form-close"),Xp=nt("form-cancel"),rg=nt("form-action"),xy=nt("form-submit"),CA=nt("form-block"),Q8=nt("form-unblock"),Ey=nt("form-tabchange"),wA=nt("form-resize"),eP=(t,s,c)=>{const i=t.label.map(U=>Bh(U,s)),d=s.icons(),g=U=>d[U]??U,p=U=>(j,Q)=>{ga(Q.event.target,"[data-collection-item-value]").each(ie=>{U(j,Q,ie,Cc(ie,"data-collection-item-value"))})},C=(U,j)=>{const ie=s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()?" tox-collection__item--state-disabled":"",X=Ae(j,Me=>{const Fe=$a.translate(Me.text),Mt=t.columns===1?`<div class="tox-collection__item-label">${Fe}</div>`:"",at=`<div class="tox-collection__item-icon">${g(Me.icon)}</div>`,vt={_:" "," - ":" ","-":" "},gt=Fe.replace(/\_| \- |\-/g,_n=>vt[_n]);return`<div data-mce-tooltip="${gt}" class="tox-collection__item${ie}" tabindex="-1" data-collection-item-value="${EZ.encodeAllRaw(Me.value)}" aria-label="${gt}">${at}${Mt}</div>`}),he=t.columns!=="auto"&&t.columns>1?xt(X,t.columns):[X],we=Ae(he,Me=>`<div class="tox-collection__group">${Me.join("")}</div>`);pl(U.element,we.join(""))},S=p((U,j,Q,ie)=>{j.stop(),s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()||On(U,rg,{name:t.name,value:ie})}),E=[We(Ou(),p((U,j,Q)=>{kc(Q,!0)})),We(em(),S),We(Vg(),S),We(_u(),p((U,j,Q)=>{As(U.element,"."+P0).each(ie=>{Tr(ie,P0)}),Ps(Q,P0)})),We(Fb(),p(U=>{As(U.element,"."+P0).each(j=>{Tr(j,P0),Er(j)})})),ef(p((U,j,Q,ie)=>{On(U,rg,{name:t.name,value:ie})}))],O=(U,j)=>Ae(_c(U.element,".tox-collection__item"),j),B=Bo.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:St},behaviours:Et([yn.config({disabled:()=>s.checkUiComponentContext(t.context).shouldDisable,onDisabled:U=>{O(U,j=>{Ps(j,"tox-collection__item--state-disabled"),$n(j,"aria-disabled",!0)})},onEnabled:U=>{O(U,j=>{Tr(j,"tox-collection__item--state-disabled"),ir(j,"aria-disabled")})}}),Ec(()=>s.checkUiComponentContext(t.context)),so.config({}),sr.config({...s.tooltips.getConfig({tooltipText:"",onShow:U=>{As(U.element,"."+P0+"[data-mce-tooltip]").each(j=>{Lc(j,"data-mce-tooltip").each(Q=>{sr.setComponents(U,s.tooltips.getComponents({tooltipText:Q}))})})}}),mode:"children-keyboard-focus",anchor:U=>({type:"node",node:As(U.element,"."+P0).orThunk(()=>yb(".tox-collection__item")),root:U.element,layouts:{onLtr:G([hc,Wc,xc,wa,br,Mc]),onRtl:G([hc,Wc,xc,wa,br,Mc])},bubble:El(0,-2,{})})}),Lt.config({store:{mode:"memory",initialValue:c.getOr([])},onSetValue:(U,j)=>{C(U,j),t.columns==="auto"&&sA(U,5,"tox-collection__item").each(({numRows:Q,numColumns:ie})=>{Sn.setGridSize(U,Q,ie)}),Do(U,wA)}}),or.config({}),Sn.config(eZ(t.columns,"normal")),Qn("collection-events",E)]),eventOrder:{[Yi()]:["disabling","alloy.base.behaviour","collection-events"],[_u()]:["collection-events","tooltipping"]}});return Zn(i,B,["tox-form__group--collection"],[])},TZ=(t,s)=>al.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:Et([_m.button(()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable),Ec(()=>s.providers.checkUiComponentContext(t.context)),ty.config({}),or.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:c=>lo.nu(i=>t.fetch(i)).map(i=>k.from(yA(ht(bA(nt("menu-value"),i,d=>{t.onItemAction(c,d)},t.columns,t.presets,Am.CLOSE_ON_EXECUTE,qe,s.providers),{movement:Tw(t.columns,t.presets)})))),parts:{menu:I0(!1,1,t.presets)}}),tP=nt("color-input-change"),nP=nt("color-swatch-change"),oP=nt("color-picker-cancel"),A_=(t,s,c,i)=>{const d=Bo.parts.field({factory:_d,inputClasses:["tox-textfield"],data:i,onSetValue:E=>cl.run(E).get(re),inputBehaviours:Et([yn.config({disabled:()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable}),Ec(()=>s.providers.checkUiComponentContext(t.context)),or.config({}),cl.config({invalidClass:"tox-textbox-field-invalid",getRoot:E=>bu(E.element),notify:{onValid:E=>{const O=Lt.getValue(E);On(E,tP,{color:O})}},validator:{validateOnLoad:!1,validate:E=>{const O=Lt.getValue(E);if(O.length===0)return lo.pure(Yt.value(!0));{const B=At.fromTag("span");Vn(B,"background-color",O);const I=fr(B,"background-color").fold(()=>Yt.error("blah"),U=>Yt.value(O));return lo.pure(I)}}}})]),selectOnFocus:!1}),g=t.label.map(E=>Bh(E,s.providers)),p=(E,O)=>{On(E,nP,{value:O})},C=(E,O)=>{S.getOpt(E).each(B=>{O==="custom"?c.colorPicker(I=>{I.fold(()=>Do(B,oP),U=>{p(B,U),E8(t.storageKey,U)})},"#ffffff"):O==="remove"?p(B,""):p(B,O)})},S=Ss(TZ({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[br,xc,hc],onLtr:()=>[xc,br,hc]},components:[],fetch:B8(c.getColors(t.storageKey),t.storageKey,c.hasCustomColors()),columns:c.getColorCols(t.storageKey),presets:"color",onItemAction:C,context:t.context},s));return Bo.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:g.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,S.asSpec()]}]),fieldBehaviours:Et([Qn("form-field-events",[We(tP,(E,O)=>{S.getOpt(E).each(B=>{Vn(B.element,"background-color",O.event.color)}),On(E,Ml,{name:t.name})}),We(nP,(E,O)=>{Bo.getField(E).each(B=>{Lt.setValue(B,O.event.value),ut.getCurrent(E).each(to.focus)})}),We(oP,(E,O)=>{Bo.getField(E).each(B=>{ut.getCurrent(E).each(to.focus)})})])])})},Rm={self:()=>ut.config({find:k.some}),memento:t=>ut.config({find:t.getOpt}),childAt:t=>ut.config({find:s=>Vd(s.element,t).bind(c=>s.getSystem().getByDom(c).toOptional())})},DZ=Un([Re("preprocess",St),Re("postprocess",St)]),sP=(t,s)=>{const c=Ti("RepresentingConfigs.memento processors",DZ,s);return Lt.config({store:{mode:"manual",getValue:i=>{const d=t.get(i),g=Lt.getValue(d);return c.postprocess(g)},setValue:(i,d)=>{const g=c.preprocess(d),p=t.get(i);Lt.setValue(p,g)}}})},tb=(t,s,c)=>Lt.config({store:{mode:"manual",...t.map(i=>({initialValue:i})).getOr({}),getValue:s,setValue:c}}),rP=(t,s,c)=>tb(t,i=>s(i.element),(i,d)=>c(i.element,d)),k_=t=>rP(t,vu,pl),SA=t=>Lt.config({store:{mode:"memory",initialValue:t}}),Ty=nt("rgb-hex-update"),cP=nt("slider-update"),D_=nt("palette-update"),OZ=(t,s)=>{const c=xm.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),i=xm.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return xm.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:G(0)},components:[c,i],sliderBehaviours:Et([to.config({})]),onChange:(d,g,p)=>{$n(d.element,"aria-valuenow",Math.floor(360-p*3.6)),On(d,cP,{value:p})}})},aP=nt("valid-input"),_Z=nt("invalid-input"),iP=nt("validating-input"),O_="colorcustom.rgb.",__={isEnabled:rt,setEnabled:re,immediatelyShow:re,immediatelyHide:re},RZ=(t,s,c,i,d,g)=>{const p=(Q,ie)=>{const X=ie.get();Q!==X.isEnabled()&&(X.setEnabled(Q),Q?X.immediatelyShow():X.immediatelyHide())},C=(Q,ie,X)=>cl.config({invalidClass:s("invalid"),notify:{onValidate:he=>{On(he,iP,{type:Q})},onValid:he=>{p(!1,X),On(he,aP,{type:Q,value:Lt.getValue(he)})},onInvalid:he=>{p(!0,X),On(he,_Z,{type:Q,value:Lt.getValue(he)})}},validator:{validate:he=>{const we=Lt.getValue(he),Me=ie(we)?Yt.value(!0):Yt.error(t("aria.input.invalid"));return lo.pure(Me)},validateOnLoad:!1}}),S=(Q,ie,X,he,we)=>{const Me=qt(__),Fe=t(O_+"range"),Mt=Bo.parts.label({dom:{tag:"label"},components:[nr(X)]}),at=Bo.parts.field({data:we,factory:_d,inputAttributes:{type:"text","aria-label":he,...ie==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:Et([C(ie,Q,Me),or.config({}),sr.config({...d({tooltipText:"",onSetup:ao=>{Me.set({isEnabled:()=>sr.isEnabled(ao),setEnabled:mn=>sr.setEnabled(ao,mn),immediatelyShow:()=>sr.immediateOpenClose(ao,!0),immediatelyHide:()=>sr.immediateOpenClose(ao,!1)}),sr.setEnabled(ao,!1)},onShow:(ao,mn)=>{sr.setComponents(ao,[{dom:{tag:"p",classes:[s("rgb-warning-note")]},components:[nr(t(ie==="hex"?"colorcustom.rgb.invalidHex":"colorcustom.rgb.invalid"))]}])}})})]),onSetValue:ao=>{cl.isInvalid(ao)&&cl.run(ao).get(re)}}),vt=nt("aria-invalid"),gt=Ss(g("invalid",k.some(vt),"warning")),_n=Ss({dom:{tag:"div",classes:[s("invalid-icon")]},components:[gt.asSpec()]}),hn=[Mt,at,_n.asSpec()],$o=ie!=="hex"?[Bo.parts["aria-descriptor"]({text:Fe})]:[],In=hn.concat($o);return{dom:{tag:"div",attributes:{role:"presentation"},classes:[s("rgb-container")]},components:In}},E=(Q,ie)=>{const X=J0(ie);return Np.getField(Q,"hex").each(he=>{to.isFocused(he)||Lt.setValue(Q,{hex:X.value})}),X},O=(Q,ie)=>{const X=ie.red,he=ie.green,we=ie.blue;Lt.setValue(Q,{red:X,green:he,blue:we})},B=Ss({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),I=(Q,ie)=>{B.getOpt(Q).each(X=>{Vn(X.element,"background-color","#"+ie.value)})};return Wu({factory:()=>{const Q={red:qt(k.some(255)),green:qt(k.some(255)),blue:qt(k.some(255)),hex:qt(k.some("ffffff"))},ie=(mn,ot)=>{const Rt=wy(ot);O(mn,Rt),Me(Rt)},X=mn=>Q[mn].get(),he=(mn,ot)=>{Q[mn].set(ot)},we=()=>X("red").bind(mn=>X("green").bind(ot=>X("blue").map(Rt=>Kp(mn,ot,Rt,1)))),Me=mn=>{const ot=mn.red,Rt=mn.green,Hn=mn.blue;he("red",k.some(ot)),he("green",k.some(Rt)),he("blue",k.some(Hn))},Fe=(mn,ot)=>{const Rt=ot.event;Rt.type!=="hex"?he(Rt.type,k.none()):i(mn)},Mt=(mn,ot)=>{c(mn);const Rt=a8(ot);he("hex",k.some(Rt.value));const Hn=wy(Rt);O(mn,Hn),Me(Hn),On(mn,Ty,{hex:Rt}),I(mn,Rt)},at=(mn,ot,Rt)=>{const Hn=parseInt(Rt,10);he(ot,k.some(Hn)),we().each(uo=>{const xn=E(mn,uo);On(mn,Ty,{hex:xn}),I(mn,xn)})},vt=mn=>mn.type==="hex",gt=(mn,ot)=>{const Rt=ot.event;vt(Rt)?Mt(mn,Rt.value):at(mn,Rt.type,Rt.value)},_n=mn=>({label:t(O_+mn+".label"),description:t(O_+mn+".description")}),hn=_n("red"),$o=_n("green"),In=_n("blue"),ao=_n("hex");return ht(Np.sketch(mn=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[mn.field("red",Bo.sketch(S(Cy,"red",hn.label,hn.description,255))),mn.field("green",Bo.sketch(S(Cy,"green",$o.label,$o.description,255))),mn.field("blue",Bo.sketch(S(Cy,"blue",In.label,In.description,255))),mn.field("hex",Bo.sketch(S(l8,"hex",ao.label,ao.description,"ffffff"))),B.asSpec()],formBehaviours:Et([cl.config({invalidClass:s("form-invalid")}),Qn("rgb-form-events",[We(aP,gt),We(_Z,Fe),We(iP,Fe)])])})),{apis:{updateHex:(mn,ot)=>{Lt.setValue(mn,{hex:ot.value}),ie(mn,ot),I(mn,ot)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(Q,ie,X)=>{Q.updateHex(ie,X)}},extraApis:{}})},xA=(t,s)=>{const c=xm.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),i=xm.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(E,O)=>{const{width:B,height:I}=E,U=E.getContext("2d");if(U===null)return;U.fillStyle=O,U.fillRect(0,0,B,I);const j=U.createLinearGradient(0,0,B,0);j.addColorStop(0,"rgba(255,255,255,1)"),j.addColorStop(1,"rgba(255,255,255,0)"),U.fillStyle=j,U.fillRect(0,0,B,I);const Q=U.createLinearGradient(0,0,0,I);Q.addColorStop(0,"rgba(0,0,0,0)"),Q.addColorStop(1,"rgba(0,0,0,1)"),U.fillStyle=Q,U.fillRect(0,0,B,I)},g=(E,O)=>{const B=E.components()[0].element.dom,I=qu(O,100,100),U=a_(I);d(B,g8(U))},p=(E,O)=>{const B=ww(wy(O));xm.setValue(E,{x:B.saturation,y:100-B.value}),$n(E.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",B.saturation,B.value]))};return Wu({factory:E=>{const O=G({x:0,y:0}),B=(j,Q,ie)=>{Fo(ie)||$n(j.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",Math.floor(ie.x),Math.floor(100-ie.y)])),On(j,D_,{value:ie})},I=(j,Q,ie,X)=>{d(ie.element.dom,g8(h8))},U=Et([ut.config({find:k.some}),to.config({})]);return xm.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":t(["Saturation {0}%, Brightness {1}%",0,0])},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:O},rounded:!1,components:[c,i],onChange:B,onInit:I,sliderBehaviours:U})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(E,O,B)=>{g(O,B)},setThumb:(E,O,B)=>{p(O,B)}},extraApis:{}})},lP=(t,s,c,i)=>{const d=p=>{const C=RZ(t,s,p.onValidHex,p.onInvalidHex,c,i),S=xA(t,s),E=vt=>(100-vt)/100*360,O=vt=>100-vt/360*100,B={paletteRgba:qt(h8),paletteHue:qt(0)},I=Ss(OZ(t,s)),U=Ss(S.sketch({})),j=Ss(C.sketch({})),Q=(vt,gt,_n)=>{U.getOpt(vt).each(hn=>{S.setHue(hn,_n)})},ie=(vt,gt)=>{j.getOpt(vt).each(_n=>{C.updateHex(_n,gt)})},X=(vt,gt,_n)=>{I.getOpt(vt).each(hn=>{xm.setValue(hn,O(_n))})},he=(vt,gt)=>{U.getOpt(vt).each(_n=>{S.setThumb(_n,gt)})},we=(vt,gt)=>{const _n=wy(vt);B.paletteRgba.set(_n),B.paletteHue.set(gt)},Me=(vt,gt,_n,hn)=>{we(gt,_n),Ve(hn,$o=>{$o(vt,gt,_n)})},Fe=()=>{const vt=[ie];return(gt,_n)=>{const hn=_n.event.value,$o=B.paletteHue.get(),In=qu($o,hn.x,100-hn.y),ao=l_(In);Me(gt,ao,$o,vt)}},Mt=()=>{const vt=[Q,ie];return(gt,_n)=>{const hn=E(_n.event.value),$o=B.paletteRgba.get(),In=ww($o),ao=qu(hn,In.saturation,In.value),mn=l_(ao);Me(gt,mn,hn,vt)}},at=()=>{const vt=[Q,X,he];return(gt,_n)=>{const hn=_n.event.hex,$o=MW(hn);Me(gt,hn,$o.hue,vt)}};return{uid:p.uid,dom:p.dom,components:[U.asSpec(),I.asSpec(),j.asSpec()],behaviours:Et([Qn("colour-picker-events",[We(Ty,at()),We(D_,Fe()),We(cP,Mt())]),ut.config({find:vt=>j.getOpt(vt)}),Sn.config({mode:"acyclic"})])}};return Wu({name:"ColourPicker",configFields:[ct("dom"),Re("onValidHex",re),Re("onInvalidHex",re)],factory:d})},uP={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red channel","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green channel","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue channel","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.rgb.invalid":"Numbers only, 0 to 255","colorcustom.rgb.invalidHex":"Hexadecimal only, 000000 to FFFFFF","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},R_=t=>s=>Nt(s)?t.translate(uP[s]):t.translate(s),BZ=(t,s,c)=>{const i=E=>"tox-"+E,d=(E,O,B=E,I=E)=>ju(B,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+E],attributes:{title:s.translate(I),"aria-live":"polite",...O.fold(()=>({}),U=>({id:U}))}},s.icons),g=lP(R_(s),i,s.tooltips.getConfig,d),p=E=>{On(E,rg,{name:"hex-valid",value:!0})},C=E=>{On(E,rg,{name:"hex-valid",value:!1})},S=Ss(g.sketch({dom:{tag:"div",classes:[i("color-picker-container")],attributes:{role:"presentation"}},onValidHex:p,onInvalidHex:C}));return{dom:{tag:"div"},components:[S.asSpec()],behaviours:Et([tb(c,E=>{const O=S.get(E);return ut.getCurrent(O).bind(U=>Lt.getValue(U).hex).map(U=>"#"+ed(U,"#")).getOr("")},(E,O)=>{const B=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,I=k.from(B.exec(O)).bind(Q=>et(Q,1)),U=S.get(E);ut.getCurrent(U).fold(()=>{console.log("Can not find form")},Q=>{Lt.setValue(Q,{hex:I.getOr("")}),Np.getField(Q,"hex").each(ie=>{Do(ie,qm())})})}),Rm.self()])}};var dP=tinymce.util.Tools.resolve("tinymce.Resource");const nb=t=>So(t,"init"),mP=t=>{const s=Ln(),c=Ss({dom:{tag:t.tag}}),i=Ln(),d=!nb(t)&&t.onFocus.isSome()?[to.config({onFocus:g=>{t.onFocus.each(p=>{p(g.element.dom)})}}),or.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Et([Qn("custom-editor-events",[ur(g=>{c.getOpt(g).each(p=>{(nb(t)?t.init(p.element.dom):dP.load(t.scriptId,t.scriptUrl).then(C=>C(p.element.dom,t.settings))).then(C=>{i.on(S=>{C.setValue(S)}),i.clear(),s.set(C)})})})]),tb(k.none(),()=>s.get().fold(()=>i.get().getOr(""),g=>g.getValue()),(g,p)=>{s.get().fold(()=>i.set(p),C=>C.setValue(p))}),Rm.self()].concat(d)),components:[c.asSpec()]}};var Mh=tinymce.util.Tools.resolve("tinymce.util.Tools");const B_=nt("browse.files.event"),MZ=(t,s)=>{const c=Mh.explode(s.getOption("images_file_types")),i=d=>Bt(c,g=>ei(d.name.toLowerCase(),`.${g.toLowerCase()}`));return jn(vo(t),i)},M_=(t,s,c)=>{const i=(I,U)=>{U.stop()},d=I=>(U,j)=>{Ve(I,Q=>{Q(U,j)})},g=(I,U)=>{var j;if(!yn.isDisabled(I)){const Q=U.event.raw;On(I,B_,{files:(j=Q.dataTransfer)==null?void 0:j.files})}},p=(I,U)=>{const j=U.event.raw.target;On(I,B_,{files:j.files})},C=(I,U)=>{U&&(Lt.setValue(I,MZ(U,s)),On(I,Ml,{name:t.name}))},S=Ss({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Et([Qn("input-file-events",[eh(em()),eh(Vg())])])}),E=t.label.map(I=>Bh(I,s)),O=Bo.parts.field({factory:Na,dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[nr(s.translate("Browse for an image")),S.asSpec()],action:I=>{S.get(I).element.dom.click()},buttonBehaviours:Et([Rm.self(),SA(c.getOr([])),or.config({}),_m.button(()=>s.checkUiComponentContext(t.context).shouldDisable),Ec(()=>s.checkUiComponentContext(t.context))])}),B={dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Et([yn.config({disabled:()=>s.checkUiComponentContext(t.context).shouldDisable}),Ec(()=>s.checkUiComponentContext(t.context)),zo.config({toggleClass:"dragenter",toggleOnExecute:!1}),Qn("dropzone-events",[We("dragenter",d([i,zo.toggle])),We("dragleave",d([i,zo.toggle])),We("dragover",i),We("drop",d([i,g])),We(Ig(),p)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[nr(s.translate("Drop an image here"))]},O]}]};return Zn(E,B,["tox-form__group--stretched"],[Qn("handle-files",[We(B_,(I,U)=>{Bo.getField(I).each(j=>{C(j,U.event.files)})})])])},FZ=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:Ae(t.items,s.interpreter)}),F_=nt("alloy-fake-before-tabstop"),EA=nt("alloy-fake-after-tabstop"),fP=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:Et([to.config({ignore:!0}),or.config({})])}),gP=(t,s)=>({dom:{tag:"div",classes:["tox-navobj",...t.getOr([])]},components:[fP([F_]),s,fP([EA])],behaviours:Et([Rm.childAt(1)])}),hP=(t,s)=>{On(t,Uc(),{raw:{which:9,shiftKey:s}})},pP=(t,s)=>{const c=s.element;Xr(c,F_)?hP(t,!0):Xr(c,EA)&&hP(t,!1)},Ow=t=>Ag(t,["."+F_,"."+EA].join(","),qe),TA=nt("update-dialog"),bP=nt("update-title"),vP=nt("update-body"),yP=nt("update-footer"),CP=nt("body-send-message"),AA=nt("dialog-focus-shifted"),N_=Ur().browser,_w=N_.isSafari(),NZ=N_.isFirefox(),wP=_w||NZ,SP=N_.isChromium(),PZ=({scrollTop:t,scrollHeight:s,clientHeight:c})=>Math.ceil(t)+c>=s,xP=(t,s)=>t.scrollTo(0,s==="bottom"?99999999:s),$Z=(t,s)=>{const c=t.body;return k.from(!/^<!DOCTYPE (html|HTML)/.test(s)&&(!SP&&!_w||qn(c)&&(c.scrollTop!==0||Math.abs(c.scrollHeight-c.clientHeight)>1))?c:t.documentElement)},EP=(t,s,c)=>{const i=t.dom;k.from(i.contentDocument).fold(c,d=>{let g=0;const p=$Z(d,s).map(S=>(g=S.scrollTop,S)).forall(PZ),C=()=>{const S=i.contentWindow;qn(S)&&(p?xP(S,"bottom"):!p&&wP&&g!==0&&xP(S,g))};_w&&i.addEventListener("load",C,{once:!0}),d.open(),d.write(s),d.close(),_w||C()})},IZ=_r(wP,_w?500:200).map(t=>mr(EP,t)),TP=(t,s)=>{const c=qt(t.getOr(""));return{getValue:i=>c.get(),setValue:(i,d)=>{if(c.get()!==d){const g=i.element,p=()=>$n(g,"srcdoc",d);s?IZ.fold(G(EP),C=>C.throttle)(g,d,p):p()}c.set(d)}}},LZ=(t,s,c)=>{const i="tox-dialog__iframe",d=t.transparent?[]:[`${i}--opaque`],g=t.border?["tox-navobj-bordered"]:[],p={...t.label.map(B=>({title:B})).getOr({}),...c.map(B=>({srcdoc:B})).getOr({}),...t.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},C=TP(c,t.streamContent),S=t.label.map(B=>Bh(B,s)),E=B=>gP(k.from(g),{uid:B.uid,dom:{tag:"iframe",attributes:p,classes:[i,...d]},behaviours:Et([or.config({}),to.config({}),tb(c,C.getValue,C.setValue),su.config({channels:{[AA]:{onReceive:(I,U)=>{U.newFocus.each(j=>{bu(I.element).each(Q=>{(Jo(I.element,j)?Ps:Tr)(Q,"tox-navobj-bordered-focus")})})}}}})])}),O=Bo.parts.field({factory:{sketch:E}});return Zn(S,O,["tox-form__group--stretched"],[])},AP=(t,s,c,i,d)=>{const g=c*d,p=i*d,C=Math.max(0,t/2-g/2),S=Math.max(0,s/2-p/2);return{left:C.toString()+"px",top:S.toString()+"px",width:g.toString()+"px",height:p.toString()+"px"}},HZ=(t,s,c)=>{const i=ta(t),d=ac(t);return Math.min(i/s,d/c,1)},kP=(t,s)=>{const c=qt(s.getOr({url:""})),i=Ss({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(S=>({src:S.url})).getOr({})}}),d=Ss({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[i.asSpec()]}),g=(S,E)=>{const O={url:E.url};E.zoom.each(I=>O.zoom=I),E.cachedWidth.each(I=>O.cachedWidth=I),E.cachedHeight.each(I=>O.cachedHeight=I),c.set(O);const B=()=>{const{cachedWidth:I,cachedHeight:U,zoom:j}=O;if(!Fn(I)&&!Fn(U)){if(Fn(j)){const ie=HZ(S.element,I,U);O.zoom=ie}const Q=AP(ta(S.element),ac(S.element),I,U,O.zoom);d.getOpt(S).each(ie=>{Sr(ie.element,Q)})}};i.getOpt(S).each(I=>{const U=I.element;E.url!==Cc(U,"src")&&($n(U,"src",E.url),Tr(S.element,"tox-imagepreview__loaded")),B(),Wi(U).then(j=>{S.getSystem().isConnected()&&(Ps(S.element,"tox-imagepreview__loaded"),O.cachedWidth=j.dom.naturalWidth,O.cachedHeight=j.dom.naturalHeight,B())})})},p={};t.height.each(S=>p.height=S);const C=s.map(S=>({url:S.url,zoom:k.from(S.zoom),cachedWidth:k.from(S.cachedWidth),cachedHeight:k.from(S.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:p,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:Et([Rm.self(),tb(C,()=>c.get(),g)])}},DP=(t,s,c)=>{const i="tox-label",d=t.align==="center"?[`${i}--center`]:[],g=t.align==="end"?[`${i}--end`]:[],p=Ss({dom:{tag:"label",classes:[i,...d,...g]},components:[nr(s.providers.translate(t.label))]}),C=Ae(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[p.asSpec(),...C],behaviours:Et([Rm.self(),so.config({}),k_(k.none()),Sn.config({mode:"acyclic"}),Qn("label",[ur(S=>{t.for.each(E=>{c(E).each(O=>{p.getOpt(S).each(B=>{const I=Cc(O.element,"id")??nt("form-field");$n(O.element,"id",I),$n(B.element,"for",I)})})})})])])}},Rw=nt("toolbar.button.execute"),zZ=t=>ef((s,c)=>{bw(t,s)(i=>{On(s,Rw,{buttonApi:i}),t.onAction(i)})}),Jp=nt("common-button-display-events"),P_={[Yi()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[hd()]:["toolbar-button-events",Jp],[Km()]:["toolbar-button-events","dropdown-events","tooltipping"],[mi()]:["focusing","alloy.base.behaviour",Jp]},$_=t=>Vn(t.element,"width",lr(t.element,"width")),I_=(t,s,c)=>ju(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:c},s),L_=(t,s)=>I_(t,s,[]),mf=(t,s)=>I_(t,s,[so.config({})]),OP=(t,s,c)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[nr(c.translate(t))],behaviours:Et([so.config({})])}),Ku=nt("update-menu-text"),ob=nt("update-menu-icon"),_P=nt("update-tooltip-text"),Pd=(t,s,c,i)=>{const d=qt(re),g=qt(t.tooltip),p=t.text.map(ie=>Ss(OP(ie,s,c.providers))),C=t.icon.map(ie=>Ss(mf(ie,c.providers.icons))),S=(ie,X)=>{const he=Lt.getValue(ie);return to.focus(he),On(he,"keydown",{raw:X.event.raw}),al.close(he),k.some(!0)},E=t.role.fold(()=>({}),ie=>({role:ie})),O=k.from(t.listRole).map(ie=>({listRole:ie})).getOr({}),B=t.ariaLabel.fold(()=>({}),ie=>({"aria-label":c.providers.translate(ie)})),I=ju("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},c.providers.icons),U=nt("common-button-display-events"),j="dropdown-events";return Ss(al.sketch({...t.uid?{uid:t.uid}:{},...E,...O,dom:{tag:"button",classes:[s,`${s}--select`].concat(Ae(t.classes,ie=>`${s}--${ie}`)),attributes:{...B,...qn(i)?{"data-mce-name":i}:{}}},components:vy([C.map(ie=>ie.asSpec()),p.map(ie=>ie.asSpec()),k.some(I)]),matchWidth:!0,useMinWidth:!0,onOpen:(ie,X,he)=>{t.searchable&&vZ(he)},dropdownBehaviours:Et([...t.dropdownBehaviours,_m.button(()=>t.disabled||c.providers.checkUiComponentContext(t.context).shouldDisable),Ec(()=>c.providers.checkUiComponentContext(t.context)),ty.config({}),so.config({}),...t.tooltip.map(ie=>sr.config(c.providers.tooltips.getConfig({tooltipText:c.providers.translate(ie),onShow:X=>{if(To(g.get(),t.tooltip,(he,we)=>we!==he).getOr(!1)){const he=c.providers.translate(g.get().getOr(""));sr.setComponents(X,c.providers.tooltips.getComponents({tooltipText:he}))}}}))).toArray(),Qn(j,[lf(t,d),q0(t,d)]),Qn(U,[ur((ie,X)=>{t.listRole!=="listbox"&&$_(ie)})]),Qn("update-dropdown-width-variable",[We(Wg(),(ie,X)=>al.close(ie))]),Qn("menubutton-update-display-text",[We(Ku,(ie,X)=>{p.bind(he=>he.getOpt(ie)).each(he=>{so.set(he,[nr(c.providers.translate(X.event.text))])})}),We(ob,(ie,X)=>{C.bind(he=>he.getOpt(ie)).each(he=>{so.set(he,[mf(X.event.icon,c.providers.icons)])})}),We(_P,(ie,X)=>{const he=c.providers.translate(X.event.text);$n(ie.element,"aria-label",he),g.set(k.some(X.event.text))})])]),eventOrder:ht(P_,{[mi()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[hd()]:["toolbar-button-events",sr.name(),j,U]}),sandboxBehaviours:Et([Sn.config({mode:"special",onLeft:S,onRight:S}),Qn("dropdown-sandbox-events",[We(iO,(ie,X)=>{Z8(ie),X.stop()}),We(eN,(ie,X)=>{hZ(ie,X),X.stop()})])]),lazySink:c.getSink,toggleClass:`${s}--active`,parts:{menu:{...I0(!1,t.columns,t.presets),fakeFocus:t.searchable,...t.listRole==="listbox"?{}:{onHighlightItem:G8,onCollapseMenu:(ie,X,he)=>{hs.getHighlighted(he).each(we=>{G8(ie,he,we)})},onDehighlightItem:bZ}}},getAnchorOverrides:()=>({maxHeightFunction:(ie,X)=>{YS()(ie,X-10)}}),fetch:ie=>lo.nu(pn(t.fetch,ie))})).asSpec()},kA=t=>Nt(t),Bw=t=>t.type==="separator",VZ=t=>So(t,"getSubmenuItems"),H_={type:"separator"},UZ=(t,s)=>{const c=co(t,(i,d)=>kA(d)?d===""?i:d==="|"?i.length>0&&!Bw(i[i.length-1])?i.concat([H_]):i:So(s,d.toLowerCase())?i.concat([s[d.toLowerCase()]]):i:i.concat([d]),[]);return c.length>0&&Bw(c[c.length-1])&&c.pop(),c},z_=(t,s)=>{const c=t.getSubmenuItems(),i=DA(c,s),d=ht(i.menus,{[t.value]:i.items}),g=ht(i.expansions,{[t.value]:t.value});return{item:t,menus:d,expansions:g}},RP=t=>{const s=on(t,"value").getOrThunk(()=>nt("generated-menu-item"));return ht({value:s},t)},DA=(t,s)=>{const c=UZ(Nt(t)?t.split(" "):t,s);return Xn(c,(i,d)=>{if(VZ(d)){const g=RP(d),p=z_(g,s);return{menus:ht(i.menus,p.menus),items:[p.item,...i.items],expansions:ht(i.expansions,p.expansions)}}else return{...i,items:[d,...i.items]}},{menus:{},expansions:{},items:[]})},WZ=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),ZZ=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),sb=(t,s,c,i)=>{const d=nt("primary-menu"),g=DA(t,c.shared.providers.menuItems());if(g.items.length===0)return k.none();const p=WZ(i),C=q8(d,g.items,s,c,i.isHorizontalMenu,p),S=ZZ(i),E=mo(g.menus,(B,I)=>q8(I,B,s,c,!1,S)),O=ht(E,Zm(d,C));return k.from(Fp.tieredData(d,O,g.expansions))},OA=t=>!So(t,"items"),BP="data-value",_A=(t,s,c,i,d)=>Ae(c,g=>OA(g)?{type:"togglemenuitem",...d?{}:{role:"option"},text:g.text,value:g.value,active:g.value===i,onAction:()=>{Lt.setValue(t,g.value),On(t,Ml,{name:s}),to.focus(t)}}:{type:"nestedmenuitem",text:g.text,getSubmenuItems:()=>_A(t,s,g.items,i,d)}),V_=(t,s)=>Lo(t,c=>OA(c)?_r(c.value===s,c):V_(c.items,s)),jZ=(t,s,c)=>{const i=Bt(t.items,E=>!OA(E)),d=s.shared.providers,g=c.bind(E=>V_(t.items,E)).orThunk(()=>Xt(t.items).filter(OA)),p=t.label.map(E=>Bh(E,d)),C=Bo.parts.field({dom:{},factory:{sketch:E=>Pd({context:t.context,uid:E.uid,text:g.map(O=>O.text),icon:k.none(),tooltip:k.none(),role:_r(!i,"combobox"),...i?{}:{listRole:"listbox"},ariaLabel:t.label,fetch:(O,B)=>{const I=_A(O,t.name,t.items,Lt.getValue(O),i);B(sb(I,Am.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:k.none()}))},onSetup:G(re),getApi:G({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[or.config({}),tb(g.map(O=>O.value),O=>Cc(O.element,BP),(O,B)=>{V_(t.items,B).each(I=>{$n(O.element,BP,I.value),On(O,Ku,{text:I.text})})})]},"tox-listbox",s.shared)}}),S={dom:{tag:"div",classes:["tox-listboxfield"]},components:[C]};return Bo.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:ae([p.toArray(),[S]]),fieldBehaviours:Et([yn.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable,onDisabled:E=>{Bo.getField(E).each(yn.disable)},onEnabled:E=>{Bo.getField(E).each(yn.enable)}})])})},MP=(t,s)=>({dom:{tag:"div",classes:t.classes},components:Ae(t.items,s.shared.interpreter)}),FP=(t,s,c)=>{const i=Ae(t.items,S=>({text:s.translate(S.text),value:S.value})),d=t.label.map(S=>Bh(S,s)),g=Bo.parts.field({dom:{},...c.map(S=>({data:S})).getOr({}),selectAttributes:{size:t.size},options:i,factory:AH,selectBehaviours:Et([yn.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),or.config({}),Qn("selectbox-change",[We(Ig(),(S,E)=>{On(S,Ml,{name:t.name})})])])}),p=t.size>1?k.none():k.some(ju("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),C={dom:{tag:"div",classes:["tox-selectfield"]},components:ae([[g],p.toArray()])};return Bo.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:ae([d.toArray(),[C]]),fieldBehaviours:Et([yn.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:S=>{Bo.getField(S).each(yn.disable)},onEnabled:S=>{Bo.getField(S).each(yn.enable)}}),Ec(()=>s.checkUiComponentContext(t.context))])})},NP=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},c=d=>d in s?s[d]:1;let i=t.value.toFixed(c(t.unit));return i.indexOf(".")!==-1&&(i=i.replace(/\.?0*$/,"")),i+t.unit},RA=t=>{const c=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(c!==null){const i=parseFloat(c[1]),d=c[2];return Yt.value({value:i,unit:d})}else return Yt.error(t)},PP=(t,s)=>{const c={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},i=d=>So(c,d);return t.unit===s?k.some(t.value):i(t.unit)&&i(s)?c[t.unit]===c[s]?k.some(t.value):k.some(t.value/c[t.unit]*c[s]):k.none()},BA=t=>k.none(),$P=(t,s)=>c=>PP(c,s).map(i=>({value:i*t,unit:s})),Bm=(t,s)=>{const c=RA(t).toOptional(),i=RA(s).toOptional();return To(c,i,(d,g)=>PP(d,g.unit).map(p=>g.value/p).map(p=>$P(p,g.unit)).getOr(BA)).getOr(BA)},U_=(t,s)=>{let c=BA;const i=nt("ratio-event"),d=Q=>ju(Q,{tag:"span",classes:["tox-icon","tox-lock-icon__"+Q]},s.icons),g=()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,p=Ec(()=>s.checkUiComponentContext(t.context)),C=t.label.getOr("Constrain proportions"),S=s.translate(C),E=lc.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":S,"data-mce-name":C}},components:[d("lock"),d("unlock")],buttonBehaviours:Et([yn.config({disabled:g}),p,or.config({}),sr.config(s.tooltips.getConfig({tooltipText:S}))])}),O=Q=>({dom:{tag:"div",classes:["tox-form__group"]},components:Q}),B=Q=>Bo.parts.field({factory:_d,inputClasses:["tox-textfield"],inputBehaviours:Et([yn.config({disabled:g}),p,or.config({}),Qn("size-input-events",[We(_u(),(ie,X)=>{On(ie,i,{isField1:Q})}),We(Ig(),(ie,X)=>{On(ie,Ml,{name:t.name})})])]),selectOnFocus:!1}),I=Q=>({dom:{tag:"label",classes:["tox-label"]},components:[nr(s.translate(Q))]}),U=lc.parts.field1(O([Bo.parts.label(I("Width")),B(!0)])),j=lc.parts.field2(O([Bo.parts.label(I("Height")),B(!1)]));return lc.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[U,j,O([I(nd),E])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(Q,ie,X)=>{RA(Lt.getValue(Q)).each(he=>{c(he).each(we=>{Lt.setValue(ie,NP(we))})})},coupledFieldBehaviours:Et([yn.config({disabled:g,onDisabled:Q=>{lc.getField1(Q).bind(Bo.getField).each(yn.disable),lc.getField2(Q).bind(Bo.getField).each(yn.disable),lc.getLock(Q).each(yn.disable)},onEnabled:Q=>{lc.getField1(Q).bind(Bo.getField).each(yn.enable),lc.getField2(Q).bind(Bo.getField).each(yn.enable),lc.getLock(Q).each(yn.enable)}}),Ec(()=>s.checkUiComponentContext("mode:design")),Qn("size-input-events2",[We(i,(Q,ie)=>{const X=ie.event.isField1,he=X?lc.getField1(Q):lc.getField2(Q),we=X?lc.getField2(Q):lc.getField1(Q),Me=he.map(Lt.getValue).getOr(""),Fe=we.map(Lt.getValue).getOr("");c=Bm(Me,Fe)})])])})},GZ=(t,s,c)=>{const i=xm.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[nr(s.translate(t.label))]}),d=xm.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),g=xm.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return xm.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:G(c.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[i,d,g],sliderBehaviours:Et([Rm.self(),to.config({})]),onChoose:(p,C,S)=>{On(p,Ml,{name:t.name,value:S})},onChange:(p,C,S)=>{On(p,Ml,{name:t.name,value:S})}})},qZ=(t,s)=>{const c=C=>({dom:{tag:"th",innerHtml:s.translate(C)}}),i=C=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:Ae(C,c)}]}),d=C=>({dom:{tag:"td",innerHtml:s.translate(C)}}),g=C=>({dom:{tag:"tr"},components:Ae(C,d)}),p=C=>({dom:{tag:"tbody"},components:Ae(C,g)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[i(t.header),p(t.cells)],behaviours:Et([or.config({}),to.config({})])}},IP=(t,s)=>{const c=t.label.map(j=>Bh(j,s)),i=[yn.config({disabled:()=>t.disabled||s.checkUiComponentContext(t.context).shouldDisable}),Ec(()=>s.checkUiComponentContext(t.context)),Sn.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:j=>(Do(j,xy),k.some(!0))}),Qn("textfield-change",[We(qm(),(j,Q)=>{On(j,Ml,{name:t.name})}),We(T2(),(j,Q)=>{On(j,Ml,{name:t.name})})]),or.config({})],d=t.validation.map(j=>cl.config({getRoot:Q=>bu(Q.element),invalidClass:"tox-invalid",validator:{validate:Q=>{const ie=Lt.getValue(Q),X=j.validator(ie);return lo.pure(X===!0?Yt.value(ie):Yt.error(X))},validateOnLoad:j.validateOnLoad}})).toArray(),g=t.placeholder.fold(G({}),j=>({placeholder:s.translate(j)})),p=t.inputMode.fold(G({}),j=>({inputmode:j})),S={...t.spellcheck.fold(G({}),j=>({spellcheck:j})),...g,...p,"data-mce-name":t.name},E=Bo.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(j=>({data:j})).getOr({}),inputAttributes:S,inputClasses:[t.classname],inputBehaviours:Et(ae([i,d])),selectOnFocus:!1,factory:_d}),O=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[E]}:E,I=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),U=[yn.config({disabled:()=>t.disabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:j=>{Bo.getField(j).each(yn.disable)},onEnabled:j=>{Bo.getField(j).each(yn.enable)}}),Ec(()=>s.checkUiComponentContext(t.context))];return Zn(c,O,I,U)},KZ=(t,s,c)=>IP({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:k.none(),maximized:t.maximized,data:c,context:t.context,spellcheck:k.none()},s),YZ=(t,s,c)=>IP({name:t.name,multiline:!0,label:t.label,inputMode:k.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:k.none(),maximized:t.maximized,data:c,context:t.context,spellcheck:t.spellcheck},s),W_=t=>({isEnabled:()=>!yn.isDisabled(t),setEnabled:s=>yn.set(t,!s),setActive:s=>{const c=t.element;s?(Ps(c,"tox-tbtn--enabled"),$n(c,"aria-pressed",!0)):(Tr(c,"tox-tbtn--enabled"),ir(c,"aria-pressed"))},isActive:()=>Xr(t.element,"tox-tbtn--enabled"),setTooltip:s=>{On(t,_P,{text:s})},setText:s=>{On(t,Ku,{text:s})},setIcon:s=>On(t,ob,{icon:s})}),Ay=(t,s,c,i,d=!0,g)=>{const p=t.buttonType==="bordered"?["bordered"]:[];return Pd({text:t.text,icon:t.icon,tooltip:t.tooltip,ariaLabel:t.tooltip,searchable:t.search.isSome(),role:i,fetch:(C,S)=>{const E={pattern:t.search.isSome()?yZ(C):""};t.fetch(O=>{S(sb(O,Am.CLOSE_ON_EXECUTE,c,{isHorizontalMenu:!1,search:t.search}))},E,W_(C))},onSetup:t.onSetup,getApi:C=>W_(C),columns:1,presets:"normal",classes:p,dropdownBehaviours:[...d?[or.config({})]:[]],context:t.context},s,c.shared,g)},HY=(t,s,c)=>{const i=g=>p=>{const C=!p.isActive();p.setActive(C),g.storage.set(C),c.shared.getSink().each(S=>{s().getOpt(S).each(E=>{kc(E.element),On(E,rg,{name:g.name,value:g.storage.get()})})})},d=g=>p=>{p.setActive(g.storage.get())};return g=>{g(Ae(t,p=>{const C=p.text.fold(()=>({}),S=>({text:S}));return{type:p.type,active:!1,...C,context:p.context,onAction:i(p),onSetup:d(p)}}))}},XZ=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":t}},components:[nr(t)]}),Fi=(t,s,c)=>{t.customStateIcon.each(i=>s.push(G_(i,c.shared.providers.icons,t.customStateIconTooltip.fold(()=>[],d=>[sr.config(c.shared.providers.tooltips.getConfig({tooltipText:d}))]),["tox-icon-custom-state"])))},Z_=nt("leaf-label-event-id"),j_=({leaf:t,onLeafAction:s,visible:c,treeId:i,selectedId:d,backstage:g})=>{const p=t.menu.map(S=>Ay(S,"tox-mbtn",g,k.none(),c)),C=[XZ(t.title)];return Fi(t,C,g),p.each(S=>C.push(S)),Na.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(c?["tox-tree--leaf__label--visible"]:[])},components:C,role:"treeitem",action:S=>{s(t.id),S.getSystem().broadcastOn([`update-active-item-${i}`],{value:t.id})},eventOrder:{[Uc()]:[Z_,"keying"]},buttonBehaviours:Et([...c?[or.config({})]:[],zo.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),su.config({channels:{[`update-active-item-${i}`]:{onReceive:(S,E)=>{(E.value===t.id?zo.on:zo.off)(S)}}}}),Qn(Z_,[ur((S,E)=>{d.each(O=>{(O===t.id?zo.on:zo.off)(S)})}),We(Uc(),(S,E)=>{const O=E.event.raw.code==="ArrowLeft",B=E.event.raw.code==="ArrowRight";O?(vl(S.element,".tox-tree--directory").each(I=>{S.getSystem().getByDom(I).each(U=>{qd(I,".tox-tree--directory__label").each(j=>{U.getSystem().getByDom(j).each(to.focus)})})}),E.stop()):B&&E.stop()})])])})},G_=(t,s,c,i,d)=>ju(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"].concat(i||[]),behaviours:c,attributes:d},s),JZ=(t,s)=>G_(t,s,[]),LP=nt("directory-label-event-id"),HP=({directory:t,visible:s,noChildren:c,backstage:i})=>{const d=t.menu.map(C=>Ay(C,"tox-mbtn",i,k.none())),g=[{dom:{tag:"div",classes:["tox-chevron"]},components:[JZ("chevron-right",i.shared.providers.icons)]},XZ(t.title)];Fi(t,g,i),d.each(C=>{g.push(C)});const p=C=>{vl(C.element,".tox-tree--directory").each(S=>{C.getSystem().getByDom(S).each(E=>{const O=!zo.isOn(E);zo.toggle(E),On(C,"expand-tree-node",{expanded:O,node:t.id})})})};return Na.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:g,action:p,eventOrder:{[Uc()]:[LP,"keying"]},buttonBehaviours:Et([...s?[or.config({})]:[],Qn(LP,[We(Uc(),(C,S)=>{const E=S.event.raw.code==="ArrowRight",O=S.event.raw.code==="ArrowLeft";E&&c&&S.stop(),(E||O)&&vl(C.element,".tox-tree--directory").each(B=>{C.getSystem().getByDom(B).each(I=>{!zo.isOn(I)&&E||zo.isOn(I)&&O?(p(C),S.stop()):O&&!zo.isOn(I)&&(vl(I.element,".tox-tree--directory").each(U=>{qd(U,".tox-tree--directory__label").each(j=>{I.getSystem().getByDom(j).each(to.focus)})}),S.stop())})})})])])})},QZ=({children:t,onLeafAction:s,visible:c,treeId:i,expandedIds:d,selectedId:g,backstage:p})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(C=>C.type==="leaf"?j_({leaf:C,selectedId:g,onLeafAction:s,visible:c,treeId:i,backstage:p}):Mw({directory:C,expandedIds:d,selectedId:g,onLeafAction:s,labelTabstopping:c,treeId:i,backstage:p})),behaviours:Et([Zc.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:c}),so.config({})])}),q_=nt("directory-event-id"),Mw=({directory:t,onLeafAction:s,labelTabstopping:c,treeId:i,backstage:d,expandedIds:g,selectedId:p})=>{const{children:C}=t,S=qt(g),E=B=>C.map(I=>I.type==="leaf"?j_({leaf:I,selectedId:p,onLeafAction:s,visible:B,treeId:i,backstage:d}):Mw({directory:I,expandedIds:S.get(),selectedId:p,onLeafAction:s,labelTabstopping:B,treeId:i,backstage:d})),O=g.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[HP({directory:t,visible:c,noChildren:t.children.length===0,backstage:d}),QZ({children:C,expandedIds:g,selectedId:p,onLeafAction:s,visible:O,treeId:i,backstage:d})],behaviours:Et([Qn(q_,[ur((B,I)=>{zo.set(B,O)}),We("expand-tree-node",(B,I)=>{const{expanded:U,node:j}=I.event;S.set(U?[...S.get(),j]:S.get().filter(Q=>Q!==j))})]),zo.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(B,I)=>{const U=B.components()[1],j=E(I);I?Zc.grow(U):Zc.shrink(U),so.set(U,j)}})])}},ej=nt("tree-event-id"),K_=(t,s)=>{const c=t.onLeafAction.getOr(re),i=t.onToggleExpand.getOr(re),d=t.defaultExpandedIds,g=qt(d),p=qt(t.defaultSelectedId),C=nt("tree-id"),S=(E,O)=>t.items.map(B=>B.type==="leaf"?j_({leaf:B,selectedId:E,onLeafAction:c,visible:!0,treeId:C,backstage:s}):Mw({directory:B,selectedId:E,onLeafAction:c,expandedIds:O,labelTabstopping:!0,treeId:C,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:S(p.get(),g.get()),behaviours:Et([Sn.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),Qn(ej,[We("expand-tree-node",(E,O)=>{const{expanded:B,node:I}=O.event;g.set(B?[...g.get(),I]:g.get().filter(U=>U!==I)),i(g.get(),{expanded:B,node:I})})]),su.config({channels:{[`update-active-item-${C}`]:{onReceive:(E,O)=>{p.set(k.some(O.value)),so.set(E,S(k.some(O.value),g.get()))}}}}),so.config({})])}},Fw=(t,s,c=[],i,d,g,p)=>{const C=s.fold(()=>({}),O=>({action:O})),S={buttonBehaviours:Et([_m.item(()=>!t.enabled||p.checkUiComponentContext(t.context).shouldDisable),Ec(()=>p.checkUiComponentContext(t.context)),or.config({}),...g.map(O=>sr.config(p.tooltips.getConfig({tooltipText:p.translate(O)}))).toArray(),Qn("button press",[Jg("click")])].concat(c)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...C},E=ht(S,{dom:i});return ht(E,{components:d})},zP=(t,s,c,i=[],d)=>{const g=t.tooltip.map(E=>({"aria-label":c.translate(E)})).getOr({}),p={tag:"button",classes:["tox-tbtn"],attributes:{...g,"data-mce-name":d}},C=t.icon.map(E=>L_(E,c.icons)),S=vy([C]);return Fw(t,s,i,p,S,t.tooltip,c)},Y_=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},X_=(t,s,c,i=[],d=[])=>{const g=c.translate(t.text),p=t.icon.map(U=>L_(U,c.icons)),C=[p.getOrThunk(()=>nr(g))],S=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),B={tag:"button",classes:[...Y_(S),...p.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...d],attributes:{"aria-label":g,"data-mce-name":t.text}},I=t.icon.map(G(g));return Fw(t,s,i,B,C,I,c)},J_=(t,s,c,i=[],d=[])=>{const g=X_(t,k.some(s),c,i,d);return Na.sketch(g)},VP=(t,s)=>c=>{s==="custom"?On(c,rg,{name:t,value:{}}):s==="submit"?Do(c,xy):s==="cancel"?Do(c,Xp):console.error("Unknown button type: ",s)},UP=(t,s)=>s==="menu",tj=(t,s)=>s==="custom"||s==="cancel"||s==="submit",WP=(t,s)=>s==="togglebutton",zY=(t,s,c)=>{const i=t.icon.map(X=>mf(X,s.icons)).map(Ss),d=X=>{On(X,rg,{name:t.name,value:{setIcon:he=>{i.map(we=>we.getOpt(X).each(Me=>{so.set(Me,[mf(he,s.icons)])}))}}})},g=t.buttonType.getOr(t.primary?"primary":"secondary"),p={...t,name:t.name??"",tooltip:t.tooltip,enabled:t.enabled??!1},C=p.tooltip.or(t.text).map(X=>({"aria-label":s.translate(X)})).getOr({}),S=Y_(g??"secondary"),E=t.icon.isSome()&&t.text.isSome(),O={tag:"button",classes:[...S.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],...E?["tox-button--icon-and-text"]:[]],attributes:{...C,...qn(c)?{"data-mce-name":c}:{}}},B=[],I=s.translate(t.text.getOr("")),U=nr(I),Q=[...vy([i.map(X=>X.asSpec())]),...t.text.isSome()?[U]:[]],ie=Fw(p,k.some(d),B,O,Q,t.tooltip,s);return Na.sketch(ie)},Q_=(t,s,c)=>{if(UP(t,s)){const i=()=>p,d=t,g={...t,buttonType:"default",type:"menubutton",search:k.none(),onSetup:C=>(C.setEnabled(t.enabled),re),fetch:HY(d.items,i,c)},p=Ss(Ay(g,"tox-tbtn",c,k.none(),!0,t.text.or(t.tooltip).getOrUndefined()));return p.asSpec()}else if(tj(t,s)){const i=VP(t.name,s),d={...t,context:s==="cancel"?"any":t.context,borderless:!1};return J_(d,i,c.shared.providers,[])}else{if(WP(t,s))return zY(t,c.shared.providers,t.text.or(t.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")}},nj=(t,s)=>{const c=VP(t.name,"custom");return kw(k.none(),Bo.parts.field({factory:Na,...X_(t,k.some(c),s,[SA(""),Rm.self()])}))},oj={type:"separator"},ZP=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:re}),eR=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:re}),sj=t=>Ae(t,ZP),rj=(t,s)=>jn(s,c=>c.type===t),jP=(t,s)=>sj(rj(t,s)),GP=t=>jP("header",t.targets),cj=t=>jP("anchor",t.targets),aj=t=>k.from(t.anchorTop).map(s=>eR("<top>",s)).toArray(),qP=t=>k.from(t.anchorBottom).map(s=>eR("<bottom>",s)).toArray(),KP=t=>Ae(t,s=>eR(s,s)),ky=t=>co(t,(s,c)=>s.length===0||c.length===0?s.concat(c):s.concat(oj,c),[]),tR=(t,s)=>{const c=t.toLowerCase();return jn(s,i=>{const d=i.meta!==void 0&&i.meta.text!==void 0?i.meta.text:i.text,g=i.value??"";return Qs(d.toLowerCase(),c)||Qs(g.toLowerCase(),c)})},YP=(t,s,c)=>{var p;const i=Lt.getValue(s),d=((p=i==null?void 0:i.meta)==null?void 0:p.text)??i.value;return c.getLinkInformation().fold(()=>[],C=>{const S=tR(d,KP(c.getHistory(t)));return t==="file"?ky([S,tR(d,GP(C)),tR(d,ae([aj(C),cj(C),qP(C)]))]):S})},nR=nt("aria-invalid"),XP=(t,s,c,i)=>{const d=s.shared.providers,g=he=>{const we=Lt.getValue(he);c.addToHistory(we.value,t.filetype)},p={...i.map(he=>({initialData:he})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{type:"url"},minChars:0,responseTime:0,fetch:he=>{const we=YP(t.filetype,he,c),Me=sb(we,Am.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:k.none()});return lo.pure(Me)},getHotspot:he=>j.getOpt(he),onSetValue:(he,we)=>{he.hasConfigured(cl)&&cl.run(he).get(re)},typeaheadBehaviours:Et([...c.getValidationHandler().map(he=>cl.config({getRoot:we=>bu(we.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(we,Me)=>{O.getOpt(we).each(Fe=>{$n(Fe.element,"title",d.translate(Me))})}},validator:{validate:we=>{const Me=Lt.getValue(we);return Tt.nu(Fe=>{he({type:t.filetype,url:Me.value},Mt=>{if(Mt.status==="invalid"){$n(we.element,"aria-errormessage",nR);const at=Yt.error(Mt.message);Fe(at)}else{ir(we.element,"aria-errormessage");const at=Yt.value(Mt.message);Fe(at)}})})},validateOnLoad:!1}})).toArray(),yn.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable}),or.config({}),Qn("urlinput-events",[We(qm(),he=>{const we=ci(he.element),Me=we.trim();Me!==we&&ql(he.element,Me),t.filetype==="file"&&On(he,Ml,{name:t.name})}),We(Ig(),he=>{On(he,Ml,{name:t.name}),g(he)}),We(T2(),he=>{On(he,Ml,{name:t.name}),g(he)})])]),eventOrder:{[qm()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:he=>he.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:I0(!1,1,"normal")},onExecute:(he,we,Me)=>{On(we,xy,{})},onItemExecute:(he,we,Me,Fe)=>{g(he),On(he,Ml,{name:t.name})}},C=Bo.parts.field({...p,factory:cV}),S=t.label.map(he=>Bh(he,d)),O=Ss(((he,we,Me=he,Fe=he)=>ju(Me,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+he],attributes:{title:d.translate(Fe),"aria-live":"polite",...we.fold(()=>({}),Mt=>({id:Mt}))}},d.icons))("invalid",k.some(nR),"warning")),B=Ss({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[O.asSpec()]}),I=c.getUrlPicker(t.filetype),U=nt("browser.url.event"),j=Ss({dom:{tag:"div",classes:["tox-control-wrap"]},components:[C,B.asSpec()],behaviours:Et([yn.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable})])}),Q=Ss(J_({context:t.context,name:t.name,icon:k.some("browse"),text:t.picker_text.or(t.label).getOr(""),enabled:t.enabled,primary:!1,buttonType:k.none(),borderless:!0},he=>Do(he,U),d,[],["tox-browse-url"])),ie=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:ae([[j.asSpec()],I.map(()=>Q.asSpec()).toArray()])}),X=he=>{ut.getCurrent(he).each(we=>{const Me=Lt.getValue(we),Fe={fieldname:t.name,...Me};I.each(Mt=>{Mt(Fe).get(at=>{Lt.setValue(we,at),On(he,Ml,{name:t.name})})})})};return Bo.sketch({dom:J8(),components:S.toArray().concat([ie()]),fieldBehaviours:Et([yn.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable,onDisabled:he=>{Bo.getField(he).each(yn.disable),Q.getOpt(he).each(yn.disable)},onEnabled:he=>{Bo.getField(he).each(yn.enable),Q.getOpt(he).each(yn.enable)}}),Ec(()=>d.checkUiComponentContext(t.context)),Qn("url-input-events",[We(U,X)])])})},ij=(t,s)=>{const c=ng(t.icon,s.icons);return af.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:t.url?void 0:c},components:t.url?[Na.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:c,attributes:{title:s.translate(t.iconTooltip)}},action:i=>On(i,rg,{name:"alert-banner",value:t.url}),buttonBehaviours:Et([j6()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]})},JP=(t,s,c)=>{const i=S=>(S.element.dom.click(),k.some(!0)),d=Bo.parts.field({factory:{sketch:St},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Et([Rm.self(),yn.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:S=>{bu(S.element).each(E=>Ps(E,"tox-checkbox--disabled"))},onEnabled:S=>{bu(S.element).each(E=>Tr(E,"tox-checkbox--disabled"))}}),or.config({}),to.config({}),rP(c,b1,wu),Sn.config({mode:"special",onEnter:i,onSpace:i,stopSpaceKeyup:!0}),Qn("checkbox-events",[We(Ig(),(S,E)=>{On(S,Ml,{name:t.name})})])])}),g=Bo.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[nr(s.translate(t.label))],behaviours:Et([ty.config({})])}),p=S=>ju(S==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+S]},s.icons),C=Ss({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[p("checked"),p("unchecked")]});return Bo.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,C.asSpec(),g],fieldBehaviours:Et([yn.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),Ec(()=>s.checkUiComponentContext(t.context))])})},QP=(t,s)=>{const c=["tox-form__group",...t.stretched?["tox-form__group--stretched"]:[]],i=Qn("htmlpanel",[ur(d=>{t.onInit(d.element.dom)})]);return t.presets==="presentation"?af.sketch({dom:{tag:"div",classes:c,innerHtml:t.html},containerBehaviours:Et([sr.config({...s.tooltips.getConfig({tooltipText:"",onShow:d=>{As(d.element,"[data-mce-tooltip]:hover").orThunk(()=>Kr(d.element)).each(g=>{Lc(g,"data-mce-tooltip").each(p=>{sr.setComponents(d,s.tooltips.getComponents({tooltipText:p}))})})}}),mode:"children-normal",anchor:d=>({type:"node",node:As(d.element,"[data-mce-tooltip]:hover").orThunk(()=>Kr(d.element).filter(g=>Lc(g,"data-mce-tooltip").isSome())),root:d.element,layouts:{onLtr:G([hc,Wc,xc,wa,br,Mc]),onRtl:G([hc,Wc,xc,wa,br,Mc])},bubble:El(0,-2,{})})}),i])}):af.sketch({dom:{tag:"div",classes:c,innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:Et([or.config({}),to.config({}),i])})},qc=t=>(s,c,i,d,g)=>on(c,"name").fold(()=>t(c,d,k.none(),g),p=>s.field(p,t(c,d,on(i,p),g))),lj=t=>(s,c,i,d,g)=>{const p=ht(c,{source:"dynamic"});return qc(t)(s,p,i,d,g)},e$={bar:qc((t,s)=>xZ(t,s.shared)),collection:qc((t,s,c)=>eP(t,s.shared.providers,c)),alertbanner:qc((t,s)=>ij(t,s.shared.providers)),input:qc((t,s,c)=>KZ(t,s.shared.providers,c)),textarea:qc((t,s,c)=>YZ(t,s.shared.providers,c)),label:qc((t,s,c,i)=>DP(t,s.shared,i)),iframe:lj((t,s,c)=>LZ(t,s.shared.providers,c)),button:qc((t,s)=>nj(t,s.shared.providers)),checkbox:qc((t,s,c)=>JP(t,s.shared.providers,c)),colorinput:qc((t,s,c)=>A_(t,s.shared,s.colorinput,c)),colorpicker:qc((t,s,c)=>BZ(t,s.shared.providers,c)),dropzone:qc((t,s,c)=>M_(t,s.shared.providers,c)),grid:qc((t,s)=>FZ(t,s.shared)),listbox:qc((t,s,c)=>jZ(t,s,c)),selectbox:qc((t,s,c)=>FP(t,s.shared.providers,c)),sizeinput:qc((t,s)=>U_(t,s.shared.providers)),slider:qc((t,s,c)=>GZ(t,s.shared.providers,c)),urlinput:qc((t,s,c)=>XP(t,s,s.urlinput,c)),customeditor:qc(mP),htmlpanel:qc((t,s)=>QP(t,s.shared.providers)),imagepreview:qc((t,s,c)=>kP(t,c)),table:qc((t,s)=>qZ(t,s.shared.providers)),tree:qc((t,s)=>K_(t,s)),panel:qc((t,s)=>MP(t,s))},t$={field:(t,s)=>s,record:G([])},n$=(t,s,c,i,d)=>{const g=ht(i,{shared:{interpreter:p=>oR(t,p,c,g,d)}});return oR(t,s,c,g,d)},oR=(t,s,c,i,d)=>on(e$,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),g=>g(t,s,c,i,d)),o$=(t,s,c,i)=>oR(t$,t,s,c,i),Nw={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},uj=(t,s,c)=>{const d={maxHeightFunction:Xg()},g=()=>({type:"node",root:Vl(oc(t())),node:k.from(t()),bubble:El(12,12,Nw),layouts:{onRtl:()=>[Le],onLtr:()=>[hp]},overrides:d}),p=()=>({type:"hotspot",hotspot:s(),bubble:El(-12,12,Nw),layouts:{onRtl:()=>[xc,br,hc],onLtr:()=>[br,xc,hc]},overrides:d});return()=>c()?g():p()},dj=(t,s,c,i)=>{const g={maxHeightFunction:Xg()},p=()=>({type:"node",root:Vl(oc(s())),node:k.from(s()),bubble:El(12,12,Nw),layouts:{onRtl:()=>[Oi],onLtr:()=>[Oi]},overrides:g}),C=()=>t?{type:"node",root:Vl(oc(s())),node:k.from(s()),bubble:El(0,-ic(s()),Nw),layouts:{onRtl:()=>[Wc],onLtr:()=>[Wc]},overrides:g}:{type:"hotspot",hotspot:c(),bubble:El(0,0,Nw),layouts:{onRtl:()=>[Wc],onLtr:()=>[Wc]},overrides:g};return()=>i()?p():C()},mj=(t,s,c)=>{const i=()=>({type:"node",root:Vl(oc(t())),node:k.from(t()),layouts:{onRtl:()=>[Oi],onLtr:()=>[Oi]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[hc],onLtr:()=>[hc]}});return()=>c()?i():d()},fj=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const c=t.selection.getRng(),i=t.model.table.getSelectedCells();if(i.length>1){const d=i[0],g=i[i.length-1],p={firstCell:At.fromDom(d),lastCell:At.fromDom(g)};return k.some(p)}return k.some(Gi.range(At.fromDom(c.startContainer),c.startOffset,At.fromDom(c.endContainer),c.endOffset))}}),gj=t=>s=>({type:"node",root:t(),node:s}),hj=(t,s,c,i)=>{const d=ay(t),g=()=>At.fromDom(t.getBody()),p=()=>At.fromDom(t.getContentAreaContainer()),C=()=>d||!i();return{inlineDialog:uj(p,s,C),inlineBottomDialog:dj(t.inline,p,c,C),banner:mj(p,s,C),cursor:fj(t,g),node:gj(g)}},pj=t=>(s,c)=>{F8(t)(s,c)},VY=t=>()=>fA(t),bj=t=>s=>dA(t,s),s$=t=>s=>A8(t,s),r$=t=>({colorPicker:pj(t),hasCustomColors:VY(t),getColors:bj(t),getColorCols:s$(t)}),MA=t=>()=>w6(t),c$=t=>({isDraggableModal:MA(t)}),vj=t=>{const s=qt(LD(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},a$=t=>yo(t,"items"),i$=t=>yo(t,"format"),l$=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],yj=t=>So(t,"items"),Cj=t=>So(t,"block"),wj=t=>So(t,"inline"),u$=t=>So(t,"selector"),sR=t=>co(t,(s,c)=>{if(yj(c)){const i=sR(c.items);return{customFormats:s.customFormats.concat(i.customFormats),formats:s.formats.concat([{title:c.title,items:i.formats}])}}else if(wj(c)||Cj(c)||u$(c)){const d=`custom-${Nt(c.name)?c.name:c.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:c}]),formats:s.formats.concat([{title:c.title,format:d,icon:c.icon}])}}else return{...s,formats:s.formats.concat(c)}},{customFormats:[],formats:[]}),Sj=(t,s)=>{const c=sR(s),i=d=>{Ve(d,g=>{t.formatter.has(g.name)||t.formatter.register(g.name,g.format)})};return t.formatter?i(c.customFormats):t.on("init",()=>{i(c.customFormats)}),c.formats},rR=t=>r6(t).map(s=>{const c=Sj(t,s);return c6(t)?l$.concat(c):c}).getOr(l$),xj=t=>{const s=zn(t);return s.length===1&&Je(s,"title")},d$=(t,s,c)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:c(t.format)}),m$=(t,s,c,i)=>{const d=S=>d$(S,c,i),g=S=>{const E=C(S.items);return{...S,type:"submenu",getStyleItems:G(E)}},p=S=>{const E=Nt(S.name)?S.name:nt(S.title),O=`custom-${E}`,B={...S,type:"formatter",format:O,isSelected:c(O),getStylePreview:i(O)};return t.formatter.register(E,B),B},C=S=>Ae(S,E=>a$(E)?g(E):i$(E)?d(E):xj(E)?{...E,type:"separator"}:p(E));return C(s)},rb=t=>{const s=C=>()=>t.formatter.match(C),c=C=>()=>{const S=t.formatter.get(C);return S!==void 0?k.some({tag:S.length>0&&(S[0].inline||S[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(C))}):k.none()},i=qt([]),d=qt([]),g=qt(!1);return t.on("PreInit",C=>{const S=rR(t),E=m$(t,S,s,c);i.set(E)}),t.on("addStyleModifications",C=>{const S=m$(t,C.items,s,c);d.set(S),g.set(C.replace)}),{getData:()=>{const C=g.get()?[]:i.get(),S=d.get();return C.concat(S)}}},f$=t=>{let i=0;const d=()=>i>0,g=C=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[nr(C.tooltipText)]}];return{getConfig:C=>({delayForShow:()=>d()?60:300,delayForHide:G(300),exclusive:!0,lazySink:t,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:g(C),onShow:(S,E)=>{i++,C.onShow&&C.onShow(S,E)},onHide:(S,E)=>{i--,C.onHide&&C.onHide(S,E)},onSetup:C.onSetup}),getComponents:g}},Pw=t=>qn(t)&&t.nodeType===1,FA=Mh.trim,cR=t=>s=>!!(Pw(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),g$=cR("true"),h$=cR("false"),Ej=(t,s,c,i,d)=>({type:t,title:s,url:c,level:i,attach:d}),Tj=t=>{let s=t;for(;s=s.parentNode;){const c=s.contentEditable;if(c&&c!=="inherit")return g$(s)}return!1},Aj=(t,s)=>Ae(_c(At.fromDom(s),t),c=>c.dom),p$=t=>t.innerText||t.textContent,kj=t=>t.id?t.id:nt("h"),Dj=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,Oj=t=>Dj(t)&&Dy(t),cb=t=>t&&/^(H[1-6])$/.test(t.nodeName),Dy=t=>Tj(t)&&!h$(t),aR=t=>cb(t)&&Dy(t),_j=t=>cb(t)?parseInt(t.nodeName.substr(1),10):0,Rj=t=>{const s=kj(t),c=()=>{t.id=s};return Ej("header",p$(t)??"","#"+s,_j(t),c)},iR=t=>{const s=t.id||t.name,c=p$(t);return Ej("anchor",c||"#"+s,"#"+s,0,re)},Bj=t=>Ae(jn(t,aR),Rj),$w=t=>Ae(jn(t,Oj),iR),b$=t=>Aj("h1,h2,h3,h4,h5,h6,a:not([href])",t),Mj=t=>FA(t.title).length>0,Fj={find:t=>{const s=b$(t);return jn(Bj(s).concat($w(s)),Mj)}},NA="tinymce-url-history",v$=5,y$=t=>Nt(t)&&/^https?/.test(t),C$=t=>ts(t)&&t.length<=v$&&Dt(t,y$),lR=t=>vn(t)&&Os(t,s=>!C$(s)).isNone(),PA=()=>{const t=Q0.getItem(NA);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(c){if(c instanceof SyntaxError)return console.log("Local storage "+NA+" was not valid JSON",c),{};throw c}return lR(s)?s:(console.log("Local storage "+NA+" was not valid format",s),{})},Nj=t=>{if(!lR(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));Q0.setItem(NA,JSON.stringify(t))},$A=t=>{const s=PA();return on(s,t).getOr([])},IA=(t,s)=>{if(!y$(t))return;const c=PA(),i=on(c,s).getOr([]),d=jn(i,g=>g!==t);c[s]=[t].concat(d).slice(0,v$),Nj(c)},uR=t=>!!t,Pj=t=>mo(Mh.makeMap(t,/[, ]/),uR),dR=t=>k.from(g6(t)),$j=t=>{const s=k.from(b6(t)).filter(uR).map(Pj);return dR(t).fold(qe,c=>s.fold(rt,i=>zn(i).length>0?i:!1))},Ij=(t,s)=>{const c=$j(t);return cn(c)?c?dR(t):k.none():c[s]?dR(t):k.none()},mR=(t,s)=>Ij(t,s).map(c=>i=>lo.nu(d=>{const g=(C,S)=>{if(!Nt(C))throw new Error("Expected value to be string");if(S!==void 0&&!vn(S))throw new Error("Expected meta to be a object");d({value:C,meta:S})},p={filetype:s,fieldname:i.fieldname,...k.from(i.meta).getOr({})};c.call(t,g,i.value,p)})),w$=t=>k.from(t).filter(Nt).getOrUndefined(),fR=t=>v6(t)?k.some({targets:Fj.find(t.getBody()),anchorTop:w$(y6(t)),anchorBottom:w$(C6(t))}):k.none(),Lj=t=>k.from(h6(t)),gR=t=>({getHistory:$A,addToHistory:IA,getLinkInformation:()=>fR(t),getValidationHandler:()=>Lj(t),getUrlPicker:s=>mR(t,s)}),Hj=(t,s,c,i)=>{const d=qt(!1),g=vj(s),p={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:$a.translate,isDisabled:()=>!s.ui.isEnabled(),getOption:s.options.get,tooltips:f$(t.dialog),checkUiComponentContext:X=>{if(Bd(s))return{contextType:"disabled",shouldDisable:!0};const[he,we=""]=X.split(":"),Me=s.ui.registry.getAll().contexts,Fe=on(Me,he).fold(()=>on(Me,"mode").map(Mt=>Mt("design")).getOr(!1),Mt=>we.charAt(0)==="!"?!Mt(we.slice(1)):Mt(we));return{contextType:he,shouldDisable:!Fe}}},C=gR(s),S=rb(s),E=r$(s),O=c$(s),B=()=>d.get(),I=X=>d.set(X),U={shared:{providers:p,anchors:hj(s,c,i,g.isPositionedAtTop),header:g},urlinput:C,styles:S,colorinput:E,dialog:O,isContextMenuOpen:B,setContextMenuState:I},j=X=>k.none(),Q={...U,shared:{...U.shared,interpreter:X=>o$(X,{},Q,j),getSink:t.popup}},ie={...U,shared:{...U.shared,interpreter:X=>o$(X,{},ie,j),getSink:t.dialog}};return{popup:Q,dialog:ie}},zj={skipFocus:"ToggleToolbarDrawer skipFocus is deprecated see migration guide: https://www.tiny.cloud/docs/tinymce/latest/migration-from-7x/"},Vj=t=>{console.warn(zj[t],new Error().stack)},Uj=(t,s,c)=>{const i=(gt,_n)=>{Ve([s,...c],hn=>{hn.broadcastEvent(gt,_n)})},d=(gt,_n)=>{Ve([s,...c],hn=>{hn.broadcastOn([gt],_n)})},g=gt=>d(nf(),{target:gt.target}),p=gt=>{d(G1(),{closedTooltip:()=>{gt.preventDefault()}})},C=Ic(),S=Es(C,"touchstart",g),E=Es(C,"touchmove",gt=>i(k2(),gt)),O=Es(C,"touchend",gt=>i(CS(),gt)),B=Es(C,"mousedown",g),I=Es(C,"mouseup",gt=>{gt.raw.button===0&&d(lm(),{target:gt.target})}),U=gt=>d(nf(),{target:At.fromDom(gt.target)}),j=gt=>{gt.button===0&&d(lm(),{target:At.fromDom(gt.target)})},Q=()=>{Ve(t.editorManager.get(),gt=>{t!==gt&&gt.dispatch("DismissPopups",{relatedTarget:t})})},ie=gt=>i(Ug(),Ua(gt)),X=gt=>{d(Ba(),{}),i(Wg(),Ua(gt))},he=oc(At.fromDom(t.getElement())),we=Vi(he,"scroll",gt=>{requestAnimationFrame(()=>{const _n=t.getContainer();if(_n!=null){const $o=zp(t,s.element).map(In=>[In.element,...In.others]).getOr([]);Bt($o,In=>Jo(In,gt.target))&&(t.dispatch("ElementScroll",{target:gt.target.dom}),i(SS(),gt))}})}),Me=()=>d(Ba(),{}),Fe=gt=>{gt.state&&d(nf(),{target:At.fromDom(t.getContainer())})},Mt=gt=>{d(nf(),{target:At.fromDom(gt.relatedTarget.getContainer())})},at=gt=>t.dispatch("focusin",gt),vt=gt=>t.dispatch("focusout",gt);t.on("PostRender",()=>{t.on("click",U),t.on("tap",U),t.on("mouseup",j),t.on("mousedown",Q),t.on("ScrollWindow",ie),t.on("ResizeWindow",X),t.on("ResizeEditor",Me),t.on("AfterProgressState",Fe),t.on("DismissPopups",Mt),t.on("CloseActiveTooltips",p),Ve([s,...c],gt=>{gt.element.dom.addEventListener("focusin",at),gt.element.dom.addEventListener("focusout",vt)})}),t.on("remove",()=>{t.off("click",U),t.off("tap",U),t.off("mouseup",j),t.off("mousedown",Q),t.off("ScrollWindow",ie),t.off("ResizeWindow",X),t.off("ResizeEditor",Me),t.off("AfterProgressState",Fe),t.off("DismissPopups",Mt),t.off("CloseActiveTooltips",p),Ve([s,...c],gt=>{gt.element.dom.removeEventListener("focusin",at),gt.element.dom.removeEventListener("focusout",vt)}),B.unbind(),S.unbind(),E.unbind(),O.unbind(),I.unbind(),we.unbind()}),t.on("detach",()=>{Ve([s,...c],Gx),Ve([s,...c],gt=>gt.destroy())})},ZY=re,jY=qe,hR=G([]);var Wj=Object.freeze({__proto__:null,setup:ZY,isDocked:jY,getBehaviours:hR});const LA=G(nt("toolbar-height-change")),cg={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},S$="tox-tinymce--toolbar-sticky-on",x$="tox-tinymce--toolbar-sticky-off",Zj=(t,s)=>{const c=ni(s),d=yg(s).dom.innerHeight,g=$r(c),p=At.fromDom(t.elm),C=fd(p),S=ac(p),E=C.y,O=E+S,B=fa(s),I=ac(s),U=B.top,j=U+I,Q=Math.abs(U-g.top)<2,ie=Math.abs(j-(g.top+d))<2;if(Q&&E<j)ud(g.left,E-I,c);else if(ie&&O>U){const X=E-d+S+I;ud(g.left,X,c)}},HA=(t,s)=>Je(Mr.getModes(t),s),zA=t=>{const s=i=>ic(i)+(parseInt(lr(i,"margin-top"),10)||0)+(parseInt(lr(i,"margin-bottom"),10)||0),c=t.element;bu(c).each(i=>{const d="padding-"+Mr.getModes(t)[0];if(Mr.isDocked(t)){const g=ta(i);Vn(c,"width",g+"px"),Vn(i,d,s(c)+"px")}else Ro(c,"width"),Ro(i,d)})},E$=(t,s)=>{s?(Tr(t,cg.fadeOutClass),Eu(t,[cg.transitionClass,cg.fadeInClass])):(Tr(t,cg.fadeInClass),Eu(t,[cg.fadeOutClass,cg.transitionClass]))},T$=(t,s)=>{const c=At.fromDom(t.getContainer());s?(Ps(c,S$),Tr(c,x$)):(Ps(c,x$),Tr(c,S$))},jj=(t,s)=>{const c=ni(s);Dc(c).filter(i=>!Jo(s,i)).filter(i=>Jo(i,At.fromDom(c.dom.body))||ua(t,i)).each(()=>kc(s))},GY=(t,s)=>Kr(t).orThunk(()=>s().toOptional().bind(c=>Kr(c.element))),qY=(t,s,c)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{c().each(Mr.reset)}),t.on("ResizeWindow ResizeEditor",()=>{c().each(zA)}),t.on("SkinLoaded",()=>{c().each(i=>{Mr.isDocked(i)?Mr.reset(i):Mr.refresh(i)})}),t.on("FullscreenStateChanged",()=>{c().each(Mr.reset)})),t.on("AfterScrollIntoView",i=>{c().each(d=>{Mr.refresh(d);const g=d.element;id(g)&&Zj(i,g)})}),t.on("PostRender",()=>{T$(t,!1)})},A$=t=>t().map(Mr.isDocked).getOr(!1),k$=()=>[su.config({channels:{[LA()]:{onReceive:zA}}})],D$=(t,s)=>{const c=Ln(),i=s.getSink,d=C=>{i().each(S=>C(S.element))},g=C=>{t.inline||zA(C),T$(t,Mr.isDocked(C)),C.getSystem().broadcastOn([Ba()],{}),i().each(S=>S.getSystem().broadcastOn([Ba()],{}))},p=t.inline?[]:k$();return[to.config({}),Mr.config({contextual:{lazyContext:C=>{const S=ic(C.element),E=t.inline?t.getContentAreaContainer():t.getContainer();return k.from(E).map(O=>{const B=mc(At.fromDom(O));return zp(t,C.element).fold(()=>{const U=B.height-S,j=B.y+(HA(C,"top")?0:S);return wc(B.x,j,B.width,U)},U=>{const j=ep(B,B0(U)),Q=HA(C,"top")?j.y:j.y+S;return wc(j.x,Q,j.width,j.height-S)})})},onShow:()=>{d(C=>E$(C,!0))},onShown:C=>{d(S=>ha(S,[cg.transitionClass,cg.fadeInClass])),c.get().each(S=>{jj(C.element,S),c.clear()})},onHide:C=>{GY(C.element,i).fold(c.clear,c.set),d(S=>E$(S,!1))},onHidden:()=>{d(C=>ha(C,[cg.transitionClass]))},...cg},lazyViewport:C=>zp(t,C.element).fold(()=>{const E=Za(),O=m6(t),B=E.y+(HA(C,"top")&&!ow(t)?O:0),I=E.height-(HA(C,"bottom")?O:0);return{bounds:wc(E.x,B,E.width,I),optScrollEnv:k.none()}},E=>({bounds:B0(E),optScrollEnv:k.some({currentScrollTop:E.element.dom.scrollTop,scrollElmTop:fa(E.element).top})})),modes:[s.header.getDockingMode()],onDocked:g,onUndocked:g}),...p]};var Gj=Object.freeze({__proto__:null,setup:qY,isDocked:A$,getBehaviours:D$});const Yu=t=>{const s=t.editor,c=t.sticky?D$:hR;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:Et(c(s,t.sharedBackstage))}};var VA=Wu({factory:(t,s)=>{const c=(d,g)=>{const p=Ae(g,C=>{const S={type:"menubutton",text:C.text,fetch:O=>{O(C.getItems())},context:"any"},E=EN(S).mapError(O=>Bf(O)).getOrDie();return Ay(E,"tox-mbtn",s.backstage,k.some("menuitem"))});so.set(d,p)},i={focus:Sn.focusIn,setMenus:c};return{uid:t.uid,dom:t.dom,components:[],behaviours:Et([so.config({}),Qn("menubar-events",[ur(d=>{t.onSetup(d)}),We(Ou(),(d,g)=>{As(d.element,".tox-mbtn--active").each(p=>{ga(g.event.target,".tox-mbtn").each(C=>{Jo(p,C)||d.getSystem().getByDom(p).each(S=>{d.getSystem().getByDom(C).each(E=>{al.expand(E),al.close(S),to.focus(E)})})})})}),We(D1(),(d,g)=>{g.event.prevFocus.bind(p=>d.getSystem().getByDom(p).toOptional()).each(p=>{g.event.newFocus.bind(C=>d.getSystem().getByDom(C).toOptional()).each(C=>{al.isOpen(p)&&(al.expand(C),al.close(p))})})})]),Sn.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(t.onEscape(d),k.some(!0))}),or.config({})]),apis:i,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[ct("dom"),ct("uid"),ct("onEscape"),ct("backstage"),Re("onSetup",re)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,c)=>{t.setMenus(s,c)}}});const O$="💝 Get all features",qj="https://www.tiny.cloud/tinymce-upgrade-to-cloud/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",Iw=t=>{const s=t.promotionLink?[{dom:{tag:"a",attributes:{href:qj,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:O$}}]:[];return{uid:t.uid,dom:t.dom,components:s}},Kj=t=>{const{sidebars:s}=t.ui.registry.getAll();Ve(zn(s),c=>{const i=s[c],d=()=>An(k.from(t.queryCommandValue("ToggleSidebar")),c);t.ui.registry.addToggleButton(c,{icon:i.icon,tooltip:i.tooltip,onAction:g=>{t.execCommand("ToggleSidebar",!1,c),g.setActive(d())},onSetup:g=>{g.setActive(d());const p=()=>g.setActive(d());return t.on("ToggleSidebar",p),()=>{t.off("ToggleSidebar",p)}},context:"any"})})},UA=t=>({element:()=>t.element.dom}),Yj=(t,s)=>{const c=Ae(zn(s),i=>{const d=s[i],g=ku(UO(d));return{name:i,getApi:UA,onSetup:g.onSetup,onShow:g.onShow,onHide:g.onHide}});return Ae(c,i=>{const d=qt(re);return t.slot(i.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:by.unnamedEvents([lf(i,d),q0(i,d),We(O1(),(g,p)=>{const C=p.event;De(c,E=>E.name===C.name).each(E=>{(C.visible?E.onShow:E.onHide)(E.getApi(g))})})])})})},WA=t=>Ja.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:Yj(s,t),slotBehaviours:by.unnamedEvents([ur(c=>Ja.hideAllSlots(c))])})),Xj=(t,s,c)=>{ut.getCurrent(t).each(d=>{so.set(d,[WA(s)]);const g=c==null?void 0:c.toLowerCase();Nt(g)&&So(s,g)&&ut.getCurrent(d).each(p=>{Ja.showSlot(p,g),Zc.immediateGrow(d),Ro(d.element,"width"),ZA(t.element,"region")})})},ZA=(t,s)=>{$n(t,"role",s)},$d=(t,s)=>{ut.getCurrent(t).each(i=>{ut.getCurrent(i).each(g=>{Zc.hasGrown(i)?Ja.isShowing(g,s)?(Zc.shrink(i),ZA(t.element,"presentation")):(Ja.hideAllSlots(g),Ja.showSlot(g,s),ZA(t.element,"region")):(Ja.hideAllSlots(g),Ja.showSlot(g,s),Zc.grow(i),ZA(t.element,"region"))})})},Jj=t=>ut.getCurrent(t).bind(c=>Zc.isGrowing(c)||Zc.hasGrown(c)?ut.getCurrent(c).bind(g=>De(Ja.getSlotNames(g),p=>Ja.isShowing(g,p))):k.none()),Oy=nt("FixSizeEvent"),jA=nt("AutoSizeEvent"),_$=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Et([or.config({}),to.config({}),Zc.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{ut.getCurrent(s).each(Ja.hideAllSlots),Do(s,jA)},onGrown:s=>{Do(s,jA)},onStartGrow:s=>{On(s,Oy,{width:fr(s.element,"width").getOr("")})},onStartShrink:s=>{On(s,Oy,{width:ta(s.element)+"px"})}}),so.config({}),ut.config({find:s=>{const c=so.contents(s);return Xt(c)}})])}],behaviours:Et([Rm.childAt(0),Qn("sidebar-sliding-events",[We(Oy,(s,c)=>{Vn(s.element,"width",c.event.width)}),We(jA,(s,c)=>{Ro(s.element,"width")})])])}),Qj=t=>(s,c)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:Eh('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),pR=t=>ut.getCurrent(t).each(s=>kc(s.element,!0)),eG=(t,s)=>{const c="tabindex",i=`data-mce-${c}`;k.from(t.iframeElement).map(At.fromDom).each(d=>{s?(Lc(d,c).each(g=>$n(d,i,g)),$n(d,c,-1)):(ir(d,c),Lc(d,i).each(g=>{$n(d,c,g),ir(d,i)}))})},tG=(t,s,c,i)=>{const d=s.element;if(eG(t,c),c)ke.block(s,Qj(i)),Ro(d,"display"),ir(d,"aria-hidden"),t.hasFocus()&&pR(s);else{const g=ut.getCurrent(s).exists(p=>hl(p.element));ke.unblock(s),Vn(d,"display","none"),$n(d,"aria-hidden","true"),g&&t.focus()}},nG=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Et([so.config({}),ke.config({focus:!1}),ut.config({find:s=>Xt(s.components())})]),components:[]}),oG=t=>t.type==="focusin",sG=t=>oG(t)?(t.composed?Xt(t.composedPath()):k.from(t.target)).map(At.fromDom).filter(ti).exists(c=>Xr(c,"mce-pastebin")):!1,rG=(t,s,c)=>{const i=qt(!1),d=Ln(),g=C=>{i.get()&&!sG(C)&&(C.preventDefault(),pR(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",g),t.on("BeforeExecCommand",C=>{C.command.toLowerCase()==="mcefocus"&&C.value!==!0&&g(C)})});const p=C=>{C!==i.get()&&(i.set(C),tG(t,s(),C,c.providers),v8(t,C))};t.on("ProgressState",C=>{if(d.on(clearTimeout),Fo(C.time)){const S=BT.setEditorTimeout(t,()=>p(C.state),C.time);d.set(S)}else p(C.state),d.clear()})},R$=t=>{const s=t.label.isNone()?t.title.fold(()=>({}),c=>({attributes:{"aria-label":c}})):t.label.fold(()=>({}),c=>({attributes:{"aria-label":c}}));return{dom:{tag:"div",classes:["tox-toolbar__group"].concat(t.label.isSome()?["tox-toolbar__group_with_label"]:[]),...s},components:[...t.label.map(c=>({dom:{tag:"span",classes:["tox-label","tox-label--context-toolbar"]},components:[nr(c)]})).toArray(),XC.parts.items({})],items:t.items,markers:{itemSelector:".tox-tbtn:not([disabled]), .tox-toolbar-nav-item:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:Et([or.config({}),to.config({ignore:!0})])}},Lw=t=>XC.sketch(R$(t)),bR=(t,s)=>{const c=ur(i=>{const d=Ae(t.initGroups,Lw);Pa.setGroups(i,d)});return Et([_m.toolbarButton(()=>t.providers.checkUiComponentContext("any").shouldDisable),Ec(()=>t.providers.checkUiComponentContext("any")),Sn.config({mode:s,onEscape:t.onEscape,visibilitySelector:".tox-toolbar__overflow",selector:".tox-toolbar__group"}),Qn("toolbar-events",[c])])},vR=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":R$({title:k.none(),label:k.none(),items:[]}),"overflow-button":zP({context:"any",icon:k.some("more-drawer"),enabled:!0,tooltip:k.some("Reveal or hide additional toolbar items")},k.none(),t.providers,[],"overflow-button")},splitToolbarBehaviours:bR(t,s)}},cG=t=>{const s=vR(t),c=4,i=QF.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return QF.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const d=t.moreDrawerData.lazyHeader().element,g=fd(d),p=r1(d),C=fd(p),S=Math.max(p.dom.scrollHeight,C.height);return wc(g.x+c,C.y,g.width-c*2,S)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[i],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>t.onToggled(d,!0),onClosed:d=>t.onToggled(d,!1)})},B$=t=>{const s=AT.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),c=AT.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),i=vR(t);return AT.sketch({...i,components:[s,c],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([LA()],{type:"opened"}),t.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([LA()],{type:"closed"}),t.onToggled(d,!1)}})},GA=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return Pa.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===Zu.scrolling?["tox-toolbar--scrolling"]:[])},components:[Pa.parts.groups({})],toolbarBehaviours:bR(t,s)})},aG=(t,s)=>{const c=t.type==="togglebutton",i=t.icon.map(X=>mf(X,s.icons)).map(Ss),g=X=>{const he=Mt=>{i.map(at=>at.getOpt(X).each(vt=>{so.set(vt,[mf(Mt,s.icons)])}))},we=Mt=>{const at=X.element;Mt?(Ps(at,"tox-button--enabled"),$n(at,"aria-pressed",!0)):(Tr(at,"tox-button--enabled"),ir(at,"aria-pressed"))},Me=()=>Xr(X.element,"tox-button--enabled"),Fe=()=>kc(X.element);if(c)return t.onAction({setIcon:he,setActive:we,isActive:Me,focus:Fe});if(t.type==="button")return t.onAction({setIcon:he})},p={...t,name:c?t.text.getOr(t.icon.getOr("")):t.text??t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:k.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},C=Y_(t.buttonType??"secondary"),S=c?t.text.map(s.translate):k.some(s.translate(t.text)),E=S.map(nr),O=p.tooltip.or(S).map(X=>({"aria-label":s.translate(X)})).getOr({}),B=i.map(X=>X.asSpec()),I=vy([B,E]),U=t.icon.isSome()&&E.isSome(),j={tag:"button",classes:C.concat(...t.icon.isSome()&&!U?["tox-button--icon"]:[]).concat(...U?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:O},Q=[],ie=Fw(p,k.some(g),Q,j,I,t.tooltip,s);return Na.sketch(ie)},yR=(t,s)=>aG(t,s),M$=(t,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:Ae(t.buttons,c=>yR(c,s))}),CR=Ur().deviceType,iG=CR.isPhone(),lG=CR.isTablet(),uG=t=>{let s=!1;const c=Ae(t.buttons,i=>i.type==="group"?(s=!0,M$(i,t.providers)):yR(i,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...iG||lG?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:Et([to.config({}),Sn.config({mode:"flow",selector:"button, .tox-button",focusInside:Fu.OnEnterOrSpaceMode})]),components:s?c:[af.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),af.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:c})]}},F$=t=>({uid:t.uid,behaviours:Et([to.config({}),or.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}}),dG=(t,s,c,i)=>{const d={getPane:g=>jc.getPart(g,t,"pane"),getOnShow:g=>t.viewConfig.onShow,getOnHide:g=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,behaviours:Et([to.config({}),Sn.config({mode:"cyclic",focusInside:Fu.OnEnterOrSpaceMode})]),apis:d}};var _y=rl({name:"silver.View",configFields:[ct("viewConfig")],partFields:[Qi({factory:{sketch:uG},schema:[ct("buttons"),ct("providers")],name:"header"}),Qi({factory:{sketch:F$},schema:[],name:"pane"})],factory:dG,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const mG=(t,s,c)=>Xo(s,(i,d)=>{const g=ku(AW(i));return t.slot(d,_y.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:g,components:[...g.buttons.length>0?[_y.parts.header({buttons:g.buttons,providers:c})]:[],_y.parts.pane({})]}))}),fG=(t,s)=>Ja.sketch(c=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:mG(c,t,s),slotBehaviours:by.unnamedEvents([ur(i=>Ja.hideAllSlots(i))])})),N$=t=>De(Ja.getSlotNames(t),s=>Ja.isShowing(t,s)),gG=t=>{const s=t.element;Vn(s,"display","none"),$n(s,"aria-hidden","true")},hG=t=>{const s=t.element;Ro(s,"display"),ir(s,"aria-hidden")},pG=t=>({getContainer:G(t)}),P$=(t,s,c)=>{Ja.getSlot(t,s).each(i=>{_y.getPane(i).each(d=>{c(i)(pG(d.element.dom))})})},bG=(t,s)=>P$(t,s,_y.getOnShow),wR=(t,s)=>P$(t,s,_y.getOnHide);var qA=Wu({factory:(t,s)=>{const g={setViews:(p,C)=>{so.set(p,[fG(C,s.backstage.shared.providers)])},whichView:p=>ut.getCurrent(p).bind(N$),toggleView:(p,C,S,E)=>ut.getCurrent(p).exists(O=>{const B=N$(O),I=B.exists(j=>E===j),U=Ja.getSlot(O,E).isSome();return U&&(Ja.hideAllSlots(O),I?(gG(p),C()):(S(),hG(p),Ja.showSlot(O,E),bG(O,E)),B.each(j=>wR(O,j))),U})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:Et([so.config({}),ut.config({find:p=>{const C=so.contents(p);return Xt(C)}})]),apis:g}},name:"silver.ViewWrapper",configFields:[ct("backstage")],apis:{setViews:(t,s,c)=>t.setViews(s,c),toggleView:(t,s,c,i,d)=>t.toggleView(s,c,i,d),whichView:(t,s)=>t.whichView(s)}});const $$=(t,s,c)=>{let i=!1;const d=p=>{n2(p,".tox-statusbar").each(C=>{lr(C,"display")==="none"&&Cc(C,"aria-hidden")==="true"?(Ro(C,"display"),ir(C,"aria-hidden")):(Vn(C,"display","none"),$n(C,"aria-hidden","true"))})},g={getSocket:p=>jc.getPart(p,t,"socket"),setSidebar:(p,C,S)=>{jc.getPart(p,t,"sidebar").each(E=>Xj(E,C,S))},toggleSidebar:(p,C)=>{jc.getPart(p,t,"sidebar").each(S=>$d(S,C))},whichSidebar:p=>jc.getPart(p,t,"sidebar").bind(Jj).getOrNull(),getHeader:p=>jc.getPart(p,t,"header"),getToolbar:p=>jc.getPart(p,t,"toolbar"),setToolbar:(p,C)=>{jc.getPart(p,t,"toolbar").each(S=>{const E=Ae(C,Lw);S.getApis().setGroups(S,E)})},setToolbars:(p,C)=>{jc.getPart(p,t,"multiple-toolbar").each(S=>{const E=Ae(C,O=>Ae(O,Lw));LM.setItems(S,E)})},refreshToolbar:p=>{jc.getPart(p,t,"toolbar").each(S=>S.getApis().refresh(S))},toggleToolbarDrawer:p=>{jc.getPart(p,t,"toolbar").each(C=>{qs(C.getApis().toggle,S=>S(C))})},toggleToolbarDrawerWithoutFocusing:p=>{jc.getPart(p,t,"toolbar").each(C=>{qs(C.getApis().toggleWithoutFocusing,S=>S(C))})},isToolbarDrawerToggled:p=>jc.getPart(p,t,"toolbar").bind(C=>k.from(C.getApis().isOpen).map(S=>S(C))).getOr(!1),getThrobber:p=>jc.getPart(p,t,"throbber"),focusToolbar:p=>{jc.getPart(p,t,"toolbar").orThunk(()=>jc.getPart(p,t,"multiple-toolbar")).each(S=>{Sn.focusIn(S)})},setMenubar:(p,C)=>{jc.getPart(p,t,"menubar").each(S=>{VA.setMenus(S,C)})},focusMenubar:p=>{jc.getPart(p,t,"menubar").each(C=>{VA.focus(C)})},setViews:(p,C)=>{jc.getPart(p,t,"viewWrapper").each(S=>{qA.setViews(S,C)})},toggleView:(p,C)=>jc.getPart(p,t,"viewWrapper").exists(S=>qA.toggleView(S,()=>g.showMainView(p),()=>g.hideMainView(p),C)),whichView:p=>jc.getPart(p,t,"viewWrapper").bind(qA.whichView).getOrNull(),hideMainView:p=>{i=g.isToolbarDrawerToggled(p),i&&g.toggleToolbarDrawer(p),jc.getPart(p,t,"editorContainer").each(C=>{const S=C.element;d(S),Vn(S,"display","none"),$n(S,"aria-hidden","true")})},showMainView:p=>{i&&g.toggleToolbarDrawer(p),jc.getPart(p,t,"editorContainer").each(C=>{const S=C.element;d(S),Ro(S,"display"),ir(S,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:s,apis:g,behaviours:t.behaviours}},I$=kl.optional({factory:VA,name:"menubar",schema:[ct("backstage")]}),vG=t=>t.type===Zu.sliding?B$:t.type===Zu.floating?cG:GA,yG=kl.optional({factory:{sketch:t=>LM.sketch({uid:t.uid,dom:t.dom,listBehaviours:Et([Sn.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>GA({type:t.type,uid:nt("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),k.some(!0))}),setupItem:(s,c,i,d)=>{Pa.setGroups(c,i)},shell:!0})},name:"multiple-toolbar",schema:[ct("dom"),ct("onEscape")]}),CG=kl.optional({factory:{sketch:t=>{const s=vG(t),c={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),k.some(!0)),onToggled:(i,d)=>t.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(c)}},name:"toolbar",schema:[ct("dom"),ct("onEscape"),ct("getSink")]}),wG=kl.optional({factory:{sketch:Yu},name:"header",schema:[ct("dom")]}),SG=kl.optional({factory:{sketch:Iw},name:"promotion",schema:[ct("dom"),ct("promotionLink")]}),xG=kl.optional({name:"socket",schema:[ct("dom")]}),L$=kl.optional({factory:{sketch:_$},name:"sidebar",schema:[ct("dom")]}),KA=kl.optional({factory:{sketch:nG},name:"throbber",schema:[ct("dom")]}),SR=kl.optional({factory:qA,name:"viewWrapper",schema:[ct("backstage")]}),EG=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),TG=kl.optional({factory:{sketch:EG},name:"editorContainer",schema:[]});var Gs=rl({name:"OuterContainer",factory:$$,configFields:[ct("dom"),ct("behaviours")],partFields:[wG,I$,CG,yG,xG,L$,SG,KA,SR,TG],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,c,i)=>{t.setSidebar(s,c,i)},toggleSidebar:(t,s,c)=>{t.toggleSidebar(s,c)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,c)=>{t.setToolbar(s,c)},setToolbars:(t,s,c)=>{t.setToolbars(s,c)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(t,s)=>{t.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,c)=>{t.setMenubar(s,c)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,c)=>{t.setViews(s,c)},toggleView:(t,s,c)=>t.toggleView(s,c),whichView:(t,s)=>t.whichView(s)}});const AG="file edit view insert format tools table help",H$={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code suggestededits revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image video link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},kG=(t,s,c)=>{const i=l6(c).split(/[ ,]/);return{text:t.title,getItems:()=>te(t.items,d=>{const g=d.toLowerCase();return g.trim().length===0?[]:Bt(i,p=>p===g)?[]:g==="separator"||g==="|"?[{type:"separator"}]:s.menuItems[g]?[s.menuItems[g]]:[]})}},YA=t=>t.split(" "),z$=(t,s)=>{const c={...H$,...s.menus},i=zn(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?YA(AG):YA(s.menubar===!1?"":s.menubar),g=jn(d,C=>{const S=So(H$,C);return i?S||on(s.menus,C).exists(E=>So(E,"items")):S}),p=Ae(g,C=>{const S=c[C];return kG({title:S.title,items:YA(S.items)},s,t)});return jn(p,C=>{const S=E=>Nt(E)||E.type!=="separator";return C.getItems().length>0&&Bt(C.getItems(),S)})},DG=t=>{const s=()=>{t._skinLoaded=!0,FW(t)};return()=>{t.initialized?s():t.on("init",s)}},xR=(t,s)=>()=>NW(t,{message:s}),OG=t=>{const s=A6(t);return s?k.from(s):k.none()},V$=(t,s,c)=>(t.on("remove",()=>c.unload(s)),c.load(s)),Hw=(t,s,c,i)=>(t.on("remove",()=>i.unloadRawCss(s)),i.loadRawCss(s,c)),_G=(t,s)=>"ui/"+t+"/"+s,U$=t=>k.from(tinymce.Resource.get(t)).filter(Nt),ER=(t,s,c="")=>{const i=OG(t).map(g=>_G(g,`${s}.css`)),d=i.bind(U$);return To(i,d,(g,p)=>({_kind:"load-raw",key:g,css:p})).getOrThunk(()=>{const g=t.editorManager.suffix;return{_kind:"load-stylesheet",url:c+`/${s}${g}.css`}})},W$=(t,s)=>{const c=t.ui.styleSheetLoader,i=ER(t,"skin",s);switch(i._kind){case"load-raw":const{key:d,css:g}=i;return Hw(t,d,g,c),Promise.resolve();case"load-stylesheet":const{url:p}=i;return V$(t,p,c);default:return Promise.resolve()}},RG=(t,s)=>{if(Ul(At.fromDom(t.getElement()))){const i=JC.DOM.styleSheetLoader,d=ER(t,"skin.shadowdom",s);switch(d._kind){case"load-raw":const{key:g,css:p}=d;return Hw(t,g,p,i),Promise.resolve();case"load-stylesheet":const{url:C}=d;return V$(t,C,i);default:return Promise.resolve()}}else return Promise.resolve()},BG=(t,s,c)=>{const d=ER(t,s?"content.inline":"content",c);switch(d._kind){case"load-raw":const{key:g,css:p}=d;return s?Hw(t,g,p,t.ui.styleSheetLoader):t.on("PostRender",()=>{Hw(t,g,p,t.dom.styleSheetLoader)}),Promise.resolve();case"load-stylesheet":const{url:C}=d;return c&&t.contentCSS.push(C),Promise.resolve();default:return Promise.resolve()}},MG=async(t,s)=>{const c=k6(s);if(await BG(s,t,c),!$D(s)&&Nt(c))return Promise.all([W$(s,c),RG(s,c)]).then()},TR=(t,s)=>MG(t,s).then(DG(s),xR(s,"Skin could not be loaded")),FG=pn(TR,!1),NG=pn(TR,!0),Z$=t=>({isEnabled:()=>!yn.isDisabled(t),setEnabled:s=>yn.set(t,!s),setText:s=>On(t,Ku,{text:s}),setIcon:s=>On(t,ob,{icon:s})}),AR=t=>({setActive:s=>{zo.set(t,s)},isActive:()=>zo.isOn(t),isEnabled:()=>!yn.isDisabled(t),setEnabled:s=>yn.set(t,!s),setText:s=>On(t,Ku,{text:s}),setIcon:s=>On(t,ob,{icon:s})}),kR=(t,s)=>t.map(c=>({"aria-label":s.translate(c)})).getOr({}),PG=nt("focus-button"),DR=(t,s,c,i,d,g,p)=>{const C=s.map(E=>Ss(OP(E,"tox-tbtn",d))),S=t.map(E=>Ss(mf(E,d.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:{...kR(c,d),...qn(p)?{"data-mce-name":p}:{}}},components:vy([S.map(E=>E.asSpec()),C.map(E=>E.asSpec())]),eventOrder:{[mi()]:["focusing","alloy.base.behaviour",Jp],[hd()]:[Jp,"toolbar-group-button-events"],[Km()]:[Jp,"toolbar-group-button-events","tooltipping"]},buttonBehaviours:Et([_m.toolbarButton(()=>d.checkUiComponentContext(g).shouldDisable),Ec(()=>d.checkUiComponentContext(g)),Qn(Jp,[ur((E,O)=>$_(E)),We(Ku,(E,O)=>{C.bind(B=>B.getOpt(E)).each(B=>{so.set(B,[nr(d.translate(O.event.text))])})}),We(ob,(E,O)=>{S.bind(B=>B.getOpt(E)).each(B=>{so.set(B,[mf(O.event.icon,d.icons)])})}),We(mi(),(E,O)=>{O.event.prevent(),Do(E,PG)})])].concat(i.getOr([])))}},$G=(t,s,c,i,d)=>{const g=s.shared,p=qt(re),C={toolbarButtonBehaviours:[],getApi:Z$,onSetup:t.onSetup},S=[Qn("toolbar-group-button-events",[lf(C,p),q0(C,p)]),...t.tooltip.map(E=>sr.config(s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(E)}))).toArray()];return Qf.sketch({lazySink:g.getSink,fetch:()=>lo.nu(E=>{E(Ae(c(t.items),Lw))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:DR(t.icon,t.text,t.tooltip,k.some(S),g.providers,t.context,d),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:i}}}})},j$=(t,s,c,i)=>{var p;const d=qt(re),g=DR(t.icon,t.text,t.tooltip,k.none(),c,t.context,i);return Na.sketch({dom:g.dom,components:g.components,eventOrder:P_,buttonBehaviours:{...Et([Qn("toolbar-button-events",[zZ({onAction:t.onAction,getApi:s.getApi}),lf(s,d),q0(s,d)]),...t.tooltip.map(C=>sr.config(c.tooltips.getConfig({tooltipText:c.translate(C)+t.shortcut.map(S=>` (${qO(S)})`).getOr("")}))).toArray(),_m.toolbarButton(()=>!t.enabled||c.checkUiComponentContext(t.context).shouldDisable),Ec(()=>c.checkUiComponentContext(t.context))].concat(s.toolbarButtonBehaviours)),[Jp]:(p=g.buttonBehaviours)==null?void 0:p[Jp]}})},IG=(t,s,c)=>OR(t,s,[],c),OR=(t,s,c,i)=>j$(t,{toolbarButtonBehaviours:c.length>0?[Qn("toolbarButtonWith",c)]:[],getApi:Z$,onSetup:t.onSetup},s,i),LG=(t,s,c)=>G$(t,s,[],c),G$=(t,s,c,i)=>j$(t,{toolbarButtonBehaviours:[so.config({}),zo.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(c.length>0?[Qn("toolbarToggleButtonWith",c)]:[]),getApi:AR,onSetup:t.onSetup},s,i),HG=(t,s,c)=>i=>lo.nu(d=>s.fetch(d)).map(d=>k.from(yA(ht(bA(nt("menu-value"),d,g=>{s.onItemAction(t(i),g)},s.columns,s.presets,Am.CLOSE_ON_EXECUTE,s.select.getOr(qe),c),{movement:Tw(s.columns,s.presets),menuBehaviours:by.unnamedEvents(s.columns!=="auto"?[]:[ur((g,p)=>{sA(g,4,$0(s.presets)).each(({numRows:C,numColumns:S})=>{Sn.setGridSize(g,C,S)})})])})))),q$=(t,s,c)=>i=>{const d=i.getSystem(),g=i.element,p=()=>{const S=Xr(g,"tox-split-button__chevron"),E=S?wi(g).bind(B=>d.getByDom(B).toOptional()):k.some(i),O=S?k.some(i):i1(g).bind(B=>d.getByDom(B).toOptional().filter(I=>Xr(I.element,"tox-split-button__chevron")));return{mainOpt:E,chevronOpt:O}},C=S=>{const{mainOpt:E,chevronOpt:O}=p();E.each(S),O.each(S)};return{isEnabled:()=>{const{mainOpt:S}=p();return S.exists(E=>!yn.isDisabled(E))},setEnabled:S=>C(E=>yn.set(E,!S)),setText:S=>{const{mainOpt:E}=p();E.each(O=>On(O,Ku,{text:S}))},setIcon:S=>{const{mainOpt:E}=p();E.each(O=>On(O,ob,{icon:S}))},setIconFill:(S,E)=>C(O=>{As(O.element,`svg path[class="${S}"], rect[class="${S}"]`).each(B=>{$n(B,"fill",E)})}),isActive:()=>{const{mainOpt:S}=p();return S.exists(E=>zo.isOn(E))},setActive:S=>{const{mainOpt:E}=p();E.each(O=>zo.set(O,S))},setTooltip:S=>{t.set(S);const{mainOpt:E,chevronOpt:O}=p();E.each(I=>$n(I.element,"aria-label",s.providers.translate(S)));const B=c.chevronTooltip.map(I=>s.providers.translate(I)).getOr(s.providers.translate(`${S} menu`));O.each(I=>$n(I.element,"aria-label",B))}}},XA=(t,s,c)=>{const i=qt(re),d=qt(t.tooltip.getOr("")),g=q$(d,s,t),p=nt("tox-split-menu"),C=qt(!1),S=()=>({"aria-haspopup":"menu","aria-expanded":String(C.get()),"aria-controls":p}),E=()=>t.tooltip.map(Q=>s.providers.translate(Q)).getOr(s.providers.translate("Text color")),O=()=>t.chevronTooltip.map(Q=>s.providers.translate(Q)).getOrThunk(()=>{const Q=E();return s.providers.translate(["{0} menu",Q])}),B=(Q,ie)=>{C.set(Q),$n(ie.element,"aria-expanded",String(Q))},I=al.sketch({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:ng("chevron-down",s.providers.icons),attributes:{"aria-label":O(),...qn(c)?{"data-mce-name":c+"-chevron"}:{},...S()}},components:[],toggleClass:"tox-tbtn--enabled",dropdownBehaviours:Et([Qn("split-dropdown-events",[ur((Q,ie)=>$_(Q)),lf({getApi:g,onSetup:t.onSetup},i),We("alloy-dropdown-open",Q=>B(!0,Q)),We("alloy-dropdown-close",Q=>B(!1,Q))]),_m.toolbarButton(()=>s.providers.checkUiComponentContext(t.context).shouldDisable),Ec(()=>s.providers.checkUiComponentContext(t.context)),ty.config({}),sr.config(s.providers.tooltips.getConfig({tooltipText:O(),onShow:Q=>{if(d.get()!==t.tooltip.getOr("")){const ie=t.chevronTooltip.map(X=>s.providers.translate(X)).getOr(`${s.providers.translate(d.get())} menu`);sr.setComponents(Q,s.providers.tooltips.getComponents({tooltipText:ie}))}}}))]),lazySink:s.getSink,fetch:HG(g,t,s.providers),getHotspot:Q=>wi(Q.element).bind(ie=>Q.getSystem().getByDom(ie).toOptional()),onOpen:(Q,ie,X)=>{hs.highlightBy(X,he=>Xr(he.element,"tox-collection__item--active")),hs.getHighlighted(X).each(Sn.focusIn)},parts:{menu:{...I0(!1,t.columns,t.presets),dom:{...I0(!1,t.columns,t.presets).dom,tag:"div",attributes:{id:p}}}}}),U=DR(t.icon,t.text,k.none(),k.some([zo.config({toggleClass:"tox-tbtn--enabled",aria:t.presets==="color"?{mode:"none"}:{mode:"pressed"},toggleOnExecute:!1}),...t.tooltip.isSome()?[sr.config(s.providers.tooltips.getConfig({tooltipText:s.providers.translate(t.tooltip.getOr("")),onShow:Q=>{if(d.get()!==t.tooltip.getOr("")){const ie=s.providers.translate(d.get());sr.setComponents(Q,s.providers.tooltips.getComponents({tooltipText:ie}))}}}))]:[]]),s.providers,t.context,c);return[Na.sketch({dom:{...U.dom,classes:["tox-tbtn","tox-split-button__main"].concat(t.text.isSome()?["tox-tbtn--select"]:[]),attributes:{"aria-label":E(),...qn(c)?{"data-mce-name":c}:{}}},components:U.components,eventOrder:U.eventOrder,buttonBehaviours:U.buttonBehaviours,action:Q=>{if(t.onAction){const ie=g(Q);ie.isEnabled()&&t.onAction(ie)}}}),I]},_R=".tox-toolbar-slider__input,.tox-toolbar-textfield",RR=t=>{Fr.getContent(t).each(s=>{As(s.element,_R).fold(()=>Sn.focusIn(s),kc)})},Qp=t=>Kr(t.element).each(s=>{vl(s,'[tabindex="-1"]').each(c=>{kc(c)})}),BR=nt("forward-slide"),JA=nt("backward-slide"),MR=nt("change-slide-event"),FR="tox-pop--resizing",zG=t=>{const s=qt([]);return{sketch:Fr.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:i=>{s.set([]),Fr.getContent(i).each(d=>{Ro(d.element,"visibility")}),Tr(i.element,FR),Ro(i.element,"width")},onHide:()=>{s.set([]),t.onHide()},inlineBehaviours:Et([Qn("context-toolbar-events",[th(xl(),(i,d)=>{d.event.raw.propertyName==="width"&&(Tr(i.element,FR),Ro(i.element,"width"))}),We(MR,(i,d)=>{const g=i.element;Ro(g,"width");const p=ta(g),C=Kr(i.element).isSome();Ro(g,"left"),Ro(g,"right"),Ro(g,"max-width"),Fr.setContent(i,d.event.contents),Ps(g,FR);const S=ta(g);Vn(g,"transition","none"),Fr.reposition(i),Ro(g,"transition"),Vn(g,"width",p+"px"),d.event.focus.fold(()=>{C&&RR(i)},E=>{Dc(oc(i.element)).fold(()=>kc(E),O=>{Jo(O,E)||t.focusElement(E)})}),setTimeout(()=>{Vn(i.element,"width",S+"px")},0)}),We(BR,(i,d)=>{Fr.getContent(i).each(g=>{s.set(s.get().concat([{bar:g,focus:Dc(oc(i.element))}]))}),On(i,MR,{contents:d.event.forwardContents,focus:k.none()})}),We(JA,(i,d)=>{t.onBack(),oo(s.get()).each(g=>{s.set(s.get().slice(0,s.get().length-1)),On(i,MR,{contents:b(g.bar),focus:g.focus})})})]),Sn.config({mode:"special",onEscape:i=>oo(s.get()).fold(()=>t.onEscape(),d=>(Do(i,JA),k.some(!0)))})]),lazySink:()=>Yt.value(t.sink)}),inSubtoolbar:()=>s.get().length>0}},VG=(t,s)=>{const c=ku(MO({type:"button",icon:"chevron-left",tooltip:"Back",onAction:re}));return OR(c,s.shared.providers,[We(Rw,i=>{Do(i,JA)})])},Ry=(t,s,c)=>Pc(c)?t.translate(s):t.translate([s,t.translate(c)]),UG=(t,s)=>{const c=(p,C,S,E)=>{const O=t.shared.providers.translate(p.title);if(p.type==="separator")return k.some({type:"separator",text:O});if(p.type==="submenu"){const B=te(p.getStyleItems(),I=>i(I,C,E));return C===0&&B.length<=0?k.none():k.some({type:"nestedmenuitem",text:O,enabled:B.length>0,getSubmenuItems:()=>te(p.getStyleItems(),I=>i(I,C,E))})}else return k.some({type:"togglemenuitem",text:O,icon:p.icon,active:p.isSelected(E),enabled:!S,onAction:s.onAction(p),...p.getStylePreview().fold(()=>({}),B=>({meta:{style:B}}))})},i=(p,C,S)=>{const E=p.type==="formatter"&&s.isInvalid(p);return C===0?E?[]:c(p,C,!1,S).toArray():c(p,C,E,S).toArray()},d=p=>{const C=s.getCurrentValue(),S=s.shouldHide?0:1;return te(p,E=>i(E,S,C))};return{validateItems:d,getFetch:(p,C)=>(S,E)=>{const O=C(),B=d(O),I=sb(B,Am.CLOSE_ON_EXECUTE,p,{isHorizontalMenu:!1,search:k.none()});E(I)}}},ab=(t,s)=>{const c=s.dataset,i=c.type==="basic"?()=>Ae(c.data,d=>d$(d,s.isSelectedFor,s.getPreviewFor)):c.getData;return{items:UG(t,s),getStyleItems:i}},zw=(t,s,c,i,d,g)=>{const{items:p,getStyleItems:C}=ab(s,c),S=qt(c.tooltip),E=B=>({getComponent:G(B),setTooltip:I=>{const U=s.shared.providers.translate(I);$n(B.element,"aria-label",U),S.set(I)}}),O=B=>{const I=U=>B.setTooltip(Ry(t,i(U.value),U.value));return t.on(d,I),uA(Yp(t,"NodeChange",U=>{const j=U.getComponent();c.updateText(j),yn.set(U.getComponent(),!t.selection.isEditable()||C().length===0)})(B),()=>t.off(d,I))};return Pd({context:"mode:design",text:c.icon.isSome()?k.none():c.text,icon:c.icon,ariaLabel:k.some(c.tooltip),tooltip:k.none(),role:k.none(),fetch:p.getFetch(s,C),onSetup:O,getApi:E,columns:1,presets:"normal",classes:c.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[sr.config({...s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(c.tooltip),onShow:B=>{if(c.tooltip!==S.get()){const I=s.shared.providers.translate(S.get());sr.setComponents(B,s.shared.providers.tooltips.getComponents({tooltipText:I}))}}})})]},"tox-tbtn",s.shared,g)},WG=t=>Ae(t,s=>{let c=s,i=s;const d=s.split("=");return d.length>1&&(c=d[0],i=d[1]),{title:c,format:i}}),NR=t=>({type:"basic",data:t});var By;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(By||(By={}));const ZG=(t,s)=>s===By.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),PR=(t,s,c)=>{const i=t.options.get(s);return{type:"basic",data:WG(ZG(i,c))}},jG="Align",K$=G("Alignment {0}"),Y$="left",QA=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],$R=t=>{const s=()=>De(QA,C=>t.formatter.match(C.format)),c=C=>()=>t.formatter.match(C),i=C=>k.none,d=C=>{const E=s().fold(G(Y$),O=>O.title.toLowerCase());On(C,ob,{icon:`align-${E}`}),u_(t,{value:E})},g=NR(QA),p=C=>()=>De(QA,S=>S.format===C.format).each(S=>t.execCommand(S.command));return{tooltip:Ry(t,K$(),Y$),text:k.none(),icon:k.some("align-left"),isSelectedFor:c,getCurrentValue:k.none,getPreviewFor:i,onAction:p,updateText:d,dataset:g,shouldHide:!1,isInvalid:C=>!t.formatter.canApply(C.format)}},X$=(t,s)=>zw(t,s,$R(t),K$,"AlignTextUpdate","align"),GG=(t,s)=>{const c=ab(s,$R(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate(jG),onSetup:Mi(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},IR=(t,s)=>{const c=s(),i=Ae(c,d=>d.format);return k.from(t.formatter.closest(i)).bind(d=>De(c,g=>g.format===d))},qG="Blocks",J$=G("Block {0}"),LR="Paragraph",HR=t=>{const s=g=>()=>t.formatter.match(g),c=g=>()=>{const p=t.formatter.get(g);return p?k.some({tag:p.length>0&&(p[0].inline||p[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(g))}):k.none()},i=g=>{const C=IR(t,()=>d.data).fold(G(LR),S=>S.title);On(g,Ku,{text:C}),zW(t,{value:C})},d=PR(t,"block_formats",By.SemiColon);return{tooltip:Ry(t,J$(),LR),text:k.some(LR),icon:k.none(),isSelectedFor:s,getCurrentValue:k.none,getPreviewFor:c,onAction:d_(t),updateText:i,dataset:d,shouldHide:!1,isInvalid:g=>!t.formatter.canApply(g.format)}},KG=(t,s)=>zw(t,s,HR(t),J$,"BlocksTextUpdate","blocks"),Q$=(t,s)=>{const c=ab(s,HR(t));t.ui.registry.addNestedMenuItem("blocks",{text:qG,onSetup:Mi(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},YG="Fonts",e7=G("Font {0}"),zR="System Font",XG=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],t7=t=>{const s=t.split(/\s*,\s*/);return Ae(s,c=>c.replace(/^['"]+|['"]+$/g,""))},n7=(t,s)=>s.length>0&&Dt(s,c=>t.indexOf(c.toLowerCase())>-1),JG=(t,s)=>{if(t.indexOf("-apple-system")===0||s.length>0){const c=t7(t.toLowerCase());return n7(c,XG)||n7(c,s)}else return!1},VR=t=>{const s=()=>{const S=j=>j?t7(j)[0]:"",E=t.queryCommandValue("FontName"),O=C.data,B=E?E.toLowerCase():"",I=T6(t);return{matchOpt:De(O,j=>{const Q=j.format;return Q.toLowerCase()===B||S(Q).toLowerCase()===S(B).toLowerCase()}).orThunk(()=>_r(JG(B,I),{title:zR,format:B})),font:E}},c=S=>E=>E.exists(O=>O.format===S),i=()=>{const{matchOpt:S}=s();return S},d=S=>()=>k.some({tag:"div",styles:S.indexOf("dings")===-1?{"font-family":S}:{}}),g=S=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,S.format)})},p=S=>{const{matchOpt:E,font:O}=s(),B=E.fold(G(O),I=>I.title);On(S,Ku,{text:B}),VW(t,{value:B})},C=PR(t,"font_family_formats",By.SemiColon);return{tooltip:Ry(t,e7(),zR),text:k.some(zR),icon:k.none(),isSelectedFor:c,getCurrentValue:i,getPreviewFor:d,onAction:g,updateText:p,dataset:C,shouldHide:!1,isInvalid:qe}},QG=(t,s)=>zw(t,s,VR(t),e7,"FontFamilyTextUpdate","fontfamily"),eq=(t,s)=>{const c=ab(s,VR(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate(YG),onSetup:Mi(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})};var e4=tinymce.util.Tools.resolve("tinymce.util.VK");const tq=(t,s,c,i)=>{let d=k.none();const g=we=>we.map(Me=>Lt.getValue(Me)).getOr(""),p=Yp(t,"NodeChange SwitchMode DisabledStateChange",we=>{const Me=we.getComponent();d=k.some(Me),c.updateInputValue(Me),yn.set(Me,!t.selection.isEditable()||Bd(t))}),C=we=>({getComponent:G(we)}),S=qt(re),E=nt("custom-number-input-events"),O=(we,Me,Fe)=>{const Mt=g(d),at=c.getNewValue(Mt,we),vt=Mt.length-`${at}`.length,gt=d.map(hn=>hn.element.dom.selectionStart-vt),_n=d.map(hn=>hn.element.dom.selectionEnd-vt);c.onAction(at,Fe),d.each(hn=>{Lt.setValue(hn,at),Me&&(gt.each($o=>hn.element.dom.selectionStart=$o),_n.each($o=>hn.element.dom.selectionEnd=$o))})},B=(we,Me)=>O((Fe,Mt)=>Fe-Mt,we,Me),I=(we,Me)=>O((Fe,Mt)=>Fe+Mt,we,Me),U=we=>bu(we.element).fold(k.none,Me=>(kc(Me),k.some(!0))),j=we=>hl(we.element)?(Io(we.element).each(Me=>kc(Me)),k.some(!0)):k.none(),Q=(we,Me,Fe,Mt)=>{const at=qt(re),vt=s.shared.providers.translate(Fe),gt=nt("altExecuting"),_n=Yp(t,"NodeChange SwitchMode DisabledStateChange",$o=>{yn.set($o.getComponent(),!t.selection.isEditable()||Bd(t))}),hn=$o=>{yn.isDisabled($o)||we(!0)};return Na.sketch({dom:{tag:"button",attributes:{"aria-label":vt,"data-mce-name":Me},classes:Mt.concat(Me)},components:[L_(Me,s.shared.providers.icons)],buttonBehaviours:Et([yn.config({}),sr.config(s.shared.providers.tooltips.getConfig({tooltipText:vt})),Qn(gt,[lf({onSetup:_n,getApi:C},at),q0({getApi:C},at),We(Uc(),($o,In)=>{(In.event.raw.keyCode===e4.SPACEBAR||In.event.raw.keyCode===e4.ENTER)&&(yn.isDisabled($o)||we(!1))}),We(em(),hn),We($g(),hn)])]),eventOrder:{[Uc()]:[gt,"keying"],[em()]:[gt,"alloy.base.behaviour"],[$g()]:[gt,"alloy.base.behaviour"],[hd()]:["alloy.base.behaviour",gt,"tooltipping"],[Km()]:[gt,"tooltipping"]}})},ie=Ss(Q(we=>B(!1,we),"minus","Decrease font size",[])),X=Ss(Q(we=>I(!1,we),"plus","Increase font size",[])),he=Ss({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[_d.sketch({inputBehaviours:Et([yn.config({}),Qn(E,[lf({onSetup:p,getApi:C},S),q0({getApi:C},S)]),Qn("input-update-display-text",[We(Ku,(we,Me)=>{Lt.setValue(we,Me.event.text)}),We(Fb(),we=>{c.onAction(Lt.getValue(we))}),We(Ig(),we=>{c.onAction(Lt.getValue(we))})]),Sn.config({mode:"special",onEnter:we=>(O(St,!0,!0),k.some(!0)),onEscape:U,onUp:we=>(I(!0,!1),k.some(!0)),onDown:we=>(B(!0,!1),k.some(!0)),onLeft:(we,Me)=>(Me.cut(),k.none()),onRight:(we,Me)=>(Me.cut(),k.none())})])})],behaviours:Et([to.config({}),Sn.config({mode:"special",onEnter:j,onSpace:j,onEscape:U}),Qn("input-wrapper-events",[We(Ou(),we=>{Ve([ie,X],Me=>{const Fe=At.fromDom(Me.get(we).element.dom);hl(Fe)&&Er(Fe)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...qn(i)?{"data-mce-name":i}:{}}},components:[ie.asSpec(),he.asSpec(),X.asSpec()],behaviours:Et([to.config({}),Sn.config({mode:"flow",focusInside:Fu.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:we=>hl(we.element)?k.none():(kc(we.element),k.some(!0))})])}},nq="Font sizes",o7=G("Font size {0}"),s7="12pt",r7={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},oq={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},sq=(t,s)=>{const c=Math.pow(10,s);return Math.round(t*c)/c},c7=(t,s)=>/[0-9.]+px$/.test(t)?sq(parseInt(t,10)*72/96,s||0)+"pt":on(oq,t).getOr(t),rq=t=>on(r7,t).getOr(""),UR=t=>{const s=()=>{let S=k.none();const E=C.data,O=t.queryCommandValue("FontSize");if(O)for(let B=3;S.isNone()&&B>=0;B--){const I=c7(O,B),U=rq(I);S=De(E,j=>j.format===O||j.format===I||j.format===U)}return{matchOpt:S,size:O}},c=S=>E=>E.exists(O=>O.format===S),i=()=>{const{matchOpt:S}=s();return S},d=G(k.none),g=S=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,S.format)})},p=S=>{const{matchOpt:E,size:O}=s(),B=E.fold(G(O),I=>I.title);On(S,Ku,{text:B}),HW(t,{value:B})},C=PR(t,"font_size_formats",By.Space);return{tooltip:Ry(t,o7(),s7),text:k.some(s7),icon:k.none(),isSelectedFor:c,getPreviewFor:d,getCurrentValue:i,onAction:g,updateText:p,dataset:C,shouldHide:!1,isInvalid:qe}},a7=(t,s)=>zw(t,s,UR(t),o7,"FontSizeTextUpdate","fontsize"),cq=t=>{const s={step:1};return{em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t]??s},aq=16,iq=t=>t>=0,My=t=>{const s=()=>t.queryCommandValue("FontSize");return{updateInputValue:i=>On(i,Ku,{text:s()}),onAction:(i,d)=>t.execCommand("FontSize",!1,i,{skip_focus:!d}),getNewValue:(i,d)=>{Jh(i,["unsupportedLength","empty"]);const g=s(),p=Jh(i,["unsupportedLength","empty"]).or(Jh(g,["unsupportedLength","empty"])),C=p.map(I=>I.value).getOr(aq),S=p6(t),E=p.map(I=>I.unit).filter(I=>I!=="").getOr(S),O=d(C,cq(E).step),B=`${iq(O)?O:C}${E}`;return B!==g&&C8(t,{value:B}),B}}},lq=(t,s)=>tq(t,s,My(t),"fontsizeinput"),uq=(t,s)=>{const c=ab(s,UR(t));t.ui.registry.addNestedMenuItem("fontsize",{text:nq,onSetup:Mi(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},dq="Formats",i7=t=>Pc(t)?"Formats":"Format {0}",l7=(t,s)=>{const c="Formats",i=p=>()=>t.formatter.match(p),d=p=>()=>{const C=t.formatter.get(p);return C!==void 0?k.some({tag:C.length>0&&(C[0].inline||C[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(p))}):k.none()},g=p=>{const C=B=>a$(B)?te(B.items,C):i$(B)?[{title:B.title,format:B.format}]:[],S=te(rR(t),C),O=IR(t,G(S)).fold(G({title:c,tooltipLabel:""}),B=>({title:B.title,tooltipLabel:B.title}));On(p,Ku,{text:O.title}),LW(t,{value:O.tooltipLabel})};return{tooltip:Ry(t,i7(""),""),text:k.some(c),icon:k.none(),isSelectedFor:i,getCurrentValue:k.none,getPreviewFor:d,onAction:d_(t),updateText:g,shouldHide:a6(t),isInvalid:p=>!t.formatter.canApply(p.format),dataset:s}},mq=(t,s)=>{const c={type:"advanced",...s.styles};return zw(t,s,l7(t,c),i7,"StylesTextUpdate","styles")},fq=(t,s)=>{const c={type:"advanced",...s.styles},i=ab(s,l7(t,c));t.ui.registry.addNestedMenuItem("styles",{text:dq,onSetup:Mi(t,()=>i.getStyleItems().length>0),getSubmenuItems:()=>i.items.validateItems(i.getStyleItems())})},gq=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],ib=(t,s)=>(c,i,d,g)=>{const p=t(c).mapError(C=>Bf(C)).getOrDie();return s(p,i,d,g)},hq={button:ib(MO,(t,s,c,i)=>IG(t,s.shared.providers,i)),togglebutton:ib(NN,(t,s,c,i)=>LG(t,s.shared.providers,i)),menubutton:ib(EN,(t,s,c,i)=>Ay(t,"tox-tbtn",s,k.none(),!1,i)),splitbutton:ib(py,(t,s,c,i)=>XA(t,s.shared,i)),grouptoolbarbutton:ib(xW,(t,s,c,i)=>{const d=c.ui.registry.getAll().buttons,g=C=>t4(c,{buttons:d,toolbar:C,allowToolbarGroups:!1},s,k.none()),p={[W2]:s.shared.header.isPositionedAtTop()?im.TopToBottom:im.BottomToTop};switch(R0(c)){case Zu.floating:return $G(t,s,g,p,i);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},pq=(t,s,c,i)=>on(hq,t.type).fold(()=>(console.error("skipping button defined by",t),k.none()),d=>k.some(d(t,s,c,i))),WR={styles:mq,fontsize:a7,fontsizeinput:lq,fontfamily:QG,blocks:KG,align:X$,navigateback:VG},u7=t=>{const s=Ae(gq,c=>{const i=jn(c.items,d=>So(t,d)||So(WR,d));return{name:c.name,items:i}});return jn(s,c=>c.items.length>0)},bq=t=>{const s=t.split("|");return Ae(s,c=>({items:c.trim().split(" ")}))},vq=t=>nn(t,s=>(So(s,"name")||So(s,"label"))&&So(s,"items")),yq=t=>{const s=t.toolbar,c=t.buttons;return s===!1?[]:s===void 0||s===!0?u7(c):Nt(s)?bq(s):vq(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},Cq=(t,s,c,i,d,g)=>on(s,c.toLowerCase()).orThunk(()=>g.bind(p=>Lo(p,C=>on(s,C+c.toLowerCase())))).fold(()=>on(WR,c.toLowerCase()).map(p=>p(t,d)),p=>p.type==="grouptoolbarbutton"&&!i?(console.warn(`Ignoring the '${c}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),k.none()):pq(p,d,t,c.toLowerCase())),t4=(t,s,c,i)=>{const d=yq(s),g=Ae(d,p=>{const C=te(p.items,S=>S.trim().length===0?[]:Cq(t,s.buttons,S,s.allowToolbarGroups,c,i).map(E=>Array.isArray(E)?E:[E]).getOr([]));return{title:k.from(t.translate(p.name)),label:_r(p.label!==void 0,t.translate(p.label)),items:C}});return jn(g,p=>p.items.length>0)},d7=(t,s,c,i)=>{const d=s.mainUi.outerContainer,g=c.toolbar,p=c.buttons;if(nn(g,Nt)){const C=g.map(S=>{const E={toolbar:S,buttons:p,allowToolbarGroups:c.allowToolbarGroups};return t4(t,E,i,k.none())});Gs.setToolbars(d,C)}else Gs.setToolbar(d,t4(t,c,i,k.none()))},ZR=Ur(),wq=ZR.os.isiOS()&&ZR.os.version.major<=12,Sq=(t,s)=>{const{uiMotherships:c}=s,i=t.dom;let d=t.getWin();const g=t.getDoc().documentElement,p=qt(Ts(d.innerWidth,d.innerHeight)),C=qt(Ts(g.offsetWidth,g.offsetHeight)),S=()=>{const I=p.get();(I.left!==d.innerWidth||I.top!==d.innerHeight)&&(p.set(Ts(d.innerWidth,d.innerHeight)),Sy(t))},E=()=>{const I=t.getDoc().documentElement,U=C.get();(U.left!==I.offsetWidth||U.top!==I.offsetHeight)&&(C.set(Ts(I.offsetWidth,I.offsetHeight)),Sy(t))},O=I=>{$W(t,I)};i.bind(d,"resize",S),i.bind(d,"scroll",O);const B=Vi(At.fromDom(t.getBody()),"load",E);t.on("hide",()=>{Ve(c,I=>{Vn(I.element,"display","none")})}),t.on("show",()=>{Ve(c,I=>{Ro(I.element,"display")})}),t.on("NodeChange",E),t.on("remove",()=>{B.unbind(),i.unbind(d,"resize",S),i.unbind(d,"scroll",O),d=null})},xq=(t,s,c)=>{Hp(t)&&pm(c.mainUi.mothership.element,c.popupUi.mothership),h0(s,c.dialogUi.mothership)};var n4=Object.freeze({__proto__:null,render:(t,s,c,i,d)=>{const{mainUi:g,uiMotherships:p}=s,C=qt(0),S=g.outerContainer;FG(t);const E=At.fromDom(d.targetNode),O=Vl(oc(E));pm(E,g.mothership),xq(t,O,s),t.on("PostRender",()=>{Gs.setSidebar(S,c.sidebar,ND(t))}),t.on("SkinLoaded",()=>{d7(t,s,c,i),C.set(t.getWin().innerWidth),Gs.setMenubar(S,z$(t,c)),Gs.setViews(S,c.views),Sq(t,s)});const B=Gs.getSocket(S).getOrDie("Could not find expected socket element");if(wq){Sr(B.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const Q=fu(()=>{t.dispatch("ScrollContent")},20),ie=Es(B.element,"scroll",Q.throttle);t.on("remove",ie.unbind)}YN(t,s),t.addCommand("ToggleSidebar",(Q,ie)=>{Gs.toggleSidebar(S,ie),UW(t)}),t.addQueryValueHandler("ToggleSidebar",()=>Gs.whichSidebar(S)??""),t.addCommand("ToggleView",(Q,ie)=>{if(Gs.toggleView(S,ie)){const X=S.element;g.mothership.broadcastOn([nf()],{target:X}),Ve(p,he=>{he.broadcastOn([nf()],{target:X})}),Go(Gs.whichView(S))&&(t.focus(),t.nodeChanged(),Gs.refreshToolbar(S)),w8(t)}}),t.addQueryValueHandler("ToggleView",()=>Gs.whichView(S)??"");const I=R0(t),U=()=>{Gs.refreshToolbar(s.mainUi.outerContainer)};(I===Zu.sliding||I===Zu.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const Q=t.getWin().innerWidth;Q!==C.get()&&(U(),C.set(Q))});const j={setEnabled:Q=>{yw(s,Q?"setEnabled":"setDisabled")},isEnabled:()=>!yn.isDisabled(S)};return{iframeContainer:B.element.dom,editorContainer:S.element.dom,api:j}}});const Eq=t=>/^[0-9\.]+(|px)$/i.test(""+t)?k.some(parseInt(""+t,10)):k.none(),Fy=t=>Fo(t)?t+"px":t,lb=(t,s,c)=>{const i=s.filter(g=>t<g),d=c.filter(g=>t>g);return i.or(d).getOr(t)},m7=(t,s)=>{if(typeof s=="number")return k.from(s);const c=/^([0-9.]+)(pt|em|px)$/.exec(s.trim());if(c){const i=c[2],d=Number.parseFloat(c[1]);if(Number.isNaN(d)||d<0)return k.none();if(i==="em")return k.from(d*Number.parseFloat(window.getComputedStyle(t.dom).fontSize));if(i==="pt")return k.from(d*(72/96));if(i==="px")return k.from(d)}return k.none()},Tq=t=>{const s=m7(At.fromDom(t.targetElm),DD(t)),c=Fc(t),i=_D(t);return s.map(d=>lb(d,c,i))},Aq=t=>Tq(t).getOr(DD(t)),f7=t=>{const s=OD(t),c=ew(t),i=MT(t);return Eq(s).map(d=>lb(d,c,i))},kq=t=>f7(t).getOr(OD(t)),{ToolbarLocation:jR,ToolbarMode:Vw}=mV,g7=40,h7=(t,s,c,i,d)=>{const{mainUi:g,uiMotherships:p}=c,C=JC.DOM,S=ay(t),E=iy(t),O=MT(t).or(f7(t)),B=i.shared.header,I=B.isPositionedAtTop,U=150,j=R0(t),Q=j===Vw.sliding||j===Vw.floating,ie=qt(!1),X=()=>ie.get()&&!t.removed,he=mn=>Q?mn.fold(G(0),ot=>ot.components().length>1?ac(ot.components()[1].element):0):0,we=mn=>{switch(RD(t)){case jR.auto:const ot=Gs.getToolbar(g.outerContainer),Rt=he(ot),Hn=ac(mn.element)-Rt,uo=mc(s);if(uo.y>Hn)return"top";{const Yn=r1(s),Vs=Math.max(Yn.dom.scrollHeight,ac(Yn));return uo.bottom<Vs-Hn||Za().bottom<uo.bottom-Hn?"bottom":"top"}case jR.bottom:return"bottom";case jR.top:default:return"top"}},Me=mn=>{d.on(ot=>{Mr.setModes(ot,[mn]),B.setDockingMode(mn);const Rt=I()?im.TopToBottom:im.BottomToTop;$n(ot.element,W2,Rt)})},Fe=()=>{d.on(mn=>{const ot=O.getOrThunk(()=>Wa().width-ri(s).left-10);Vn(mn.element,"max-width",ot+"px")})},Mt=(mn,ot)=>{d.on(Rt=>{const Hn=Gs.getToolbar(g.outerContainer),uo=he(Hn),xn=mc(s),Yn=at(t,g.outerContainer.element),Vs=()=>Yn.fold(()=>xn.x,Ea=>{const Xu=mc(Ea);return Jo(Ea,xi())?xn.x:xn.x-Xu.x}),ps=()=>Yn.fold(()=>I()?Math.max(xn.y-ac(Rt.element)+uo,0):xn.bottom,Ea=>{const Xu=mc(Ea),Fl=Ea.dom.scrollTop??0,lg=Jo(Ea,xi())?Math.max(xn.y-ac(Rt.element)+uo,0):xn.y-Xu.y+Fl-ac(Rt.element)+uo;return I()?lg:xn.bottom}),Ni=Vs(),kr=_r(mn,Math.ceil(g.outerContainer.element.dom.getBoundingClientRect().width)).filter(Ea=>Ea>U).map(Ea=>{const Xu=ot.getOr($r()),Fl=window.innerWidth-(Ni-Xu.left),lu=Math.max(Math.min(Ea,Fl),U);return Fl<Ea&&Vn(g.outerContainer.element,"width",lu+"px"),{width:lu+"px"}}).getOr({width:"max-content"}),il={position:"absolute",left:Math.round(Ni)+"px",top:ps()+"px"};Sr(g.outerContainer.element,{...il,...kr})})},at=(mn,ot)=>Hp(mn)?Of(ot):k.none(),vt=()=>{Ve(p,mn=>{mn.broadcastOn([Ba()],{})})},gt=()=>!S&&(fa(g.outerContainer.element).left+ld(g.outerContainer.element)>=window.innerWidth-g7||fr(g.outerContainer.element,"width").isSome())?(Vn(g.outerContainer.element,"position","absolute"),Vn(g.outerContainer.element,"left","0px"),Ro(g.outerContainer.element,"width"),!0):!1,_n=mn=>{if(!X())return;S||Fe();const ot=$r(),Rt=S?!1:gt();if(Q&&Gs.refreshToolbar(g.outerContainer),!S){const Hn=$r(),uo=_r(ot.left!==Hn.left,ot);Mt(Rt,uo),uo.each(xn=>{ud(xn.left,Hn.top)})}E&&d.on(mn),vt()},hn=()=>S||!E||!X()?!1:d.get().exists(mn=>{const ot=B.getDockingMode(),Rt=we(mn);return Rt!==ot?(Me(Rt),!0):!1});return{isVisible:X,isPositionedAtTop:I,show:()=>{ie.set(!0),Vn(g.outerContainer.element,"display","flex"),C.addClass(t.getBody(),"mce-edit-focus"),Ve(p,mn=>{Ro(mn.element,"display")}),hn(),Hp(t)?_n(mn=>Mr.isDocked(mn)?Mr.reset(mn):Mr.refresh(mn)):_n(Mr.refresh)},hide:()=>{ie.set(!1),Vn(g.outerContainer.element,"display","none"),C.removeClass(t.getBody(),"mce-edit-focus"),Ve(p,mn=>{Vn(mn.element,"display","none")})},update:_n,updateMode:()=>{hn()&&_n(Mr.reset)},repositionPopups:vt}},GR=(t,s)=>{const c=mc(t);return{pos:s?c.y:c.bottom,bounds:c}},p7=(t,s,c,i)=>{const d=qt(GR(s,c.isPositionedAtTop())),g=E=>{const{pos:O,bounds:B}=GR(s,c.isPositionedAtTop()),{pos:I,bounds:U}=d.get(),j=B.height!==U.height||B.width!==U.width;d.set({pos:O,bounds:B}),j&&Sy(t,E),c.isVisible()&&(I!==O?c.update(Mr.reset):j&&(c.updateMode(),c.repositionPopups()))};i||(t.on("activate",c.show),t.on("deactivate",c.hide)),t.on("SkinLoaded ResizeWindow",()=>c.update(Mr.reset)),t.on("NodeChange keydown",E=>{requestAnimationFrame(()=>g(E))});let p=0;const C=Xc(()=>c.update(Mr.refresh),33);t.on("ScrollWindow",()=>{const E=$r().left;E!==p&&(p=E,C.throttle()),c.updateMode()}),Hp(t)&&t.on("ElementScroll",E=>{c.update(Mr.refresh)});const S=zs();S.set(Vi(At.fromDom(t.getBody()),"load",E=>g(E.raw))),t.on("remove",()=>{S.clear()})};var b7=Object.freeze({__proto__:null,render:(t,s,c,i,d)=>{const{mainUi:g}=s,p=Ln(),C=At.fromDom(d.targetNode),S=h7(t,C,s,i,p),E=d6(t);NG(t);const O=()=>{if(p.isSet()){S.show();return}p.set(Gs.getHeader(g.outerContainer).getOrDie());const I=$T(t);Hp(t)?(pm(C,g.mothership),pm(C,s.popupUi.mothership)):h0(I,g.mothership),h0(I,s.dialogUi.mothership);const U=()=>{d7(t,s,c,i),Gs.setMenubar(g.outerContainer,z$(t,c)),S.show(),p7(t,C,S,E),t.nodeChanged()};E?t.once("SkinLoaded",U):U()};t.on("show",O),t.on("hide",S.hide),E||(t.on("focus",O),t.on("blur",S.hide)),t.on("init",()=>{(t.hasFocus()||E)&&O()}),YN(t,s);const B={show:O,hide:S.hide,setEnabled:I=>{yw(s,I?"setEnabled":"setDisabled")},isEnabled:()=>!yn.isDisabled(g.outerContainer)};return{editorContainer:g.outerContainer.element.dom,api:B}}});const Dq=()=>{const t=Ln(),s=Ln(),c=Ln();return{dialogUi:t,popupUi:s,mainUi:c,getUiMotherships:()=>{const g=t.get().map(C=>C.mothership),p=s.get().map(C=>C.mothership);return g.fold(()=>p.toArray(),C=>p.fold(()=>[C],S=>Jo(C.element,S.element)?[C]:[C,S]))},lazyGetInOuterOrDie:(g,p)=>()=>c.get().bind(C=>p(C.outerContainer)).getOrDie(`Could not find ${g} element in OuterContainer`)}},Oq="contexttoolbar-show",v7="contexttoolbar-hide",qR=(t,s,c)=>({setInputEnabled:i=>{!i&&c&&kc(c),yn.set(t,!i)},isInputEnabled:()=>!yn.isDisabled(t),hide:()=>{Do(t,Nb())},back:()=>{Do(t,JA)},getValue:()=>s.get().getOrThunk(()=>Lt.getValue(t)),setValue:i=>{t.getSystem().isConnected()?Lt.setValue(t,i):s.set(i)}}),o4=(t,s,c)=>{const d=oi(t.element).bind(g=>t.getSystem().getByDom(g).toOptional());return qR(d.getOr(t),s,c)},Ny=(t,s,c)=>We(Rw,(i,d)=>{const g=t.get(i),p=qR(g,c,i.element);s.onAction(p,d.event.buttonApi)}),_q=(t,s,c,i)=>{const{primary:d,...g}=s.original,p=ku(MO({...g,type:"button",onAction:re}));return OR(p,c,[Ny(t,s,i)])},Rq=(t,s,c,i)=>{const{primary:d,...g}=s.original,p=ku(NN({...g,type:"togglebutton",onAction:re}));return G$(p,c,[Ny(t,s,i)])},Bq=t=>t.type==="contextformtogglebutton",y7=(t,s,c,i)=>Bq(s)?Rq(t,s,c,i):_q(t,s,c,i),C7=(t,s,c,i)=>{const d=Ae(s,C=>Ss(y7(t,C,c,i)));return{asSpecs:()=>Ae(d,C=>C.asSpec()),findPrimary:C=>Lo(s,(S,E)=>S.primary?k.from(d[E]).bind(O=>O.getOpt(C)).filter(xe(yn.isDisabled)):k.none())}},w7=(t,s,c,i)=>{const{width:d,height:g}=t.initValue();let p=BA;const C=nt("ratio-event"),S=at=>qR(at,i),E=at=>ju(at,{tag:"span",classes:["tox-icon","tox-lock-icon__"+at]},s.icons),O=()=>!1,B=t.label.getOr("Constrain proportions"),I=s.translate(B),U=lc.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-lock-context-form-size-input","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":I,"data-mce-name":B}},components:[E("lock"),E("unlock")],buttonBehaviours:Et([yn.config({disabled:O}),or.config({}),sr.config(s.tooltips.getConfig({tooltipText:I}))])}),j=at=>({dom:{tag:"div",classes:["tox-context-form__group"]},components:at}),Q=at=>vl(at.element,"div.tox-focusable-wrapper").fold(k.none,gt=>(kc(gt),k.some(!0))),ie=at=>Bo.parts.field({factory:_d,inputClasses:["tox-textfield","tox-toolbar-textfield","tox-textfield-size"],data:at?d:g,inputBehaviours:Et([yn.config({disabled:O}),or.config({}),Qn("size-input-toolbar-events",[We(_u(),(vt,gt)=>{On(vt,C,{isField1:at})})]),Sn.config({mode:"special",onEnter:c,onEscape:Q})]),selectOnFocus:!1}),X=at=>({dom:{tag:"label",classes:["tox-label"]},components:[nr(s.translate(at))]}),he=at=>({dom:{tag:"div",classes:["tox-focusable-wrapper","tox-toolbar-nav-item"]},components:[at],behaviours:Et([or.config({}),to.config({}),Sn.config({mode:"special",onEnter:vt=>As(vt.element,"input").fold(k.none,_n=>(kc(_n),k.some(!0)))})])}),we=he(lc.parts.field1(j([Bo.parts.label(X("Width:")),ie(!0)]))),Me=he(lc.parts.field2(j([Bo.parts.label(X("Height:")),ie(!1)]))),Fe=qt(re),Mt=[lf({onBeforeSetup:at=>As(at.element,"input").each(kc),onSetup:t.onSetup,getApi:S},Fe),rA({getApi:S},Fe,i)];return lc.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[we,j([U]),Me],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(at,vt,gt)=>{RA(Lt.getValue(at)).each(_n=>{p(_n).each(hn=>{Lt.setValue(vt,NP(hn))})})},onInput:at=>Do(at,T_),coupledFieldBehaviours:Et([to.config({}),Sn.config({mode:"flow",focusInside:Fu.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-focusable-wrapper"}),yn.config({disabled:O,onDisabled:at=>{lc.getField1(at).bind(Bo.getField).each(yn.disable),lc.getField2(at).bind(Bo.getField).each(yn.disable),lc.getLock(at).each(yn.disable)},onEnabled:at=>{lc.getField1(at).bind(Bo.getField).each(yn.enable),lc.getField2(at).bind(Bo.getField).each(yn.enable),lc.getLock(at).each(yn.enable)}}),Ec(()=>s.checkUiComponentContext("mode:design")),Qn("size-input-toolbar-events2",[We(C,(at,vt)=>{const gt=vt.event.isField1,_n=gt?lc.getField1(at):lc.getField2(at),hn=gt?lc.getField2(at):lc.getField1(at),$o=_n.map(Lt.getValue).getOr(""),In=hn.map(Lt.getValue).getOr("");p=Bm($o,In)}),We(T_,at=>t.onInput(S(at))),...Mt])])})},S7=(t,s,c)=>Bo.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[...t.toArray(),s],fieldBehaviours:Et([yn.config({disabled:()=>c.checkUiComponentContext("mode:design").shouldDisable,onDisabled:i=>{Qp(i),Bo.getField(i).each(yn.disable)},onEnabled:i=>{Bo.getField(i).each(yn.enable)}})])}),Mq=(t,s,c,i)=>{const d=qt(re),g=S=>o4(S,i),p=t.label.map(S=>Bo.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[nr(s.translate(S))]})),C=Bo.parts.field({factory:_d,type:"range",inputClasses:["tox-toolbar-slider__input","tox-toolbar-nav-item"],inputAttributes:{min:String(t.min()),max:String(t.max())},data:t.initValue().toString(),fromInputValue:S=>Yc(S).getOr(t.min()),toInputValue:S=>String(S),inputBehaviours:Et([yn.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),Ec(()=>s.checkUiComponentContext("mode:design")),Sn.config({mode:"special",onEnter:c,onLeft:(S,E)=>(E.cut(),k.none()),onRight:(S,E)=>(E.cut(),k.none())}),Qn("slider-events",[lf({onSetup:t.onSetup,getApi:g,onBeforeSetup:Sn.focusIn},d),rA({getApi:g},d,i),We(qm(),S=>{t.onInput(g(S))})])])});return S7(p,C,s)},Fq=(t,s,c,i)=>{const d=qt(re),g=O=>o4(O,i),p=t.label.map(O=>Bo.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[nr(s.translate(O))]})),S={...t.placeholder.map(O=>({placeholder:s.translate(O)})).getOr({})},E=Bo.parts.field({factory:_d,inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-item"],inputAttributes:S,data:t.initValue(),selectOnFocus:!0,inputBehaviours:Et([yn.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),Ec(()=>s.checkUiComponentContext("mode:design")),Sn.config({mode:"special",onEnter:c,onLeft:(O,B)=>(B.cut(),k.none()),onRight:(O,B)=>(B.cut(),k.none())}),Qn("input-events",[lf({onSetup:t.onSetup,getApi:O=>vl(O.element,".tox-toolbar").bind(I=>As(I,"button:enabled")).fold(()=>o4(O,i),I=>o4(O,i,I)),onBeforeSetup:Sn.focusIn},d),rA({getApi:g},d,i),We(qm(),O=>{t.onInput(g(O))})])])});return S7(p,E,s)},KR=(t,s,c)=>{const i=Ln(),g=Ss(t(c,E=>C.findPrimary(E).orThunk(()=>S.findPrimary(E)).map(O=>(U1(O),!0)),i)),p=Fs(s.commands,E=>E.align==="start"),C=C7(g,p.pass,c,i),S=C7(g,p.fail,c,i);return jn([{title:k.none(),label:k.none(),items:C.asSpecs()},{title:k.none(),label:k.none(),items:[g.asSpec()]},{title:k.none(),label:k.none(),items:S.asSpecs()}],E=>E.items.length>0)},x7=(t,s)=>{switch(t.type){case"contextform":return KR(pn(Fq,t),t,s);case"contextsliderform":return KR(pn(Mq,t),t,s);case"contextsizeinputform":return KR(pn(w7,t),t,s)}},E7={renderContextForm:(t,s,c)=>GA({type:t,uid:nt("context-toolbar"),initGroups:x7(s,c),onEscape:k.none,cyclicKeying:!0,providers:c}),buildInitGroups:x7},T7=(t,s,c)=>s.bottom-t.y>=c&&t.bottom-s.y>=c,Nq=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const c=Sf(At.fromDom(t.startContainer),t.startOffset).element;return(zd(c)?oi(c):k.some(c)).filter(ti).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},r4=t=>{const s=t.selection.getRng(),c=Nq(s);if(t.inline){const i=$r();return wc(i.left+c.left,i.top+c.top,c.width,c.height)}else{const i=fd(At.fromDom(t.getBody()));return wc(i.x+c.left,i.y+c.top,c.width,c.height)}},YR=(t,s)=>s.filter(c=>is(c)&&ee(c)).map(fd).getOrThunk(()=>r4(t)),A7=(t,s,c)=>{const i=Math.max(t.x+c,s.x),d=Math.min(t.right-c,s.right);return{x:i,width:d-i}},k7=(t,s,c,i,d,g)=>{const p=At.fromDom(t.getContainer()),C=As(p,".tox-editor-header").getOr(p),S=mc(C),E=S.y>=s.bottom,O=i&&!E;if(t.inline&&O)return{y:Math.max(S.bottom+g,c.y),bottom:c.bottom};if(t.inline&&!O)return{y:c.y,bottom:Math.min(S.y-g,c.bottom)};const B=d==="line"?mc(p):s;return O?{y:Math.max(S.bottom+g,c.y),bottom:Math.min(B.bottom-g,c.bottom)}:{y:Math.max(B.y+g,c.y),bottom:Math.min(S.y-g,c.bottom)}},D7=(t,s,c,i=0)=>{const d=Wa(window),g=mc(At.fromDom(t.getContentAreaContainer())),p=NT(t)||PT(t)||tw(t),{x:C,width:S}=A7(g,d,i);if(t.inline&&!p)return wc(C,d.y,S,d.height);{const E=s.header.isPositionedAtTop(),{y:O,bottom:B}=k7(t,g,d,E,c,i);return wc(C,O,S,B-O)}},Fh=12,Uw={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},Ww={maxHeightFunction:Xg(),maxWidthFunction:U2()},XR=(t,s)=>{const c=t.selection.getRng(),i=Sf(At.fromDom(c.startContainer),c.startOffset);return c.startContainer===c.endContainer&&c.startOffset===c.endOffset-1&&Jo(i.element,s)},JR=(t,s,c)=>{const i=fr(t,"position");Vn(t,"position",s);const d=c(t);return i.each(g=>Vn(t,"position",g)),d},QR=t=>t==="node",c4=(t,s,c,i,d)=>{const g=r4(t),p=i.lastElement().exists(C=>Jo(c,C));if(XR(t,c))return p?Ga:Oi;if(p)return JR(s,i.getMode(),()=>T7(g,mc(s),-20)&&!i.isReposition()?KS:Ga);{const C=i.getMode()==="fixed"?d.y+$r().top:d.y,S=ac(s)+Fh;return C+S<=g.y?Oi:pp}},O7=(t,s,c,i)=>{const d=S=>(E,O,B,I,U)=>{const j=c4(t,I,S,c,U),Q={...E,y:U.y,height:U.height};return{...j(Q,O,B,I,U),alwaysFit:!0}},g=S=>QR(i)?[d(S)]:[];return s?{onLtr:S=>[hc,xc,br,wa,Mc,Wc].concat(g(S)),onRtl:S=>[hc,br,xc,Mc,wa,Wc].concat(g(S))}:{onLtr:S=>[Wc,hc,wa,xc,Mc,br].concat(g(S)),onRtl:S=>[Wc,hc,Mc,br,wa,xc].concat(g(S))}},_7=(t,s,c,i)=>s==="line"?{bubble:El(Fh,0,Uw),layouts:{onLtr:()=>[tv],onRtl:()=>[nv]},overrides:Ww}:{bubble:El(0,Fh,Uw,1/Fh),layouts:O7(t,c,i,s),overrides:Ww},Zw=(t,s)=>{const c=jn(s,g=>g.predicate(t.dom)),{pass:i,fail:d}=Fs(c,g=>g.type==="contexttoolbar");return{contextToolbars:i,contextForms:d}},Pq=t=>{if(t.length<=1)return t;{const s=g=>Bt(t,p=>p.position===g),c=g=>jn(t,p=>p.position===g),i=s("selection"),d=s("node");if(i||d)if(d&&i){const g=c("node"),p=Ae(c("selection"),C=>({...C,position:"node"}));return g.concat(p)}else return c(i?"selection":"node");else return c("line")}},R7=t=>{if(t.length<=1)return t;{const s=i=>De(t,d=>d.position===i);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(i=>i.position).fold(()=>[],i=>jn(t,d=>d.position===i))}},$q=(t,s,c)=>{const i=Zw(t,s);if(i.contextForms.length>0)return k.some({elem:t,toolbars:[i.contextForms[0]]});{const d=Zw(t,c);if(d.contextForms.length>0)return k.some({elem:t,toolbars:[d.contextForms[0]]});if(i.contextToolbars.length>0||d.contextToolbars.length>0){const g=Pq(i.contextToolbars.concat(d.contextToolbars));return k.some({elem:t,toolbars:g})}else return k.none()}},Iq=(t,s,c)=>t(s)?k.none():Sb(s,i=>{if(ti(i)){const{contextToolbars:d,contextForms:g}=Zw(i,c.inNodeScope),p=g.length>0?g:R7(d);return p.length>0?k.some({elem:i,toolbars:p}):k.none()}else return k.none()},t),a4=(t,s)=>{const c=At.fromDom(s.getBody()),i=p=>Jo(p,c),d=p=>!i(p)&&!ua(c,p),g=At.fromDom(s.selection.getNode());return d(g)?k.none():$q(g,t.inNodeScope,t.inEditorScope).orThunk(()=>Iq(i,g,t))},B7=(t,s)=>{const c={},i=[],d=[],g={},p={},C=(O,B)=>{const I=ku(oW(B));c[O]=I,I.launch.map(U=>{g["form:"+O]={...B.launch,type:U.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(I)}}}),I.scope==="editor"?d.push(I):i.push(I),p[O]=I},S=(O,B)=>{rW(B).each(I=>{I.launch.isSome()&&(g["toolbar:"+O]={...B.launch,type:"button",onAction:()=>{s(I)}}),B.scope==="editor"?d.push(I):i.push(I),p[O]=I})},E=zn(t);return Ve(E,O=>{const B=t[O];B.type==="contextform"||B.type==="contextsliderform"||B.type==="contextsizeinputform"?C(O,B):B.type==="contexttoolbar"&&S(O,B)}),{forms:c,inNodeScope:i,inEditorScope:d,lookupTable:p,formNavigators:g}},e5="tox-pop--transition",Lq=t=>t===e4.ENTER||t===e4.SPACEBAR,Hq=(t,s,c,i)=>{const d=i.backstage,g=d.shared,p=Ur().deviceType.isTouch,C=Ln(),S=Ln(),E=Ln(),O=zG({sink:c,onEscape:()=>(t.focus(),lA(t),k.some(!0)),onHide:()=>{lA(t)},onBack:()=>{WW(t)},focusElement:In=>{t.getBody().contains(In.dom)?t.focus():kc(In)}}),B=m(O.sketch),I=()=>{const In=E.get().getOr("node"),ao=QR(In)?1:0;return D7(t,g,In,ao)},U=()=>!t.removed&&!(p()&&d.isContextMenuOpen()),j=In=>An(To(In,C.get(),Jo),!0),Q=()=>{if(U()){const In=I(),ao=An(E.get(),"node")?YR(t,C.get()):r4(t);return In.height<=0||!T7(ao,In,.01)}else return!0},ie=()=>{C.clear(),S.clear(),E.clear(),Fr.hide(B)},X=()=>{if(Fr.isOpen(B)){const In=B.element;Ro(In,"display"),Q()?Vn(In,"display","none"):(S.set(0),Fr.reposition(B))}},he=In=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[In],behaviours:Et([Sn.config({mode:"acyclic"}),Qn("pop-dialog-wrap-events",[ur(ao=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>Sn.focusIn(ao))}),Sd(ao=>{t.shortcuts.remove("ctrl+F9")})])])}),we=In=>{const ao=at([In]);On(B,BR,{forwardContents:he(ao)})},Me=ka(()=>B7(s,we)),Fe=(In,ao)=>t4(t,{buttons:In,toolbar:ao.items,allowToolbarGroups:!1},i.backstage,k.some(["form:","toolbar:"])),Mt=(In,ao)=>E7.buildInitGroups(In,ao),at=In=>{const{buttons:ao}=t.ui.registry.getAll(),mn=Me(),ot={...ao,...mn.formNavigators},Rt=R0(t)===Zu.scrolling?Zu.scrolling:Zu.default,Hn=ae(Ae(In,uo=>uo.type==="contexttoolbar"?Fe(ot,pw(uo)):Mt(uo,g.providers)));return GA({type:Rt,uid:nt("context-toolbar"),initGroups:Hn,onEscape:k.none,cyclicKeying:!0,providers:g.providers})},vt=(In,ao)=>{const mn=In==="node"?g.anchors.node(ao):g.anchors.cursor(),ot=_7(t,In,p(),{lastElement:C.get,isReposition:()=>An(S.get(),0),getMode:()=>Xa.getMode(c)});return ht(mn,ot)},gt=(In,ao)=>{if($o.cancel(),!U())return;const mn=at(In),ot=In[0].position,Rt=vt(ot,ao);E.set(ot),S.set(1);const Hn=B.element;Ro(Hn,"display"),j(ao)||(Tr(Hn,e5),Xa.reset(c,B)),Fr.showWithinBounds(B,he(mn),{anchor:Rt,transition:{classes:[e5],mode:"placement"}},()=>k.some(I())),ao.fold(C.clear,C.set),Q()&&Vn(Hn,"display","none")},_n=()=>{Vn(B.element,"transition","none"),X(),Ro(B.element,"transition")};let hn=!1;const $o=Xc(()=>{if(!(!t.hasFocus()||t.removed||hn))if(Xr(B.element,e5))$o.throttle();else{const In=Me();a4(In,t).fold(ie,ao=>{gt(ao.toolbars,k.some(ao.elem))})}},17);t.on("init",()=>{t.on("remove",ie),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",X),t.on("click focus SetContent",$o.throttle),t.on("keyup",In=>{(!Lq(In.keyCode)||!O.inSubtoolbar())&&$o.throttle()}),t.on(v7,ie),t.on(Oq,In=>{const ao=Me();on(ao.lookupTable,In.toolbarKey).each(mn=>{gt([mn],_r(In.target!==t,In.target)),RR(B)})}),t.on("focusout",In=>{BT.setEditorTimeout(t,()=>{Kr(c.element).isNone()&&Kr(B.element).isNone()&&!t.hasFocus()&&ie()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&ie()}),t.on("DisabledStateChange",In=>{In.state&&ie()}),t.on("ExecCommand",({command:In})=>{In.toLowerCase()==="toggleview"&&ie()}),t.on("AfterProgressState",In=>{In.state?ie():t.hasFocus()&&$o.throttle()}),t.on("dragstart",()=>{hn=!0}),t.on("dragend drop",()=>{hn=!1}),t.on("NodeChange",In=>{O.inSubtoolbar()?_n():Kr(B.element).fold($o.throttle,re)})})},zq=t=>{Ve([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],c=>{t.ui.registry.addToggleButton(c.name,{tooltip:c.text,icon:c.icon,onAction:iu(t,c.cmd),onSetup:xw(t,c.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:Mi(t),onAction:iu(t,"JustifyNone")})},M7=(t,s)=>{const c=()=>{const i=s.getOptions(t),d=s.getCurrent(t).map(s.hash),g=Ln();return Ae(i,p=>({type:"togglemenuitem",text:s.display(p),onSetup:C=>{const S=O=>{O&&(g.on(B=>B.setActive(!1)),g.set(C)),C.setActive(O)};S(An(d,s.hash(p)));const E=s.watcher(t,p,S);return()=>{g.clear(),E()}},onAction:()=>s.setCurrent(t,p)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:i=>i(c()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:c,onSetup:s.onMenuSetup})},F7=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:D6,hash:s=>Ho(s,["fixed","relative","empty"]).getOr(s),display:St,watcher:(s,c,i)=>s.formatter.formatChanged("lineheight",i,!1,{value:c}).unbind,getCurrent:s=>k.from(s.queryCommandValue("LineHeight")),setCurrent:(s,c)=>s.execCommand("LineHeight",!1,c),onToolbarSetup:Mi(t),onMenuSetup:Mi(t)}),N7=t=>k.from(i6(t)).map(c=>({name:"language",text:"Language",icon:"language",getOptions:G(c),hash:i=>Fn(i.customCode)?i.code:`${i.code}/${i.customCode}`,display:i=>i.title,watcher:(i,d,g)=>i.formatter.formatChanged("lang",g,!1,{value:d.code,customValue:d.customCode??null}).unbind,getCurrent:i=>{const d=At.fromDom(i.selection.getNode());return yl(d,g=>k.some(g).filter(ti).bind(p=>Lc(p,"lang").map(S=>{const E=Lc(p,"data-mce-lang").getOrUndefined();return{code:S,customCode:E,title:""}})))},setCurrent:(i,d)=>i.execCommand("Lang",!1,d),onToolbarSetup:i=>{const d=zs();return i.setActive(t.formatter.match("lang",{},void 0,!0)),d.set(t.formatter.formatChanged("lang",i.setActive,!0)),uA(d.clear,Mi(t)(i))},onMenuSetup:Mi(t)})),P7=t=>{M7(t,F7(t)),N7(t).each(s=>M7(t,s))},$7=(t,s)=>{GG(t,s),eq(t,s),fq(t,s),Q$(t,s),uq(t,s)},Vq=t=>{t.ui.registry.addContext("editable",()=>t.selection.isEditable()),t.ui.registry.addContext("mode",s=>t.mode.get()===s),t.ui.registry.addContext("any",rt),t.ui.registry.addContext("formatting",s=>t.formatter.canApply(s)),t.ui.registry.addContext("insert",s=>t.schema.isValidChild(t.selection.getNode().tagName,s))},I7=t=>Yp(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),L7=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:I7(t),onAction:iu(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:Mi(t,()=>t.queryCommandState("indent")),onAction:iu(t,"indent")})},Uq=t=>{L7(t)},Wq=(t,s)=>c=>{c.setActive(s.get());const i=d=>{s.set(d.state),c.setActive(d.state)};return t.on("PastePlainTextToggle",i),uA(()=>t.off("PastePlainTextToggle",i),Mi(t)(c))},Zq=t=>{const s=qt(x6(t)),c=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:c,onSetup:Wq(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:c,onSetup:Wq(t,s)})},t5=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},jq=t=>{Mh.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,c)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:xw(t,s.name),onAction:t5(t,s.name),shortcut:s.shortcut})});for(let s=1;s<=6;s++){const c="h"+s,i=`Access+${s}`;t.ui.registry.addToggleButton(c,{text:c.toUpperCase(),tooltip:"Heading "+s,onSetup:xw(t,c),onAction:t5(t,c),shortcut:i})}},Gq=t=>{Mh.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy",context:"any"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:iu(t,s.action),shortcut:s.shortcut,context:s.context})}),Mh.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:Mi(t),onAction:iu(t,s.action)})})},qq=t=>{Mh.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:iu(t,s.action),onSetup:xw(t,s.name)})})},Kq=t=>{jq(t),Gq(t),qq(t)},Yq=t=>{Mh.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:iu(t,s.action),context:s.context})}),Mh.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onSetup:Mi(t),onAction:iu(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:Mi(t),onAction:t5(t,"code")})},Xq=t=>{Kq(t),Yq(t)},i4=(t,s)=>Yp(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",c=>{c.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),Jq=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:i4(t,"hasUndo"),onAction:iu(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:i4(t,"hasRedo"),onAction:iu(t,"redo")})},Qq=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:i4(t,"hasUndo"),onAction:iu(t,"undo"),shortcut:"Meta+Z"}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:i4(t,"hasRedo"),onAction:iu(t,"redo"),shortcut:"Meta+Y"})},eK=t=>{Jq(t),Qq(t)},tK=t=>Yp(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),H7=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:tK(t),onAction:iu(t,"mceToggleVisualAid"),context:"any"})},nK=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:iu(t,"mceToggleVisualAid"),context:"any"})},oK=t=>{nK(t),H7(t)},sK=(t,s)=>{zq(t),Xq(t),$7(t,s),eK(t),N8(t),oK(t),Uq(t),P7(t),Zq(t),Vq(t)},rK=t=>Nt(t)?t.split(/[ ,]/):t,z7=t=>s=>s.options.get(t),V7=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:c=>c===!1?{value:[],valid:!0}:Nt(c)||nn(c,Nt)?{value:rK(c),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},l4=z7("contextmenu_never_use_native"),cK=z7("contextmenu_avoid_overlap"),U7=t=>W7(t).length===0,W7=t=>{const s=t.ui.registry.getAll().contextMenus,c=t.options.get("contextmenu");return t.options.isSet("contextmenu")?c:jn(c,i=>So(s,i))},jw=(t,s)=>({type:"makeshift",x:t,y:s}),aK=(t,s,c)=>jw(t.x+s,t.y+c),Z7=t=>t.type==="longpress"||t.type.indexOf("touch")===0,iK=t=>{if(Z7(t)){const s=t.touches[0];return jw(s.pageX,s.pageY)}else return jw(t.pageX,t.pageY)},n5=t=>{if(Z7(t)){const s=t.touches[0];return jw(s.clientX,s.clientY)}else return jw(t.clientX,t.clientY)},lK=(t,s)=>{const c=JC.DOM.getPos(t);return aK(s,c.x,c.y)},uK=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?iK(s):lK(t.getContentAreaContainer(),n5(s)):u4(t),u4=t=>({type:"selection",root:At.fromDom(t.selection.getNode())}),j7=t=>({type:"node",node:k.some(At.fromDom(t.selection.getNode())),root:At.fromDom(t.getBody())}),o5=(t,s,c)=>{switch(c){case"node":return j7(t);case"point":return uK(t,s);case"selection":return u4(t)}},dK=(t,s,c,i,d,g)=>{const p=c(),C=o5(t,s,g);sb(p,Am.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!1,search:k.none()}).map(S=>{s.preventDefault(),Fr.showMenuAt(d,{anchor:C},{menu:{markers:Up("normal")},data:S})})},mK={onLtr:()=>[hc,xc,br,wa,Mc,Wc,Oi,pp,Le,am,hp,Nu],onRtl:()=>[hc,br,xc,Mc,wa,Wc,Oi,pp,hp,Nu,Le,am]},fK=12,gK={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},hK=(t,s)=>{const c=t.selection;if(c.isCollapsed()||s.touches.length<1)return!1;{const i=s.touches[0],d=c.getRng();return Yd(t.getWin(),Gi.domRange(d)).exists(p=>p.left<=i.clientX&&p.right>=i.clientX&&p.top<=i.clientY&&p.bottom>=i.clientY)}},s5=t=>{const s=t.selection.getRng(),c=()=>{BT.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),g()};t.once("touchend",c);const i=p=>{p.preventDefault(),p.stopImmediatePropagation()};t.on("mousedown",i,!0);const d=()=>g();t.once("longpresscancel",d);const g=()=>{t.off("touchend",c),t.off("longpresscancel",d),t.off("mousedown",i)}},pK=(t,s,c)=>{const i=o5(t,s,c);return{bubble:El(0,c==="point"?fK:0,gK),layouts:mK,overrides:{maxWidthFunction:U2(),maxHeightFunction:Xg()},...i}},G7=(t,s,c,i,d,g,p)=>{const C=pK(t,s,g);sb(c,Am.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!0,search:k.none()}).map(S=>{s.preventDefault();const E=p?qa.HighlightMenuAndItem:qa.HighlightNone;Fr.showMenuWithinBounds(d,{anchor:C},{menu:{markers:Up("normal"),highlightOnOpen:E},data:S,type:"horizontal"},()=>k.some(D7(t,i.shared,g==="node"?"node":"selection"))),t.dispatch(v7)})},bK=(t,s,c,i,d,g)=>{const p=Ur(),C=p.os.isiOS(),S=p.os.isMacOS(),E=p.os.isAndroid(),O=p.deviceType.isTouch(),B=()=>!(E||C||S&&O),I=()=>{const U=c();G7(t,s,U,i,d,g,B())};if((S||C)&&g!=="node"){const U=()=>{s5(t),I()};hK(t,s)?U():(t.once("selectionchange",U),t.once("touchend",()=>t.off("selectionchange",U)))}else I()},q7=t=>Nt(t)?t==="|":t.type==="separator",Gw={type:"separator"},K7=t=>{const s=c=>({text:c.text,icon:c.icon,enabled:c.enabled,shortcut:c.shortcut});if(Nt(t))return t;switch(t.type){case"separator":return Gw;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const i=t.getSubmenuItems();return Nt(i)?i:Ae(i,K7)}};default:const c=t;return{type:"menuitem",...s(c),onAction:En(c.onAction)}}},r5=(t,s)=>{if(s.length===0)return t;const i=oo(t).filter(d=>!q7(d)).fold(()=>[],d=>[Gw]);return t.concat(i).concat(s).concat([Gw])},c5=(t,s,c)=>{const i=co(s,(d,g)=>on(t,g.toLowerCase()).map(p=>{const C=p.update(c);if(Nt(C)&&La(Pt(C)))return r5(d,C.split(" "));if(ts(C)&&C.length>0){const S=Ae(C,K7);return r5(d,S)}else return d}).getOrThunk(()=>d.concat([g])),[]);return i.length>0&&q7(i[i.length-1])&&i.pop(),i},vK=(t,s)=>s.ctrlKey&&!l4(t),yK=t=>t.type==="longpress"||So(t,"touches"),Y7=(t,s)=>!yK(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),X7=(t,s)=>Y7(t,s)?t.selection.getStart(!0):s.target,CK=(t,s)=>{const c=cK(t),i=Y7(t,s)?"selection":"point";if(La(c)){const d=X7(t,s);return Ag(At.fromDom(d),c)?"node":i}else return i},J7=(t,s,c)=>{const d=Ur().deviceType.isTouch,g=m(Fr.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>c.setContextMenuState(!0),onHide:()=>c.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:Et([Qn("dismissContextMenu",[We(Zg(),(S,E)=>{us.close(S),t.focus()})])])})),p=()=>Fr.hide(g),C=S=>{if(l4(t)&&S.preventDefault(),vK(t,S)||U7(t))return;const E=CK(t,S),O=()=>{const I=X7(t,S),U=t.ui.registry.getAll(),j=W7(t);return c5(U.contextMenus,j,I)};(d()?bK:dK)(t,S,O,c,g,E)};t.on("init",()=>{const S="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");t.on(S,p),t.on("longpress contextmenu",C)})},a5=40,d4=a5/2,Q7=(t,s,c,i,d,g)=>t.fold(()=>S0.snap({sensor:vh(c-d4,i-d4),range:Ts(d,g),output:vh(k.some(c),k.some(i)),extra:{td:s}}),p=>{const C=c-d4,S=i-d4,E=a5,O=a5,B=p.element.dom.getBoundingClientRect();return S0.snap({sensor:vh(C,S),range:Ts(E,O),output:vh(k.some(c-B.width/2),k.some(i-B.height/2)),extra:{td:s}})}),eI=(t,s,c)=>{const i=(d,g)=>d.exists(p=>Jo(p,g));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,g)=>{const p=g.td;i(s.get(),p)||(s.set(p),c(p))},mustSnap:!0}},tI=t=>Ss(Na.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Et([S0.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),ty.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),wK=(t,s)=>{const c=qt([]),i=qt([]),d=qt(!1),g=Ln(),p=Ln(),C=at=>{const vt=fd(at);return Q7(U.getOpt(s),at,vt.x,vt.y,vt.width,vt.height)},S=()=>Ae(c.get(),at=>C(at)),E=at=>{const vt=fd(at);return Q7(j.getOpt(s),at,vt.right,vt.bottom,vt.width,vt.height)},O=()=>Ae(i.get(),at=>E(at)),B=eI(S,g,at=>{p.get().each(vt=>{t.dispatch("TableSelectorChange",{start:at,finish:vt})})}),I=eI(O,p,at=>{g.get().each(vt=>{t.dispatch("TableSelectorChange",{start:vt,finish:at})})}),U=tI(B),j=tI(I),Q=m(U.asSpec()),ie=m(j.asSpec()),X=(at,vt,gt,_n)=>{const hn=vt.dom.getBoundingClientRect();Ro(at.element,"display");const $o=yg(At.fromDom(t.getBody())).dom.innerHeight,In=gt(hn),ao=_n(hn,$o);(In||ao)&&Vn(at.element,"display","none")},he=(at,vt,gt,_n)=>{const hn=gt(vt);S0.snapTo(at,hn),X(at,vt,ao=>ao[_n]<0,(ao,mn)=>ao[_n]>mn)},we=at=>he(Q,at,C,"top"),Me=()=>g.get().each(we),Fe=at=>he(ie,at,E,"bottom"),Mt=()=>p.get().each(Fe);if(Ur().deviceType.isTouch()){const at=vt=>Ae(vt,At.fromDom);t.on("TableSelectionChange",vt=>{d.get()||(gm(s,Q),gm(s,ie),d.set(!0));const gt=At.fromDom(vt.start),_n=At.fromDom(vt.finish);g.set(gt),p.set(_n),k.from(vt.otherCells).each(hn=>{c.set(at(hn.upOrLeftCells)),i.set(at(hn.downOrRightCells)),we(gt),Fe(_n)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{Me(),Mt()}),t.on("TableSelectionClear",()=>{d.get()&&(hm(Q),hm(ie),d.set(!1)),g.clear(),p.clear()})}};var SK=`<svg height="16" viewBox="0 0 80 16" width="80" xmlns="http://www.w3.org/2000/svg"><g opacity=".8"><path d="m80 3.537v-2.202h-7.976v11.585h7.976v-2.25h-5.474v-2.621h4.812v-2.069h-4.812v-2.443zm-10.647 6.929c-.493.217-1.13.337-1.864.337s-1.276-.156-1.805-.47a3.732 3.732 0 0 1 -1.3-1.298c-.324-.554-.48-1.191-.48-1.877s.156-1.335.48-1.877a3.635 3.635 0 0 1 1.3-1.299 3.466 3.466 0 0 1 1.805-.481c.65 0 .914.06 1.263.18.36.12.698.277.986.47.289.192.578.384.842.6l.12.085v-2.586l-.023-.024c-.385-.35-.855-.614-1.384-.818-.53-.205-1.155-.313-1.877-.313-.721 0-1.6.144-2.333.445a5.773 5.773 0 0 0 -1.937 1.251 5.929 5.929 0 0 0 -1.324 1.9c-.324.735-.48 1.565-.48 2.455s.156 1.72.48 2.454c.325.734.758 1.383 1.324 1.913.553.53 1.215.938 1.937 1.25a6.286 6.286 0 0 0 2.333.434c.819 0 1.384-.108 1.961-.313.59-.216 1.083-.505 1.468-.866l.024-.024v-2.49l-.12.096c-.41.337-.878.626-1.396.866zm-14.869-4.15-4.8-5.04-.024-.025h-.902v11.67h2.502v-6.847l2.827 3.08.385.409.397-.41 2.791-3.067v6.845h2.502v-11.679h-.902l-4.788 5.052z"/><path clip-rule="evenodd" d="m15.543 5.137c0-3.032-2.466-5.113-4.957-5.137-.36 0-.745.024-1.094.096-.157.024-3.85.758-3.85.758-3.032.602-4.62 2.466-4.704 4.788-.024.89-.024 4.27-.024 4.27.036 3.165 2.406 5.138 5.017 5.126.337 0 1.119-.109 1.287-.145.144-.024.385-.084.746-.144.661-.12 1.684-.325 3.067-.602 2.37-.409 4.103-2.009 4.44-4.33.156-1.023.084-4.692.084-4.692zm-3.213 3.308-2.346.457v2.31l-5.859 1.143v-5.75l2.346-.458v3.441l3.513-.686v-3.44l-3.513.685v-2.297l5.859-1.143v5.75zm20.09-3.296-.083-1.023h-2.13v8.794h2.346v-4.884c0-1.107.95-1.985 2.057-1.997 1.095 0 1.901.89 1.901 1.997v4.884h2.346v-5.245c-.012-2.105-1.588-3.777-3.67-3.765a3.764 3.764 0 0 0 -2.778 1.25l.012-.011zm-6.014-4.102 2.346-.458v2.298l-2.346.457z" fill-rule="evenodd"/><path d="m28.752 4.126h-2.346v8.794h2.346z"/><path clip-rule="evenodd" d="m43.777 15.483 4.043-11.357h-2.418l-1.54 4.355-.445 1.324-.36-1.324-1.54-4.355h-2.418l3.151 8.794-1.083 3.08zm-21.028-5.51c0 .722.541 1.034.878 1.034s.638-.048.95-.144l.518 1.708c-.217.145-.879.518-2.13.518a2.565 2.565 0 0 1 -2.562-2.587c-.024-1.082-.024-2.49 0-4.21h-1.54v-2.142h1.54v-1.912l2.346-.458v2.37h2.201v2.142h-2.2v3.693-.012z" fill-rule="evenodd"/></g></svg>
`;const xK=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",EK=(t,s,c)=>{const i=s.delimiter??"›",d=(S,E,O)=>Na.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":O}},components:[nr(S)],action:B=>{t.focus(),t.selection.select(E),t.nodeChanged()},buttonBehaviours:Et([sr.config({...c.tooltips.getConfig({tooltipText:c.translate(["Select the {0} element",E.nodeName.toLowerCase()]),onShow:(B,I)=>{qi(B.element,I.element)},onHide:B=>{i2(B.element)}})}),_m.button(c.isDisabled),Ec(()=>c.checkUiComponentContext("any"))])}),g=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[nr(` ${i} `)]}),p=S=>co(S,(E,O,B)=>{const I=d(O.name,O.element,B);return B===0?E.concat([I]):E.concat([g(),I])},[]),C=S=>{const E=[];let O=S.length;for(;O-- >0;){const B=S[O];if(B.nodeType===1&&!xK(B)){const I=y8(t,B);if(I.isDefaultPrevented()||E.push({name:I.name,element:B}),I.isPropagationStopped())break}}return E};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Et([Sn.config({mode:"flow",selector:"div[role=button]"}),yn.config({disabled:c.isDisabled}),Ec(()=>c.checkUiComponentContext("any")),or.config({}),so.config({}),Qn("elementPathEvents",[ur((S,E)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>Sn.focusIn(S)),t.on("NodeChange",O=>{const B=C(O.parents),I=B.length>0?p(B):[];so.set(S,I)})})])]),components:[]}};var ag;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(ag||(ag={}));const i5=t=>{const s=At.fromDom(t.getContainer()),c=ac(s),i=ta(s);return{height:c,width:i}},TK=(t,s,c,i)=>({height:lb(i.height+s.top,Fc(t),_D(t)),width:c===ag.Both?lb(i.width+s.left,ew(t),MT(t)):i.width}),l5=(t,s,c)=>{const i=At.fromDom(t.getContainer()),d=i5(t),g=TK(t,s,c,d);return ko(g,(p,C)=>{Fo(p)&&Vn(i,C,Fy(p))}),PW(t),g},AK=t=>{const s=FD(t);return s===!1?ag.None:s==="both"?ag.Both:ag.Vertical},kK=(t,s)=>s===ag.Both?$a.translate(["Editor's height: {0} pixels, Editor's width: {1} pixels",t.height,t.width]):$a.translate(["Editor's height: {0} pixels",t.height]),u5=(t,s,c)=>{$n(t.element,"aria-valuetext",kK(s,c))},ig=(t,s,c,i,d)=>{const p=Ts(i*20,d*20),C=l5(t,p,c);return u5(s,C,c),k.some(!0)},nI=(t,s)=>{const c=AK(t);if(c===ag.None)return k.none();const i=c===ag.Both?$a.translate("Press the arrow keys to resize the editor."):$a.translate("Press the Up and Down arrow keys to resize the editor."),d=c===ag.Both?"tox-statusbar__resize-cursor-both":"tox-statusbar__resize-cursor-default";return k.some(ju("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle",d],attributes:{"aria-label":s.translate(i),"data-mce-name":"resize-handle",role:"separator"},behaviours:[S0.config({mode:"mouse",repositionTarget:!1,onDrag:(g,p,C)=>{const S=l5(t,C,c);u5(g,S,c)},blockerClass:"tox-blocker"}),Sn.config({mode:"special",onLeft:g=>ig(t,g,c,-1,0),onRight:g=>ig(t,g,c,1,0),onUp:g=>ig(t,g,c,0,-1),onDown:g=>ig(t,g,c,0,1)}),or.config({}),to.config({}),sr.config(s.tooltips.getConfig({tooltipText:s.translate("Resize")})),Qn("set-aria-valuetext",[ur(g=>{const p=()=>{u5(g,i5(t),c)};t._skinLoaded?p():t.once("SkinLoaded",p)})])],eventOrder:{[hd()]:["add-focusable","set-aria-valuetext"]}},s.icons))},DK=(t,s)=>{const c=(i,d,g)=>so.set(i,[nr(s.translate(["{0} "+g,d[g]]))]);return Na.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Et([_m.button(s.isDisabled),Ec(()=>s.checkUiComponentContext("any")),or.config({}),so.config({}),Lt.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),Qn("wordcount-events",[ef(i=>{const d=Lt.getValue(i),g=d.mode==="words"?"characters":"words";Lt.setValue(i,{mode:g,count:d.count}),c(i,d.count,g)}),ur(i=>{t.on("wordCountUpdate",d=>{const{mode:g}=Lt.getValue(i);Lt.setValue(i,{mode:g,count:d.wordCount}),c(i,d.wordCount,g)})})])]),eventOrder:{[Yi()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},OK=(t,s)=>{const c=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":t.translate(["Build with {0}","TinyMCE"])},innerHtml:t.translate(["Build with {0}",SK.trim()])},behaviours:Et([to.config({})])}]}),i=()=>{const C=qO("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[nr($a.translate(["Press {0} for help",C]))]}},d=()=>{const C=[];return t.hasPlugin("wordcount")&&C.push(DK(t,s)),MD(t)&&C.push(c()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:C}},g=()=>{const C=[],S=PD(t),E=BD(t),O=MD(t)||t.hasPlugin("wordcount"),B=()=>{const I="tox-statusbar__text-container--flex-start",U="tox-statusbar__text-container--flex-end",j="tox-statusbar__text-container--space-around";if(S){const Q="tox-statusbar__text-container-3-cols";return!O&&!E?[Q,j]:O&&!E?[Q,U]:[Q,I]}return[O&&!E?U:I]};return E&&C.push(EK(t,{},s)),S&&C.push(i()),O&&C.push(d()),C.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...B()]},components:C}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const C=g(),S=nI(t,s);return C.concat(S.toArray())})()}},oI=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),_K=(t,s)=>{const c=t.inline,i=c?b7:n4,d=iy(t)?Gj:Wj,g=Dq(),p=Ln(),C=Ln(),S=Ln(),I=Ur().deviceType.isTouch()?["tox-platform-touch"]:[],U=LD(t),j=R0(t),Q=Ss({dom:{tag:"div",classes:["tox-anchorbar"]}}),ie=Ss({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),X=()=>g.mainUi.get().map(xn=>xn.outerContainer).bind(Gs.getHeader),he=()=>Yt.fromOption(g.dialogUi.get().map(xn=>xn.sink),"UI has not been rendered"),we=()=>Yt.fromOption(g.popupUi.get().map(xn=>xn.sink),"(popup) UI has not been rendered"),Me=g.lazyGetInOuterOrDie("anchor bar",Q.getOpt),Fe=g.lazyGetInOuterOrDie("bottom anchor bar",ie.getOpt),Mt=g.lazyGetInOuterOrDie("toolbar",Gs.getToolbar),at=g.lazyGetInOuterOrDie("throbber",Gs.getThrobber),vt=Hj({popup:we,dialog:he},t,Me,Fe),gt=()=>{const xn={attributes:{[W2]:U?im.BottomToTop:im.TopToBottom}},Yn=Gs.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:vt.popup,onEscape:()=>{t.focus()}}),Vs=Gs.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:vt.popup.shared.getSink,providers:vt.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:ug=>{IW(t,ug)},type:j,lazyToolbar:Mt,lazyHeader:()=>X().getOrDie("Could not find header element"),...xn}),ps=Gs.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:vt.popup.shared.providers,onEscape:()=>{t.focus()},type:j}),Ni=tw(t),kr=PT(t),il=NT(t),Ea=E6(t),Xu=_n(Ea),Fl=Ni||kr||il,lu=()=>Ni?[ps]:kr?[Vs]:[],lg=[Xu,Yn];return Gs.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(Fl?[]:["tox-editor-header--empty"]),...xn},components:ae([il?lg:[],lu(),ay(t)?[]:[Q.asSpec()]]),sticky:iy(t),editor:t,sharedBackstage:vt.popup.shared})},_n=xn=>Gs.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]},promotionLink:xn}),hn=()=>{const xn=Gs.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),Yn=Gs.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[xn,Yn]}},$o=()=>{const xn=$T(t),Yn=Jo(xi(),xn)&&lr(xn,"display")==="grid",Vs={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(I),attributes:{...$a.isRtl()?{dir:"rtl"}:{}}},behaviours:Et([Xa.config({useFixed:()=>d.isDocked(X)})])},ps={dom:{styles:{width:document.body.clientWidth+"px"}},events:vr([We(Wg(),il=>{Vn(il.element,"width",document.body.clientWidth+"px")})])},Ni=m(ht(Vs,Yn?ps:{})),kr=Ik(Ni);return C.set(kr),{sink:Ni,mothership:kr}},In=()=>{const xn={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(I),attributes:{...$a.isRtl()?{dir:"rtl"}:{}}},behaviours:Et([Xa.config({useFixed:()=>d.isDocked(X),getBounds:()=>s.getPopupSinkBounds()})])},Yn=m(xn),Vs=Ik(Yn);return S.set(Vs),{sink:Yn,mothership:Vs}},ao=()=>{const xn=gt(),Yn=hn(),Vs=Gs.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:vt.popup}),ps=Gs.parts.viewWrapper({backstage:vt.popup}),Ni=S6(t)&&!c?k.some(OK(t,vt.popup.shared.providers)):k.none(),kr=ae([U?[]:[xn],c?[]:[Yn],U?[xn]:[]]),il=Gs.parts.editorContainer({components:ae([kr,c?[]:[ie.asSpec()]])}),Ea=HD(t),Xu={role:"application",...$a.isRtl()?{dir:"rtl"}:{},...Ea?{"aria-hidden":"true"}:{}},Fl=m(Gs.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(c?["tox-tinymce-inline"]:[]).concat(U?["tox-tinymce--toolbar-bottom"]:[]).concat(I),styles:{visibility:"hidden",...Ea?{opacity:"0",border:"0"}:{}},attributes:Xu},components:[il,...c?[]:[ps,...Ni.toArray()],Vs],behaviours:Et([Ec(()=>vt.popup.shared.providers.checkUiComponentContext("any")),yn.config({disableClass:"tox-tinymce--disabled"}),Sn.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),lu=Ik(Fl);return p.set(lu),{mothership:lu,outerContainer:Fl}},mn=xn=>{const Yn=Fy(Aq(t)),Vs=Fy(kq(t));return t.inline||(xf("div","width",Vs)&&Vn(xn.element,"width",Vs),xf("div","height",Yn)?Vn(xn.element,"height",Yn):Vn(xn.element,"height","400px")),Yn},ot=xn=>{t.addShortcut("alt+F9","focus menubar",()=>{Gs.focusMenubar(xn)}),t.addShortcut("alt+F10","focus toolbar",()=>{Gs.focusToolbar(xn)}),t.addCommand("ToggleToolbarDrawer",(Yn,Vs,ps)=>{Vs!=null&&Vs.skipFocus?(Vj("skipFocus"),Gs.toggleToolbarDrawerWithoutFocusing(xn)):ps!=null&&ps.skip_focus?Gs.toggleToolbarDrawerWithoutFocusing(xn):Gs.toggleToolbarDrawer(xn)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>Gs.isToolbarDrawerToggled(xn)),t.on("blur",()=>{R0(t)===Zu.floating&&Gs.isToolbarDrawerToggled(xn)&&Gs.toggleToolbarDrawerWithoutFocusing(xn)})},Rt=xn=>{const{mainUi:Yn,popupUi:Vs,uiMotherships:ps}=xn;mo(u6(t),(Nh,Kw)=>{t.ui.registry.addGroupToolbarButton(Kw,Nh)});const{buttons:Ni,menuItems:kr,contextToolbars:il,sidebars:Ea,views:Xu}=t.ui.registry.getAll(),Fl=ID(t),lu={menuItems:kr,menus:_6(t),menubar:f6(t),toolbar:Fl.getOrThunk(()=>FT(t)),allowToolbarGroups:j===Zu.floating,buttons:Ni,sidebar:Ea,views:Xu};ot(Yn.outerContainer),Uj(t,Yn.mothership,ps),d.setup(t,vt.popup.shared,X),sK(t,vt.popup),J7(t,vt.popup.shared.getSink,vt.popup),Kj(t),rG(t,at,vt.popup.shared),Hq(t,il,Vs.sink,{backstage:vt.popup}),wK(t,Vs.sink);const lg=t.getElement(),ug=mn(Yn.outerContainer),ub={targetNode:lg,height:ug};return i.render(t,xn,lu,vt.popup,ub)},Hn=xn=>(S.set(xn.mothership),xn),uo=()=>{const xn=ao(),Yn=$o(),Vs=Hp(t)?In():Hn(Yn);g.dialogUi.set(Yn),g.popupUi.set(Vs),g.mainUi.set(xn);const ps={popupUi:Vs,dialogUi:Yn,mainUi:xn,uiMotherships:g.getUiMotherships()};return Rt(ps)};return{popups:{backstage:vt.popup,getMothership:()=>oI("popups",S)},dialogs:{backstage:vt.dialog,getMothership:()=>oI("dialogs",C)},renderUI:uo}},sI=t=>{const s=[],c={};return ko(t,(i,d)=>{i.fold(()=>{s.push(d)},g=>{c[d]=g})}),s.length>0?Yt.error(s):Yt.value(c)},rI=(t,s,c,i)=>{const d=Ss(Np.sketch(g=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:Ae(t.items,p=>n$(g,p,s,c,i))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[d.asSpec()]}],behaviours:Et([Sn.config({mode:"acyclic",useTabstopAt:xe(Ow)}),Rm.memento(d),sP(d,{postprocess:g=>sI(g).fold(p=>(console.error(p),{}),St)}),Qn("dialog-body-panel",[We(_u(),(g,p)=>{g.getSystem().broadcastOn([AA],{newFocus:k.some(p.event.target)})})])])}},RK=(t,s,c)=>Ae(t,(i,d)=>{so.set(c,t[d].view());const g=s.dom.getBoundingClientRect();return so.set(c,[]),g.height}),BK=t=>Xt($e(t,(s,c)=>s>c?-1:s<c?1:0)),MK=(t,s,c)=>{const i=r1(t).dom,d=vl(t,".tox-dialog-wrap").getOr(t),g=lr(d,"position")==="fixed";let p;g?p=Math.max(i.clientHeight,window.innerHeight):p=Math.max(i.offsetHeight,i.scrollHeight);const C=ac(s),E=s.dom.offsetLeft>=c.dom.offsetLeft+ta(c)?Math.max(ac(c),C):C,O=parseInt(lr(t,"margin-top"),10)||0,B=parseInt(lr(t,"margin-bottom"),10)||0,U=ac(t)+O+B-E;return p-U},FK=(t,s)=>{Xt(t).each(c=>sy.showTab(s,c.value))},cI=(t,s)=>{Vn(t,"height",s+"px"),Vn(t,"flex-basis",s+"px")},m4=(t,s,c)=>{vl(t,'[role="dialog"]').each(i=>{As(i,'[role="tablist"]').each(d=>{c.get().map(g=>(Vn(s,"height","0"),Vn(s,"flex-basis","0"),Math.min(g,MK(i,s,d)))).each(g=>{cI(s,g)})})})},d5=t=>As(t,'[role="tabpanel"]'),aI=t=>{const s=Ln();return{extraEvents:[ur(d=>{const g=d.element;d5(g).each(p=>{Vn(p,"visibility","hidden"),d.getSystem().getByDom(p).toOptional().each(C=>{const S=RK(t,p,C);BK(S).fold(s.clear,s.set)}),m4(g,p,s),Ro(p,"visibility"),FK(t,d),requestAnimationFrame(()=>{m4(g,p,s)})})}),We(Wg(),d=>{const g=d.element;d5(g).each(p=>{m4(g,p,s)})}),We(wA,(d,g)=>{const p=d.element;d5(p).each(C=>{const S=Dc(oc(C));Vn(C,"visibility","hidden");const E=fr(C,"height").map(I=>parseInt(I,10));Ro(C,"height"),Ro(C,"flex-basis");const O=C.dom.getBoundingClientRect().height;E.forall(I=>O>I)?(s.set(O),m4(p,C,s)):E.each(I=>{cI(C,I)}),Ro(C,"visibility"),S.each(kc)})})],selectFirst:!1}},iI="send-data-to-section",lI="send-data-to-view",NK=(t,s,c,i)=>{const d=qt({}),g=O=>{const B=Lt.getValue(O),I=sI(B).getOr({}),U=d.get(),j=ht(U,I);d.set(j)},p=O=>{const B=d.get();Lt.setValue(O,B)},C=qt(null),S=Ae(t.tabs,O=>({value:O.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[nr(c.shared.providers.translate(O.title))],view:()=>[Np.sketch(B=>({dom:{tag:"div",classes:["tox-form"]},components:Ae(O.items,I=>n$(B,I,s,c,i)),formBehaviours:Et([Sn.config({mode:"acyclic",useTabstopAt:xe(Ow)}),Qn("TabView.form.events",[ur(p),Sd(g)]),su.config({channels:A1([{key:iI,value:{onReceive:g}},{key:lI,value:{onReceive:p}}])})])}))]})),E=aI(S);return sy.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(O,B,I)=>{const U=Lt.getValue(B);On(O,Ey,{name:U,oldName:C.get()}),C.set(U)},tabs:S,components:[sy.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[e6.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Et([or.config({})])}),sy.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:E.selectFirst,tabSectionBehaviours:Et([Qn("tabpanel",E.extraEvents),Sn.config({mode:"acyclic"}),ut.config({find:O=>Xt(sy.getViewItems(O))}),tb(k.none(),O=>(O.getSystem().broadcastOn([iI],{}),d.get()),(O,B)=>{d.set(B),O.getSystem().broadcastOn([lI],{})})])})},uI=(t,s,c,i,d,g)=>{const p=E=>{const O=E.body;switch(O.type){case"tabpanel":return[NK(O,E.initialData,i,g)];default:return[rI(O,E.initialData,i,g)]}},C=(E,O)=>k.some({isTabPanel:()=>O.body.type==="tabpanel"}),S={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...c.map(E=>({id:E})).getOr({}),...d?S:{}}},components:[],behaviours:Et([Rm.childAt(0),ru.config({channel:`${vP}-${s}`,updateState:C,renderComponents:p,initialData:t})])}},PK=(t,s,c,i,d,g)=>uI(t,s,k.some(c),i,d,g),m5=(t,s,c,i)=>{const d=uI(t,s,k.none(),c,!1,i);return Gc.parts.body(d)},$K=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[gP(k.none(),{dom:{tag:"iframe",attributes:{src:t.url}},behaviours:Et([or.config({}),to.config({})])})]}],behaviours:Et([Sn.config({mode:"acyclic",useTabstopAt:xe(Ow)})])};return Gc.parts.body(s)},IK=ry.deviceType.isTouch(),dI=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),mI=(t,s)=>Gc.parts.close(Na.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:Et([or.config({})])})),fI=()=>Gc.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),gI=(t,s)=>Gc.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:Eh(`<p>${W6(s.translate(t))}</p>`)}]}]}),hI=t=>Gc.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),pI=(t,s)=>[af.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),af.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],f4=t=>{const s="tox-dialog",c=s+"-wrap",i=c+"__backdrop",d=s+"__disable-scroll";return Gc.sketch({lazySink:t.lazySink,onEscape:g=>(t.onEscape(g),k.some(!0)),useTabstopAt:g=>!Ow(g),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:Eh(`<div class="${c}"></div>`),components:[{dom:{tag:"div",classes:IK?[i,i+"--opaque"]:[i]}}]}},dragBlockClass:c,modalBehaviours:Et([to.config({}),Qn("dialog-events",t.dialogEvents.concat([th(_u(),(g,p)=>{ke.isBlocked(g)?re():Sn.focusIn(g)}),We(D1(),(g,p)=>{g.getSystem().broadcastOn([AA],{newFocus:p.event.newFocus})})])),Qn("scroll-lock",[ur(()=>{Ps(xi(),d)}),Sd(()=>{Tr(xi(),d)})]),...t.extraBehaviours]),eventOrder:{[Yi()]:["dialog-events"],[hd()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[Km()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},f5=t=>Na.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:Et([or.config({}),sr.config(t.tooltips.getConfig({tooltipText:t.translate("Close")}))]),components:[ju("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:s=>{Do(s,Xp)}}),bI=(t,s,c,i)=>{const d=g=>[nr(i.translate(g.title))];return{dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...c.map(g=>({id:g})).getOr({})}},components:[],behaviours:Et([ru.config({channel:`${bP}-${s}`,initialData:t,renderComponents:d})])}},Py=()=>({dom:Eh('<div class="tox-dialog__draghandle"></div>')}),LK=(t,s,c,i)=>af.sketch({dom:Eh('<div class="tox-dialog__header"></div>'),components:[bI(t,s,k.some(c),i),Py(),f5(i)],containerBehaviours:Et([S0.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>ga(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"},onDrag:(d,g)=>{d.getSystem().broadcastOn([Ba()],{target:g})}})])}),HK=(t,s,c)=>{const i=Gc.parts.title(bI(t,s,k.none(),c)),d=Gc.parts.draghandle(Py()),g=Gc.parts.close(f5(c)),p=[i].concat(t.draggable?[d]:[]).concat([g]);return af.sketch({dom:Eh('<div class="tox-dialog__header"></div>'),components:p})},g4=(t,s,c)=>HK({title:c.shared.providers.translate(t),draggable:c.dialog.isDraggableModal()},s,c.shared.providers),vI=(t,s,c,i)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":c.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${i.getOr(0)}px`,position:"absolute"}},behaviours:s,components:[{dom:Eh('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),yI=(t,s,c)=>({onClose:()=>c.closeWindow(),onBlock:i=>{const d=As(t().element,".tox-dialog__header").map(g=>ac(g));Gc.setBusy(t(),(g,p)=>vI(i.message,p,s,d))},onUnblock:()=>{Gc.setIdle(t())}}),CI="tox-dialog--fullscreen",g5="tox-dialog--width-lg",h5="tox-dialog--width-md",h4=t=>{switch(t){case"large":return k.some(g5);case"medium":return k.some(h5);default:return k.none()}},wI=(t,s)=>{const c=At.fromDom(s.element.dom);Xr(c,CI)||(ha(c,[g5,h5]),h4(t).each(i=>Ps(c,i)))},SI=(t,s)=>{const c=At.fromDom(t.element.dom),i=C1(c),d=De(i,g=>g===g5||g===h5).or(h4(s));dd(c,[CI,...d.toArray()])},xI=(t,s,c)=>m(f4({...t,firstTabstop:1,lazySink:c.shared.getSink,extraBehaviours:[SA({}),...t.extraBehaviours],onEscape:i=>{Do(i,Xp)},dialogEvents:s,eventOrder:{[Hg()]:[ru.name(),su.name()],[hd()]:["scroll-lock",ru.name(),"messages","dialog-events","alloy.base.behaviour"],[Km()]:["alloy.base.behaviour","dialog-events","messages",ru.name(),"scroll-lock"]}})),p5=(t,s={})=>{const c=i=>{const d=Ae(i.items,g=>{const p=on(s,g.name).getOr(qt(!1));return{...g,storage:p}});return{...i,items:d}};return Ae(t,i=>i.type==="menu"?c(i):i)},EI=t=>co(t,(s,c)=>c.type==="menu"?co(c.items,(d,g)=>(d[g.name]=g.storage,d),s):s,{}),TI=(t,s)=>[Qg(_u(),pP),t(Dw,(c,i,d,g)=>{hl(g.element)&&Dc(oc(g.element)).each(Er),s.onClose(),i.onClose()}),t(Xp,(c,i,d,g)=>{i.onCancel(c),Do(g,Dw)}),We(Q8,(c,i)=>s.onUnblock()),We(CA,(c,i)=>s.onBlock(i.event))],zK=(t,s)=>{const c=(d,g)=>We(d,(p,C)=>{i(p,(S,E)=>{g(t(),S,C.event,p)})}),i=(d,g)=>{ru.getState(d).get().each(p=>{g(p,d)})};return[...TI(c,s),c(rg,(d,g,p)=>{g.onAction(d,{name:p.name})})]},AI=(t,s,c)=>{const i=(g,p)=>We(g,(C,S)=>{d(C,(E,O)=>{p(t(),E,S.event,C)})}),d=(g,p)=>{ru.getState(g).get().each(C=>{p(C.internalDialog,g)})};return[...TI(i,s),i(xy,(g,p)=>p.onSubmit(g)),i(Ml,(g,p,C)=>{p.onChange(g,{name:C.name})}),i(rg,(g,p,C,S)=>{const E=()=>S.getSystem().isConnected()?Sn.focusIn(S):void 0,O=U=>Hc(U,"disabled")||Lc(U,"aria-disabled").exists(j=>j==="true"),B=oc(S.element),I=Dc(B);p.onAction(g,{name:C.name,value:C.value}),Dc(B).fold(E,U=>{O(U)||I.exists(j=>ua(U,j)&&O(j))?E():c().toOptional().filter(j=>!ua(j.element,U)).each(E)})}),i(Ey,(g,p,C)=>{p.onTabChange(g,{newTabName:C.name,oldTabName:C.oldName})}),Sd(g=>{const p=t();Lt.setValue(g,p.getData())})]},VK=(t,s)=>Q_(t,t.type,s),UK=(t,s,c)=>De(s,i=>i.name===c).bind(i=>i.memento.getOpt(t)),WK=(t,s)=>{const c=s.map(C=>C.footerButtons).getOr([]),i=Fs(c,C=>C.align==="start"),d=(C,S)=>af.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${C}`]},components:Ae(S,E=>E.memento.asSpec())}),g=d("start",i.pass),p=d("end",i.fail);return[g,p]},qw=(t,s,c)=>{const i=(d,g)=>{const p=Ae(g.buttons,S=>{const E=Ss(VK(S,c));return{name:S.name,align:S.align,memento:E}}),C=S=>UK(d,p,S);return k.some({lookupByName:C,footerButtons:p})};return{dom:Eh('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Et([ru.config({channel:`${yP}-${s}`,initialData:t,updateState:i,renderComponents:WK})])}},ZK=(t,s,c)=>qw(t,s,c),kI=(t,s,c)=>Gc.parts.footer(qw(t,s,c)),p4=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const i=ut.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return Np.getField(i,s).orThunk(()=>t.getFooter().bind(p=>ru.getState(p).get()).bind(p=>p.lookupByName(s)))}else return k.none()},jK=(t,s)=>{const c=t.getRoot();return ru.getState(c).get().map(i=>ku(Ir("data",i.dataValidator,s))).getOr(s)},DI=(t,s,c)=>{const i=j=>{const Q=t.getRoot();Q.getSystem().isConnected()&&j(Q)},U={getData:()=>{const j=t.getRoot(),Q=j.getSystem().isConnected()?t.getFormWrapper():j,ie=Lt.getValue(Q),X=mo(c,he=>he.get());return{...ie,...X}},setData:j=>{i(Q=>{const ie=U.getData(),X=ht(ie,j),he=jK(t,X),we=t.getFormWrapper();Lt.setValue(we,he),ko(c,(Me,Fe)=>{So(X,Fe)&&Me.set(X[Fe])})})},setEnabled:(j,Q)=>{p4(t,j).each(Q?yn.enable:yn.disable)},focus:j=>{p4(t,j).each(to.focus)},block:j=>{if(!Nt(j))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");i(Q=>{On(Q,CA,{message:j})})},unblock:()=>{i(j=>{Do(j,Q8)})},showTab:j=>{i(Q=>{const ie=t.getBody();ru.getState(ie).get().exists(he=>he.isTabPanel())&&ut.getCurrent(ie).each(he=>{sy.showTab(he,j)})})},redial:j=>{i(Q=>{const ie=t.getId(),X=s(j),he=p5(X.internalDialog.buttons,c);Q.getSystem().broadcastOn([`${TA}-${ie}`],X),Q.getSystem().broadcastOn([`${bP}-${ie}`],X.internalDialog),Q.getSystem().broadcastOn([`${vP}-${ie}`],X.internalDialog),Q.getSystem().broadcastOn([`${yP}-${ie}`],{...X.internalDialog,buttons:he}),U.setData(X.initialData)})},close:()=>{i(j=>{Do(j,Dw)})},toggleFullscreen:t.toggleFullscreen};return U},GK=(t,s,c)=>{const i=nt("dialog"),d=t.internalDialog,g=g4(d.title,i,c),p=qt(d.size),C=we=>p4(X,we),S=h4(p.get()).toArray(),E=(we,Me)=>(p.set(Me.internalDialog.size),wI(Me.internalDialog.size,we),k.some(Me)),O=m5({body:d.body,initialData:d.initialData},i,c,C),B=p5(d.buttons),I=EI(B),U=_r(B.length!==0,kI({buttons:B},i,c)),j=AI(()=>he,yI(()=>ie,c.shared.providers,s),c.shared.getSink),Q={id:i,header:g,body:O,footer:U,extraClasses:S,extraBehaviours:[ru.config({channel:`${TA}-${i}`,updateState:E,initialData:t})],extraStyles:{}},ie=xI(Q,j,c),X=(()=>{const we=()=>{const Fe=Gc.getBody(ie);return ut.getCurrent(Fe).getOr(Fe)},Me=()=>{SI(ie,p.get())};return{getId:G(i),getRoot:G(ie),getBody:()=>Gc.getBody(ie),getFooter:()=>Gc.getFooter(ie),getFormWrapper:we,toggleFullscreen:Me}})(),he=DI(X,s.redial,I);return{dialog:ie,instanceApi:he}},b5=(t,s,c,i=!1,d)=>{const g=nt("dialog"),p=nt("dialog-label"),C=nt("dialog-content"),S=t.internalDialog,E=gt=>p4(at,gt),O=qt(S.size),B=h4(O.get()).toArray(),I=(gt,_n)=>(O.set(_n.internalDialog.size),wI(_n.internalDialog.size,gt),d(),k.some(_n)),U=Ss(LK({title:S.title,draggable:!0},g,p,c.shared.providers)),j=Ss(PK({body:S.body,initialData:S.initialData},g,C,c,i,E)),Q=p5(S.buttons),ie=EI(Q),X=_r(Q.length!==0,Ss(ZK({buttons:Q},g,c))),he=AI(()=>vt,{onBlock:gt=>{ke.block(Fe,(_n,hn)=>{const $o=U.getOpt(Fe).map(In=>ac(In.element));return vI(gt.message,hn,c.shared.providers,$o)})},onUnblock:()=>{ke.unblock(Fe)},onClose:()=>s.closeWindow()},c.shared.getSink),we="tox-dialog-inline",Me=Ur().os,Fe=m({dom:{tag:"div",classes:["tox-dialog",we,...B],attributes:{role:"dialog",...Me.isMacOS()?{"aria-label":S.title}:{"aria-labelledby":p}}},eventOrder:{[Hg()]:[ru.name(),su.name()],[Yi()]:["execute-on-form"],[hd()]:["reflecting","execute-on-form"]},behaviours:Et([Sn.config({mode:"cyclic",onEscape:gt=>(Do(gt,Dw),k.some(!0)),useTabstopAt:gt=>!Ow(gt)&&(ml(gt)!=="button"||Cc(gt,"disabled")!=="disabled"),firstTabstop:1}),ru.config({channel:`${TA}-${g}`,updateState:I,initialData:t}),to.config({}),Qn("execute-on-form",he.concat([th(_u(),(gt,_n)=>{Sn.focusIn(gt)}),We(D1(),(gt,_n)=>{gt.getSystem().broadcastOn([AA],{newFocus:_n.event.newFocus})})])),ke.config({getRoot:()=>k.some(Fe)}),so.config({}),SA({})]),components:[U.asSpec(),j.asSpec(),...X.map(gt=>gt.asSpec()).toArray()]}),Mt=()=>{SI(Fe,O.get())},at={getId:G(g),getRoot:G(Fe),getFooter:()=>X.map(gt=>gt.get(Fe)),getBody:()=>j.get(Fe),getFormWrapper:()=>{const gt=j.get(Fe);return ut.getCurrent(gt).getOr(gt)},toggleFullscreen:Mt},vt=DI(at,s.redial,ie);return{dialog:Fe,instanceApi:vt}};var v5=tinymce.util.Tools.resolve("tinymce.util.URI");const qK=t=>{const s=p=>{t.getSystem().isConnected()&&p(t)};return{block:p=>{if(!Nt(p))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(C=>{On(C,CA,{message:p})})},unblock:()=>{s(p=>{Do(p,Q8)})},close:()=>{s(p=>{Do(p,Dw)})},sendMessage:p=>{s(C=>{C.getSystem().broadcastOn([CP],p)})}}},KK=["insertContent","setContent","execCommand","close","block","unblock"],OI=t=>vn(t)&&KK.indexOf(t.mceAction)!==-1,YK=t=>!OI(t)&&vn(t)&&So(t,"mceAction"),y5=(t,s,c)=>{switch(c.mceAction){case"insertContent":t.insertContent(c.content);break;case"setContent":t.setContent(c.content);break;case"execCommand":const i=cn(c.ui)?c.ui:!1;t.execCommand(c.cmd,i,c.value);break;case"close":s.close();break;case"block":s.block(c.message);break;case"unblock":s.unblock();break}},_I=(t,s,c,i)=>{const d=nt("dialog"),g=g4(t.title,d,i),p=$K(t),C=t.buttons.bind(we=>we.length===0?k.none():k.some(kI({buttons:we},d,i))),S=zK(()=>he,yI(()=>X,i.shared.providers,s)),E={...t.height.fold(()=>({}),we=>({height:we+"px","max-height":we+"px"})),...t.width.fold(()=>({}),we=>({width:we+"px","max-width":we+"px"}))},O=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],B=new v5(t.url,{base_uri:new v5(window.location.href)}),I=`${B.protocol}://${B.host}${B.port?":"+B.port:""}`,U=zs(),j=(we,Me)=>k.some(Me),Q=[ru.config({channel:`${TA}-${d}`,updateState:j,initialData:t}),Qn("messages",[ur(()=>{const we=Es(At.fromDom(window),"message",Me=>{if(B.isSameOrigin(new v5(Me.raw.origin))){const Fe=Me.raw.data;OI(Fe)?y5(c,he,Fe):YK(Fe)&&t.onMessage(he,Fe)}});U.set(we)}),Sd(U.clear)]),su.config({channels:{[CP]:{onReceive:(we,Me)=>{As(we.element,"iframe").each(Fe=>{const Mt=Fe.dom.contentWindow;qn(Mt)&&Mt.postMessage(Me,I)})}}}})],X=xI({id:d,header:g,body:p,footer:C,extraClasses:O,extraBehaviours:Q,extraStyles:E},S,i),he=qK(X);return{dialog:X,instanceApi:he}},XK=t=>{const s=t.shared;return{open:(i,d)=>{const g=()=>{Gc.hide(E),d()},p=Ss(Q_({context:"any",name:"close-alert",text:"OK",primary:!0,buttonType:k.some("primary"),align:"end",enabled:!0,icon:k.none()},"cancel",t)),C=fI(),S=mI(g,s.providers),E=m(f4({lazySink:()=>s.getSink(),header:dI(C,S),body:gI(i,s.providers),footer:k.some(hI(pI([],[p.asSpec()]))),onEscape:g,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[We(Xp,g)],eventOrder:{}}));Gc.show(E);const O=p.get(E);to.focus(O)}}},JK=t=>{const s=t.shared;return{open:(i,d)=>{const g=I=>{Gc.hide(O),d(I)},p=Ss(Q_({context:"any",name:"yes",text:"Yes",primary:!0,buttonType:k.some("primary"),align:"end",enabled:!0,icon:k.none()},"submit",t)),C=Q_({context:"any",name:"no",text:"No",primary:!1,buttonType:k.some("secondary"),align:"end",enabled:!0,icon:k.none()},"cancel",t),S=fI(),E=mI(()=>g(!1),s.providers),O=m(f4({lazySink:()=>s.getSink(),header:dI(S,E),body:gI(i,s.providers),footer:k.some(hI(pI([],[C,p.asSpec()]))),onEscape:()=>g(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[We(Xp,()=>g(!1)),We(xy,()=>g(!0))],eventOrder:{}}));Gc.show(O);const B=p.get(O);to.focus(B)}}},RI=(t,s)=>ku(Ir("data",s,t)),BI=t=>Ag(t,".tox-alert-dialog")||Ag(t,".tox-confirm-dialog"),QK=(t,s,c,i)=>s&&c?[]:[Mr.config({contextual:{lazyContext:()=>k.some(mc(At.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition",onHide:i},modes:["top"],lazyViewport:d=>zp(t,d.element).map(p=>({bounds:B0(p),optScrollEnv:k.some({currentScrollTop:p.element.dom.scrollTop,scrollElmTop:fa(p.element).top})})).getOrThunk(()=>({bounds:Za(),optScrollEnv:k.none()}))})],eY=t=>{const s=t.editor,c=iy(s),i=XK(t.backstages.dialog),d=JK(t.backstages.dialog),g=(j,Q,ie)=>{if(!Fn(Q)){if(Q.inline==="toolbar")return E(j,t.backstages.popup.shared.anchors.inlineDialog(),ie,Q);if(Q.inline==="bottom")return O(j,t.backstages.popup.shared.anchors.inlineBottomDialog(),ie,Q);if(Q.inline==="cursor")return E(j,t.backstages.popup.shared.anchors.cursor(),ie,Q)}return S(j,ie)},p=(j,Q)=>C(j,Q),C=(j,Q)=>{const ie=X=>{const he=_I(X,{closeWindow:()=>{Gc.hide(he.dialog),Q(he.instanceApi)}},s,t.backstages.dialog);return Gc.show(he.dialog),he.instanceApi};return j0.openUrl(ie,j)},S=(j,Q)=>{const ie=(X,he,we)=>{const Me=he,Mt=GK({dataValidator:we,initialData:Me,internalDialog:X},{redial:j0.redial,closeWindow:()=>{Gc.hide(Mt.dialog),Q(Mt.instanceApi)}},t.backstages.dialog);return Gc.show(Mt.dialog),Mt.instanceApi.setData(Me),Mt.instanceApi};return j0.open(ie,j)},E=(j,Q,ie,X)=>{const he=(we,Me,Fe)=>{const Mt=RI(Me,Fe),at=Ln(),vt=t.backstages.popup.shared.header.isPositionedAtTop(),gt={dataValidator:Fe,initialData:Mt,internalDialog:we},_n=()=>at.on(ot=>{Fr.reposition(ot),(!c||!vt)&&Mr.refresh(ot)}),hn=b5(gt,{redial:j0.redial,closeWindow:()=>{at.on(Fr.hide),s.off("ResizeEditor",_n),s.off("ScrollWindow",$o),at.clear(),ie(hn.instanceApi)}},t.backstages.popup,X.ariaAttrs,_n),$o=()=>hn.dialog.getSystem().broadcastOn([Ba()],{target:hn.dialog.element}),In=()=>hn.dialog.getSystem().broadcastOn([nf()],{target:hn.dialog.element}),ao=m(Fr.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:X.persistent?{event:"doNotDismissYet"}:{},...vt?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Et([Qn("window-manager-inline-events",[We(Zg(),(ot,Rt)=>{Do(hn.dialog,Xp)})]),...QK(s,c,vt,In)]),isExtraPart:(ot,Rt)=>BI(Rt)}));at.set(ao);const mn=()=>{const ot=s.inline?xi():At.fromDom(s.getContainer()),Rt=mc(ot);return k.some(Rt)};return Fr.showWithinBounds(ao,b(hn.dialog),{anchor:Q},mn),(!c||!vt)&&(Mr.refresh(ao),s.on("ResizeEditor",_n)),s.on("ScrollWindow",$o),hn.instanceApi.setData(Mt),Sn.focusIn(hn.dialog),hn.instanceApi};return j0.open(he,j)},O=(j,Q,ie,X)=>{const he=(we,Me,Fe)=>{const Mt=RI(Me,Fe),at=Ln(),vt=t.backstages.popup.shared.header.isPositionedAtTop(),gt={dataValidator:Fe,initialData:Mt,internalDialog:we},_n=()=>at.on(ao=>{Fr.reposition(ao),Mr.refresh(ao)}),hn=b5(gt,{redial:j0.redial,closeWindow:()=>{at.on(Fr.hide),s.off("ResizeEditor ScrollWindow ElementScroll",_n),at.clear(),ie(hn.instanceApi)}},t.backstages.popup,X.ariaAttrs,_n),$o=m(Fr.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:X.persistent?{event:"doNotDismissYet"}:{},...vt?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Et([Qn("window-manager-inline-events",[We(Zg(),(ao,mn)=>{Do(hn.dialog,Xp)})]),Mr.config({contextual:{lazyContext:()=>k.some(mc(At.fromDom(s.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:ao=>zp(s,ao.element).map(ot=>({bounds:B0(ot),optScrollEnv:k.some({currentScrollTop:ot.element.dom.scrollTop,scrollElmTop:fa(ot.element).top})})).getOrThunk(()=>({bounds:Za(),optScrollEnv:k.none()}))})]),isExtraPart:(ao,mn)=>BI(mn)}));at.set($o);const In=()=>t.backstages.popup.shared.getSink().toOptional().bind(ao=>{const mn=zp(s,ao.element),ot=15,Rt=mn.map(xn=>B0(xn)).getOr(Za()),Hn=mc(At.fromDom(s.getContentAreaContainer())),uo=ep(Hn,Rt);return k.some(wc(uo.x,uo.y,uo.width,uo.height-ot))});return Fr.showWithinBounds($o,b(hn.dialog),{anchor:Q},In),Mr.refresh($o),s.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",_n),hn.instanceApi.setData(Mt),Sn.focusIn(hn.dialog),hn.instanceApi};return j0.open(he,j)};return{open:g,openUrl:p,alert:(j,Q)=>{i.open(j,Q)},close:j=>{j.close()},confirm:(j,Q)=>{d.open(j,Q)}}},tY=t=>{o6(t),h_(t),V7(t)};var nY=()=>{aV.add("silver",t=>{tY(t);let s=()=>Za();const{dialogs:c,popups:i,renderUI:d}=_K(t,{getPopupSinkBounds:()=>s()}),g=()=>{const O=d();return zp(t,i.getMothership().element).each(I=>{s=()=>B0(I)}),O};Y8.register(t,i.backstage.shared);const p=eY({editor:t,backstages:{popup:i.backstage,dialog:c.backstage}}),C=Ln(),S=()=>DV(t,{backstage:i.backstage},i.getMothership(),C),E=()=>As(At.fromDom(t.getContainer()),".tox-promotion").map(O=>O.dom).getOrNull();return{renderUI:g,getWindowManagerImpl:G(p),getNotificationManagerImpl:S,getPromotionElement:E}})};nY()})();tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12.7 18.3a1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v1a1 1 0 0 0 .3.7 1 1 0 0 0 .7.3 1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7v-1a1 1 0 0 0-.3-.7ZM11.3 5.7a1 1 0 0 0 .7.3 1 1 0 0 0 .7-.3A1 1 0 0 0 13 5V4a1 1 0 0 0-.3-.7A1 1 0 0 0 12 3a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v1a1 1 0 0 0 .3.7Zm9.4 5.6a1 1 0 0 0-.7-.3h-1a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.7 1 1 0 0 0 .7.3h1a1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7Zm-15 1.4A1 1 0 0 0 6 12a1 1 0 0 0-.3-.7A1 1 0 0 0 5 11H4a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.7 1 1 0 0 0 .7.3h1a1 1 0 0 0 .7-.3Zm13 4.6-.7-.8a1 1 0 0 0-.8-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.8l.7.7a1 1 0 0 0 .7.3 1 1 0 0 0 .8-.3 1 1 0 0 0 .3-.8 1 1 0 0 0-.3-.7ZM5.3 6.7l.7.8a1 1 0 0 0 .8.3 1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.8l-.7-.7A1 1 0 0 0 6 5a1 1 0 0 0-.8.3 1 1 0 0 0-.3.8 1 1 0 0 0 .3.6Zm12 1a1 1 0 0 0 .7-.2l.7-.7A1 1 0 0 0 19 6a1 1 0 0 0-.3-.8 1 1 0 0 0-.8-.3 1 1 0 0 0-.7.3l-.7.7a1 1 0 0 0-.3.8 1 1 0 0 0 .3.7 1 1 0 0 0 .7.2ZM6.7 16.4a1 1 0 0 0-.8.2l-.7.7a1 1 0 0 0-.3.7 1 1 0 0 0 .3.8 1 1 0 0 0 .8.3 1 1 0 0 0 .7-.3l.7-.7a1 1 0 0 0 .3-.8 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3Z"/><path fill-rule="evenodd" d="M13.6 8.3A4 4 0 0 0 12 8a4 4 0 0 0-1.6.3A4 4 0 0 0 9 9.5a4 4 0 0 0-.6 1A4 4 0 0 0 8 12c0 .6.1 1 .3 1.6a4 4 0 0 0 2.1 2 4 4 0 0 0 1.6.4 4 4 0 0 0 1.6-.3 4 4 0 0 0 2-2.1A4 4 0 0 0 16 12a4 4 0 0 0-.3-1.6 4 4 0 0 0-2.1-2ZM14 12a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',"checkmark-filled":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 2a10 10 0 1 1 0 20 10 10 0 0 1 0-20Zm4.8 5a1 1 0 0 0-1.4.3l-5.4 8-2-2.1a1 1 0 1 0-1.5 1.4l3 3a1 1 0 0 0 1.5-.2l6-9a1 1 0 0 0-.2-1.4Z"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',"close-filled":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 2a10 10 0 1 1 0 20 10 10 0 0 1 0-20Zm4.7 5.3a1 1 0 0 0-1.3 0L12 10.6 8.6 7.3a1 1 0 0 0-1.3 1.3l3.3 3.4-3.3 3.4a1 1 0 0 0 1.3 1.3l3.4-3.3 3.4 3.3a1 1 0 0 0 1.3-1.3L13.4 12l3.3-3.4a1 1 0 0 0 0-1.3Z"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24" class="color-swatch-remove-color"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 0 1 19.4 9c.4 1 .6 2 .6 3.1s-.2 2.1-.6 3.1a8 8 0 0 1-1.7 2.6 8 8 0 0 1-2.6 1.7 7.8 7.8 0 0 1-3.1.6 7.8 7.8 0 0 1-3.1-.6 8 8 0 0 1-2.6-1.7A8 8 0 0 1 4.6 15 7.8 7.8 0 0 1 4 12c0-1.1.2-2.1.6-3.1a8 8 0 0 1 1.7-2.6A8 8 0 0 1 9 4.6 7.8 7.8 0 0 1 12 4Zm-6 8a6 6 0 0 0 1.8 4.2 6 6 0 0 0 1.9 1.3 5.8 5.8 0 0 0 2.3.5V6c-.8 0-1.6.2-2.3.5a6 6 0 0 0-2 1.3 6 6 0 0 0-1.2 1.9A5.8 5.8 0 0 0 6 12Z"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-gear-properties":'<svg height="24" width="24"><path d="M17.3 14.5a7.1 7.1 0 0 1 1.2.6l1.5-.5 1 1.8-1.2 1V18.7l1.2 1-1 1.6-1.5-.4a4.5 4.5 0 0 1-.6.3 7.1 7.1 0 0 1-.6.3L17 23h-2l-.3-1.5a7.4 7.4 0 0 1-.6-.3 4.5 4.5 0 0 1-.6-.3l-1.5.5-1-1.8 1.2-1a3.9 3.9 0 0 1 0-.6v-.7l-1.2-1 1-1.6 1.5.4a4.5 4.5 0 0 1 1.2-.6L15 13h2zM16 16a2 2 0 0 0-1.5.6A1.9 1.9 0 0 0 14 18c0 .6.2 1 .6 1.4s1 .6 1.5.6 1-.2 1.5-.6.6-.8.6-1.4-.2-1-.6-1.4A2 2 0 0 0 16 16z" fill-rule="evenodd"/><path d="M19 7.6V12h-2V9h-4V5H7v14h3v2H7a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h7.4z"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',feedback:'<svg width="24" height="24"><path fill-rule="evenodd" d="M16 6c1 0 2 1 2 2v5c0 1-1 2-2 2h-3l-4 3v-3H8c-1 0-2-1-2-2V8c0-1 1-2 2-2h8Zm-7 5v1h4v-1H9Zm0-2v1h6V9H9Z"/></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-code":'<svg width="24" height="24"><path d="m10 22 2-7H6l9-13h2l-2 8h7L12 22h-2ZM6 2h7l-1.4 2H6V2Zm4.2 4H4v2h4.8l1.4-2Zm-2.7 4H2v2h4l1.5-2Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg height="24" width="24"><path d="M11.5 16.3a.7.7 0 1 0 1.4 0V14l2.7-6a.7.7 0 1 0-1.2-.6l-2.2 5-2.3-4.9C9.6 7 8.7 7 8 7.2v1.1c.8-.2.9 0 1.2 1l2.3 4.7z"/><path d="M4 3h16a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm1 2h14v14H5z" fill-rule="evenodd"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg height="24" width="24"><path d="M5 4 3.6 5.4l3.9 4C6.6 10.7 6 12.3 6 14a6 6 0 0 0 10.3 4.2l1.9 1.8 1.4-1.4z" fill-rule="evenodd"/><path d="M13.4 8.4c.9 1 1.6 2.1 2 3.2l2.6 2.6V14c0-5-6-10-6-10s-1 .8-2.1 2l1.4 1.5.7-.7 1.4 1.6z"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg height="48" width="48"><path d="M8 14a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 24a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 34a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0z" fill-rule="evenodd"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-bull-default":'<svg height="48" width="48"><path d="M14 14a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/><path d="M12 24a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0z" fill-rule="evenodd"/><path d="M16 31h6v6h-6z"/><path d="M16 31h6v6h-6z"/><path d="M18 12h22v4H18zm4 10h18v4H22zm4 10h14v4H26z" opacity=".2"/></svg>',"list-bull-disc":'<svg height="48" width="48"><path d="M14 14a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm0 10a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm0 10a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-bull-square":'<svg height="48" width="48"><path d="M8 21h6v6H8zm0 10h6v6H8zm0-20h6v6H8z"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"math-equation":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4.8c.1-.5.5-.8 1-.8h10a1 1 0 1 1 0 2h-9.2L8.3 19.2a1 1 0 0 1-1.7.4l-3.4-4.2a1 1 0 0 1 1.6-1.2l2 2.5L9 4.8Zm9.7 5.5c.4.4.4 1 0 1.4L17 13.5l1.8 1.8a1 1 0 1 1-1.4 1.4L15.5 15l-1.8 1.8a1 1 0 0 1-1.4-1.4l1.8-1.8-1.8-1.8a1 1 0 0 1 1.4-1.4l1.8 1.8 1.8-1.8a1 1 0 0 1 1.4 0Z"/></svg>',mentions:'<svg height="24" width="24"><path d="M12 21a8.8 8.8 0 0 1-3.5-.7 9 9 0 0 1-2.9-2 9 9 0 0 1-1.9-2.8A8.8 8.8 0 0 1 3 12c0-1.3.2-2.4.7-3.5a9 9 0 0 1 4.8-4.8A8.8 8.8 0 0 1 12 3c1.3 0 2.4.2 3.5.7a9.1 9.1 0 0 1 4.8 4.8A8.7 8.7 0 0 1 21 12v1.4a3 3 0 0 1-.9 2.2 3 3 0 0 1-2.2.9c-.5 0-1-.1-1.5-.4a3.8 3.8 0 0 1-1.1-1 4.8 4.8 0 0 1-1.5 1 4.3 4.3 0 0 1-1.8.4c-1.2 0-2.3-.4-3.2-1.3-.9-.9-1.3-2-1.3-3.2s.4-2.3 1.3-3.2c.9-.9 2-1.3 3.2-1.3s2.3.4 3.2 1.3c.9.9 1.3 2 1.3 3.2v1.4c0 .4.1.7.4 1 .3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1V12c0-2-.7-3.8-2.1-5.2S14 4.7 12 4.7s-3.8.7-5.2 2.1S4.7 10 4.7 12s.7 3.8 2.1 5.2 3.2 2.1 5.2 2.1h4.5V21zm0-6.2c.8 0 1.4-.3 2-.8a2.7 2.7 0 0 0 .8-2c0-.8-.3-1.4-.8-2a2.7 2.7 0 0 0-2-.8c-.8 0-1.4.3-2 .8a2.7 2.7 0 0 0-.8 2c0 .8.3 1.4.8 2a2.7 2.7 0 0 0 2 .8z"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path fill-rule="evenodd" d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',"suggestededits-badge":'<svg height="24" width="24"><path d="M11 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V9.7a6 6 0 0 1-2 .3v9H7V5h4a6 6 0 0 1 0-2z"/><path d="M15 13v-2h-4v2zm-3 2H9v2h3zm-1-8H9v2h2zm4 10v-2h-2v2z"/><path d="M21 4a4 4 0 1 1-8 0 4 4 0 0 1 8 0z" class="tox-icon--badge"/></svg>',suggestededits:'<svg width="24" height="24"><path d="M7 3h7.4L19 7.6V19a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2Zm0 16h10V9h-3V5H7v14Z" clip-rule="evenodd"/><path d="M9 7h2v2H9V7Zm2 4h4v2h-4v-2Zm-2 4h3v2H9v-2Z"/><path d="M9 7h2v2H9V7Zm4 8h2v2h-2v-2Z"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',"add-file":'<svg height="24" width="24"><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/></svg>',adjustments:'<svg width="24" height="24"><path d="M16 11a3 3 0 1 1 2.8-4H21v2h-2.2a3 3 0 0 1-2.8 2Zm0-2a1 1 0 1 1 0-2 1 1 0 0 1 0 2ZM3 9h8V7H3v2Zm5 10a3 3 0 1 0-2.8-4H3v2h2.2A3 3 0 0 0 8 19Zm0-2a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm13 0h-8v-2h8v2Z"/></svg>',"alt-text":'<svg width="24" height="24"><path d="M3 20a2 2 0 0 1-1.4-.6A2 2 0 0 1 1 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 3 4h18c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H3Zm0-2h18V6H3v12Zm1.5-3H6v-1.5h1.5V15H9v-5a1 1 0 0 0-.3-.7A1 1 0 0 0 8 9H5.5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v5ZM6 12v-1.5h1.5V12H6Z"/><path d="M11 15V9h1.3v4.5h2V15H11Zm5.8-4.5V15h1.4v-4.5h1.3V9h-4v1.5h1.3Z"/></svg>',"auto-image-enhancement":'<svg width="24" height="24"><path d="M7.7 10.6a5.8 5.8 0 0 0 5.7 5.7A5.8 5.8 0 0 0 7.7 22 5.8 5.8 0 0 0 2 16.3a5.8 5.8 0 0 0 5.7-5.7ZM15.5 2c.3 3 3.3 6 6.5 6.4-3.2.5-6.2 3.4-6.5 6.5-.3-3.4-3-6-6.4-6.5 3.3-.5 6.1-3 6.4-6.4Z"/></svg>',blur:'<svg width="24" height="24"><path d="M19.3 9.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 20 9a1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 10a1 1 0 0 0-.3-.7A1 1 0 0 0 4 9a1 1 0 0 0-.7.3Zm16 6a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 16a1 1 0 0 0-.3-.7A1 1 0 0 0 4 15a1 1 0 0 0-.7.3Zm5-11A1 1 0 0 0 8 5a1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 10 5a1 1 0 0 0-.3-.7A1 1 0 0 0 9 4a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7 1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 16 5a1 1 0 0 0-.3-.7A1 1 0 0 0 15 4a1 1 0 0 0-.7.3Zm-6 16a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 9 20a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3ZM7.6 8.6A2 2 0 0 0 7 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 7 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 14a2 2 0 0 0-1.4.6Zm6-6A2 2 0 0 0 13 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 13 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 14a2 2 0 0 0-1.4.6Z"/></svg>',box:'<svg width="24" height="24"><path d="M3.8 7a1 1 0 0 0-.7.6l-.1 3V13.8a3.5 3.5 0 0 0 4 2.7c.8-.2 1.4-.5 2-1l.3-.3.3.2c.7.7 1.4 1 2.4 1.1 1.2 0 2.4-.6 3-1.6.9-1.2.8-2.8 0-4a3.7 3.7 0 0 0-2-1.2c-.4-.1-1.2-.1-1.6 0a3.4 3.4 0 0 0-1.7 1l-.3.2-.2-.1c-.4-.5-1.2-1-2-1.1-.6-.2-1.5 0-2 .2H5V9c0-1.3 0-1.3-.3-1.6a1 1 0 0 0-1-.3Zm12 2.6c-.3.2-.5.4-.6.8v.6l.9 1 .7 1v.1l-.8 1-.7 1a1 1 0 0 0 0 .7 1 1 0 0 0 1.3.6c.2 0 .3-.2 1-1l.5-.7.6.8.7.8c.4.3 1 .3 1.3 0l.2-.3a1 1 0 0 0 0-.8l-.8-1.2-.7-1a26 26 0 0 0 1.5-2 .8.8 0 0 0 .1-.4c0-.4-.1-.7-.5-.9H20c-.4 0-.5 0-1.2.8l-.7.8-.6-.7-.7-.9a1 1 0 0 0-1 0Zm-9 2 .4.1c.3.1.6.5.7.8l.1.6v.6c-.6 1-2 1.2-2.7.3-.3-.3-.3-.5-.3-1v-.5c.3-.5.7-.8 1.1-1a1.5 1.5 0 0 1 .7 0Zm5.7 0c.4 0 .8.4 1 .8l.2.6-.1.7c-.5.9-1.6 1.1-2.4.6a1.4 1.4 0 0 1-.6-1.1 1.4 1.4 0 0 1 .5-1.2 1.5 1.5 0 0 1 1.4-.4Z"/></svg>',camera:'<svg height="24" width="24"><g clip-rule="evenodd" fill-rule="evenodd"><path d="M10 5.4a1 1 0 0 1 .8-.4h4.4a1 1 0 0 1 .8.4l1.2 1.8h2.3A2.5 2.5 0 0 1 22 9.6v8a2.5 2.5 0 0 1-2.5 2.5h-13A2.5 2.5 0 0 1 4 17.6v-8a2.5 2.5 0 0 1 2.5-2.4h2.3zM11.4 7l-1.2 1.7a1 1 0 0 1-.8.5h-3a.5.5 0 0 0-.4.4v8a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-8a.5.5 0 0 0-.5-.4h-2.9a1 1 0 0 1-.8-.5L14.6 7z"/><path d="M13 11.4a2 2 0 1 0 0 3.8 2 2 0 0 0 0-3.8zm-4 1.9a4 4 0 1 1 8 0 4 4 0 0 1-8 0z"/></g></svg>',caption:'<svg height="24" width="24"><path d="M6 16h8v-2H6zm10 0h2v-2h-2zM4 20a2 2 0 0 1-1.5-.6A2 2 0 0 1 2 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 4 4h16c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm0-2h16V6H4z"/></svg>',dropbox:'<svg height="24" width="24"><path clip-rule="evenodd" d="m6.4 9.3-3-2a1 1 0 0 1 0-1.6l4-2.5a1 1 0 0 1 1 0L12 5.5l3.6-2.3a1 1 0 0 1 1 0l4 2.5a1 1 0 0 1 0 1.7l-3 1.9 3 1.9a1 1 0 0 1 0 1.6l-2.9 1.9V16c0 .3-.1.6-.4.8l-4.5 3a1 1 0 0 1-1.2 0l-4.4-3a1 1 0 0 1-.5-.9v-1l-3.2-2.2a1 1 0 0 1 0-1.6zm3 0L12 7.5l2.6 1.8L12 11zM8.9 15v.4l3.3 2.3 3.4-2.3v-.2L12 13l-3.1 2zm-1-10-2 1.4 2 1.3 2-1.3zm8.2 0-2 1.4 2 1.3 2-1.3zm-2 6.9 2-1.3 2 1.3-2 1.3-2-1.3zm-8.3 0 2-1.3L10 12l-2 1.3-2-1.3z" fill-rule="evenodd"/></svg>',evernote:'<svg width="24" height="24"><path fill-rule="evenodd" d="m9.5 3-.3.1-2.6 2.6C3.8 8.5 4 8.2 4 8.7c0 1.3.3 3 .6 4.3.5 2 1.1 3.2 2 3.7l1.2.3c1 .2 1.5.2 2.2.2 1.3 0 1.7 0 2.2-.4.3-.2.3-.4.4-1a38.4 38.4 0 0 1 .3-.4l.3.1 1.8.1h1.6v-1.8H14l-.1-.2a6.8 6.8 0 0 1-.5-1c-.2-.4-.3-.6-.5-.7a.8.8 0 0 0-.5-.1.9.9 0 0 0-.8.5l-.4 1.6-.3 1.5H9.4l-2-.3a1 1 0 0 1-.1-.2A10.1 10.1 0 0 1 6 9.7v-.2h4l.5-.5V5H12c.4.2.7.7.8 1.1a1 1 0 0 0 .2.6c.2.2.3.2 1 .3 1.2 0 2 .2 2.5.6.4.2.8.7 1 1.2.3 1.2.5 4 .3 6.4 0 1.8-.4 3.4-.8 4h-.7a8 8 0 0 1-.8 0c-.2 0-.3-.3-.2-.5a.5.5 0 0 1 .4-.3h.9v-1.8H16c-.7 0-.9 0-1.2.2-.9.4-1.4 1.2-1.4 2.1l.1.4.1.2a1 1 0 0 1 .1.2c.3.7.8 1.2 1.4 1.3l1.2.1h1.2a2 2 0 0 0 1-.8 9 9 0 0 0 1.1-4.3c.2-3 0-6.3-.4-7.7A4.3 4.3 0 0 0 16 5.3a7 7 0 0 0-1.3-.2 7.2 7.2 0 0 1-.4 0 5.5 5.5 0 0 1 0-.3c-.2-.5-.6-1-1.2-1.4a3 3 0 0 0-.5-.2c-.4-.2-.5-.2-1.8-.2a26.5 26.5 0 0 0-1.3 0Zm-.8 4v.7H7.2l.7-.8.8-.7v.7Zm7 3.5c-.4 0-.7.5-.9 1v.7h.3c.7 0 1.1.2 1.5.6l.3.2.3-.6V11a1 1 0 0 0-.6-.4 2 2 0 0 0-.8 0Z" clip-rule="evenodd"/></svg>',exposure:'<svg width="24" height="24"><path d="M5 21a2 2 0 0 1-1.4-.6A2 2 0 0 1 3 19V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h14c.6 0 1 .2 1.4.6.4.4.6.8.6 1.4v14c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H5Zm0-2h14V5L5 19Zm9.5-1v-2h-2v-1.5h2v-2H16v2h2V16h-2v2h-1.5ZM6 8.5h5V7H6v1.5Z"/></svg>',fb:'<svg width="24" height="24"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-11 6.7V14H8.1v-2.5h2v-1C10 8.2 11.5 7 12.8 7H16v2.5h-2.4c-.8 0-1 .7-1 1.3v.7h3.2l-1 2.5h-2v5a7 7 0 1 0-2.8-.2Z" clip-rule="evenodd"/></svg>',flickr:'<svg width="24" height="24"><path d="M8.2 15.3c1.7 0 3.1-1.4 3.1-3.1A3.2 3.2 0 0 0 8.1 9 3.2 3.2 0 0 0 5 12.2c0 1.7 1.4 3 3.2 3Zm7.6 0c1.7 0 3.2-1.4 3.2-3.1a3.2 3.2 0 0 0-6.3 0c0 1.7 1.4 3 3.1 3Z"/></svg>',folder:'<svg width="24" height="24"><path fill-rule="evenodd" d="M5.6 6a.6.6 0 0 0-.6.6v11.2a.6.6 0 0 0 .6.6h12.8a.6.6 0 0 0 .6-.6V9a.6.6 0 0 0-.6-.6h-7.2a1 1 0 0 1-.8-.4L9 6H5.6ZM3.8 4.8A2.6 2.6 0 0 1 5.6 4h4a1 1 0 0 1 .8.4l1.3 2h6.7A2.6 2.6 0 0 1 21 9v8.8a2.6 2.6 0 0 1-2.6 2.6H5.6A2.6 2.6 0 0 1 3 17.8V6.6c0-.7.3-1.4.8-1.8Z" clip-rule="evenodd"/></svg>',"google-drive":'<svg height="24" width="24"><path clip-rule="evenodd" d="M8.7 4.5a1 1 0 0 1 .9-.5h4.8a1 1 0 0 1 .9.5l5.6 9.7a1 1 0 0 1 0 1l-2.4 4.2a1 1 0 0 1-.9.5H6.4a1 1 0 0 1-.9-.5l-2.4-4.2a1 1 0 0 1 0-1zM10.2 6l-4.5 7.7h2.5L12.7 6h-2.5zm4.2 1 4.4 7.7-1.2 2.2-4.4-7.7zM12 11.2l-1.5 2.5h3zm2.6 4.5H5.7L7 17.9h8.9l-1.3-2.2z" fill-rule="evenodd"/></svg>',"google-photos":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12.4 3c-.8 0-1.4.7-1.4 1.4v3.2a5 5 0 0 0-8 4c0 .8.6 1.4 1.4 1.4h3.2a5 5 0 0 0-1 3 5 5 0 0 0 5 5c.8 0 1.4-.6 1.4-1.4v-3.2a5 5 0 0 0 8-4c0-.8-.7-1.4-1.4-1.4h-3.2a5 5 0 0 0-4-8Zm.6 8V5a3 3 0 0 1 2.4 3 3 3 0 0 1-2.4 3Zm-2 0H5a3 3 0 0 1 3-2.4 3 3 0 0 1 3 2.4Zm2 2a3 3 0 0 0 3 2.4 3 3 0 0 0 3-2.4h-6Zm-4.4 3a3 3 0 0 1 2.4-3v6a3 3 0 0 1-2.4-3Z" clip-rule="evenodd"/></svg>',grayscale:'<svg height="24" width="24"><path d="M3 5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2zm12.4 0H19v3.6zm-2.8 0h-2.2l8.6 8.6v-2.2zm-5 0H5l14 14v-2.6z" fill-rule="evenodd"/></svg>',huddle:'<svg height="24" width="24"><path d="M10.3 5.6V8h.8v-2l3.5 2 4.3-2.5L14.6 3l-4.3 2.6zM14.6 8v5.2l4.3-2.6V5.6L14.6 8zM6 13.3v2.5h.9v-2l3.4 2 4.3-2.5-4.3-2.6zm4.3 2.6V21l4.3-2.6v-5.1l-4.3 2.6z"/></svg>',"image-decorative":'<svg width="24" height="24"><path d="M12 10c.3 0 .5-.1.7-.3A1 1 0 0 0 13 9a1 1 0 0 0-.3-.7A1 1 0 0 0 12 8a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 1 1Zm0 6a3 3 0 0 1-1.8-.5A3 3 0 0 1 9.1 14a2 2 0 0 0-.2 0 3 3 0 0 1-2.5-1 3 3 0 0 1-.9-2.2A3 3 0 0 1 6.2 9a3.4 3.4 0 0 1-.5-1 3 3 0 0 1-.2-1 3 3 0 0 1 1-2.2A3 3 0 0 1 8.8 4H9a3 3 0 0 1 1.1-1.4A3 3 0 0 1 12 2a3 3 0 0 1 1.8.5c.5.4.9.9 1.1 1.5h.2a3 3 0 0 1 2.5.8 3 3 0 0 1 .9 2.3c0 .3 0 .7-.2 1a2.8 2.8 0 0 1-.5.9l.5 1 .2 1a3 3 0 0 1-1 2.2 3 3 0 0 1-2.4.9 1.8 1.8 0 0 0-.2 0 3 3 0 0 1-1.1 1.4 3 3 0 0 1-1.8.5Zm0 7a8.7 8.7 0 0 1 .7-3.5 9.2 9.2 0 0 1 2-2.8 9.2 9.2 0 0 1 2.8-2A8.6 8.6 0 0 1 21 14a8.6 8.6 0 0 1-.7 3.5 9.2 9.2 0 0 1-2 2.8 9.2 9.2 0 0 1-2.8 2 8.6 8.6 0 0 1-3.5.7Zm2.5-2.5a6.8 6.8 0 0 0 2.4-1.5 6.8 6.8 0 0 0 1.7-2.6c-1 .4-1.8 1-2.6 1.7a6.8 6.8 0 0 0-1.5 2.4ZM12 23a8.6 8.6 0 0 0-.7-3.5 9.2 9.2 0 0 0-2-2.9 9.2 9.2 0 0 0-2.8-1.9A8.6 8.6 0 0 0 3 14a8.7 8.7 0 0 0 .7 3.5 9.2 9.2 0 0 0 2 2.9 9.2 9.2 0 0 0 2.8 1.9 8.6 8.6 0 0 0 3.5.7Zm-2.5-2.5A6.8 6.8 0 0 1 7.2 19a6.8 6.8 0 0 1-1.6-2.6c.9.4 1.7 1 2.5 1.7a6.8 6.8 0 0 1 1.6 2.4Zm5.9-8.4c.3 0 .5-.1.8-.4.2-.2.3-.5.3-.8 0-.2 0-.4-.2-.6a1.3 1.3 0 0 0-.5-.4l-.8-.4a3 3 0 0 1-.2.5 3.8 3.8 0 0 1-.2.5 2.5 2.5 0 0 1-.3.4 4 4 0 0 1-.4.4l.8.6a.8.8 0 0 0 .3.1h.4ZM15 8.5l.8-.4.5-.4.2-.6a1.1 1.1 0 0 0-.3-.8 1 1 0 0 0-.8-.4 1.1 1.1 0 0 0-.7.2l-.8.6.4.4.3.4a3.9 3.9 0 0 1 .4 1Zm-4-2.3a2.7 2.7 0 0 1 1-.2 2.7 2.7 0 0 1 1 .2l.2-1.1c0-.3-.1-.6-.4-.8A1.2 1.2 0 0 0 12 4c-.3 0-.6.1-.8.3-.3.2-.4.5-.3.8v1.1Zm1 7.8c.3 0 .6-.1.8-.3.3-.2.4-.5.3-.8v-1.1a2.7 2.7 0 0 1-1.1.2 2.7 2.7 0 0 1-1-.2l-.2 1.1c0 .3.1.6.4.8.2.2.5.3.8.3ZM9 8.5a3 3 0 0 1 .4-1l.3-.4.4-.4-.8-.6A.9.9 0 0 0 9 6a1.2 1.2 0 0 0-.3 0c-.4 0-.6 0-.9.3a1.1 1.1 0 0 0-.3.8c0 .2 0 .4.2.6l.5.4.9.4Zm-.3 3.6H9l.3-.2.8-.6a5.5 5.5 0 0 1-.4-.4 2.1 2.1 0 0 1-.3-.4 3.8 3.8 0 0 1-.2-.5 3 3 0 0 1-.1-.5l-1 .4-.4.4a1.1 1.1 0 0 0-.2.6c0 .3.2.6.4.8.2.2.4.4.7.4Z"/></svg>',"image-enhancements":'<svg height="24" width="24"><path d="M5.3 21a2 2 0 0 1-1.5-.6 2 2 0 0 1-.6-1.4V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5.2 3H13v2H5.2v14h14v-8h2v8c0 .6-.1 1-.5 1.4a2 2 0 0 1-1.4.6z"/><path d="M11 9a4 4 0 0 0 4 4 4 4 0 0 0-4 4 4 4 0 0 0-4-4 4 4 0 0 0 4-4zm5.5-6c.2 2.1 2.2 4.1 4.5 4.5-2.3.4-4.3 2.4-4.5 4.5A5.2 5.2 0 0 0 12 7.5 5.2 5.2 0 0 0 16.5 3z"/></svg>',instagram:'<svg height="24" width="24"><path clip-rule="evenodd" d="M10.1 9a4 4 0 1 1 4.4 6.6A4 4 0 0 1 10.1 9zm2.2 1.3a2 2 0 1 0 0 4 2 2 0 0 0 0-4z" fill-rule="evenodd"/><path d="M16 9.3a1.3 1.3 0 1 0 0-2.6 1.3 1.3 0 0 0 0 2.6z"/><path clip-rule="evenodd" d="M3 6a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3zm3-1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1z" fill-rule="evenodd"/></svg>',onedrive:'<svg height="24" width="24"><path d="M4 13.7h1zm16 .7h-1zm-11.7-4A4.4 4.4 0 0 1 12.1 8V6a6.4 6.4 0 0 0-5.6 3.4l1.8 1zM12.1 8c2 0 3.6 1.4 4 2.8l2-.5A6.3 6.3 0 0 0 12 6v2zm8.1 6.8-9.8-5.5-1 1.8 9.8 5.5 1-1.8zm-9.8-5.5A5 5 0 0 0 3 13.7h2A3 3 0 0 1 9.5 11l1-1.8zM3 13.7a5 5 0 0 0 1 2.8l1.5-1.1a3 3 0 0 1-.5-1.7zm15.8 1.6a2.3 2.3 0 0 1-2 1.4v2a4.3 4.3 0 0 0 3.9-2.6zm-2 1.4H8v2h8.7zm-8.8 0a3 3 0 0 1-2.5-1.3L4 16.5a5 5 0 0 0 4 2.2v-2zm12.7-.6c.2-.6.3-1.1.3-1.7h-2c0 .3 0 .6-.2.9zm.3-1.7c0-3-3.1-5.1-6-4l.8 1.9a2.3 2.3 0 0 1 3.2 2h2zm-6-4L4.4 15l.8 1.9 10.7-4.6-.7-1.8z"/></svg>',"photo-filter":'<svg height="24" width="24"><path d="M4.4 21c-.3 0-.6-.2-.9-.5-.3-.3-.4-.6-.5-.9L19.6 3c.3 0 .6.3.9.5l.5.9zM3 14.7v-2.8L11.9 3h2.8zM3 7V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h2zm14 14 4-4v2c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm-7.7 0L21 9.3v2.8L12 21z"/></svg>',"revert-changes":'<svg height="24" width="24"><path d="m8.9 18.8.4 3.2H13v-2h-2v-2.6a4.6 4.6 0 0 1-1.6-.6 5.9 5.9 0 0 1-1.3-1l-2.5 1-1-1.7 2.2-1.6a4 4 0 0 1-.2-.7 5.9 5.9 0 0 1 0-.8v-.8l.2-.8-2.2-1.6 1-1.7 2.5 1a6 6 0 0 1 1.2-.9l1.4-.6.4-2.6h2l.3 2.6A5.6 5.6 0 0 1 16 8.2l2.5-1 1 1.6-2.2 1.7.2.7v.8a5 5 0 0 1 0 1h2a2.6 2.6 0 0 0 0-.5V11.3l2.6-2-2.8-4.7-3 1.3a8.2 8.2 0 0 0-.5-.4 3.8 3.8 0 0 0-.6-.3L14.8 2H9.3l-.4 3.2a5 5 0 0 0-1.2.7l-3-1.3L2 9.4l2.6 2V12.6l-2.6 2 2.7 4.7 3-1.3a8 8 0 0 0 1.2.7z"/><path d="m14.5 20.3 2.1-2-2.1-2.2 1.4-1.4 2.1 2.1 2.1-2 1.4 1.3-2 2.1 2 2.1-1.4 1.4-2.1-2-2.1 2zM12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></svg>',saturation:'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 20.5a6 6 0 1 1-5.9-10.2 6 6 0 1 1 11.8 0A6 6 0 1 1 12 20.5Zm-1.1-7.7a6 6 0 0 0-.2.3 4.3 4.3 0 0 1-2-1.3c.9.1 1.6.5 2.2 1Zm2.4.3a6 6 0 0 0-.2-.3 4.3 4.3 0 0 1 2.2-1 4.3 4.3 0 0 1-2 1.3ZM12.2 15a6.3 6.3 0 0 1-.4 0 4.3 4.3 0 0 0 .2 2.5 4.3 4.3 0 0 0 .2-2.5Zm.9 4.2a6 6 0 0 0 .8-4.5 6 6 0 0 0 3.4-2.8 4.3 4.3 0 0 1-1.3 8.4 4.3 4.3 0 0 1-2.9-1.1Zm-2.2 0a4.3 4.3 0 1 1-4.2-7.3 6 6 0 0 0 3.4 2.8 6 6 0 0 0 .8 4.5Zm-3-9.2a4.3 4.3 0 1 1 8.3 0 6 6 0 0 0-4.2 1.5A6 6 0 0 0 7.8 10Z"/></svg>',"transform-image":'<svg height="24" width="24"><path d="M3 21v-6h2V9H3V3h6v2h6V3h6v6h-2v6h2v6h-6v-2H9v2zm6-4h6v-2h2V9h-2V7H9v2H7v6h2zM5 7h2V5H5zm12 0h2V5h-2zm0 12h2v-2h-2zM5 19h2v-2H5z"/></svg>',vibrance:'<svg height="24" width="24"><path d="M12 20 22 4H2zm2.6-8 1.3-2H8l1.3 2h5.2zm-1.2 2h-2.8l1.4 2.2zm5-8L17 8H7L5.6 6h12.8z" fill-rule="evenodd"/></svg>',vk:'<svg width="24" height="24"><path fill-rule="evenodd" d="M14.8 17.4a2 2 0 0 1-1.3.7 8 8 0 0 1-7.7-3.6c-1.4-2-2.2-4.4-2.6-5.7L3 8.6A2 2 0 0 1 5 6h2.5c.4 0 .8.1 1.2.4A2 2 0 0 1 9.8 6h3.5a2 2 0 0 1 1.4.6 2 2 0 0 1 1.5-.6h2.4a2 2 0 0 1 2 2.5c-.5 1.5-1.2 2.6-1.8 3.6a12.5 12.5 0 0 1 2 3.2A2 2 0 0 1 19 18h-2.6a2 2 0 0 1-1.3-.5 6.9 6.9 0 0 1-.3-.2Zm.5-2.5-1.2-1a3 3 0 0 0-.8-.2v2.4h-1.7a5.6 5.6 0 0 1-.3 0c-3-.7-4.7-3.7-5.6-6.1A38.1 38.1 0 0 1 5 8.1V8h2.5a80.5 80.5 0 0 1 1.2 2.5c.6 1.2 1.2 2 2 2.1V9l-.9-1h3.5v4.1a5 5 0 0 0 .4-.3c.7-.7 1.2-1.4 1.6-2.2l.2-.3.7-1.3h2.4a8.5 8.5 0 0 1-.8 2l-1.3 2-.3.3a10.5 10.5 0 0 1 2.8 3.8h-2.6l-.8-.9a20.6 20.6 0 0 0-.3-.3Z" clip-rule="evenodd"/></svg>',warmth:'<svg height="24" width="24"><path d="M12 21.1c-1.4 0-2.6-.5-3.6-1.5s-1.5-2.1-1.5-3.5c0-.8.2-1.6.6-2.2A5 5 0 0 1 8.9 12v-6c0-.8.3-1.5 1-2.1a2.9 2.9 0 0 1 2-.9c.9 0 1.6.3 2.2.9.5.6.8 1.3.8 2.1v6a5 5 0 0 1 1.5 1.8A4.9 4.9 0 0 1 17 16c0 1.4-.5 2.6-1.4 3.5s-2.2 1.5-3.6 1.5zm-3-5h6c0-.5-.2-1-.4-1.4a3 3 0 0 0-.9-1l-.8-.6v-7a1 1 0 0 0-.3-.7A1 1 0 0 0 12 5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v7l-.8.6a2.9 2.9 0 0 0-.9 1 3 3 0 0 0-.3 1.4z"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});(function(){var Ko=tinymce.util.Tools.resolve("tinymce.ModelManager");const Yo=(l,m,b)=>{var y;return b(l,m.prototype)?!0:((y=l.constructor)==null?void 0:y.name)===m.name},bs=l=>{const m=typeof l;return l===null?"null":m==="object"&&Array.isArray(l)?"array":m==="object"&&Yo(l,String,(b,y)=>y.isPrototypeOf(b))?"string":m},jo=l=>m=>bs(m)===l,as=l=>m=>typeof m===l,ds=l=>m=>l===m,ls=jo("string"),Nt=jo("object"),vn=jo("array"),zt=ds(null),ts=as("boolean"),Go=ds(void 0),cn=l=>l==null,Fn=l=>!cn(l),Eo=as("function"),qn=as("number"),dt=()=>{},Fo=(l,m)=>(...b)=>l(m.apply(null,b)),nn=(l,m)=>b=>l(m(b)),re=l=>()=>l,En=l=>l,Vo=(l,m)=>l===m;function je(l,...m){return(...b)=>{const y=m.concat(b);return l.apply(null,y)}}const G=l=>m=>!l(m),St=l=>()=>{throw new Error(l)},ro=l=>l(),pn=re(!1),xe=re(!0),Hu=class Hu{constructor(m,b){Xe(this,"tag");Xe(this,"value");this.tag=m,this.value=b}static some(m){return new Hu(!0,m)}static none(){return Hu.singletonNone}fold(m,b){return this.tag?b(this.value):m()}isSome(){return this.tag}isNone(){return!this.tag}map(m){return this.tag?Hu.some(m(this.value)):Hu.none()}bind(m){return this.tag?m(this.value):Hu.none()}exists(m){return this.tag&&m(this.value)}forall(m){return!this.tag||m(this.value)}filter(m){return!this.tag||m(this.value)?this:Hu.none()}getOr(m){return this.tag?this.value:m}or(m){return this.tag?this:m}getOrThunk(m){return this.tag?this.value:m()}orThunk(m){return this.tag?this:m()}getOrDie(m){if(this.tag)return this.value;throw new Error(m??"Called getOrDie on None")}static from(m){return Fn(m)?Hu.some(m):Hu.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(m){this.tag&&m(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};Xe(Hu,"singletonNone",new Hu(!1));let le=Hu;const vs=Array.prototype.slice,qe=Array.prototype.indexOf,rt=Array.prototype.push,k=(l,m)=>qe.call(l,m),ho=(l,m)=>k(l,m)>-1,tt=(l,m)=>{for(let b=0,y=l.length;b<y;b++){const T=l[b];if(m(T,b))return!0}return!1},No=(l,m)=>{const b=[];for(let y=0;y<l;y++)b.push(m(y));return b},ln=(l,m)=>{const b=l.length,y=new Array(b);for(let T=0;T<b;T++){const _=l[T];y[T]=m(_,T)}return y},He=(l,m)=>{for(let b=0,y=l.length;b<y;b++){const T=l[b];m(T,b)}},Je=(l,m)=>{for(let b=l.length-1;b>=0;b--){const y=l[b];m(y,b)}},Bt=(l,m)=>{const b=[],y=[];for(let T=0,_=l.length;T<_;T++){const P=l[T];(m(P,T)?b:y).push(P)}return{pass:b,fail:y}},Be=(l,m)=>{const b=[];for(let y=0,T=l.length;y<T;y++){const _=l[y];m(_,y)&&b.push(_)}return b},xt=(l,m,b)=>(Je(l,(y,T)=>{b=m(b,y,T)}),b),Ae=(l,m,b)=>(He(l,(y,T)=>{b=m(b,y,T)}),b),Ve=(l,m,b)=>{for(let y=0,T=l.length;y<T;y++){const _=l[y];if(m(_,y))return le.some(_);if(b(_,y))break}return le.none()},F=(l,m)=>Ve(l,m,pn),Fs=(l,m)=>{for(let b=0,y=l.length;b<y;b++){const T=l[b];if(m(T,b))return le.some(b)}return le.none()},jn=l=>{const m=[];for(let b=0,y=l.length;b<y;++b){if(!vn(l[b]))throw new Error("Arr.flatten item "+b+" was not an array, input: "+l);rt.apply(m,l[b])}return m},Xn=(l,m)=>jn(ln(l,m)),co=(l,m)=>{for(let b=0,y=l.length;b<y;++b){const T=l[b];if(m(T,b)!==!0)return!1}return!0},ms=l=>{const m=vs.call(l,0);return m.reverse(),m},De=(l,m)=>{const b={};for(let y=0,T=l.length;y<T;y++){const _=l[y];b[String(_)]=m(_,y)}return b},ve=(l,m)=>{const b=vs.call(l,0);return b.sort(m),b},ae=(l,m)=>m>=0&&m<l.length?le.some(l[m]):le.none(),te=l=>ae(l,0),Dt=l=>ae(l,l.length-1),Ee=(l,m)=>{for(let b=0;b<l.length;b++){const y=m(l[b],b);if(y.isSome())return y}return le.none()},Ce=Object.keys,_t=Object.hasOwnProperty,bn=(l,m)=>{const b=Ce(l);for(let y=0,T=b.length;y<T;y++){const _=b[y],P=l[_];m(P,_)}},$e=(l,m)=>et(l,(b,y)=>({k:y,v:m(b,y)})),et=(l,m)=>{const b={};return bn(l,(y,T)=>{const _=m(y,T);b[_.k]=_.v}),b},Xt=l=>(m,b)=>{l[b]=m},oo=(l,m,b,y)=>{bn(l,(T,_)=>{(m(T,_)?b:y)(T,_)})},vo=(l,m)=>{const b={};return oo(l,m,Xt(b),dt),b},Lo=(l,m)=>{const b=[];return bn(l,(y,T)=>{b.push(m(y,T))}),b},zn=l=>Lo(l,En),ns=(l,m)=>ko(l,m)?le.from(l[m]):le.none(),ko=(l,m)=>_t.call(l,m),mo=(l,m)=>ko(l,m)&&l[m]!==void 0&&l[m]!==null,Ns=l=>{for(const m in l)if(_t.call(l,m))return!1;return!0},Uo={generate:l=>{if(!vn(l))throw new Error("cases must be an array");if(l.length===0)throw new Error("there must be at least one case");const m=[],b={};return He(l,(y,T)=>{const _=Ce(y);if(_.length!==1)throw new Error("one and only one name per case");const P=_[0],z=y[P];if(b[P]!==void 0)throw new Error("duplicate key detected:"+P);if(P==="cata")throw new Error("cannot have a case named cata (sorry)");if(!vn(z))throw new Error("case arguments must be an array");m.push(P),b[P]=(...Y)=>{const de=Y.length;if(de!==z.length)throw new Error("Wrong number of arguments to case "+P+". Expected "+z.length+" ("+z+"), got "+de);return{fold:(...ft)=>{if(ft.length!==l.length)throw new Error("Wrong number of arguments to fold. Expected "+l.length+", got "+ft.length);return ft[T].apply(null,Y)},match:ft=>{const Gt=Ce(ft);if(m.length!==Gt.length)throw new Error("Wrong number of arguments to match. Expected: "+m.join(",")+`
Actual: `+Gt.join(","));if(!co(m,ut=>ho(Gt,ut)))throw new Error("Not all branches were specified when using match. Specified: "+Gt.join(", ")+`
Required: `+m.join(", "));return ft[P].apply(null,Y)},log:ft=>{console.log(ft,{constructors:m,constructor:P,params:Y})}}}}),b}},Wo=l=>{let m=l;return{get:()=>m,set:T=>{m=T}}},Js=l=>l.slice(0).sort(),Xo=(l,m)=>{throw new Error("All required keys ("+Js(l).join(", ")+") were not specified. Specified keys were: "+Js(m).join(", ")+".")},Os=l=>{throw new Error("Unsupported keys for object: "+Js(l).join(", "))},Hr=(l,m)=>{if(!vn(m))throw new Error("The "+l+" fields must be an array. Was: "+m+".");He(m,b=>{if(!ls(b))throw new Error("The value "+b+" in the "+l+" fields was not a string.")})},on=(l,m)=>{throw new Error("All values need to be of type: "+m+". Keys ("+Js(l).join(", ")+") were not.")},So=l=>{const m=Js(l);F(m,(y,T)=>T<m.length-1&&y===m[T+1]).each(y=>{throw new Error("The field: "+y+" occurs more than once in the combined fields: ["+m.join(", ")+"].")})},yo=(l,m)=>Nc(l,m,{validate:Eo,label:"function"}),Nc=(l,m,b)=>{if(m.length===0)throw new Error("You must specify at least one required field.");return Hr("required",m),So(m),y=>{const T=Ce(y);co(m,z=>ho(T,z))||Xo(m,T),l(m,T);const P=Be(m,z=>!b.validate(y[z],z));return P.length>0&&on(P,b.label),y}},nc=(l,m)=>{const b=Be(m,y=>!ho(l,y));b.length>0&&Os(b)},qt=l=>yo(nc,l),Dr=l=>{const m=_=>_(l),b=re(l),y=()=>T,T={tag:!0,inner:l,fold:(_,P)=>P(l),isValue:xe,isError:pn,map:_=>an.value(_(l)),mapError:y,bind:m,exists:m,forall:m,getOr:b,or:y,getOrThunk:b,orThunk:y,getOrDie:b,each:_=>{_(l)},toOptional:()=>le.some(l)};return T},Ue=l=>{const m=()=>b,b={tag:!1,inner:l,fold:(y,T)=>y(l),isValue:pn,isError:xe,map:m,mapError:y=>an.error(y(l)),bind:m,exists:pn,forall:xe,getOr:En,or:En,getOrThunk:ro,orThunk:ro,getOrDie:St(String(l)),each:dt,toOptional:le.none};return b},an={value:Dr,error:Ue,fromOption:(l,m)=>l.fold(()=>Ue(m),Dr)},tn=typeof window<"u"?window:Function("return this;")(),dn=l=>{const m=l.replace(/\./g,"-");return{resolve:y=>m+"-"+y}},Jt=(l,m,b=Vo)=>l.exists(y=>b(y,m)),lo=l=>{const m=[],b=y=>{m.push(y)};for(let y=0;y<l.length;y++)l[y].each(b);return m},zr=(l,m)=>l!=null?m(l):le.none(),Vr=(l,m)=>l?le.some(m):le.none(),dc=(l,m)=>{let b=m??tn;for(let y=0;y<l.length&&b!==void 0&&b!==null;++y)b=b[l[y]];return b},Yt=(l,m)=>{const b=l.split(".");return dc(b,m)},Or=l=>{const m=Wo(le.none()),b=()=>m.get().each(l);return{clear:()=>{b(),m.set(le.none())},isSet:()=>m.get().isSome(),get:()=>m.get(),set:z=>{b(),m.set(le.some(z))}}},wr=()=>{const l=Or(dt);return{...l,on:b=>l.get().each(b)}},pi=(l,m)=>l.substring(m),_s=(l,m,b)=>m===""||l.length>=m.length&&l.substr(b,b+m.length)===m,me=(l,m)=>Te(l,m)?pi(l,m.length):l,ne=(l,m,b=0,y)=>{const T=l.indexOf(m,b);return T!==-1?Go(y)?!0:T+m.length<=y:!1},Te=(l,m)=>_s(l,m,0),Tt=(l,m)=>_s(l,m,l.length-m.length),kn=(l=>m=>m.replace(l,""))(/^\s+|\s+$/g),Jn=l=>l.length>0,cr=l=>{const m=parseFloat(l);return isNaN(m)?le.none():le.some(m)},Kn=(l,m)=>{let b=null;const y=()=>{zt(b)||(clearTimeout(b),b=null)};return{cancel:y,throttle:(..._)=>{y(),b=setTimeout(()=>{b=null,l.apply(null,_)},m)}}},nt=l=>{let m=!1,b;return(...y)=>(m||(m=!0,b=l.apply(null,y)),b)},ue=" ",fe=["tfoot","thead","tbody","colgroup"],Qe=l=>ho(fe,l),ht=(l,m)=>({rows:l,columns:m}),It=(l,m)=>({row:l,column:m}),An=(l,m,b)=>({element:l,rowspan:m,colspan:b}),Qt=(l,m,b,y)=>({element:l,rowspan:m,colspan:b,isNew:y}),Cn=(l,m,b,y,T,_)=>({element:l,rowspan:m,colspan:b,row:y,column:T,isLocked:_}),Co=(l,m,b)=>({element:l,cells:m,section:b}),To=(l,m,b,y)=>({element:l,cells:m,section:b,isNew:y}),Po=(l,m,b)=>({element:l,isNew:m,isLocked:b}),qs=(l,m,b,y)=>({element:l,cells:m,section:b,isNew:y}),_r=(l,m,b,y)=>({startRow:l,startCol:m,finishRow:b,finishCol:y}),bi=(l,m,b)=>({element:l,colspan:m,column:b}),$i=(l,m)=>({element:l,columns:m}),fs=(l,m,b)=>{const y=l.cells,T=y.slice(0,m),_=y.slice(m),P=T.concat(b).concat(_);return Aa(l,P)},gs=(l,m,b)=>fs(l,m,[b]),Hs=(l,m,b)=>{const y=l.cells;y[m]=b},Aa=(l,m)=>qs(l.element,m,l.section,l.isNew),zs=(l,m)=>{const b=l.cells,y=ln(b,m);return qs(l.element,y,l.section,l.isNew)},Ln=(l,m)=>l.cells[m],vc=(l,m)=>Ln(l,m).element,Ac=l=>l.cells.length,dr=l=>{const m=Bt(l,b=>b.section==="colgroup");return{rows:m.fail,cols:m.pass}},ed=(l,m,b)=>{const y=ln(l.cells,b);return qs(m(l.element),y,l.section,!0)},mu=(l,m)=>{const y=(m||document).createElement("div");if(y.innerHTML=l,!y.hasChildNodes()||y.childNodes.length>1){const T="HTML does not have a single root node";throw console.error(T,l),new Error(T)}return ei(y.childNodes[0])},Qs=(l,m)=>{const y=(m||document).createElement(l);return ei(y)},vi=(l,m)=>{const y=(m||document).createTextNode(l);return ei(y)},ei=l=>{if(l==null)throw new Error("Node cannot be null or undefined");return{dom:l}},Pt={fromHtml:mu,fromTag:Qs,fromText:vi,fromDom:ei,fromPoint:(l,m,b)=>le.from(l.dom.elementFromPoint(m,b)).map(ei)},La=(l,m)=>{const b=l.document.createRange();return b.selectNode(m.dom),b},Pc=(l,m)=>{const b=l.document.createRange();return Yc(b,m),b},Yc=(l,m)=>l.selectNodeContents(m.dom),mr=(l,m)=>{m.fold(b=>{l.setStartBefore(b.dom)},(b,y)=>{l.setStart(b.dom,y)},b=>{l.setStartAfter(b.dom)})},fu=(l,m)=>{m.fold(b=>{l.setEndBefore(b.dom)},(b,y)=>{l.setEnd(b.dom,y)},b=>{l.setEndAfter(b.dom)})},Xc=(l,m,b)=>{const y=l.document.createRange();return mr(y,m),fu(y,b),y},ka=(l,m,b,y,T)=>{const _=l.document.createRange();return _.setStart(m.dom,b),_.setEnd(y.dom,T),_},Pl=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom,width:l.width,height:l.height}),nd=l=>{const m=l.getClientRects(),b=m.length>0?m[0]:l.getBoundingClientRect();return b.width>0||b.height>0?le.some(b).map(Pl):le.none()},Ii=Uo.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),gu=(l,m,b)=>m(Pt.fromDom(b.startContainer),b.startOffset,Pt.fromDom(b.endContainer),b.endOffset),$l=(l,m)=>m.match({domRange:b=>({ltr:re(b),rtl:le.none}),relative:(b,y)=>({ltr:nt(()=>Xc(l,b,y)),rtl:nt(()=>le.some(Xc(l,y,b)))}),exact:(b,y,T,_)=>({ltr:nt(()=>ka(l,b,y,T,_)),rtl:nt(()=>le.some(ka(l,T,_,b,y)))})}),Li=(l,m)=>{const b=m.ltr();return b.collapsed?m.rtl().filter(T=>T.collapsed===!1).map(T=>Ii.rtl(Pt.fromDom(T.endContainer),T.endOffset,Pt.fromDom(T.startContainer),T.startOffset)).getOrThunk(()=>gu(l,Ii.ltr,b)):gu(l,Ii.ltr,b)},Il=(l,m)=>{const b=$l(l,m);return Li(l,b)},At=(l,m)=>Il(l,m).match({ltr:(y,T,_,P)=>{const z=l.document.createRange();return z.setStart(y.dom,T),z.setEnd(_.dom,P),z},rtl:(y,T,_,P)=>{const z=l.document.createRange();return z.setStart(_.dom,P),z.setEnd(y.dom,T),z}});Ii.ltr,Ii.rtl;const dl=8,od=9,Nr=11,H=1,ce=3,ye=(l,m)=>{const b=l.dom;if(b.nodeType!==H)return!1;{const y=b;if(y.matches!==void 0)return y.matches(m);if(y.msMatchesSelector!==void 0)return y.msMatchesSelector(m);if(y.webkitMatchesSelector!==void 0)return y.webkitMatchesSelector(m);if(y.mozMatchesSelector!==void 0)return y.mozMatchesSelector(m);throw new Error("Browser lacks native selectors")}},Ke=l=>l.nodeType!==H&&l.nodeType!==od&&l.nodeType!==Nr||l.childElementCount===0,kt=(l,m)=>{const b=m===void 0?document:m.dom;return Ke(b)?[]:ln(b.querySelectorAll(l),Pt.fromDom)},en=(l,m)=>{const b=m===void 0?document:m.dom;return Ke(b)?le.none():le.from(b.querySelector(l)).map(Pt.fromDom)},Dn=(l,m)=>l.dom===m.dom,ar=(l,m)=>{const b=l.dom,y=m.dom;return b===y?!1:b.contains(y)},Ao=ye,N=(l,m,b,y)=>{const T=l.isiOS()&&/ipad/i.test(b)===!0,_=l.isiOS()&&!T,P=l.isiOS()||l.isAndroid(),z=P||y("(pointer:coarse)"),Y=T||!_&&P&&y("(min-device-width:768px)"),de=_||P&&!Y,ke=m.isSafari()&&l.isiOS()&&/safari/i.test(b)===!1,ft=!de&&!Y&&!ke;return{isiPad:re(T),isiPhone:re(_),isTablet:re(Y),isPhone:re(de),isTouch:re(z),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:re(ke),isDesktop:re(ft)}},V=(l,m)=>{for(let b=0;b<l.length;b++){const y=l[b];if(y.test(m))return y}},se=(l,m)=>{const b=V(l,m);if(!b)return{major:0,minor:0};const y=T=>Number(m.replace(b,"$"+T));return po(y(1),y(2))},Pe=(l,m)=>{const b=String(m).toLowerCase();return l.length===0?fn():se(l,b)},fn=()=>po(0,0),po=(l,m)=>({major:l,minor:m}),Us={nu:po,detect:Pe,unknown:fn},qr=(l,m)=>Ee(m.brands,b=>{const y=b.brand.toLowerCase();return F(l,T=>{var _;return y===((_=T.brand)==null?void 0:_.toLowerCase())}).map(T=>({current:T.name,version:Us.nu(parseInt(b.version,10),0)}))}),la=(l,m)=>{const b=String(m).toLowerCase();return F(l,y=>y.search(b))},Jo=(l,m)=>la(l,m).map(b=>{const y=Us.detect(b.versionRegexes,m);return{current:b.name,version:y}}),ua=(l,m)=>la(l,m).map(b=>{const y=Us.detect(b.versionRegexes,m);return{current:b.name,version:y}}),Ll=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Hi=l=>m=>ne(m,l),gg=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:l=>ne(l,"edge/")&&ne(l,"chrome")&&ne(l,"safari")&&ne(l,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ll],search:l=>ne(l,"chrome")&&!ne(l,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:l=>ne(l,"msie")||ne(l,"trident")},{name:"Opera",versionRegexes:[Ll,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Hi("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Hi("firefox")},{name:"Safari",versionRegexes:[Ll,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:l=>(ne(l,"safari")||ne(l,"mobile/"))&&ne(l,"applewebkit")}],Pm=[{name:"Windows",search:Hi("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:l=>ne(l,"iphone")||ne(l,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Hi("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Hi("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Hi("linux"),versionRegexes:[]},{name:"Solaris",search:Hi("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Hi("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Hi("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],sd={browsers:re(gg),oses:re(Pm)},Da="Edge",rd="Chromium",vf="IE",hg="Opera",pg="Firefox",Hh="Safari",yf=()=>zi({current:void 0,version:Us.unknown()}),zi=l=>{const m=l.current,b=l.version,y=T=>()=>m===T;return{current:m,version:b,isEdge:y(Da),isChromium:y(rd),isIE:y(vf),isOpera:y(hg),isFirefox:y(pg),isSafari:y(Hh)}},zh={unknown:yf,nu:zi},Vh="Windows",Ha="iOS",Z="Android",oe="Linux",Oe="macOS",st="Solaris",wn="FreeBSD",Qo="ChromeOS",Pr=()=>Jc({current:void 0,version:Us.unknown()}),Jc=l=>{const m=l.current,b=l.version,y=T=>()=>m===T;return{current:m,version:b,isWindows:y(Vh),isiOS:y(Ha),isAndroid:y(Z),isMacOS:y(Oe),isLinux:y(oe),isSolaris:y(st),isFreeBSD:y(wn),isChromeOS:y(Qo)}},yc={unknown:Pr,nu:Jc},Hl={detect:(l,m,b)=>{const y=sd.browsers(),T=sd.oses(),_=m.bind(Y=>qr(y,Y)).orThunk(()=>Jo(y,l)).fold(zh.unknown,zh.nu),P=ua(T,l).fold(yc.unknown,yc.nu),z=N(P,_,l,b);return{browser:_,os:P,deviceType:z}}},Qc=l=>window.matchMedia(l).matches;let Oa=nt(()=>Hl.detect(window.navigator.userAgent,le.from(window.navigator.userAgentData),Qc));const $c=()=>Oa(),hu=(l,m)=>Yt(l,m),bg=(l,m)=>{const b=hu(l,m);if(b==null)throw new Error(l+" not available on this browser");return b},wo=Object.getPrototypeOf,pu=l=>bg("HTMLElement",l),cd=l=>{const m=Yt("ownerDocument.defaultView",l);return Nt(l)&&(pu(m).prototype.isPrototypeOf(l)||/^HTML\w*Element$/.test(wo(l).constructor.name))},jr=l=>l.dom.nodeName.toLowerCase(),nS=l=>l.dom.nodeType,t1=l=>m=>nS(m)===l,oS=l=>nS(l)===dl||jr(l)==="#comment",gb=l=>Ur(l)&&cd(l.dom),Ur=t1(H),$m=t1(ce),Xy=t1(od),Ct=t1(Nr),Ci=l=>m=>Ur(m)&&jr(m)===l,vg=l=>Pt.fromDom(l.dom.ownerDocument),ml=l=>Xy(l)?l:vg(l),Cf=l=>Pt.fromDom(ml(l).dom.documentElement),n1=l=>Pt.fromDom(ml(l).dom.defaultView),ee=l=>le.from(l.dom.parentNode).map(Pt.fromDom),ti=l=>le.from(l.dom.parentElement).map(Pt.fromDom),zd=(l,m)=>{const b=Eo(m)?m:pn;let y=l.dom;const T=[];for(;y.parentNode!==null&&y.parentNode!==void 0;){const _=y.parentNode,P=Pt.fromDom(_);if(T.push(P),b(P)===!0)break;y=_}return T},o1=l=>le.from(l.dom.previousSibling).map(Pt.fromDom),wf=l=>le.from(l.dom.nextSibling).map(Pt.fromDom),da=l=>ln(l.dom.childNodes,Pt.fromDom),ni=(l,m)=>{const b=l.dom.childNodes;return le.from(b[m]).map(Pt.fromDom)},s1=l=>ni(l,0),r1=(l,m,b,y)=>{const _=vg(l).dom.createRange();return _.setStart(l.dom,m),_.setEnd(b.dom,y),_},yg=(l,m,b,y)=>{const T=r1(l,m,b,y),_=Dn(l,b)&&m===y;return T.collapsed&&!_},oi=l=>Ct(l)&&Fn(l.dom.host),c1=l=>Pt.fromDom(l.dom.getRootNode()),bu=l=>oi(l)?l:Pt.fromDom(ml(l).dom.body),Cg=l=>{const m=c1(l);return oi(m)?le.some(m):le.none()},a1=l=>Pt.fromDom(l.dom.host),wi=l=>{if(Fn(l.target)){const m=Pt.fromDom(l.target);if(Ur(m)&&i1(m)&&l.composed&&l.composedPath){const b=l.composedPath();if(b)return te(b)}}return le.from(l.target)},i1=l=>Fn(l.dom.shadowRoot),zl=(l,m,b,y,T,_,P)=>({target:l,x:m,y:b,stop:y,prevent:T,kill:_,raw:P}),Vd=l=>{const m=Pt.fromDom(wi(l).getOr(l.target)),b=()=>l.stopPropagation(),y=()=>l.preventDefault(),T=Fo(y,b);return zl(m,l.clientX,l.clientY,b,y,T,l)},Io=(l,m)=>b=>{l(b)&&m(Vd(b))},za=(l,m,b,y,T)=>{const _=Io(b,y);return l.dom.addEventListener(m,_,T),{unbind:je(hb,l,m,_,T)}},Sf=(l,m,b,y)=>za(l,m,b,y,!1),hb=(l,m,b,y)=>{l.dom.removeEventListener(m,b,y)},xo=xe,ad=(l,m,b)=>Sf(l,m,xo,b),oc=Vd,Vl=(l,m)=>{ee(l).each(y=>{y.dom.insertBefore(m.dom,l.dom)})},Ul=(l,m)=>{wf(l).fold(()=>{ee(l).each(T=>{ys(T,m)})},y=>{Vl(y,m)})},Rr=(l,m)=>{s1(l).fold(()=>{ys(l,m)},y=>{l.dom.insertBefore(m.dom,y.dom)})},ys=(l,m)=>{l.dom.appendChild(m.dom)},Jy=(l,m,b)=>{ni(l,b).fold(()=>{ys(l,m)},y=>{Vl(y,m)})},Qy=(l,m)=>{Vl(l,m),ys(m,l)},sc=(l,m)=>{He(m,(b,y)=>{const T=y===0?l:m[y-1];Ul(T,b)})},fl=(l,m)=>{He(m,b=>{ys(l,b)})},gl=(l,m,b)=>{if(ls(b)||ts(b)||qn(b))l.setAttribute(m,b+"");else throw console.error("Invalid call to Attribute.set. Key ",m,":: Value ",b,":: Element ",l),new Error("Attribute value was not simple")},rc=(l,m,b)=>{gl(l.dom,m,b)},Wl=(l,m)=>{const b=l.dom;bn(m,(y,T)=>{gl(b,T,y)})},Va=(l,m)=>{bn(m,(b,y)=>{b.fold(()=>{Es(l,y)},T=>{gl(l.dom,y,T)})})},Si=(l,m)=>{const b=l.dom.getAttribute(m);return b===null?void 0:b},ma=(l,m)=>le.from(Si(l,m)),Es=(l,m)=>{l.dom.removeAttribute(m)},Vi=l=>Ae(l.dom.attributes,(m,b)=>(m[b.name]=b.value,m),{}),Ua=l=>{l.dom.textContent="",He(da(l),m=>{Ic(m)})},Ic=l=>{const m=l.dom;m.parentNode!==null&&m.parentNode.removeChild(m)},kc=l=>{const m=da(l);m.length>0&&sc(l,m),Ic(l)},Er=(l,m)=>Pt.fromDom(l.dom.cloneNode(m)),hl=l=>Er(l,!1),Dc=l=>Er(l,!0),Kr=(l,m)=>{const b=Pt.fromTag(m),y=Vi(l);return Wl(b,y),b},Ud=(l,m)=>{const b=Kr(l,m),y=da(Dc(l));return fl(b,y),b},l1=(l,m)=>{const b=Kr(l,m);Ul(l,b);const y=da(l);return fl(b,y),Ic(l),b},Uh=(l,m)=>{const y=document.createElement("div");return y.innerHTML=l,da(Pt.fromDom(y))},Oc=l=>ln(l,Pt.fromDom),u1=l=>l.dom.innerHTML,pb=l=>{const m=Pt.fromTag("div"),b=Pt.fromDom(l.dom.cloneNode(!0));return ys(m,b),u1(m)},Im=l=>l.style!==void 0&&Eo(l.style.getPropertyValue),$n=l=>{const m=$m(l)?l.dom.parentNode:l.dom;if(m==null||m.ownerDocument===null)return!1;const b=m.ownerDocument;return Cg(Pt.fromDom(m)).fold(()=>b.body.contains(m),nn($n,a1))},d1=l=>{const m=l.dom.body;if(m==null)throw new Error("Body is not available yet");return Pt.fromDom(m)},Cc=(l,m,b)=>{if(!ls(b))throw console.error("Invalid call to CSS.set. Property ",m,":: Value ",b,":: Element ",l),new Error("CSS value must be a string: "+b);Im(l)&&l.style.setProperty(m,b)},Lc=(l,m)=>{Im(l)&&l.style.removeProperty(m)},Hc=(l,m,b)=>{const y=l.dom;Cc(y,m,b)},ir=(l,m)=>{const b=l.dom;bn(m,(y,T)=>{Cc(b,T,y)})},Wd=(l,m)=>{const b=l.dom,T=window.getComputedStyle(b).getPropertyValue(m);return T===""&&!$n(l)?Wh(b,m):T},Wh=(l,m)=>Im(l)?l.style.getPropertyValue(m):"",Ui=(l,m)=>{const b=l.dom,y=Wh(b,m);return le.from(y).filter(T=>T.length>0)},Zl=(l,m)=>{const b=l.dom;Lc(b,m),Jt(ma(l,"style").map(kn),"")&&Es(l,"style")},wg=(l,m)=>{const b=l.dom,y=m.dom;Im(b)&&Im(y)&&(y.style.cssText=b.style.cssText)},Zh=(l,m)=>{const b=(z,Y)=>{if(!qn(Y)&&!Y.match(/^[0-9]+$/))throw new Error(l+".set accepts only positive integer values. Value was "+Y);const de=z.dom;Im(de)&&(de.style[l]=Y+"px")},y=z=>{const Y=m(z);if(Y<=0||Y===null){const de=Wd(z,l);return parseFloat(de)||0}return Y},T=y,_=(z,Y)=>Ae(Y,(de,ke)=>{const ft=Wd(z,ke),Gt=ft===void 0?0:parseInt(ft,10);return isNaN(Gt)?de:de+Gt},0);return{set:b,get:y,getOuter:T,aggregate:_,max:(z,Y,de)=>{const ke=_(z,de);return Y>ke?Y-ke:0}}},Sg=(l,m)=>cr(l).getOr(m),vu=(l,m,b)=>Sg(Wd(l,m),b),pl=(l,m,b,y)=>{const T=vu(l,`padding-${b}`,0),_=vu(l,`padding-${y}`,0),P=vu(l,`border-${b}-width`,0),z=vu(l,`border-${y}-width`,0);return m-T-_-P-z},m1=(l,m)=>{const b=l.dom,y=b.getBoundingClientRect().width||b.offsetWidth;return pl(l,y,"left","right")},ea=l=>vu(l,"height",l.dom.offsetHeight),Wi=l=>vu(l,"width",l.dom.offsetWidth),yu=l=>m1(l),is=Zh("height",l=>{const m=l.dom;return $n(l)?m.getBoundingClientRect().height:m.offsetHeight}),xi=l=>is.get(l),bb=l=>is.getOuter(l),xg=ea,Zi=Zh("width",l=>{const m=l.dom;return $n(l)?m.getBoundingClientRect().width:m.offsetWidth}),Vn=l=>Zi.get(l),Sr=l=>Zi.getOuter(l),zc=yu,lr=Wi,ji=(l,m)=>({left:l,top:m,translate:(y,T)=>ji(l+y,m+T)}),fr=ji,cc=l=>{const m=l.getBoundingClientRect();return fr(m.left,m.top)},xf=(l,m)=>l!==void 0?l:m!==void 0?m:0,Ro=l=>{const m=l.dom.ownerDocument,b=m.body,y=m.defaultView,T=m.documentElement;if(b===l.dom)return fr(b.offsetLeft,b.offsetTop);const _=xf(y==null?void 0:y.pageYOffset,T.scrollTop),P=xf(y==null?void 0:y.pageXOffset,T.scrollLeft),z=xf(T.clientTop,b.clientTop),Y=xf(T.clientLeft,b.clientLeft);return bl(l).translate(P-Y,_-z)},bl=l=>{const m=l.dom,y=m.ownerDocument.body;return y===m?fr(y.offsetLeft,y.offsetTop):$n(l)?cc(m):fr(0,0)},Ws=l=>{const m=l!==void 0?l.dom:document,b=m.body.scrollLeft||m.documentElement.scrollLeft,y=m.body.scrollTop||m.documentElement.scrollTop;return fr(b,y)},si=(l,m,b)=>{const T=(b!==void 0?b.dom:document).defaultView;T&&T.scrollBy(l,m)},ic=((l,m)=>{const b=_=>{if(!l(_))throw new Error("Can only get "+m+" value of a "+m+" node");return y(_).getOr("")},y=_=>l(_)?le.from(_.dom.nodeValue):le.none();return{get:b,getOption:y,set:(_,P)=>{if(!l(_))throw new Error("Can only set raw "+m+" value of a "+m+" node");_.dom.nodeValue=P}}})($m,"text"),Cu=l=>ic.get(l),Ef=l=>ic.getOption(l),id=(l,m)=>ic.set(l,m),Zd=(l,m)=>b=>jd(b)==="rtl"?m:l,jd=l=>Wd(l,"direction")==="rtl"?"rtl":"ltr",ta=(l,m)=>{const b=Si(l,m);return b===void 0||b===""?[]:b.split(" ")},ld=(l,m,b)=>{const T=ta(l,m).concat([b]);return rc(l,m,T.join(" ")),!0},e2=(l,m,b)=>{const y=Be(ta(l,m),T=>T!==b);return y.length>0?rc(l,m,y.join(" ")):Es(l,m),!1};var Gd=(l,m,b,y,T)=>l(b,y)?le.some(b):Eo(T)&&T(b)?le.none():m(b,y,T);const Ts=(l,m,b)=>{let y=l.dom;const T=Eo(b)?b:pn;for(;y.parentNode;){y=y.parentNode;const _=Pt.fromDom(y);if(m(_))return le.some(_);if(T(_))break}return le.none()},f1=(l,m,b)=>Gd((T,_)=>_(T),Ts,l,m,b),Tf=(l,m)=>{const b=T=>m(Pt.fromDom(T));return F(l.dom.childNodes,b).map(Pt.fromDom)},fa=(l,m)=>{const b=y=>{for(let T=0;T<y.childNodes.length;T++){const _=Pt.fromDom(y.childNodes[T]);if(m(_))return le.some(_);const P=b(y.childNodes[T]);if(P.isSome())return P}return le.none()};return b(l.dom)},ri=(l,m,b)=>Ts(l,y=>ye(y,m),b),$r=(l,m)=>Tf(l,b=>ye(b,m)),ud=(l,m)=>en(m,l),Yr=(l,m,b)=>Gd((T,_)=>ye(T,_),ri,l,m,b),Af=l=>l.dom.classList!==void 0,jh=l=>ta(l,"class"),g1=(l,m)=>ld(l,"class",m),sS=(l,m)=>e2(l,"class",m),jl=(l,m)=>{Af(l)?l.dom.classList.add(m):g1(l,m)},t2=l=>{(Af(l)?l.dom.classList:jh(l)).length===0&&Es(l,"class")},h1=(l,m)=>{Af(l)?l.dom.classList.remove(m):sS(l,m),t2(l)},Gl=(l,m)=>Af(l)&&l.dom.classList.contains(m),vb=(l,m)=>{He(m,b=>{h1(l,b)})},kf=l=>Yr(l,"[contenteditable]"),Eg=(l,m=!1)=>$n(l)?l.dom.isContentEditable:kf(l).fold(re(m),b=>Tg(b)==="true"),Tg=l=>l.dom.contentEditable,p1=l=>m=>{jl(m,l)},yb=l=>m=>{vb(m,l)},vl=(l,m,b)=>Be(zd(l,b),m),n2=(l,m)=>Be(da(l),m),qd=(l,m)=>{let b=[];return He(da(l),y=>{m(y)&&(b=b.concat([y])),b=b.concat(qd(y,m))}),b},As=(l,m,b)=>vl(l,y=>ye(y,m),b),ga=(l,m)=>n2(l,b=>ye(b,m)),wu=(l,m)=>kt(m,l),b1=(l,m,b,y)=>({parent:l,children:m,element:b,index:y}),Kd=l=>ee(l).bind(m=>{const b=da(m);return v1(b,l).map(y=>b1(m,b,l,y))}),v1=(l,m)=>Fs(l,je(Dn,m)),Cb=(l,m,b)=>Ts(l,m,b).isSome(),Su=l=>jr(l)==="img"?1:Ef(l).fold(()=>da(l).length,m=>m.length),xu=l=>Ef(l).filter(m=>m.trim().length!==0||m.indexOf(ue)>-1).isSome(),Ps=l=>gb(l)&&Si(l,"contenteditable")==="false",wb=["img","br"],Tr=l=>xu(l)||ho(wb,jr(l))||Ps(l),Df=l=>fa(l,Tr),Xr=l=>Eu(l,Tr),Eu=(l,m)=>{const b=y=>{const T=da(y);for(let _=T.length-1;_>=0;_--){const P=T[_];if(m(P))return le.some(P);const z=b(P);if(z.isSome())return z}return le.none()};return b(l)},dd={create:(l,m,b,y)=>({start:l,soffset:m,finish:b,foffset:y})},Gh=Uo.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),y1=(l,m,b,y)=>l.fold(m,b,y),C1=l=>l.fold(En,En,En),o2=Gh.before,ci=Gh.on,ql=Gh.after,Jr={before:o2,on:ci,after:ql,cata:y1,getStart:C1},_c=Uo.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),qh=l=>_c.exact(l.start,l.soffset,l.finish,l.foffset),Ag=l=>l.match({domRange:m=>Pt.fromDom(m.startContainer),relative:(m,b)=>Jr.getStart(m),exact:(m,b,y,T)=>m}),Kh=_c.domRange,Sb=_c.relative,yl=_c.exact,rS=l=>{const m=Ag(l);return n1(m)},pa=dd.create,x={domRange:Kh,relative:Sb,exact:yl,exactFromRange:qh,getWin:rS,range:pa},A=(l,m,b)=>{var y;return le.from((y=l.caretPositionFromPoint)==null?void 0:y.call(l,m,b)).bind(T=>{if(T.offsetNode===null)return le.none();const _=l.createRange();return _.setStart(T.offsetNode,T.offset),_.collapse(),le.some(_)})},$=(l,m,b)=>{var y;return le.from((y=l.caretRangeFromPoint)==null?void 0:y.call(l,m,b))},q=(l,m,b)=>l.caretPositionFromPoint?A(l,m,b):l.caretRangeFromPoint?$(l,m,b):le.none(),ge=(l,m,b)=>{const y=l.document;return q(y,m,b).map(T=>dd.create(Pt.fromDom(T.startContainer),T.startOffset,Pt.fromDom(T.endContainer),T.endOffset))},Ye=(l,m)=>{const b=jr(l);return b==="input"?Jr.after(l):ho(["br","img"],b)?m===0?Jr.before(l):Jr.after(l):Jr.on(l,m)},Ht=(l,m)=>{const b=l.fold(Jr.before,Ye,Jr.after),y=m.fold(Jr.before,Ye,Jr.after);return x.relative(b,y)},un=(l,m,b,y)=>{const T=Ye(l,m),_=Ye(b,y);return x.relative(T,_)},fo=l=>le.from(l.getSelection()),Oo=(l,m)=>{fo(l).each(b=>{b.removeAllRanges(),b.addRange(m)})},Zs=(l,m,b,y,T)=>{const _=ka(l,m,b,y,T);Oo(l,_)},Br=(l,m,b,y,T,_)=>{m.collapse(b.dom,y),m.extend(T.dom,_)},Wr=(l,m)=>Il(l,m).match({ltr:(b,y,T,_)=>{Zs(l,b,y,T,_)},rtl:(b,y,T,_)=>{fo(l).each(P=>{if(P.setBaseAndExtent)P.setBaseAndExtent(b.dom,y,T.dom,_);else if(P.extend)try{Br(l,P,b,y,T,_)}catch{Zs(l,T,_,b,y)}else Zs(l,T,_,b,y)})}}),Ei=(l,m,b,y,T)=>{const _=un(m,b,y,T);Wr(l,_)},md=(l,m,b)=>{const y=Ht(m,b);Wr(l,y)},Gi=l=>{if(l.rangeCount>0){const m=l.getRangeAt(0),b=l.getRangeAt(l.rangeCount-1);return le.some(dd.create(Pt.fromDom(m.startContainer),m.startOffset,Pt.fromDom(b.endContainer),b.endOffset))}else return le.none()},Lm=l=>{if(l.anchorNode===null||l.focusNode===null)return Gi(l);{const m=Pt.fromDom(l.anchorNode),b=Pt.fromDom(l.focusNode);return yg(m,l.anchorOffset,b,l.focusOffset)?le.some(dd.create(m,l.anchorOffset,b,l.focusOffset)):Gi(l)}},kg=(l,m,b=!0)=>{const T=(b?Pc:La)(l,m);Oo(l,T)},w1=l=>fo(l).filter(m=>m.rangeCount>0).bind(Lm),Hm=l=>w1(l).map(m=>x.exact(m.start,m.soffset,m.finish,m.foffset)),Yd=(l,m)=>{const b=At(l,m);return nd(b)},S1=(l,m,b)=>ge(l,m,b),Yh=l=>{fo(l).each(m=>m.removeAllRanges())},Xh={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},s2=(()=>{const l="[0-9]+",b="[eE]"+("[+-]?"+l),y="\\.",T=z=>`(?:${z})?`,P=`[+-]?(?:${["Infinity",l+y+T(l)+T(b),y+l+T(b),l+T(b)].join("|")})`;return new RegExp(`^(${P})(.*)$`)})(),Jh=(l,m)=>tt(m,b=>tt(Xh[b],y=>l===y)),Ho=(l,m)=>le.from(s2.exec(l)).bind(y=>{const T=Number(y[1]),_=y[2];return Jh(_,m)?le.some({value:T,unit:_}):le.none()}),er=l=>ln(l,re(0)),ba=(l,m,b,y,T)=>T(l.slice(0,m)).concat(y).concat(T(l.slice(b))),Wa=l=>(m,b,y,T)=>{if(l(y)){const _=Math.max(T,m[b]-Math.abs(y)),P=Math.abs(_-m[b]);return y>=0?P:-P}else return y},Dg=Wa(l=>l<0),r2=Wa(xe),Qh=()=>{const l=(z,Y,de,ke,ft)=>{const Gt=Dg(z,Y,ke,ft);return ba(z,Y,de+1,[Gt,0],er)},m=(z,Y,de,ke)=>{const ft=(100+de)/100,Gt=Math.max(ke,(z[Y]+de)/ft);return ln(z,(Zt,ut)=>(ut===Y?Gt:Zt/ft)-Zt)},b=(z,Y,de,ke,ft,Gt)=>Gt?m(z,Y,ke,ft):l(z,Y,de,ke,ft);return{resizeTable:(z,Y)=>z(Y),clampTableDelta:Dg,calcLeftEdgeDeltas:b,calcMiddleDeltas:(z,Y,de,ke,ft,Gt,Zt)=>b(z,de,ke,ft,Gt,Zt),calcRightEdgeDeltas:(z,Y,de,ke,ft,Gt)=>{if(Gt)return m(z,de,ke,ft);{const Zt=Dg(z,de,ke,ft);return er(z.slice(0,de)).concat([Zt])}},calcRedestributedWidths:(z,Y,de,ke)=>{if(ke){const Gt=(Y+de)/Y,Zt=ln(z,ut=>ut/Gt);return{delta:Gt*100-100,newSizes:Zt}}else return{delta:de,newSizes:z}}}},Og=()=>{const l=(P,z,Y,de,ke)=>{const ft=de>=0?Y:z,Gt=r2(P,ft,de,ke);return ba(P,z,Y+1,[Gt,-Gt],er)};return{resizeTable:(P,z,Y)=>{Y&&P(z)},clampTableDelta:(P,z,Y,de,ke)=>{if(ke){if(Y>=0)return Y;{const ft=Ae(P,(Gt,Zt)=>Gt+Zt-de,0);return Math.max(-ft,Y)}}else return Dg(P,z,Y,de)},calcLeftEdgeDeltas:l,calcMiddleDeltas:(P,z,Y,de,ke,ft)=>l(P,Y,de,ke,ft),calcRightEdgeDeltas:(P,z,Y,de,ke,ft)=>{if(ft)return er(P);{const Gt=de/P.length;return ln(P,re(Gt))}},calcRedestributedWidths:(P,z,Y,de)=>({delta:0,newSizes:P})}},zm=(l,m,b=0)=>ma(l,m).map(y=>parseInt(y,10)).getOr(b),Xd=(l,m)=>zm(l,m,1),c2=l=>Ci("col")(l)?zm(l,"span",1)>1:Xd(l,"colspan")>1,A4=l=>Xd(l,"rowspan")>1,wc=(l,m)=>parseInt(Wd(l,m),10),mc=re(10),fd=re(10),ep=(l,m)=>xb(l,m,xe),xb=(l,m,b)=>Xn(da(l),y=>ye(y,m)?b(y)?[y]:[]:xb(y,m,b)),Za=(l,m,b=pn)=>{if(b(m))return le.none();if(ho(l,jr(m)))return le.some(m);const y=T=>ye(T,"table")||b(T);return ri(m,l.join(","),y)},a2=(l,m)=>Za(["td","th"],l,m),Of=l=>ep(l,"th,td"),Eb=l=>ye(l,"colgroup")?ga(l,"col"):Xn(tr(l),m=>ga(m,"col")),qi=(l,m)=>Yr(l,"table",m),i2=l=>ep(l,"tr"),tr=l=>qi(l).fold(re([]),m=>ga(m,"colgroup")),tp=Ci("th"),Vm=l=>co(l,m=>tp(m.element)),k4=(l,m)=>l&&m?"sectionCells":l?"section":"cells",cS=l=>{const m=l.section==="thead",b=Jt(Tb(l.cells),"th");return l.section==="tfoot"?{type:"footer"}:m||b?{type:"header",subType:k4(m,b)}:{type:"body"}},Tb=l=>{const m=Be(l,b=>tp(b.element));return m.length===0?le.some("td"):m.length===l.length?le.some("th"):le.none()},D4=l=>{const m=ln(l,T=>cS(T).type),b=ho(m,"header"),y=ho(m,"footer");if(!b&&!y)return le.some("body");{const T=ho(m,"body");return b&&!T&&!y?le.some("header"):!b&&!T&&y?le.some("footer"):le.none()}},l2=l=>Ee(l.all,m=>{const b=cS(m);return b.type==="header"?le.from(b.subType):le.none()}),Um=(l,m)=>ln(l,b=>{if(jr(b)==="colgroup"){const y=ln(Eb(b),T=>{const _=zm(T,"span",1);return An(T,1,_)});return Co(b,y,"colgroup")}else{const y=ln(Of(b),T=>{const _=zm(T,"rowspan",1),P=zm(T,"colspan",1);return An(T,_,P)});return Co(b,y,m(b))}}),u2=l=>ee(l).map(m=>{const b=jr(m);return Qe(b)?b:"tbody"}).getOr("tbody"),gn=l=>{const m=i2(l),y=[...tr(l),...m];return Um(y,u2)},gr=(l,m)=>Um(l,()=>m),np="data-snooker-locked-cols",_g=l=>ma(l,np).bind(m=>le.from(m.match(/\d+/g))).map(m=>De(m,xe)),na=l=>{const m=Ae(dr(l).rows,(y,T)=>(He(T.cells,(_,P)=>{_.isLocked&&(y[P]=!0)}),y),{}),b=Lo(m,(y,T)=>parseInt(T,10));return ve(b)},op=(l,m)=>l+","+m,O4=(l,m,b)=>le.from(l.access[op(m,b)]),Rg=(l,m,b)=>{const y=aS(l,T=>b(m,T.element));return y.length>0?le.some(y[0]):le.none()},aS=(l,m)=>{const b=Xn(l.all,y=>y.cells);return Be(b,m)},Jd=l=>{const m={};let b=0;return He(l.cells,y=>{const T=y.colspan;No(T,_=>{const P=b+_;m[P]=bi(y.element,T,P)}),b+=T}),m},_f=l=>{const m={},b=[],T=te(l).map(Zt=>Zt.element).bind(qi).bind(_g).getOr({});let _=0,P=0,z=0;const{pass:Y,fail:de}=Bt(l,Zt=>Zt.section==="colgroup");He(de,Zt=>{const ut=[];He(Zt.cells,bt=>{let mt=0;for(;m[op(z,mt)]!==void 0;)mt++;const Bn=mo(T,mt.toString()),go=Cn(bt.element,bt.rowspan,bt.colspan,z,mt,Bn);for(let rn=0;rn<bt.colspan;rn++)for(let ws=0;ws<bt.rowspan;ws++){const eo=z+ws,Ms=mt+rn,ec=op(eo,Ms);m[ec]=go,P=Math.max(P,Ms+1)}ut.push(go)}),_++,b.push(Co(Zt.element,ut,Zt.section)),z++});const{columns:ke,colgroups:ft}=Dt(Y).map(Zt=>{const ut=Jd(Zt);return{colgroups:[$i(Zt.element,zn(ut))],columns:ut}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:ht(_,P),access:m,all:b,columns:ke,colgroups:ft}},_o={fromTable:l=>{const m=gn(l);return _f(m)},generate:_f,getAt:O4,findItem:Rg,filterItems:aS,justCells:l=>Xn(l.all,m=>m.cells),justColumns:l=>zn(l.columns),hasColumns:l=>Ce(l.columns).length>0,getColumnAt:(l,m)=>le.from(l.columns[m])},Bg=(l,m,b)=>Po(b(l.element,m),!0,l.isLocked),Ar=(l,m)=>l.section!==m?qs(l.element,l.cells,m,l.isNew):l,g2=()=>({transformRow:Ar,transformCell:(l,m,b)=>{const y=b(l.element,m),T=jr(y)!=="td"?l1(y,"td"):y;return Po(T,l.isNew,l.isLocked)}}),Tu=()=>({transformRow:Ar,transformCell:Bg}),ai=()=>({transformRow:(l,m)=>Ar(l,m==="thead"?"tbody":m),transformCell:Bg}),Qd={getTableSectionType:(l,m)=>{const b=_o.fromTable(l);switch(l2(b).getOr(m)){case"section":return g2();case"sectionCells":return Tu();case"cells":return ai()}},section:g2,sectionCells:Tu,cells:ai,fallback:()=>({transformRow:En,transformCell:Bg})},h2=(l,m=xe)=>{const b=l.grid,y=No(b.columns,En),T=No(b.rows,En);return ln(y,_=>kb(()=>Xn(T,de=>_o.getAt(l,de,_).filter(ke=>ke.column===_).toArray()),de=>de.colspan===1&&m(de.element),()=>_o.getAt(l,0,_)))},kb=(l,m,b)=>{const y=l();return F(y,m).orThunk(()=>le.from(y[0]).orThunk(b)).map(P=>P.element)},Au=l=>{const m=l.grid,b=No(m.rows,En),y=No(m.columns,En);return ln(b,T=>kb(()=>Xn(y,Y=>_o.getAt(l,T,Y).filter(de=>de.row===T).fold(re([]),de=>[de])),Y=>Y.rowspan===1,()=>_o.getAt(l,T,0)))},p2=(l,m)=>{if(m<0||m>=l.length-1)return le.none();const b=l[m].fold(()=>{const T=ms(l.slice(0,m));return Ee(T,(_,P)=>_.map(z=>({value:z,delta:P+1})))},T=>le.some({value:T,delta:0})),y=l[m+1].fold(()=>{const T=l.slice(m+1);return Ee(T,(_,P)=>_.map(z=>({value:z,delta:P+1})))},T=>le.some({value:T,delta:1}));return b.bind(T=>y.map(_=>{const P=_.delta+T.delta;return Math.abs(_.value-T.value)/P}))},Db=(l,m)=>({row:l,y:m}),b2=(l,m)=>({col:l,x:m}),iS=l=>Ro(l).left+Sr(l),_4=l=>Ro(l).left,v2=(l,m)=>b2(l,_4(m)),lS=(l,m)=>b2(l,iS(m)),Ob=l=>Ro(l).top,R4=(l,m)=>Db(l,Ob(m)),B4=(l,m)=>Db(l,Ob(m)+bb(m)),y2=(l,m,b)=>{if(b.length===0)return[];const y=ln(b.slice(1),(_,P)=>_.map(z=>l(P,z))),T=b[b.length-1].map(_=>m(b.length-1,_));return y.concat([T])},C2=l=>-l,Kl={delta:En,positions:l=>y2(R4,B4,l),edge:Ob},Un=Zd({delta:En,edge:_4,positions:l=>y2(v2,lS,l)},{delta:C2,edge:iS,positions:l=>y2(lS,v2,l)}),li={delta:(l,m)=>Un(m).delta(l,m),positions:(l,m)=>Un(m).positions(l,m),edge:l=>Un(l).edge(l)},Mg=/(\d+(\.\d+)?)%/,uS=/(\d+(\.\d+)?)px|em/,M4=Ci("col"),_b=Ci("tr"),x1=(l,m,b)=>{const y=ti(l).getOrThunk(()=>d1(vg(l)));return m(l)/b(y)*100},Fg=(l,m)=>{Hc(l,"width",m+"px")},Rb=(l,m)=>{Hc(l,"width",m+"%")},Rf=(l,m)=>{Hc(l,"height",m+"px")},w2=l=>{Zl(l,"height")},dS=l=>xg(l)+"px",Ir=(l,m,b,y)=>{const T=qi(l).map(_=>{const P=b(_);return Math.floor(m/100*P)}).getOr(m);return y(l,T),T},ku=(l,m,b,y)=>{const T=parseFloat(l);return Tt(l,"%")&&jr(m)!=="table"?Ir(m,T,b,y):T},Ti=l=>{const m=dS(l);return m?ku(m,l,xi,Rf):xi(l)},Bf=(l,m,b)=>{const y=b(l),T=Xd(l,m);return y/T},ui=(l,m)=>Ui(l,m).orThunk(()=>ma(l,m).map(b=>b+"px")),Ng=l=>ui(l,"width"),Vc=l=>ui(l,"height"),_a=l=>x1(l,Vn,zc),sp=l=>M4(l)?Math.round(Vn(l)):lr(l),ct=l=>_b(l)?xi(l):Bf(l,"rowspan",Ti),wl=l=>Ng(l).bind(b=>Ho(b,["fixed","relative","empty"])),E1=(l,m,b)=>{Hc(l,"width",m+b)},Rc=l=>Vn(l)+"px",Yl=l=>xi(l)+"px",Xl=l=>x1(l,Vn,zc)+"%",mS=l=>Ng(l).exists(m=>Mg.test(m)),Wm=l=>Ng(l).exists(m=>uS.test(m)),fS=l=>Ng(l).isNone(),Ai=re(Mg),$s=Ci("col"),Du=l=>Ng(l).getOrThunk(()=>sp(l)+"px"),T1=l=>Vc(l).getOrThunk(()=>ct(l)+"px"),Gr=l=>ln(_o.justColumns(l),m=>le.from(m.element)),gS=l=>{const m=$c().browser,b=m.isChromium()||m.isFirefox();return $s(l)?b:!0},Bb=(l,m,b,y,T,_)=>l.filter(y).fold(()=>_(p2(b,m)),P=>T(P)),gd=(l,m,b,y)=>{const T=h2(l),_=_o.hasColumns(l)?Gr(l):T,P=[le.some(li.edge(m))].concat(ln(li.positions(T,m),Y=>Y.map(de=>de.x))),z=G(c2);return ln(_,(Y,de)=>Bb(Y,de,P,z,ke=>{if(gS(ke))return b(ke);{const ft=zr(T[de],En);return Bb(ft,de,P,z,Gt=>y(le.some(Math.round(Vn(Gt)))),y)}},y))},S2=l=>l.map(m=>m+"px").getOr(""),Ki=(l,m)=>gd(l,m,Du,S2),x2=(l,m,b)=>gd(l,m,_a,y=>y.fold(()=>b.minCellWidth(),T=>T/b.pixelWidth()*100)),Re=(l,m,b)=>gd(l,m,sp,y=>y.getOrThunk(b.minCellWidth)),di=(l,m,b,y)=>{const T=Au(l),_=ln(l.all,z=>le.some(z.element)),P=[le.some(Kl.edge(m))].concat(ln(Kl.positions(T,m),z=>z.map(Y=>Y.y)));return ln(_,(z,Y)=>Bb(z,Y,P,xe,b,y))},rp=(l,m)=>di(l,m,ct,b=>b.getOrThunk(fd)),Lr=(l,m)=>di(l,m,T1,S2),Sl=(l,m)=>()=>$n(l)?m(l):parseFloat(Ui(l,"width").getOr("0")),va=l=>{const m=Sl(l,Vn),b=re(0);return{width:m,pixelWidth:m,getWidths:(T,_)=>Re(T,l,_),getCellDelta:b,singleColumnWidth:re([0]),minCellWidth:b,setElementWidth:dt,adjustTableWidth:dt,isRelative:!0,label:"none"}},Rs=l=>{const m=Sl(l,Y=>parseFloat(Xl(Y))),b=Sl(l,Vn);return{width:m,pixelWidth:b,getWidths:(Y,de)=>x2(Y,l,de),getCellDelta:Y=>Y/b()*100,singleColumnWidth:(Y,de)=>[100-Y],minCellWidth:()=>mc()/b()*100,setElementWidth:Rb,adjustTableWidth:Y=>{const de=m(),ke=Y/100*de,ft=de+ke;Rb(l,ft)},isRelative:!0,label:"percent"}},hS=l=>{const m=Sl(l,Vn);return{width:m,pixelWidth:m,getWidths:(P,z)=>Re(P,l,z),getCellDelta:En,singleColumnWidth:(P,z)=>[Math.max(mc(),P+z)-P],minCellWidth:mc,setElementWidth:Fg,adjustTableWidth:P=>{const z=m()+P;Fg(l,z)},isRelative:!1,label:"pixel"}},Mf=(l,m)=>Ai().exec(m)!==null?Rs(l):hS(l),Ff={getTableSize:l=>Ng(l).fold(()=>va(l),b=>Mf(l,b)),pixelSize:hS,percentageSize:Rs,noneSize:va},cp=(l,m,b,y)=>{b===y?Es(l,m):rc(l,m,b)},pS=(l,m,b)=>{Dt(ga(l,m)).fold(()=>Rr(l,b),y=>Ul(y,b))},bS=(l,m)=>{const b=$r(l,m).getOrThunk(()=>{const y=Pt.fromTag(m,vg(l).dom);return m==="thead"?pS(l,"caption,colgroup",y):m==="colgroup"?pS(l,"caption",y):ys(l,y),y});return Ua(b),b},Zm=(l,m)=>{const b=[],y=[],T=Zt=>ln(Zt,ut=>{ut.isNew&&b.push(ut.element);const bt=ut.element;return Ua(bt),He(ut.cells,mt=>{mt.isNew&&y.push(mt.element),cp(mt.element,"colspan",mt.colspan,1),cp(mt.element,"rowspan",mt.rowspan,1),ys(bt,mt.element)}),bt}),_=Zt=>Xn(Zt,ut=>ln(ut.cells,bt=>(cp(bt.element,"span",bt.colspan,1),bt.element))),P=(Zt,ut)=>{const bt=bS(l,ut),Bn=(ut==="colgroup"?_:T)(Zt);fl(bt,Bn)},z=Zt=>{$r(l,Zt).each(Ic)},Y=(Zt,ut)=>{Zt.length>0?P(Zt,ut):z(ut)},de=[],ke=[],ft=[],Gt=[];return He(m,Zt=>{switch(Zt.section){case"thead":de.push(Zt);break;case"tbody":ke.push(Zt);break;case"tfoot":ft.push(Zt);break;case"colgroup":Gt.push(Zt);break}}),Y(Gt,"colgroup"),Y(de,"thead"),Y(ke,"tbody"),Y(ft,"tfoot"),{newRows:b,newCells:y}},A1=l=>ln(l,m=>{const b=hl(m.element);return He(m.cells,y=>{const T=Dc(y.element);cp(T,"colspan",y.colspan,1),cp(T,"rowspan",y.rowspan,1),ys(b,T)}),b}),O5=(l,m)=>ln(l,b=>Ln(b,m)),Pg=(l,m)=>l[m],ya=(l,m)=>{if(l.length===0)return 0;const b=l[0];return Fs(l,T=>!m(b.element,T.element)).getOr(l.length)},oa=(l,m,b,y)=>{const T=Pg(l,m),_=T.section==="colgroup",P=ya(T.cells.slice(b),y),z=_?1:ya(O5(l.slice(m),b),y);return{colspan:P,rowspan:z}},jm=(l,m)=>{const b=ln(l,T=>ln(T.cells,pn)),y=(T,_,P,z)=>{for(let Y=T;Y<T+P;Y++)for(let de=_;de<_+z;de++)b[Y][de]=!0};return ln(l,(T,_)=>{const P=Xn(T.cells,(z,Y)=>{if(b[_][Y]===!1){const de=oa(l,_,Y,m);return y(_,Y,de.rowspan,de.colspan),[Qt(z.element,de.rowspan,de.colspan,z.isNew)]}else return[]});return To(T.element,P,T.section,T.isNew)})},Gm=(l,m,b)=>{const y=[];He(l.colgroups,T=>{const _=[];for(let P=0;P<l.grid.columns;P++){const z=_o.getColumnAt(l,P).map(Y=>Po(Y.element,b,!1)).getOrThunk(()=>Po(m.colGap(),!0,!1));_.push(z)}y.push(qs(T.element,_,"colgroup",b))});for(let T=0;T<l.grid.rows;T++){const _=[];for(let Y=0;Y<l.grid.columns;Y++){const de=_o.getAt(l,T,Y).map(ke=>Po(ke.element,b,ke.isLocked)).getOrThunk(()=>Po(m.gap(),!0,!1));_.push(de)}const P=l.all[T],z=qs(P.element,_,P.section,b);y.push(z)}return y},$g=(l,m)=>Gm(l,m,!1),ap=l=>jm(l,Dn),mi=(l,m)=>Ee(l.all,b=>F(b.cells,y=>Dn(m,y.element))),Nf=(l,m,b)=>{const y=ln(m.selection,_=>a2(_).bind(P=>mi(l,P)).filter(b)),T=lo(y);return Vr(T.length>0,T)},Bc=(l,m,b,y,T,_,P,z,Y)=>{const de=_o.fromTable(_),ke=le.from(Y==null?void 0:Y.section).getOrThunk(Qd.fallback);return m(de,P).map(Gt=>{const Zt=$g(de,z),ut=l(Zt,Gt,Dn,T(z),ke),bt=na(ut.grid),mt=ap(ut.grid);return{info:Gt,grid:mt,cursor:ut.cursor,lockedColumns:bt}}).bind(Gt=>{const Zt=Zm(_,Gt.grid),ut=le.from(Y==null?void 0:Y.sizing).getOrThunk(()=>Ff.getTableSize(_)),bt=le.from(Y==null?void 0:Y.resize).getOrThunk(Og);return b(_,Gt.grid,Gt.info,{sizing:ut,resize:bt,section:ke}),y(_),Es(_,np),Gt.lockedColumns.length>0&&rc(_,np,Gt.lockedColumns.join(",")),le.some({cursor:Gt.cursor,newRows:Zt.newRows,newCells:Zt.newCells})})},Mb=(l,m)=>a2(m.element).bind(b=>mi(l,b).map(y=>({...y,generators:m.generators,clipboard:m.clipboard}))),Ou=(l,m)=>Nf(l,m,xe).map(b=>({cells:b,generators:m.generators,clipboard:m.clipboard})),_u=(l,m)=>m.mergable,Fb=(l,m)=>m.unmergable,Uc=(l,m)=>Nf(l,m,xe),ip=(l,m)=>Nf(l,m,b=>!b.isLocked),qm=(l,m)=>mi(l,m).exists(b=>!b.isLocked),Ig=(l,m)=>co(m,b=>qm(l,b)),em=(l,m)=>_u(l,m).filter(b=>Ig(l,b.cells)),k1=(l,m)=>Fb(l,m).filter(b=>Ig(l,b)),Lg={...Uo.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},vS=(l,m)=>l.length===0?Lg.none():l.length===1?Lg.only(0):m===0?Lg.left(0,1):m===l.length-1?Lg.right(m-1,m):m>0&&m<l.length-1?Lg.middle(m-1,m,m+1):Lg.none(),Qr=(l,m,b,y,T)=>{const _=l.slice(0),P=vS(l,m),z=re(ln(_,re(0))),Y=Gt=>y.singleColumnWidth(_[Gt],b),de=(Gt,Zt)=>T.calcLeftEdgeDeltas(_,Gt,Zt,b,y.minCellWidth(),y.isRelative),ke=(Gt,Zt,ut)=>T.calcMiddleDeltas(_,Gt,Zt,ut,b,y.minCellWidth(),y.isRelative),ft=(Gt,Zt)=>T.calcRightEdgeDeltas(_,Gt,Zt,b,y.minCellWidth(),y.isRelative);return P.fold(z,Y,de,ke,ft)},yS=(l,m,b)=>{let y=0;for(let T=l;T<m;T++)y+=b[T]!==void 0?b[T]:0;return y},tm=(l,m)=>{const b=_o.justCells(l);return ln(b,y=>{const T=yS(y.column,y.column+y.colspan,m);return{element:y.element,width:T,colspan:y.colspan}})},Ru=(l,m)=>{const b=_o.justColumns(l);return ln(b,(y,T)=>({element:y.element,width:m[T],colspan:y.colspan}))},T2=(l,m)=>ln(l.all,(b,y)=>({element:b.element,height:m[y]})),Hg=l=>xt(l,(m,b)=>m+b,0),Yi=(l,m)=>_o.hasColumns(l)?Ru(l,m):tm(l,m),zg=(l,m,b)=>{const y=Yi(l,m);He(y,T=>{b.setElementWidth(T.element,T.width)})},Vg=(l,m,b,y,T)=>{const _=_o.fromTable(l),P=T.getCellDelta(m),z=T.getWidths(_,T),Y=b===_.grid.columns-1,de=y.clampTableDelta(z,b,P,T.minCellWidth(),Y),ke=Qr(z,b,de,T,y),ft=ln(ke,(Gt,Zt)=>Gt+z[Zt]);zg(_,ft,T),y.resizeTable(T.adjustTableWidth,de,Y)},A2=(l,m,b)=>{const y=_o.fromTable(l),T=rp(y,l),_=ln(T,(Y,de)=>b===de?Math.max(m+Y,fd()):Y),P=T2(y,_);He(P,Y=>{Rf(Y.element,Y.height)}),He(_o.justCells(y),Y=>{w2(Y.element)});const z=Hg(_);Rf(l,z)},Nb=(l,m,b,y,T)=>{const _=_o.generate(m),P=y.getWidths(_,y),z=y.pixelWidth(),{newSizes:Y,delta:de}=T.calcRedestributedWidths(P,z,b.pixelDelta,y.isRelative);zg(_,Y,y),y.adjustTableWidth(de)},Pb=(l,m,b,y)=>{const T=_o.generate(m),_=y.getWidths(T,y);zg(T,_,y)},$b=(l,m)=>{c2(l)||wl(l).each(y=>{const T=y.value/2;E1(l,T,y.unit),E1(m,T,y.unit)})},k2=(l,m,b)=>{const y=zm(l,m,1);b===1||y<=1?Es(l,m):rc(l,m,Math.min(b,y))},CS=(l,m)=>b=>{const y=b.column+b.colspan-1,T=b.column;return y>=l&&T<m},Ug=(l,m,b)=>{if(_o.hasColumns(l)){const y=Be(_o.justColumns(l),CS(m,b)),T=ln(y,P=>{const z=Dc(P.element);return k2(z,"span",b-m),z}),_=Pt.fromTag("colgroup");return fl(_,T),[_]}else return[]},Wg=(l,m,b)=>ln(l.all,y=>{const T=Be(y.cells,CS(m,b)),_=ln(T,z=>{const Y=Dc(z.element);return k2(Y,"colspan",b-m),Y}),P=Pt.fromTag("tr");return fl(P,_),P}),hd=(l,m)=>{const b=_o.fromTable(l);return ip(b,m).map(T=>{const _=T[T.length-1],P=T[0].column,z=_.column+_.colspan,Y=Ug(b,P,z),de=Wg(b,P,z);return[...Y,...de]})},Km=(l,m,b)=>{const y=_o.fromTable(l);return Uc(y,m).bind(_=>{const P=Gm(y,b,!1),Y=dr(P).rows.slice(_[0].row,_[_.length-1].row+_[_.length-1].rowspan),de=Xn(Y,ft=>{const Gt=Be(ft.cells,Zt=>!Zt.isLocked);return Gt.length>0?[{...ft,cells:Gt}]:[]}),ke=ap(de);return Vr(ke.length>0,ke)}).map(_=>A1(_))},Zg=(l,m,b,y,T,_)=>({minRow:l,minCol:m,maxRow:b,maxCol:y,allCells:T,selectedCells:_}),wS=(l,m)=>{const b=l.grid.columns;let T=l.grid.rows,_=b,P=0,z=0;const Y=[],de=[];return bn(l.access,ke=>{if(Y.push(ke),m(ke)){de.push(ke);const ft=ke.row,Gt=ft+ke.rowspan-1,Zt=ke.column,ut=Zt+ke.colspan-1;ft<T?T=ft:Gt>P&&(P=Gt),Zt<_?_=Zt:ut>z&&(z=ut)}}),Zg(T,_,P,z,Y,de)},D1=(l,m,b)=>{const y=l[b].element,T=Pt.fromTag("td");ys(T,Pt.fromTag("br")),(m?ys:Rr)(y,T)},O1=(l,m,b,y)=>{const T=Be(l,z=>z.section!=="colgroup"),_=m.grid.columns,P=m.grid.rows;for(let z=0;z<P;z++){let Y=!1;for(let de=0;de<_;de++)z<b.minRow||z>b.maxRow||de<b.minCol||de>b.maxCol||(_o.getAt(m,z,de).filter(y).isNone()?D1(T,Y,z):Y=!0)}},SS=(l,m,b,y)=>{bn(b.columns,P=>{(P.column<m.minCol||P.column>m.maxCol)&&Ic(P.element)});const T=Be(ep(l,"tr"),P=>P.dom.childElementCount===0);He(T,Ic),(m.minCol===m.maxCol||m.minRow===m.maxRow)&&He(ep(l,"th,td"),P=>{Es(P,"rowspan"),Es(P,"colspan")}),Es(l,np),Es(l,"data-snooker-col-series"),Ff.getTableSize(l).adjustTableWidth(y)},xS=(l,m,b,y)=>{if(y.minCol===0&&m.grid.columns===y.maxCol+1)return 0;const T=Re(m,l,b),_=Ae(T,(de,ke)=>de+ke,0),Y=Ae(T.slice(y.minCol,y.maxCol+1),(de,ke)=>de+ke,0)/_*b.pixelWidth()-b.pixelWidth();return b.getCellDelta(Y)},Ib=(l,m)=>{const b=Gt=>ye(Gt.element,m),y=Dc(l),T=gn(y),_=Ff.getTableSize(l),P=_o.generate(T),z=wS(P,b),Y="th:not("+m+"),td:not("+m+")",de=xb(y,"th,td",Gt=>ye(Gt,Y));He(de,Ic),O1(T,P,z,b);const ke=_o.fromTable(l),ft=xS(l,ke,_,z);return SS(y,z,P,ft),y},jg=Ci("col"),Lb=Ci("colgroup"),Jl=l=>jr(l)==="tr"||Lb(l),ES=l=>{const m=zm(l,"colspan",1),b=zm(l,"rowspan",1);return{element:l,colspan:m,rowspan:b}},Bu=(l,m=ES)=>{const b=z=>jg(z.element)?l.col(z):l.cell(z),y=z=>Lb(z.element)?l.colgroup(z):l.row(z),T=z=>{if(Jl(z))return y({element:z});{const Y=z,de=b(m(Y));return _=le.some({item:Y,replacement:de}),de}};let _=le.none();return{getOrInit:(z,Y)=>_.fold(()=>T(z),de=>Y(z,de.item)?de.replacement:T(z))}},_1=l=>m=>{const b=[],y=(P,z)=>F(b,Y=>z(Y.item,P)),T=P=>{const z=l==="td"?{scope:null}:{},Y=m.replace(P,l,z);return b.push({item:P,sub:Y}),Y};return{replaceOrInit:(P,z)=>{if(Jl(P)||jg(P))return P;{const Y=P;return y(Y,z).fold(()=>T(Y),de=>z(P,de.item)?de.sub:T(Y))}}}},TS=l=>ma(l,"scope").map(m=>m.substr(0,3)),Xi={modification:Bu,transform:_1,merging:l=>({unmerge:y=>{const T=TS(y);return T.each(_=>rc(y,"scope",_)),()=>{const _=l.cell({element:y,colspan:1,rowspan:1});return Zl(_,"width"),Zl(y,"width"),T.each(P=>rc(_,"scope",P)),_}},merge:y=>{const T=()=>{const _=lo(ln(y,TS));if(_.length===0)return le.none();{const P=_[0],z=["row","col"];return tt(_,de=>de!==P&&ho(z,de))?le.none():le.from(P)}};return Zl(y[0],"width"),T().fold(()=>Es(y[0],"scope"),_=>rc(y[0],"scope",_+"group")),re(y[0])}})},R1=(l,m)=>{const b=l.slice(0,m[m.length-1].row+1),y=ap(b);return Xn(y,T=>{const _=T.cells.slice(0,m[m.length-1].column+1);return ln(_,P=>P.element)})},kS=(l,m)=>{const b=l.slice(m[0].row+m[0].rowspan-1,l.length),y=ap(b);return Xn(y,T=>{const _=T.cells.slice(m[0].column+m[0].colspan-1,T.cells.length);return ln(_,P=>P.element)})},Pf=(l,m,b)=>{const y=_o.fromTable(l);return Uc(y,m).map(_=>{const P=Gm(y,b,!1),{rows:z}=dr(P),Y=R1(z,_),de=kS(z,_);return{upOrLeftCells:Y,downOrRightCells:de}})},P4={only:(l,m)=>{const b=Xy(l)?Cf(l):l;return{parent:re(b),view:re(l),dragContainer:re(b),origin:re(fr(0,0)),isResizable:m}},detached:(l,m,b)=>{const y=()=>Ro(m);return{parent:re(m),view:re(l),dragContainer:re(m),origin:y,isResizable:b}},body:(l,m)=>({parent:re(l),view:re(l),dragContainer:re(l),origin:()=>Ro(l),isResizable:m})},Bs=Uo.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),DS=(l,m,b)=>{const y=b.substring(0,b.length-l.length),T=parseFloat(y);return y===T.toString()?m(T):Bs.invalid(b)},Ql={...Bs,from:l=>Tt(l,"%")?DS("%",Bs.percent,l):Tt(l,"px")?DS("px",Bs.pixels,l):Bs.invalid(l)},Gg=(l,m)=>ln(l,b=>Ql.from(b).fold(()=>b,T=>T/m*100+"%",T=>T+"%")),os=(l,m,b)=>{const y=b/m;return ln(l,T=>Ql.from(T).fold(()=>T,P=>P*y+"px",P=>P/100*b+"px"))},fc=(l,m)=>{const b=l.fold(()=>re(""),y=>{const T=y/m;return re(T+"px")},()=>{const y=100/m;return re(y+"%")});return No(m,b)},B1=(l,m,b)=>l.fold(()=>m,y=>os(m,b,y),y=>Gg(m,b)),Hb=(l,m,b)=>{const y=Ql.from(b),T=co(l,_=>_==="0px")?fc(y,l.length):B1(y,l,m);return _S(T)},pr=(l,m)=>l.length===0?m:xt(l,(b,y)=>Ql.from(y).fold(re(0),En,En)+b,0),lp=(l,m)=>{const b=Math.floor(l);return{value:b+m,remainder:l-b}},zb=(l,m)=>Ql.from(l).fold(re(l),b=>b+m+"px",b=>b+m+"%"),_S=l=>{if(l.length===0)return l;const m=xt(l,(y,T)=>{const _=Ql.from(T).fold(()=>({value:T,remainder:0}),P=>lp(P,"px"),P=>({value:P+"%",remainder:0}));return{output:[_.value].concat(y.output),remainder:y.remainder+_.remainder}},{output:[],remainder:0}),b=m.output;return b.slice(0,b.length-1).concat([zb(b[b.length-1],Math.round(m.remainder))])},RS=Ql.from,BS=(l,m,b)=>{He(m,y=>{const T=l.slice(y.column,y.colspan+y.column),_=pr(T,mc());Hc(y.element,"width",_+b)})},_5=(l,m,b)=>{He(m,(y,T)=>{const _=pr([l[T]],mc());Hc(y.element,"width",_+b)})},$4=(l,m,b)=>{He(b,y=>{Zl(y.element,"height")}),He(m,(y,T)=>{Hc(y.element,"height",l[T])})},I4=l=>RS(l).fold(re("px"),re("px"),re("%")),MS=(l,m,b)=>{const y=_o.fromTable(l),T=y.all,_=_o.justCells(y),P=_o.justColumns(y);m.each(z=>{const Y=I4(z),de=Vn(l),ke=Ki(y,l),ft=Hb(ke,de,z);_o.hasColumns(y)?_5(ft,P,Y):BS(ft,_,Y),Hc(l,"width",z)}),b.each(z=>{const Y=xi(l),de=Lr(y,l),ke=Hb(de,Y,z);$4(ke,T,_),Hc(l,"height",z)})},FS=mS,Mu=Wm,Ra=fS;var Fu=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],pd=()=>{const l=de=>Pt.fromDom(de.dom.cloneNode(!1)),m=de=>ml(de).dom,b=de=>Ur(de)?jr(de)==="body"?!0:ho(Fu,jr(de)):!1,y=de=>Ur(de)?ho(["br","img","hr","input"],jr(de)):!1,T=de=>Ur(de)&&Si(de,"contenteditable")==="false",_=(de,ke)=>de.dom.compareDocumentPosition(ke.dom),P=(de,ke)=>{const ft=Vi(de);Wl(ke,ft)},z=de=>{const ke=jr(de);return ho(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],ke)},Y=de=>Ur(de)?ma(de,"lang"):le.none();return{up:re({selector:ri,closest:Yr,predicate:Ts,all:zd}),down:re({selector:wu,predicate:qd}),styles:re({get:Wd,getRaw:Ui,set:Hc,remove:Zl}),attrs:re({get:Si,set:rc,remove:Es,copyTo:P}),insert:re({before:Vl,after:Ul,afterAll:sc,append:ys,appendAll:fl,prepend:Rr,wrap:Qy}),remove:re({unwrap:kc,remove:Ic}),create:re({nu:Pt.fromTag,clone:l,text:Pt.fromText}),query:re({comparePosition:_,prevSibling:o1,nextSibling:wf}),property:re({children:da,name:jr,parent:ee,document:m,isText:$m,isComment:oS,isElement:Ur,isSpecial:z,getLanguage:Y,getText:Cu,setText:id,isBoundary:b,isEmptyTag:y,isNonEditable:T}),eq:Dn,is:Ao}};const bd=(l,m)=>({item:l,mode:m}),$f=(l,m,b,y=nm)=>l.property().parent(m).map(T=>bd(T,y)),nm=(l,m,b,y=Ym)=>b.sibling(l,m).map(T=>bd(T,y)),Ym=(l,m,b,y=Ym)=>{const T=l.property().children(m);return b.first(T).map(P=>bd(P,y))},O2=[{current:$f,next:nm,fallback:le.none()},{current:nm,next:Ym,fallback:le.some($f)},{current:Ym,next:Ym,fallback:le.some(nm)}],_2=(l,m,b,y,T=O2)=>F(T,P=>P.current===b).bind(P=>P.current(l,m,y,P.next).orThunk(()=>P.fallback.bind(z=>_2(l,m,z,y)))),Vb={left:()=>({sibling:(b,y)=>b.query().prevSibling(y),first:b=>b.length>0?le.some(b[b.length-1]):le.none()}),right:()=>({sibling:(b,y)=>b.query().nextSibling(y),first:b=>b.length>0?le.some(b[0]):le.none()})},Ub=(l,m,b,y,T,_)=>_2(l,m,y,T).bind(z=>_(z.item)?le.none():b(z.item)?le.some(z.item):Ub(l,z.item,b,z.mode,T,_)),NS=(l,m,b,y)=>Ub(l,m,b,nm,Vb.left(),y),Wb=(l,m,b,y)=>Ub(l,m,b,nm,Vb.right(),y),If=(l,m)=>({element:l,offset:m}),M1=(l,m,b)=>l.property().isText(m)&&l.property().getText(m).trim().length===0||l.property().isComment(m)?b(m).bind(y=>M1(l,y,b).orThunk(()=>le.some(y))):le.none(),vd=(l,m)=>l.property().isText(m)?l.property().getText(m).length:l.property().children(m).length,Zb=(l,m)=>{const b=M1(l,m,l.query().prevSibling).getOr(m);if(l.property().isText(b))return If(b,vd(l,b));const y=l.property().children(b);return y.length>0?Zb(l,y[y.length-1]):If(b,vd(l,b))},H4=Zb,jb=pd(),Gb=l=>H4(jb,l),PS=l=>m=>l.property().children(m).length===0,z4=(l,m,b)=>$S(l,m,PS(l),b),up=(l,m,b)=>om(l,m,PS(l),b),$S=NS,om=Wb,dp=pd(),qb=(l,m)=>z4(dp,l,m),sm=(l,m)=>up(dp,l,m),fi=(l,m,b)=>$S(dp,l,m,b),Ji=(l,m,b)=>om(dp,l,m,b),Qi=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Kb=(l,m)=>{const b=l.property().name(m);return ho(["ol","ul"],b)},R2=(l,m)=>{const b=l.property().name(m);return ho(Qi,b)},mp=(l,m)=>ho(["br","img","hr","input"],l.property().name(m)),rm=(l,m,b,y)=>{const T=b[0],_=b.slice(1);return y(l,m,T,_)},V4=(l,m,b)=>b.length>0?rm(l,m,b,Sc):le.none(),Sc=(l,m,b,y)=>{const T=m(l,b);return xt(y,(_,P)=>{const z=m(l,P);return Yb(l,_,z)},T)},Yb=(l,m,b)=>m.bind(y=>b.filter(je(l.eq,y))),ki=(l,m)=>je(l.eq,m),IS=(l,m,b,y=pn)=>{const T=[m].concat(l.up().all(m)),_=[b].concat(l.up().all(b)),P=ke=>Fs(ke,y).fold(()=>ke,Gt=>ke.slice(0,Gt+1)),z=P(T),Y=P(_),de=F(z,ke=>tt(Y,ki(l,ke)));return{firstpath:z,secondpath:Y,shared:de}},LS=V4,Lf=IS,Xm=pd(),Cs=(l,m)=>LS(Xm,(b,y)=>l(y),m),ja=(l,m,b)=>Lf(Xm,l,m,b),F1=pd(),Xb=l=>R2(F1,l),Jb=l=>Kb(F1,l),N1=l=>mp(F1,l),HS=l=>{const m=Ci("br"),b=Y=>co(Y,de=>m(de)||$m(de)&&Cu(de).trim().length===0),y=Y=>jr(Y)==="li"||Ts(Y,Jb).isSome(),T=Y=>wf(Y).map(de=>Xb(de)?!0:N1(de)?jr(de)!=="img":!1).getOr(!1),_=Y=>Xr(Y).bind(de=>{const ke=T(de);return ee(de).map(ft=>ke===!0||y(ft)||m(de)||Xb(ft)&&!Dn(Y,ft)?[]:[Pt.fromTag("br")])}).getOr([]),z=(()=>{const Y=Xn(l,de=>{const ke=da(de);return b(ke)?[]:ke.concat(_(de))});return Y.length===0?[Pt.fromTag("br")]:Y})();Ua(l[0]),fl(l[0],z)},cm=l=>{Es(l,"width"),Es(l,"height")},Hf=l=>{const m=Xl(l);MS(l,le.some(m),le.none()),cm(l)},B2=l=>{const m=Rc(l);MS(l,le.some(m),le.none()),cm(l)},El=l=>{const m=Yl(l);MS(l,le.none(),le.some(m)),cm(l)},fp=l=>{Zl(l,"width");const m=Eb(l),b=m.length>0?m:Of(l);He(b,y=>{Zl(y,"width"),cm(y)}),cm(l)},gc={scope:["row","col"]},Di=l=>()=>{const m=Pt.fromTag("td",l.dom);return ys(m,Pt.fromTag("br",l.dom)),m},Qb=l=>()=>Pt.fromTag("col",l.dom),zS=l=>()=>Pt.fromTag("colgroup",l.dom),M2=l=>()=>Pt.fromTag("tr",l.dom),zf=(l,m,b)=>{const y=Ud(l,m);return bn(b,(T,_)=>{T===null?Es(y,_):rc(y,_,T)}),y},qg=l=>l,F2=(l,m,b)=>Df(l).map(T=>{const _=b.join(","),P=As(T,_,z=>Dn(z,l));return xt(P,(z,Y)=>{const de=hl(Y);return ys(z,de),de},m)}).getOr(m),N2=(l,m)=>{bn(gc,(b,y)=>ma(l,y).filter(T=>ho(b,T)).each(T=>rc(m,y,T)))},P1=(l,m,b)=>{const y=(P,z)=>{wg(P.element,z),Zl(z,"height"),P.colspan!==1&&Zl(z,"width")},T=P=>{const z=Pt.fromTag(jr(P.element),m.dom),Y=b.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),de=Y.length>0?F2(P.element,z,Y):z;return ys(de,Pt.fromTag("br")),y(P,z),N2(P.element,z),l(P.element,z),z};return{col:P=>{const z=Pt.fromTag(jr(P.element),m.dom);return y(P,z),l(P.element,z),z},colgroup:zS(m),row:M2(m),cell:T,replace:zf,colGap:Qb(m),gap:Di(m)}},P2=l=>({col:Qb(l),colgroup:zS(l),row:M2(l),cell:Di(l),replace:qg,colGap:Qb(l),gap:Di(l)}),Vf=l=>_o.fromTable(l).grid,Jm=(l,m,b,y)=>{const T=dr(l).rows;if(T.length===0)return l;for(let _=m.startRow;_<=m.finishRow;_++)for(let P=m.startCol;P<=m.finishCol;P++){const z=T[_],Y=Ln(z,P).isLocked;Hs(z,P,Po(y(),!1,Y))}return l},VS=(l,m,b,y)=>{const T=dr(l).rows;let _=!0;for(let P=0;P<T.length;P++)for(let z=0;z<Ac(T[0]);z++){const Y=T[P],de=Ln(Y,z),ke=de.element,ft=b(ke,m);ft&&!_?Hs(Y,z,Po(y(),!0,de.isLocked)):ft&&(_=!1)}return l},Ca=(l,m)=>Ae(l,(b,y)=>tt(b,T=>m(T.element,y.element))?b:b.concat([y]),[]),US=(l,m,b,y)=>(m>0&&m<l[0].cells.length&&He(l,T=>{const _=T.cells[m-1];let P=0;const z=y();for(;T.cells.length>m+P&&b(_.element,T.cells[m+P].element);)Hs(T,m+P,Po(z,!0,T.cells[m+P].isLocked)),P++}),l),Uf=(l,m,b,y)=>{const T=dr(l).rows;if(m>0&&m<T.length){const _=T[m-1].cells,P=Ca(_,b);He(P,z=>{let Y=le.none();for(let de=m;de<T.length;de++)for(let ke=0;ke<Ac(T[0]);ke++){const ft=T[de],Gt=Ln(ft,ke);b(Gt.element,z.element)&&(Y.isNone()&&(Y=le.some(y())),Y.each(ut=>{Hs(ft,ke,Po(ut,!0,Gt.isLocked))}))}})}return l},WS=(l,m,b)=>{if(l.row>=m.length||l.column>Ac(m[0]))return an.error("invalid start address out of table bounds, row: "+l.row+", column: "+l.column);const y=m.slice(l.row),T=y[0].cells.slice(l.column),_=Ac(b[0]),P=b.length;return an.value({rowDelta:y.length-P,colDelta:T.length-_})},ev=(l,m)=>{const b=Ac(l[0]),y=Ac(m[0]);return{rowDelta:0,colDelta:b-y}},$2=(l,m)=>{const b=l.length,y=m.length;return{rowDelta:b-y,colDelta:0}},$1=(l,m,b,y)=>{const T=m.section==="colgroup"?b.col:b.cell;return No(l,_=>Po(T(),!0,y(_)))},I2=(l,m,b,y)=>{const T=l[l.length-1];return l.concat(No(m,()=>{const _=T.section==="colgroup"?b.colgroup:b.row,P=ed(T,_,En),z=$1(P.cells.length,P,b,Y=>ko(y,Y.toString()));return Aa(P,z)}))},ZS=(l,m,b,y)=>ln(l,T=>{const _=$1(m,T,b,pn);return fs(T,y,_)}),jS=(l,m,b)=>ln(l,y=>Ae(b,(T,_)=>{const P=$1(1,y,m,xe)[0];return gs(T,_,P)},y)),I1=(l,m,b)=>{const y=m.colDelta<0?ZS:En,T=m.rowDelta<0?I2:En,_=na(l),P=Ac(l[0]),z=tt(_,ke=>ke===P-1),Y=y(l,Math.abs(m.colDelta),b,z?P-1:P),de=na(Y);return T(Y,Math.abs(m.rowDelta),b,De(de,xe))},xc=(l,m,b,y)=>{const T=Ln(l[m],b),_=je(y,T.element),P=l[m];return l.length>1&&Ac(P)>1&&(b>0&&_(vc(P,b-1))||b<P.cells.length-1&&_(vc(P,b+1))||m>0&&_(vc(l[m-1],b))||m<l.length-1&&_(vc(l[m+1],b)))},br=(l,m,b,y,T,_)=>{const P=l.row,z=l.column,Y=b.length,de=Ac(b[0]),ke=P+Y,ft=z+de+_.length,Gt=De(_,xe);for(let Zt=P;Zt<ke;Zt++){let ut=0;for(let bt=z;bt<ft;bt++){if(Gt[bt]){ut++;continue}xc(m,Zt,bt,T)&&VS(m,vc(m[Zt],bt),T,y.cell);const mt=bt-z-ut,Bn=Ln(b[Zt-P],mt),go=Bn.element,rn=y.replace(go);Hs(m[Zt],bt,Po(rn,!0,Bn.isLocked))}}return m},wa=(l,m,b)=>{const y=Ac(m[0]),T=dr(m).cols.length+l.row,_=No(y-l.column,z=>z+l.column),P=F(_,z=>co(b,Y=>Y!==z)).getOr(y-1);return{row:T,column:P}},Mc=(l,m,b)=>Be(b,y=>y>=l.column&&y<=Ac(m[0])+l.column),Wc=(l,m,b,y,T)=>{const _=na(m),P=wa(l,m,_),z=dr(b).rows,Y=Mc(P,z,_);return WS(P,m,z).map(ke=>{const ft={...ke,colDelta:ke.colDelta-Y.length},Gt=I1(m,ft,y),Zt=na(Gt),ut=Mc(P,z,Zt);return br(P,Gt,z,y,T,ut)})},hc=(l,m,b,y,T)=>{US(m,l,T,y.cell);const _=$2(b,m),P=I1(b,_,y),z=$2(m,P),Y=I1(m,z,y);return ln(Y,(de,ke)=>fs(de,l,P[ke].cells))},tv=(l,m,b,y,T)=>{Uf(m,l,T,y.cell);const _=na(m),P=ev(m,b),z={...P,colDelta:P.colDelta-_.length},Y=I1(m,z,y),{cols:de,rows:ke}=dr(Y),ft=na(Y),Gt=ev(b,m),Zt={...Gt,colDelta:Gt.colDelta+ft.length},ut=jS(b,y,ft),bt=I1(ut,Zt,y);return[...de,...ke.slice(0,l),...bt,...ke.slice(l,ke.length)]},nv=(l,m,b,y)=>ed(l,T=>y(T,b),m),ov=(l,m,b,y,T)=>{const{rows:_,cols:P}=dr(l),z=_.slice(0,m),Y=_.slice(m),de=nv(_[b],(ke,ft)=>m>0&&m<_.length&&y(vc(_[m-1],ft),vc(_[m],ft))?Ln(_[m],ft):Po(T(ke.element,y),!0,ke.isLocked),y,T);return[...P,...z,de,...Y]},GS=(l,m,b,y,T,_,P)=>{if(b==="colgroup"||!y){const z=Ln(l,T);return Po(P(z.element,_),!0,!1)}else return Ln(l,m)},sv=(l,m,b,y,T)=>ln(l,_=>{const P=m>0&&m<Ac(_)&&y(vc(_,m-1),vc(_,m)),z=GS(_,m,_.section,P,b,y,T);return gs(_,m,z)}),qS=(l,m)=>Xn(l,b=>{const y=b.cells,T=xt(m,(_,P)=>P>=0&&P<_.length?_.slice(0,P).concat(_.slice(P+1)):_,y);return T.length>0?[qs(b.element,T,b.section,b.isNew)]:[]}),Kg=(l,m,b)=>{const{rows:y,cols:T}=dr(l);return[...T,...y.slice(0,m),...y.slice(b+1)]},L2=(l,m,b,y)=>vc(l[m],b)!==void 0&&m>0&&y(vc(l[m-1],b),vc(l[m],b)),Yg=(l,m,b)=>m>0&&b(vc(l,m-1),vc(l,m)),rv=(l,m,b,y)=>L2(l,m,b,y)||Yg(l[m],b,y),H2=(l,m)=>co(m,En)&&Vm(l.cells)?xe:(y,T,_)=>!(jr(y.element)==="th"&&m[_]),cv=(l,m)=>co(m,En)&&Vm(l)?xe:(y,T,_)=>!(jr(y.element)==="th"&&m[T]),yd=(l,m,b,y)=>{const T=P=>P==="row"?A4(m):c2(m),_=P=>T(P)?`${P}group`:P;return l?tp(m)?_(b):null:y&&tp(m)?_(b==="row"?"col":"row"):null},L1=(l,m)=>(b,y,T)=>le.some(yd(l,b.element,"col",m[T])),z2=(l,m)=>(b,y)=>le.some(yd(l,b.element,"row",m[y])),gp=(l,m,b)=>Po(b(l.element,m),!0,l.isLocked),H1=(l,m,b,y,T,_,P)=>{const z=Y=>tt(m,de=>b(Y.element,de.element));return ln(l,(Y,de)=>zs(Y,(ke,ft)=>{if(z(ke)){const Gt=P(ke,de,ft)?T(ke,b,y):ke;return _(Gt,de,ft).each(Zt=>{Va(Gt.element,{scope:le.from(Zt)})}),Gt}else return ke}))},av=(l,m,b)=>Xn(l,(y,T)=>rv(l,T,m,b)?[]:[Ln(y,m)]),V2=(l,m,b)=>{const y=l[m];return Xn(y.cells,(T,_)=>rv(l,m,_,b)?[]:[T])},Nu=(l,m,b,y,T)=>{const _=dr(l).rows,P=Xn(m,ke=>av(_,ke,y)),z=ln(_,ke=>Vm(ke.cells)),Y=cv(P,z),de=z2(b,z);return H1(l,P,y,T,gp,de,Y)},am=(l,m,b,y,T,_,P)=>{const{cols:z,rows:Y}=dr(l),de=Y[m[0]],ke=Xn(m,mt=>V2(Y,mt,T)),ft=ln(de.cells,(mt,Bn)=>Vm(av(Y,Bn,T))),Gt=[...Y];He(m,mt=>{Gt[mt]=P.transformRow(Y[mt],b)});const Zt=[...z,...Gt],ut=H2(de,ft),bt=L1(y,ft);return H1(Zt,ke,T,_,P.transformCell,bt,ut)},hp=(l,m,b,y)=>{const T=dr(l).rows,_=ln(m,P=>Ln(T[P.row],P.column));return H1(l,_,b,y,gp,le.none,xe)},Le=l=>Ae(l,(b,y)=>tt(b,_=>_.column===y.column)?b:b.concat([y]),[]).sort((b,y)=>b.column-y.column),Oi=l=>Eg(l,!0),pp=l=>{Of(l).length===0&&Ic(l)},z1=(l,m)=>({grid:l,cursor:m}),iv=l=>Ee(l,m=>Ee(m.cells,b=>{const y=b.element;return Vr(Oi(y),y)})),Cd=(l,m,b)=>{var T,_;const y=dr(l).rows;return le.from((_=(T=y[m])==null?void 0:T.cells[b])==null?void 0:_.element).filter(Oi).orThunk(()=>iv(y))},Ga=(l,m,b)=>{const y=Cd(l,m,b);return z1(l,y)},V1=l=>Ae(l,(b,y)=>tt(b,_=>_.row===y.row)?b:b.concat([y]),[]).sort((b,y)=>b.row-y.row),KS=(l,m,b,y)=>{const T=m[0].row,_=V1(m),P=xt(_,(z,Y)=>({grid:ov(z.grid,T,Y.row+z.delta,b,y.getOrInit),delta:z.delta+1}),{grid:l,delta:0}).grid;return Ga(P,T,m[0].column)},lv=(l,m,b,y)=>{const T=V1(m),_=T[T.length-1],P=_.row+_.rowspan,z=xt(T,(Y,de)=>ov(Y,P,de.row,b,y.getOrInit),l);return Ga(z,P,m[0].column)},YS=(l,m,b,y)=>{const T=m.details,_=Le(T),P=_[0].column,z=xt(_,(Y,de)=>({grid:sv(Y.grid,P,de.column+Y.delta,b,y.getOrInit),delta:Y.delta+1}),{grid:l,delta:0}).grid;return Ga(z,T[0].row,P)},Xg=(l,m,b,y)=>{const T=m.details,_=T[T.length-1],P=_.column+_.colspan,z=Le(T),Y=xt(z,(de,ke)=>sv(de,P,ke.column,b,y.getOrInit),l);return Ga(Y,T[0].row,P)},U2=(l,m,b,y)=>{const T=Le(m),_=ln(T,z=>z.column),P=Nu(l,_,!0,b,y.replaceOrInit);return Ga(P,m[0].row,m[0].column)},im=(l,m,b,y)=>{const T=hp(l,m,b,y.replaceOrInit);return Ga(T,m[0].row,m[0].column)},W2=(l,m,b,y)=>{const T=Le(m),_=ln(T,z=>z.column),P=Nu(l,_,!1,b,y.replaceOrInit);return Ga(P,m[0].row,m[0].column)},XS=(l,m,b,y)=>{const T=hp(l,m,b,y.replaceOrInit);return Ga(T,m[0].row,m[0].column)},qa=(l,m)=>(b,y,T,_,P)=>{const z=V1(y),Y=ln(z,ke=>ke.row),de=am(b,Y,l,m,T,_.replaceOrInit,P);return Ga(de,y[0].row,y[0].column)},wd=qa("thead",!0),el=qa("tbody",!1),uv=qa("tfoot",!1),bp=(l,m,b,y)=>{const T=Le(m.details),_=qS(l,ln(T,z=>z.column)),P=_.length>0?_[0].cells.length-1:0;return Ga(_,T[0].row,Math.min(T[0].column,P))},JS=(l,m,b,y)=>{const T=V1(m),_=Kg(l,T[0].row,T[T.length-1].row),P=Math.max(dr(_).rows.length-1,0);return Ga(_,Math.min(m[0].row,P),m[0].column)},U4=(l,m,b,y)=>{const T=m.cells;HS(T);const _=Jm(l,m.bounds,b,y.merge(T));return z1(_,le.from(T[0]))},Z2=(l,m,b,y)=>{const _=xt(m,(P,z)=>VS(P,z,b,y.unmerge(z)),l);return z1(_,le.from(m[0]))},QS=(l,m,b,y)=>{const _=((Y,de)=>{const ke=_o.fromTable(Y);return Gm(ke,de,!0)})(m.clipboard,m.generators),P=It(m.row,m.column);return Wc(P,l,_,m.generators,b).fold(()=>z1(l,le.some(m.element)),Y=>Ga(Y,m.row,m.column))},Do=(l,m,b)=>{const y=gr(l,b.section),T=_o.generate(y);return Gm(T,m,!0)},On=(l,m,b,y)=>{const T=dr(l).rows,_=m.cells[0].column,P=T[m.cells[0].row],z=Do(m.clipboard,m.generators,P),Y=hc(_,l,z,m.generators,b);return Ga(Y,m.cells[0].row,m.cells[0].column)},U1=(l,m,b,y)=>{const T=dr(l).rows,_=m.cells[m.cells.length-1].column+m.cells[m.cells.length-1].colspan,P=T[m.cells[0].row],z=Do(m.clipboard,m.generators,P),Y=hc(_,l,z,m.generators,b);return Ga(Y,m.cells[0].row,_)},dv=(l,m,b,y)=>{const T=dr(l).rows,_=m.cells[0].row,P=T[_],z=Do(m.clipboard,m.generators,P),Y=tv(_,l,z,m.generators,b);return Ga(Y,m.cells[0].row,m.cells[0].column)},j2=(l,m,b,y)=>{const T=dr(l).rows,_=m.cells[m.cells.length-1].row+m.cells[m.cells.length-1].rowspan,P=T[m.cells[0].row],z=Do(m.clipboard,m.generators,P),Y=tv(_,l,z,m.generators,b);return Ga(Y,_,m.cells[0].column)},W4=(l,m)=>{const b=_o.fromTable(l);return Uc(b,m).bind(T=>{const _=T[T.length-1],P=T[0].column,z=_.column+_.colspan,Y=jn(ln(b.all,de=>Be(de.cells,ke=>ke.column>=P&&ke.column<z)));return Tb(Y)}).getOr("")},G2=(l,m)=>{const b=_o.fromTable(l);return Uc(b,m).bind(Tb).getOr("")},vr=(l,m)=>{const b=_o.fromTable(l);return Uc(b,m).bind(T=>{const _=T[T.length-1],P=T[0].row,z=_.row+_.rowspan,Y=b.all.slice(P,z);return D4(Y)}).getOr("")},mv=(l,m,b,y)=>Pb(l,m,b,y.sizing),W1=(l,m,b,y)=>Nb(l,m,b,y.sizing,y.resize),Jg=(l,m)=>tt(m,b=>b.column===0&&b.isLocked),We=(l,m)=>tt(m,b=>b.column+b.colspan>=l.grid.columns&&b.isLocked),fv=(l,m)=>{const b=h2(l),y=Le(m);return Ae(y,(T,_)=>{const z=b[_.column].map(Sr).getOr(0);return T+z},0)},ex=l=>(m,b)=>Uc(m,b).filter(y=>!(l?Jg:We)(m,y)).map(y=>({details:y,pixelDelta:fv(m,y)})),gv=(l,m)=>ip(l,m).map(b=>({details:b,pixelDelta:-fv(l,b)})),tx=l=>(m,b)=>Ou(m,b).filter(y=>!(l?Jg:We)(m,y.cells)),Qm=Xi.transform("th"),Qg=Xi.transform("td"),eh=(l,m,b,y)=>Bc(KS,Uc,dt,dt,Xi.modification,l,m,b,y),q2=(l,m,b,y)=>Bc(lv,Uc,dt,dt,Xi.modification,l,m,b,y),th=(l,m,b,y)=>Bc(YS,ex(!0),W1,dt,Xi.modification,l,m,b,y),ur=(l,m,b,y)=>Bc(Xg,ex(!1),W1,dt,Xi.modification,l,m,b,y),Sd=(l,m,b,y)=>Bc(bp,gv,W1,pp,Xi.modification,l,m,b,y),nx=(l,m,b,y)=>Bc(JS,Uc,dt,pp,Xi.modification,l,m,b,y),ef=(l,m,b,y)=>Bc(U2,ip,dt,dt,Qm,l,m,b,y),Pu=(l,m,b,y)=>Bc(W2,ip,dt,dt,Qg,l,m,b,y),Z4=(l,m,b,y)=>Bc(wd,Uc,dt,dt,Qm,l,m,b,y),j4=(l,m,b,y)=>Bc(el,Uc,dt,dt,Qg,l,m,b,y),K2=(l,m,b,y)=>Bc(uv,Uc,dt,dt,Qg,l,m,b,y),G4=(l,m,b,y)=>Bc(im,ip,dt,dt,Qm,l,m,b,y),q4=(l,m,b,y)=>Bc(XS,ip,dt,dt,Qg,l,m,b,y),K4=(l,m,b,y)=>Bc(U4,em,mv,dt,Xi.merging,l,m,b,y),Y4=(l,m,b,y)=>Bc(Z2,k1,mv,dt,Xi.merging,l,m,b,y),Y2=(l,m,b,y)=>Bc(QS,Mb,mv,dt,Xi.modification,l,m,b,y),Et=(l,m,b,y)=>Bc(On,tx(!0),dt,dt,Xi.modification,l,m,b,y),ox=(l,m,b,y)=>Bc(U1,tx(!1),dt,dt,Xi.modification,l,m,b,y),sa=(l,m,b,y)=>Bc(dv,Ou,dt,dt,Xi.modification,l,m,b,y),sx=(l,m,b,y)=>Bc(j2,Ou,dt,dt,Xi.modification,l,m,b,y),rx=W4,cx=G2,X4=vr,Qn=(l,m)=>{const b=m.column,y=m.column+m.colspan-1,T=m.row,_=m.row+m.rowspan-1;return b<=l.finishCol&&y>=l.startCol&&T<=l.finishRow&&_>=l.startRow},X2=(l,m)=>m.column>=l.startCol&&m.column+m.colspan-1<=l.finishCol&&m.row>=l.startRow&&m.row+m.rowspan-1<=l.finishRow,ax=(l,m)=>{let b=!0;const y=je(X2,m);for(let T=m.startRow;T<=m.finishRow;T++)for(let _=m.startCol;_<=m.finishCol;_++)b=b&&_o.getAt(l,T,_).exists(y);return b?le.some(m):le.none()},B5=(l,m)=>_r(Math.min(l.row,m.row),Math.min(l.column,m.column),Math.max(l.row+l.rowspan-1,m.row+m.rowspan-1),Math.max(l.column+l.colspan-1,m.column+m.colspan-1)),J4=(l,m,b)=>{const y=_o.findItem(l,m,Dn),T=_o.findItem(l,b,Dn);return y.bind(_=>T.map(P=>B5(_,P)))},ix=(l,m,b)=>J4(l,m,b).bind(y=>ax(l,y)),M5=(l,m,b,y)=>_o.findItem(l,m,Dn).bind(T=>{const _=b>0?T.row+T.rowspan-1:T.row,P=y>0?T.column+T.colspan-1:T.column;return _o.getAt(l,_+b,P+y).map(Y=>Y.element)}),Q4=(l,m,b)=>J4(l,m,b).map(y=>{const T=_o.filterItems(l,je(Qn,y));return ln(T,_=>_.element)}),lx=(l,m)=>{const b=(y,T)=>ar(T,y);return _o.findItem(l,m,b).map(y=>y.element)},J2=(l,m,b)=>qi(l).bind(y=>{const T=Tl(y);return M5(T,l,m,b)}),to=(l,m,b)=>{const y=Tl(l);return Q4(y,m,b)},Q2=(l,m,b,y,T)=>{const _=Tl(l),P=Dn(l,b)?le.some(m):lx(_,m),z=Dn(l,T)?le.some(y):lx(_,y);return P.bind(Y=>z.bind(de=>Q4(_,Y,de)))},tf=(l,m,b)=>{const y=Tl(l);return ix(y,m,b)},Tl=_o.fromTable,Kt={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},Ka=()=>Pt.fromTag("th"),Z1=()=>Pt.fromTag("td"),j1=()=>Pt.fromTag("col"),hv=(l,m,b,y)=>{const T=Pt.fromTag("tr");for(let _=0;_<l;_++){const P=y<m||_<b?Ka():Z1();_<b&&rc(P,"scope","row"),y<m&&rc(P,"scope","col"),ys(P,Pt.fromTag("br")),ys(T,P)}return T},vp=l=>{const m=Pt.fromTag("colgroup");return No(l,()=>ys(m,j1())),m},G1=(l,m,b,y)=>No(l,T=>hv(m,b,y,T)),nf=(l,m,b,y,T,_=Kt)=>{const P=Pt.fromTag("table"),z=T!=="cells";ir(P,_.styles),Wl(P,_.attributes),_.colGroups&&ys(P,vp(m));const Y=Math.min(l,b);if(z&&b>0){const Zt=Pt.fromTag("thead");ys(P,Zt);const bt=G1(b,m,T==="sectionCells"?Y:0,y);fl(Zt,bt)}const de=Pt.fromTag("tbody");ys(P,de);const ke=z?l-Y:l,Gt=G1(ke,m,z?0:b,y);return fl(de,Gt),P},Ba=l=>{let m=[];return{bind:_=>{if(_===void 0)throw new Error("Event bind error: undefined handler");m.push(_)},unbind:_=>{m=Be(m,P=>P!==_)},trigger:(..._)=>{const P={};He(l,(z,Y)=>{P[z]=_[Y]}),He(m,z=>{z(P)})}}},lm=l=>{const m=$e(l,y=>({bind:y.bind,unbind:y.unbind})),b=$e(l,y=>y.trigger);return{registry:m,trigger:b}},e3=qt(["compare","extract","mutate","sink"]),Sa=qt(["element","start","stop","destroy"]),yp=qt(["forceDrop","drop","move","delayDrop"]),t3=()=>{let l=le.none();const m=()=>{l=le.none()},b=(_,P)=>{const z=l.map(Y=>_.compare(Y,P));return l=le.some(P),z},y=(_,P)=>{P.extract(_).each(Y=>{b(P,Y).each(ke=>{T.trigger.move(ke)})})},T=lm({move:Ba(["info"])});return{onEvent:y,reset:m,events:T.registry}},es=()=>{const l=lm({move:Ba(["info"])});return{onEvent:dt,reset:dt,events:l.registry}},xd=()=>{const l=es(),m=t3();let b=l;return{on:()=>{b.reset(),b=m},off:()=>{b.reset(),b=l},isOn:()=>b===m,onEvent:(z,Y)=>{b.onEvent(z,Y)},events:m.events}},nh=(l,m,b)=>{let y=!1;const T=lm({start:Ba([]),stop:Ba([])}),_=xd(),P=()=>{ut.stop(),_.isOn()&&(_.off(),T.trigger.stop())},z=Kn(P,200),Y=mt=>{ut.start(mt),_.on(),T.trigger.start()},de=mt=>{z.cancel(),_.onEvent(mt,m)};_.events.move.bind(mt=>{m.mutate(l,mt.info)});const ke=()=>{y=!0},ft=()=>{y=!1},Gt=()=>y,Zt=mt=>(...Bn)=>{y&&mt.apply(null,Bn)},ut=m.sink(yp({forceDrop:P,drop:Zt(P),move:Zt(de),delayDrop:Zt(z.throttle)}),b),bt=()=>{ut.destroy()};return{element:ut.element,go:Y,on:ke,off:ft,isActive:Gt,destroy:bt,events:T.registry}},oh=dn("ephox-dragster").resolve,ss=l=>{const m={layerClass:oh("blocker"),...l},b=Pt.fromTag("div");return rc(b,"role","presentation"),rc(b,"data-mce-bogus","all"),ir(b,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),jl(b,oh("blocker")),jl(b,m.layerClass),{element:re(b),destroy:()=>{Ic(b)}}};var q1=e3({compare:(l,m)=>fr(m.left-l.left,m.top-l.top),extract:l=>le.some(fr(l.x,l.y)),sink:(l,m)=>{const b=ss(m),y=ad(b.element(),"mousedown",l.forceDrop),T=ad(b.element(),"mouseup",l.drop),_=ad(b.element(),"mousemove",l.move),P=ad(b.element(),"mouseout",l.delayDrop),z=()=>{b.destroy(),T.unbind(),_.unbind(),P.unbind(),y.unbind()},Y=ke=>{ys(ke,b.element())},de=()=>{Ic(b.element())};return Sa({element:b.element,start:Y,stop:de,destroy:z})},mutate:(l,m)=>{l.mutate(m.left,m.top)}});const n3=(l,m={})=>{const b=m.mode??q1;return nh(l,b,m)},pv=dn("ephox-snooker").resolve,eC=()=>{const l=lm({drag:Ba(["xDelta","yDelta"])});return{mutate:(b,y)=>{l.trigger.drag(b,y)},events:l.registry}},K1=()=>{const l=lm({drag:Ba(["xDelta","yDelta","target"])});let m=le.none();const b=eC();return b.events.drag.bind(_=>{m.each(P=>{l.trigger.drag(_.xDelta,_.yDelta,P)})}),{assign:_=>{m=le.some(_)},get:()=>m,mutate:b.mutate,events:l.registry}},dx=(l,m,b,y,T)=>{const _=Pt.fromTag("div");return ir(_,{position:"absolute",left:m-y/2+"px",top:b+"px",height:T+"px",width:y+"px"}),Wl(_,{"data-mce-bogus":"all","data-column":l,role:"presentation"}),_},o3=(l,m,b,y,T)=>{const _=Pt.fromTag("div");return ir(_,{position:"absolute",left:m+"px",top:b-T/2+"px",height:T+"px",width:y+"px"}),Wl(_,{"data-mce-bogus":"all","data-row":l,role:"presentation"}),_},Y1=pv("resizer-bar"),tC=pv("resizer-rows"),nC=pv("resizer-cols"),mx=7,fx=(l,m)=>Xn(l.all,(b,y)=>m(b.element)?[y]:[]),gx=(l,m)=>{const b=[];return No(l.grid.columns,y=>{_o.getColumnAt(l,y).map(_=>_.element).forall(m)&&b.push(y)}),Be(b,y=>{const T=_o.filterItems(l,_=>_.column===y);return co(T,_=>m(_.element))})},oC=l=>{const m=wu(l.parent(),"."+Y1);He(m,Ic)},sC=(l,m,b)=>{const y=l.origin();He(m,T=>{T.each(_=>{const P=b(y,_);jl(P,Y1),ys(l.parent(),P)})})},hs=(l,m,b,y)=>{sC(l,m,(T,_)=>{const P=dx(_.col,_.x-T.left,b.top-T.top,mx,y);return jl(P,nC),P})},hx=(l,m,b,y)=>{sC(l,m,(T,_)=>{const P=o3(_.row,b.left-T.left,_.y-T.top,y,mx);return jl(P,tC),P})},bv=(l,m,b,y,T)=>{const _=Ro(b),P=m.isResizable,z=y.length>0?Kl.positions(y,b):[],Y=z.length>0?fx(l,P):[],de=Be(z,(Zt,ut)=>tt(Y,bt=>ut===bt));hx(m,de,_,Sr(b));const ke=T.length>0?li.positions(T,b):[],ft=ke.length>0?gx(l,P):[],Gt=Be(ke,(Zt,ut)=>tt(ft,bt=>ut===bt));hs(m,Gt,_,bb(b))},rC=(l,m)=>{if(oC(l),l.isResizable(m)){const b=_o.fromTable(m),y=Au(b),T=h2(b);bv(b,l,m,y,T)}},eu=(l,m)=>{const b=wu(l.parent(),"."+Y1);He(b,m)},px=l=>{eu(l,m=>{Hc(m,"display","none")})},cC=l=>{eu(l,m=>{Hc(m,"display","block")})},s3=l=>Gl(l,tC),um=l=>Gl(l,nC),r3=pv("resizer-bar-dragging"),X1=l=>{const m=K1(),b=n3(m,{});let y=le.none();const T=(bt,mt)=>le.from(Si(bt,mt));m.events.drag.bind(bt=>{T(bt.target,"data-row").each(mt=>{const Bn=wc(bt.target,"top");Hc(bt.target,"top",Bn+bt.yDelta+"px")}),T(bt.target,"data-column").each(mt=>{const Bn=wc(bt.target,"left");Hc(bt.target,"left",Bn+bt.xDelta+"px")})});const _=(bt,mt)=>{const Bn=wc(bt,mt),go=zm(bt,"data-initial-"+mt,0);return Bn-go};b.events.stop.bind(()=>{m.get().each(bt=>{y.each(mt=>{T(bt,"data-row").each(Bn=>{const go=_(bt,"top");Es(bt,"data-initial-top"),ut.trigger.adjustHeight(mt,go,parseInt(Bn,10))}),T(bt,"data-column").each(Bn=>{const go=_(bt,"left");Es(bt,"data-initial-left"),ut.trigger.adjustWidth(mt,go,parseInt(Bn,10))}),rC(l,mt)})})});const P=(bt,mt)=>{ut.trigger.startAdjust(),m.assign(bt),rc(bt,"data-initial-"+mt,wc(bt,mt)),jl(bt,r3),Hc(bt,"opacity","0.2"),b.go(l.dragContainer())},z=ad(l.parent(),"mousedown",bt=>{s3(bt.target)&&P(bt.target,"top"),um(bt.target)&&P(bt.target,"left")}),Y=bt=>Dn(bt,l.view()),de=bt=>Yr(bt,"table",Y).filter(Eg),ke=bt=>Gl(bt,"ephox-snooker-resizer-bar")||Gl(bt,"ephox-dragster-blocker"),ft=ad(l.view(),"mouseover",bt=>{de(bt.target).fold(()=>{$n(bt.target)&&!ke(bt.target)&&oC(l)},mt=>{b.isActive()&&(y=le.some(mt),rC(l,mt))})}),Gt=()=>{z.unbind(),ft.unbind(),b.destroy(),oC(l)},Zt=bt=>{rC(l,bt)},ut=lm({adjustHeight:Ba(["table","delta","row"]),adjustWidth:Ba(["table","delta","column"]),startAdjust:Ba([])});return{destroy:Gt,refresh:Zt,on:b.on,off:b.off,hideBars:je(px,l),showBars:je(cC,l),events:ut.registry}},c3={create:(l,m,b)=>{const y=Kl,T=li,_=X1(l),P=lm({beforeResize:Ba(["table","type"]),afterResize:Ba(["table","type"]),startDrag:Ba([])});return _.events.adjustHeight.bind(z=>{const Y=z.table;P.trigger.beforeResize(Y,"row");const de=y.delta(z.delta,Y);A2(Y,de,z.row),P.trigger.afterResize(Y,"row")}),_.events.startAdjust.bind(z=>{P.trigger.startDrag()}),_.events.adjustWidth.bind(z=>{const Y=z.table;P.trigger.beforeResize(Y,"col");const de=T.delta(z.delta,Y),ke=b(Y);Vg(Y,de,z.column,m,ke),P.trigger.afterResize(Y,"col")}),{on:_.on,off:_.off,refreshBars:_.refresh,hideBars:_.hideBars,showBars:_.showBars,destroy:_.destroy,events:P.registry}}},Wf=l=>m=>m.options.get(l),vv="100%",bx=l=>{const m=l.dom,b=m.getParent(l.selection.getStart(),m.isBlock)??l.getBody();return zc(Pt.fromDom(b))+"px"},a3=(l,m)=>o0(l)||!Cv(l)?m:of(l)?{...m,width:bx(l)}:{...m,width:vv},vx=(l,m)=>o0(l)||Cv(l)?m:of(l)?{...m,width:bx(l)}:{...m,width:vv},L5=l=>{const m=l.options.register;m("table_clone_elements",{processor:"string[]"}),m("table_use_colgroups",{processor:"boolean",default:!0}),m("table_header_type",{processor:b=>{const y=ho(["section","cells","sectionCells","auto"],b);return y?{value:b,valid:y}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),m("table_sizing_mode",{processor:"string",default:"auto"}),m("table_default_attributes",{processor:"object",default:{border:"1"}}),m("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),m("table_column_resizing",{processor:b=>{const y=ho(["preservetable","resizetable"],b);return y?{value:b,valid:y}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),m("table_resize_bars",{processor:"boolean",default:!0}),m("table_style_by_css",{processor:"boolean",default:!0}),m("table_merge_content_on_paste",{processor:"boolean",default:!0})},yx=l=>le.from(l.options.get("table_clone_elements")),Cx=l=>{const m=l.options.get("object_resizing");return ho(m.split(","),"table")},Q1=Wf("table_header_type"),e0=Wf("table_column_resizing"),t0=l=>e0(l)==="preservetable",sh=l=>e0(l)==="resizetable",yv=Wf("table_sizing_mode"),n0=l=>yv(l)==="relative",of=l=>yv(l)==="fixed",o0=l=>yv(l)==="responsive",aC=Wf("table_resize_bars"),Cv=Wf("table_style_by_css"),wx=Wf("table_merge_content_on_paste"),Sx=l=>{const m=l.options,b=m.get("table_default_attributes");return m.isSet("table_default_attributes")?b:vx(l,b)},xx=l=>{const m=l.options,b=m.get("table_default_styles");return m.isSet("table_default_styles")?b:a3(l,b)},i3=Wf("table_use_colgroups"),wv=l=>Pt.fromDom(l.getBody()),Cp=l=>m=>Dn(m,wv(l)),rh=l=>{Es(l,"data-mce-style");const m=b=>Es(b,"data-mce-style");He(Of(l),m),He(Eb(l),m),He(i2(l),m)},ch=l=>Pt.fromDom(l.selection.getStart()),Ex=l=>l.getBoundingClientRect().width,Tx=l=>l.getBoundingClientRect().height,Ax=l=>(m,b)=>{const y=m.dom.getStyle(b,l)||m.dom.getAttrib(b,l);return le.from(y).filter(Jn)},Sv=Ax("width"),kx=Ax("height"),l3=l=>/^(\d+(\.\d+)?)%$/.test(l),Dx=l=>/^(\d+(\.\d+)?)px$/.test(l),xv=l=>f1(l,Ci("table")).exists(Eg),iC=l=>ri(l,"table"),Ev=(l,m,b)=>{const y=T=>_=>b!==void 0&&b(_)||Dn(_,T);return Dn(l,m)?le.some({boxes:le.some([l]),start:l,finish:m}):iC(l).bind(T=>iC(m).bind(_=>{if(Dn(T,_))return le.some({boxes:to(T,l,m),start:l,finish:m});if(ar(T,_)){const P=As(m,"td,th",y(T)),z=P.length>0?P[P.length-1]:m;return le.some({boxes:Q2(T,l,T,m,_),start:l,finish:z})}else if(ar(_,T)){const P=As(l,"td,th",y(_)),z=P.length>0?P[P.length-1]:l;return le.some({boxes:Q2(_,l,T,m,_),start:l,finish:z})}else return ja(l,m).shared.bind(P=>Yr(P,"table",b).bind(z=>{const Y=As(m,"td,th",y(z)),de=Y.length>0?Y[Y.length-1]:m,ke=As(l,"td,th",y(z)),ft=ke.length>0?ke[ke.length-1]:l;return le.some({boxes:Q2(z,l,T,m,_),start:ft,finish:de})}))}))},lC=(l,m)=>{const b=wu(l,m);return b.length>0?le.some(b):le.none()},u3=(l,m)=>F(l,b=>ye(b,m)),uC=(l,m,b)=>ud(l,m).bind(y=>ud(l,b).bind(T=>Cs(iC,[y,T]).map(_=>({first:y,last:T,table:_})))),Ox=(l,m)=>ri(l,"table").bind(b=>ud(b,m).bind(y=>Ev(y,l).bind(T=>T.boxes.map(_=>({boxes:_,start:T.start,finish:T.finish}))))),_x=(l,m,b,y,T)=>u3(l,T).bind(_=>J2(_,m,b).bind(P=>Ox(P,y))),s0=(l,m)=>lC(l,m),d3=(l,m,b)=>uC(l,m,b).bind(y=>{const T=Y=>Dn(l,Y),_="thead,tfoot,tbody,table",P=ri(y.first,_,T),z=ri(y.last,_,T);return P.bind(Y=>z.bind(de=>Dn(Y,de)?tf(y.table,y.first,y.last):le.none()))}),dC=En,mC=l=>{const m=(y,T)=>ma(y,T).exists(_=>parseInt(_,10)>1),b=y=>m(y,"rowspan")||m(y,"colspan");return l.length>0&&co(l,b)?le.some(l):le.none()},m3=(l,m,b)=>m.length<=1?le.none():d3(l,b.firstSelectedSelector,b.lastSelectedSelector).map(y=>({bounds:y,cells:m})),ah={create:(l,m)=>({selection:l,kill:m})},Rx=(l,m,b,y)=>{switch(l.tag){case"none":return m();case"single":return y(l.element);case"multiple":return b(l.elements)}},Bx=()=>({tag:"none"}),g3=l=>({tag:"multiple",elements:l}),h3=l=>({tag:"single",element:l}),p3=(l,m,b)=>({get:()=>s0(l(),b).fold(()=>m().fold(Bx,h3),g3)}),r0={create:(l,m,b,y)=>({start:Jr.on(l,m),finish:Jr.on(b,y)})},fC=(l,m)=>{const b=At(l,m);return dd.create(Pt.fromDom(b.startContainer),b.startOffset,Pt.fromDom(b.endContainer),b.endOffset)},c0=r0.create,Mx=(l,m,b,y,T,_,P)=>Dn(b,T)&&y===_?le.none():Yr(b,"td,th",m).bind(z=>Yr(T,"td,th",m).bind(Y=>a0(l,m,z,Y,P))),a0=(l,m,b,y,T)=>Dn(b,y)?le.none():Ev(b,y,m).bind(_=>{const P=_.boxes.getOr([]);return P.length>1?(T(l,P,_.start,_.finish),le.some(ah.create(le.some(c0(b,0,b,Su(b))),!0))):le.none()}),b3=(l,m,b,y,T)=>{const _=P=>(T.clearBeforeUpdate(b),T.selectRange(b,P.boxes,P.start,P.finish),P.boxes);return _x(y,l,m,T.firstSelectedSelector,T.lastSelectedSelector).map(_)},Av=Uo.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),v3=(l,m,b)=>{const y=l.getRect(m),T=l.getRect(b);return T.right>y.left&&T.left<y.right},Fx=l=>Yr(l,"tr"),ih={...Av,verify:(l,m,b,y,T,_,P)=>Yr(y,"td,th",P).bind(z=>Yr(m,"td,th",P).map(Y=>Dn(z,Y)?Dn(y,z)&&Su(z)===T?_(Y):Av.none("in same cell"):Cs(Fx,[z,Y]).fold(()=>v3(l,Y,z)?Av.success():_(Y),de=>_(Y)))).getOr(Av.none("default")),cata:(l,m,b,y,T)=>l.fold(m,b,y,T)},kv=Ci("br"),Dv=(l,m,b)=>m(l,b).bind(y=>$m(y)&&Cu(y).trim().length===0?Dv(y,m,b):le.some(y)),Nx=(l,m,b)=>b.traverse(m).orThunk(()=>Dv(m,b.gather,l)).map(b.relative),C3=(l,m)=>ni(l,m).filter(kv).orThunk(()=>ni(l,m-1).filter(kv)),Ov=(l,m,b,y)=>C3(m,b).bind(T=>y.traverse(T).fold(()=>Dv(T,y.gather,l).map(y.relative),_=>Kd(_).map(P=>Jr.on(P.parent,P.index)))),Px=(l,m,b,y)=>(kv(m)?Nx(l,m,y):Ov(l,m,b,y)).map(_=>({start:_,finish:_})),$x=l=>ih.cata(l,m=>le.none(),()=>le.none(),m=>le.some(If(m,0)),m=>le.some(If(m,Su(m)))),_v=(l,m)=>({left:l.left,top:l.top+m,right:l.right,bottom:l.bottom+m}),dm=(l,m)=>({left:l.left,top:l.top-m,right:l.right,bottom:l.bottom-m}),Ix=(l,m,b)=>({left:l.left+m,top:l.top+b,right:l.right+m,bottom:l.bottom+b}),w3=l=>l.top,S3=l=>l.bottom,x3=(l,m,b)=>b>=0&&b<Su(m)?l.getRangedRect(m,b,m,b+1):b>0?l.getRangedRect(m,b-1,m,b):le.none(),wp=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom}),Lx=(l,m)=>le.some(l.getRect(m)),gC=(l,m,b)=>Ur(m)?Lx(l,m).map(wp):$m(m)?x3(l,m,b).map(wp):le.none(),Rv=(l,m)=>Ur(m)?Lx(l,m).map(wp):$m(m)?l.getRangedRect(m,0,m,Su(m)).map(wp):le.none(),Ed=5,i0=100,mm=Uo.generate([{none:[]},{retry:["caret"]}]),Bv=(l,m)=>l.left<m.left||Math.abs(m.right-l.left)<1||l.left>m.right,Hx=(l,m,b)=>f1(m,Xb).fold(pn,y=>Rv(l,y).exists(T=>Bv(b,T))),zx=(l,m,b,y,T)=>{const _=_v(T,Ed);return Math.abs(b.bottom-y.bottom)<1||b.top>T.bottom?mm.retry(_):b.top===T.bottom?mm.retry(_v(T,1)):Hx(l,m,T)?mm.retry(Ix(_,Ed,0)):mm.none()},Vx={point:w3,adjuster:(l,m,b,y,T)=>{const _=dm(T,Ed);return Math.abs(b.top-y.top)<1||b.bottom<T.top?mm.retry(_):b.bottom===T.top?mm.retry(dm(T,1)):Hx(l,m,T)?mm.retry(Ix(_,Ed,0)):mm.none()},move:dm,gather:qb},T3={point:S3,adjuster:zx,move:_v,gather:sm},A3=(l,m,b)=>l.elementFromPoint(m,b).filter(y=>jr(y)==="table").isSome(),k3=(l,m,b,y,T)=>Sp(l,m,b,m.move(y,Ed),T),Sp=(l,m,b,y,T)=>T===0?le.some(y):A3(l,y.left,m.point(y))?k3(l,m,b,y,T-1):l.situsFromPoint(y.left,m.point(y)).bind(_=>_.start.fold(le.none,P=>Rv(l,P).bind(z=>m.adjuster(l,P,z,b,y).fold(le.none,Y=>Sp(l,m,b,Y,T-1))).orThunk(()=>le.some(y)),le.none)),l0=(l,m,b)=>l.point(m)>b.getInnerHeight()?le.some(l.point(m)-b.getInnerHeight()):l.point(m)<0?le.some(-l.point(m)):le.none(),Ux=(l,m,b)=>{const y=l.move(b,Ed),T=Sp(m,l,b,y,i0).getOr(y);return l0(l,T,m).fold(()=>m.situsFromPoint(T.left,l.point(T)),_=>(m.scrollBy(0,_),m.situsFromPoint(T.left,l.point(T)-_)))},u0={tryUp:je(Ux,Vx),tryDown:je(Ux,T3),getJumpSize:re(Ed)},D3=20,O3=(l,m,b)=>l.getSelection().bind(y=>Px(m,y.finish,y.foffset,b).fold(()=>le.some(If(y.finish,y.foffset)),T=>{const _=l.fromSitus(T),P=ih.verify(l,y.finish,y.foffset,_.finish,_.foffset,b.failure,m);return $x(P)})),fm=(l,m,b,y,T,_)=>_===0?le.none():d0(l,m,b,y,T).bind(P=>{const z=l.fromSitus(P),Y=ih.verify(l,b,y,z.finish,z.foffset,T.failure,m);return ih.cata(Y,()=>le.none(),()=>le.some(P),de=>Dn(b,de)&&y===0?Td(l,b,y,dm,T):fm(l,m,de,0,T,_-1),de=>Dn(b,de)&&y===Su(de)?Td(l,b,y,_v,T):fm(l,m,de,Su(de),T,_-1))}),Td=(l,m,b,y,T)=>gC(l,m,b).bind(_=>Sn(l,T,y(_,u0.getJumpSize()))),Sn=(l,m,b)=>{const y=$c().browser;return y.isChromium()||y.isSafari()||y.isFirefox()?m.retry(l,b):le.none()},d0=(l,m,b,y,T)=>gC(l,b,y).bind(_=>Sn(l,T,_)),Wx=(l,m,b)=>O3(l,m,b).bind(y=>fm(l,m,y.element,y.offset,b,D3).map(l.fromSitus)),Zx=(l,m)=>Cb(l,b=>ee(b).exists(y=>Dn(y,m))),lh=(l,m,b,y,T)=>Yr(y,"td,th",m).bind(_=>Yr(_,"table",m).bind(P=>Zx(T,P)?Wx(l,m,b).bind(z=>Yr(z.finish,"td,th",m).map(Y=>({start:_,finish:Y,range:z}))):le.none())),sf=(l,m,b,y,T,_)=>_(y,m).orThunk(()=>lh(l,m,b,y,T).map(P=>{const z=P.range;return ah.create(le.some(c0(z.start,z.soffset,z.finish,z.foffset)),!0)})),m0=(l,m)=>Yr(l,"tr",m).bind(b=>Yr(b,"table",m).bind(y=>{const T=wu(y,"tr");return Dn(b,T[0])?fi(y,_=>Xr(_).isSome(),m).map(_=>{const P=Su(_);return ah.create(le.some(c0(_,P,_,P)),!0)}):le.none()})),xp=(l,m)=>Yr(l,"tr",m).bind(b=>Yr(b,"table",m).bind(y=>{const T=wu(y,"tr");return Dn(b,T[T.length-1])?Ji(y,_=>Df(_).isSome(),m).map(_=>ah.create(le.some(c0(_,0,_,0)),!0)):le.none()})),Ad=(l,m,b,y,T,_,P)=>lh(l,b,y,T,_).bind(z=>a0(m,b,z.start,z.finish,P)),Ep=(l,m)=>Yr(l,"td,th",m),hC=l=>ti(l).exists(Eg),Mv=(l,m,b,y)=>{const T=wr(),_=T.clear,P=ke=>{T.on(ft=>{y.clearBeforeUpdate(m),Ep(ke.target,b).each(Gt=>{Ev(ft,Gt,b).each(Zt=>{const ut=Zt.boxes.getOr([]);if(ut.length===1){const bt=ut[0],mt=Tg(bt)==="false",Bn=Jt(kf(ke.target),bt,Dn);mt&&Bn&&y.selectRange(m,ut,bt,bt)}else ut.length>1&&(y.selectRange(m,ut,Zt.start,Zt.finish),l.selectContents(Gt))})})})};return{clearstate:_,mousedown:ke=>{y.clear(m),Ep(ke.target,b).filter(hC).each(T.set)},mouseover:ke=>{P(ke)},mouseup:ke=>{P(ke),_()}}},f0={traverse:wf,gather:sm,relative:Jr.before,retry:u0.tryDown,failure:ih.failedDown},jx={traverse:o1,gather:qb,relative:Jr.before,retry:u0.tryUp,failure:ih.failedUp},tl=l=>m=>m===l,gm=tl(38),uh=tl(40),$u=l=>l>=37&&l<=40,hm={isBackward:tl(37),isForward:tl(39)},g0={isBackward:tl(39),isForward:tl(37)},h0=l=>({elementFromPoint:(mt,Bn)=>Pt.fromPoint(Pt.fromDom(l.document),mt,Bn),getRect:mt=>mt.dom.getBoundingClientRect(),getRangedRect:(mt,Bn,go,rn)=>{const ws=x.exact(mt,Bn,go,rn);return Yd(l,ws)},getSelection:()=>Hm(l).map(mt=>fC(l,mt)),fromSitus:mt=>{const Bn=x.relative(mt.start,mt.finish);return fC(l,Bn)},situsFromPoint:(mt,Bn)=>S1(l,mt,Bn).map(go=>r0.create(go.start,go.soffset,go.finish,go.foffset)),clearSelection:()=>{Yh(l)},collapseSelection:(mt=!1)=>{Hm(l).each(Bn=>Bn.fold(go=>go.collapse(mt),(go,rn)=>{const ws=mt?go:rn;md(l,ws,ws)},(go,rn,ws,eo)=>{const Ms=mt?go:ws,ec=mt?rn:eo;Ei(l,Ms,ec,Ms,ec)}))},setSelection:mt=>{Ei(l,mt.start,mt.soffset,mt.finish,mt.foffset)},setRelativeSelection:(mt,Bn)=>{md(l,mt,Bn)},selectNode:mt=>{kg(l,mt,!1)},selectContents:mt=>{kg(l,mt)},getInnerHeight:()=>l.innerHeight,getScrollY:()=>Ws(Pt.fromDom(l.document)).top,scrollBy:(mt,Bn)=>{si(mt,Bn,Pt.fromDom(l.document))}}),pm=(l,m)=>({rows:l,cols:m}),pC=(l,m,b,y)=>{const T=h0(l),_=Mv(T,m,b,y);return{clearstate:_.clearstate,mousedown:_.mousedown,mouseover:_.mouseover,mouseup:_.mouseup}},Gx=l=>f1(l,gb).exists(Eg),p0=(l,m)=>Gx(l)||Gx(m),kd=(l,m,b,y)=>{const T=h0(l),_=()=>(y.clear(m),le.none());return{keydown:(Y,de,ke,ft,Gt,Zt)=>{const ut=Y.raw,bt=ut.which,mt=ut.shiftKey===!0;return lC(m,y.selectedSelector).fold(()=>($u(bt)&&!mt&&y.clearBeforeUpdate(m),$u(bt)&&mt&&!p0(de,ft)?le.none:uh(bt)&&mt?je(Ad,T,m,b,f0,ft,de,y.selectRange):gm(bt)&&mt?je(Ad,T,m,b,jx,ft,de,y.selectRange):uh(bt)?je(sf,T,b,f0,ft,de,xp):gm(bt)?je(sf,T,b,jx,ft,de,m0):le.none),go=>{const rn=ws=>()=>Ee(ws,Ms=>b3(Ms.rows,Ms.cols,m,go,y)).fold(()=>uC(m,y.firstSelectedSelector,y.lastSelectedSelector).map(Ms=>{const ec=uh(bt)||Zt.isForward(bt)?Jr.after:Jr.before;return T.setRelativeSelection(Jr.on(Ms.first,0),ec(Ms.table)),y.clear(m),ah.create(le.none(),!0)}),Ms=>le.some(ah.create(le.none(),!0)));return $u(bt)&&mt&&!p0(de,ft)?le.none:uh(bt)&&mt?rn([pm(1,0)]):gm(bt)&&mt?rn([pm(-1,0)]):Zt.isBackward(bt)&&mt?rn([pm(0,-1),pm(-1,0)]):Zt.isForward(bt)&&mt?rn([pm(0,1),pm(1,0)]):$u(bt)&&!mt?_:le.none})()},keyup:(Y,de,ke,ft,Gt)=>lC(m,y.selectedSelector).fold(()=>{const Zt=Y.raw,ut=Zt.which;return Zt.shiftKey===!0&&$u(ut)&&p0(de,ft)?Mx(m,b,de,ke,ft,Gt,y.selectRange):le.none()},le.none)}},qx=(l,m,b,y)=>{const T=h0(l);return(_,P)=>{y.clearBeforeUpdate(m),Ev(_,P,b).each(z=>{const Y=z.boxes.getOr([]);y.selectRange(m,Y,z.start,z.finish),T.selectContents(P),T.collapseSelection()})}},Kx={byClass:l=>{const m=p1(l.selected),b=yb([l.selected,l.lastSelected,l.firstSelected]),y=_=>{const P=wu(_,l.selectedSelector);He(P,b)};return{clearBeforeUpdate:y,clear:y,selectRange:(_,P,z,Y)=>{y(_),He(P,m),jl(z,l.firstSelected),jl(Y,l.lastSelected)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}},byAttr:(l,m,b)=>{const y=Y=>{Es(Y,l.selected),Es(Y,l.firstSelected),Es(Y,l.lastSelected)},T=Y=>{rc(Y,l.selected,"1")},_=Y=>{P(Y),b()},P=Y=>{const de=wu(Y,`${l.selectedSelector},${l.firstSelectedSelector},${l.lastSelectedSelector}`);He(de,y)};return{clearBeforeUpdate:P,clear:_,selectRange:(Y,de,ke,ft)=>{_(Y),He(de,T),rc(ke,l.firstSelected,"1"),rc(ft,l.lastSelected,"1"),m(de,ke,ft)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}}},dh="data-mce-selected",Yx="td["+dh+"],th["+dh+"]",Xx="["+dh+"]",nl="data-mce-first-selected",Zf="td["+nl+"],th["+nl+"]",Fv="data-mce-last-selected",Tp="td["+Fv+"],th["+Fv+"]",_i=Xx,ra={selected:dh,selectedSelector:Yx,firstSelected:nl,firstSelectedSelector:Zf,lastSelected:Fv,lastSelectedSelector:Tp},ca=(l,m,b)=>({element:b,mergable:m3(m,l,ra),unmergable:mC(l),selection:dC(l)}),ol=(l,m,b)=>({element:l,clipboard:m,generators:b}),Nv=(l,m,b,y)=>({selection:dC(l),clipboard:b,generators:y}),Iu=l=>qi(l).bind(m=>s0(m,ra.firstSelectedSelector)).fold(re(l),m=>m[0]),jf=l=>(m,b)=>{const y=jr(m),T=y==="col"||y==="colgroup"?Iu(m):m;return Yr(T,l,b)},so=jf("th,td,caption"),bC=jf("th,td"),bm=l=>Oc(l.model.table.getSelectedCells()),Jx=l=>Be(bm(l),m=>ye(m,ra.selectedSelector)),Qx=l=>qi(l[0]).map(m=>{const b=Ib(m,_i);return rh(b),[b]}),Pv=(l,m)=>ln(m,b=>l.selection.serializer.serialize(b.dom,{})).join(""),eE=(l,m)=>{const b=l.getDoc(),y=c1(Pt.fromDom(l.getBody())),T=Pt.fromTag("div",b);rc(T,"data-mce-bogus","all"),ir(T,{position:"fixed",left:"-9999999px",top:"0",overflow:"hidden",opacity:"0"});const _=bu(y);fl(T,m),ys(_,T);const P=T.dom.innerText;return Ic(T),P},tE=(l,m)=>{l.on("BeforeGetContent",b=>{const y=T=>{b.preventDefault(),Qx(T).each(_=>{const P=b.format==="text"?eE(l,_):Pv(l,_);b.content=P})};if(b.selection===!0){const T=Jx(l);T.length>=1&&y(T)}}),l.on("BeforeSetContent",b=>{if(b.selection===!0&&b.paste===!0){const y=bm(l);te(y).each(T=>{qi(T).each(_=>{const P=Be(Uh(b.content),Y=>jr(Y)!=="meta"),z=Ci("table");if(wx(l)&&P.length===1&&z(P[0])){b.preventDefault();const Y=Pt.fromDom(l.getDoc()),de=P2(Y),ke=ol(T,P[0],de);m.pasteCells(_,ke).each(()=>{l.focus()})}})})}})},nE=(l,m)=>l.dispatch("NewRow",{node:m}),$v=(l,m)=>l.dispatch("NewCell",{node:m}),Dd=(l,m,b)=>{l.dispatch("TableModified",{...b,table:m})},mh=(l,m,b,y,T)=>{l.dispatch("TableSelectionChange",{cells:m,start:b,finish:y,otherCells:T})},oE=l=>{l.dispatch("TableSelectionClear")},Ap=(l,m,b,y,T)=>{l.dispatch("ObjectResizeStart",{target:m,width:b,height:y,origin:T})},sE=(l,m,b,y,T)=>{l.dispatch("ObjectResized",{target:m,width:b,height:y,origin:T})},Iv={structure:!1,style:!0},aa={structure:!0,style:!1},B3={structure:!0,style:!0},vC=(l,m)=>n0(l)?Ff.percentageSize(m):of(l)?Ff.pixelSize(m):Ff.getTableSize(m),M3=(l,m,b)=>{const y=Ma=>jr(wv(Ma))==="table",T=Ma=>!y(l)||Vf(Ma).rows>1,_=Ma=>!y(l)||Vf(Ma).columns>1,P=yx(l),z=sh(l)?dt:$b,Y=Ma=>{switch(Q1(l)){case"section":return Qd.section();case"sectionCells":return Qd.sectionCells();case"cells":return Qd.cells();default:return Qd.getTableSectionType(Ma,"section")}},de=(Ma,Uv)=>Uv.cursor.fold(()=>{const vm=Of(Ma);return te(vm).filter($n).map(nu=>{b.clearSelectedCells(Ma.dom);const Fa=l.dom.createRng();return Fa.selectNode(nu.dom),l.selection.setRng(Fa),rc(nu,"data-mce-selected","1"),Fa})},vm=>{const nu=Gb(vm),Fa=l.dom.createRng();return Fa.setStart(nu.element.dom,nu.offset),Fa.setEnd(nu.element.dom,nu.offset),l.selection.setRng(Fa),b.clearSelectedCells(Ma.dom),le.some(Fa)}),ke=(Ma,Uv,vm,nu)=>(Fa,H3,yn=!1)=>{rh(Fa);const zu=Pt.fromDom(l.getDoc()),mE=P1(vm,zu,P),fE={sizing:vC(l,Fa),resize:sh(l)?Qh():Og(),section:Y(Fa)};return Uv(Fa)?Ma(Fa,H3,mE,fE).bind(Wv=>{m.refresh(Fa.dom),He(Wv.newRows,v0=>{nE(l,v0.dom)}),He(Wv.newCells,v0=>{$v(l,v0.dom)});const z3=de(Fa,Wv);return $n(Fa)&&(rh(Fa),yn||Dd(l,Fa.dom,nu)),z3.map(v0=>({rng:v0,effect:nu}))}):le.none()},ft=ke(nx,T,dt,aa),Gt=ke(Sd,_,dt,aa),Zt=ke(eh,xe,dt,aa),ut=ke(q2,xe,dt,aa),bt=ke(th,xe,z,aa),mt=ke(ur,xe,z,aa),Bn=ke(K4,xe,dt,aa),go=ke(Y4,xe,dt,aa),rn=ke(Et,xe,dt,aa),ws=ke(ox,xe,dt,aa),eo=ke(sa,xe,dt,aa),Ms=ke(sx,xe,dt,aa),ec=ke(Y2,xe,dt,B3),Al=ke(G4,xe,dt,aa),ph=ke(q4,xe,dt,aa),cf=ke(ef,xe,dt,aa),Gf=ke(Pu,xe,dt,aa),js=ke(Z4,xe,dt,aa),gi=ke(j4,xe,dt,aa),Ya=ke(K2,xe,dt,aa);return{deleteRow:ft,deleteColumn:Gt,insertRowsBefore:Zt,insertRowsAfter:ut,insertColumnsBefore:bt,insertColumnsAfter:mt,mergeCells:Bn,unmergeCells:go,pasteColsBefore:rn,pasteColsAfter:ws,pasteRowsBefore:eo,pasteRowsAfter:Ms,pasteCells:ec,makeCellsHeader:Al,unmakeCellsHeader:ph,makeColumnsHeader:cf,unmakeColumnsHeader:Gf,makeRowsHeader:js,makeRowsBody:gi,makeRowsFooter:Ya,getTableRowType:X4,getTableCellType:cx,getTableColType:rx}},F3=(l,m)=>{l.selection.select(m.dom,!0),l.selection.collapse(!0)},tu=(l,m)=>{ud(m,"td,th").each(je(F3,l))},z5=(l,m)=>{He(wu(m,"tr"),b=>{nE(l,b.dom),He(wu(b,"th,td"),y=>{$v(l,y.dom)})})},Lv=l=>ls(l)&&l.indexOf("%")!==-1,rf=(l,m,b,y,T)=>{const _=xx(l),P={styles:_,attributes:Sx(l),colGroups:i3(l)};return l.undoManager.ignore(()=>{const z=nf(b,m,T,y,Q1(l),P);rc(z,"data-mce-id","__mce");const Y=pb(z);l.insertContent(Y),l.addVisual()}),ud(wv(l),'table[data-mce-id="__mce"]').map(z=>(of(l)?B2(z):o0(l)?fp(z):(n0(l)||Lv(_.width))&&Hf(z),rh(z),Es(z,"data-mce-id"),z5(l,z),tu(l,z),z.dom)).getOrNull()},yC=(l,m,b,y={})=>{const T=_=>qn(_)&&_>0;if(T(m)&&T(b)){const _=y.headerRows||0,P=y.headerColumns||0;return rf(l,b,m,P,_)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var kp=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const rE="x-tinymce/dom-table-",CC=rE+"rows",wC=rE+"columns",cE=l=>{const m=kp.FakeClipboardItem(l);kp.write([m])},Hv=l=>{const m=kp.read()??[];return Ee(m,b=>le.from(b.getType(l)))},fh=l=>{Hv(l).isSome()&&kp.clear()},Lu=l=>{l.fold(N3,m=>cE({[CC]:m}))},aE=()=>Hv(CC),N3=()=>fh(CC),SC=l=>{l.fold(xC,m=>cE({[wC]:m}))},zv=()=>Hv(wC),xC=()=>fh(wC),Dp=l=>so(ch(l),Cp(l)).filter(xv),Vv=l=>bC(ch(l),Cp(l)).filter(xv),EC=(l,m)=>{const b=Cp(l),y=()=>Dp(l).each(mt=>{qi(mt,b).filter(G(b)).each(Bn=>{const go=Pt.fromText("");if(Ul(Bn,go),Ic(Bn),l.dom.isEmpty(l.getBody()))l.setContent(""),l.selection.setCursorLocation();else{const rn=l.dom.createRng();rn.setStart(go.dom,0),rn.setEnd(go.dom,0),l.selection.setRng(rn),l.nodeChanged()}})}),T=mt=>Dp(l).each(Bn=>{o0(l)||of(l)||n0(l)||qi(Bn,b).each(rn=>{mt==="relative"&&!FS(rn)?Hf(rn):mt==="fixed"&&!Mu(rn)?B2(rn):mt==="responsive"&&!Ra(rn)&&fp(rn),rh(rn),Dd(l,rn.dom,aa)})}),_=mt=>qi(mt,b),P=mt=>Vv(l).bind(Bn=>_(Bn).map(go=>mt(go,Bn))),z=(mt,Bn)=>{P(go=>{l.formatter.toggle("tableclass",{value:Bn},go.dom),Dd(l,go.dom,Iv)})},Y=(mt,Bn)=>{P(go=>{const rn=bm(l),eo=co(rn,Ms=>l.formatter.match("tablecellclass",{value:Bn},Ms.dom))?l.formatter.remove:l.formatter.apply;He(rn,Ms=>eo("tablecellclass",{value:Bn},Ms.dom)),Dd(l,go.dom,Iv)})},de=()=>{Dp(l).each(mt=>{qi(mt,b).each(Bn=>{$r(Bn,"caption").fold(()=>{const go=Pt.fromTag("caption");ys(go,Pt.fromText("Caption")),Jy(Bn,go,0),l.selection.setCursorLocation(go.dom,0)},go=>{Ci("caption")(mt)&&en("td",Bn).each(rn=>l.selection.setCursorLocation(rn.dom,0)),Ic(go)}),Dd(l,Bn.dom,aa)})})},ke=mt=>{l.focus()},ft=(mt,Bn=!1)=>P((go,rn)=>{const ws=ca(bm(l),go,rn);mt(go,ws,Bn).each(ke)}),Gt=()=>P((mt,Bn)=>{const go=ca(bm(l),mt,Bn),rn=P1(dt,Pt.fromDom(l.getDoc()),le.none());return Km(mt,go,rn)}),Zt=()=>P((mt,Bn)=>{const go=ca(bm(l),mt,Bn);return hd(mt,go)}),ut=(mt,Bn)=>Bn().each(go=>{const rn=ln(go,ws=>Dc(ws));P((ws,eo)=>{const Ms=P2(Pt.fromDom(l.getDoc())),ec=Nv(bm(l),eo,rn,Ms);mt(ws,ec).each(ke)})}),bt=mt=>(Bn,go)=>ns(go,"type").each(rn=>{ft(mt(rn),go.no_events)});bn({mceTableSplitCells:()=>ft(m.unmergeCells),mceTableMergeCells:()=>ft(m.mergeCells),mceTableInsertRowBefore:()=>ft(m.insertRowsBefore),mceTableInsertRowAfter:()=>ft(m.insertRowsAfter),mceTableInsertColBefore:()=>ft(m.insertColumnsBefore),mceTableInsertColAfter:()=>ft(m.insertColumnsAfter),mceTableDeleteCol:()=>ft(m.deleteColumn),mceTableDeleteRow:()=>ft(m.deleteRow),mceTableCutCol:()=>Zt().each(mt=>{SC(mt),ft(m.deleteColumn)}),mceTableCutRow:()=>Gt().each(mt=>{Lu(mt),ft(m.deleteRow)}),mceTableCopyCol:()=>Zt().each(mt=>SC(mt)),mceTableCopyRow:()=>Gt().each(mt=>Lu(mt)),mceTablePasteColBefore:()=>ut(m.pasteColsBefore,zv),mceTablePasteColAfter:()=>ut(m.pasteColsAfter,zv),mceTablePasteRowBefore:()=>ut(m.pasteRowsBefore,aE),mceTablePasteRowAfter:()=>ut(m.pasteRowsAfter,aE),mceTableDelete:y,mceTableCellToggleClass:Y,mceTableToggleClass:z,mceTableToggleCaption:de,mceTableSizingMode:(mt,Bn)=>T(Bn),mceTableCellType:bt(mt=>mt==="th"?m.makeCellsHeader:m.unmakeCellsHeader),mceTableColType:bt(mt=>mt==="th"?m.makeColumnsHeader:m.unmakeColumnsHeader),mceTableRowType:bt(mt=>{switch(mt){case"header":return m.makeRowsHeader;case"footer":return m.makeRowsFooter;default:return m.makeRowsBody}})},(mt,Bn)=>l.addCommand(Bn,mt)),l.addCommand("mceInsertTable",(mt,Bn)=>{yC(l,Bn.rows,Bn.columns,Bn.options)}),l.addCommand("mceTableApplyCellStyle",(mt,Bn)=>{const go=eo=>"tablecell"+eo.toLowerCase().replace("-","");if(!Nt(Bn))return;const rn=Be(bm(l),xv);if(rn.length===0)return;const ws=vo(Bn,(eo,Ms)=>l.formatter.has(go(Ms))&&ls(eo));Ns(ws)||(bn(ws,(eo,Ms)=>{const ec=go(Ms);He(rn,Al=>{eo===""?l.formatter.remove(ec,{value:null},Al.dom,!0):l.formatter.apply(ec,{value:eo},Al.dom)})}),_(rn[0]).each(eo=>Dd(l,eo.dom,Iv)))})},iE=(l,m)=>{const b=Cp(l),y=T=>bC(ch(l)).bind(_=>qi(_,b).map(P=>{const z=ca(bm(l),P,_);return T(P,z)})).getOr("");bn({mceTableRowType:()=>y(m.getTableRowType),mceTableCellType:()=>y(m.getTableCellType),mceTableColType:()=>y(m.getTableColType)},(T,_)=>l.addQueryValueHandler(_,T))},b0=l=>!Gl(Pt.fromDom(l.target),"ephox-snooker-resizer-bar"),P3=(l,m)=>{const b=p3(()=>Pt.fromDom(l.getBody()),()=>bC(ch(l),Cp(l)),ra.selectedSelector),y=(Y,de,ke)=>{qi(de).each(Gt=>{const Zt=ln(Y,go=>go.dom),ut=yx(l),bt=P1(dt,Pt.fromDom(l.getDoc()),ut),mt=bm(l),Bn=Pf(Gt,{selection:mt},bt).map(go=>$e(go,rn=>ln(rn,ws=>ws.dom))).getOrUndefined();mh(l,Zt,de.dom,ke.dom,Bn)})},T=()=>oE(l),_=Kx.byAttr(ra,y,T);return l.on("init",Y=>{const de=l.getWin(),ke=wv(l),ft=Cp(l),Gt=()=>{const js=l.selection,gi=Pt.fromDom(js.getStart()),Ya=Pt.fromDom(js.getEnd());Cs(qi,[gi,Ya]).fold(()=>_.clear(ke),dt)},Zt=pC(de,ke,ft,_),ut=kd(de,ke,ft,_),bt=qx(de,ke,ft,_),mt=js=>js.raw.shiftKey===!0;l.on("TableSelectorChange",js=>bt(js.start,js.finish));const Bn=(js,gi)=>{mt(js)&&(gi.kill&&js.kill(),gi.selection.each(Ya=>{const sl=x.relative(Ya.start,Ya.finish),Ri=At(de,sl);l.selection.setRng(Ri)}))},go=js=>{const gi=oc(js);if(gi.raw.shiftKey&&$u(gi.raw.which)){const Ya=l.selection.getRng(),sl=Pt.fromDom(Ya.startContainer),Ri=Pt.fromDom(Ya.endContainer);ut.keyup(gi,sl,Ya.startOffset,Ri,Ya.endOffset).each(qf=>{Bn(gi,qf)})}},rn=js=>{const gi=oc(js);m.hide();const Ya=l.selection.getRng(),sl=Pt.fromDom(Ya.startContainer),Ri=Pt.fromDom(Ya.endContainer),qf=Zd(hm,g0)(Pt.fromDom(l.selection.getStart()));ut.keydown(gi,sl,Ya.startOffset,Ri,Ya.endOffset,qf).each(Ma=>{Bn(gi,Ma)}),m.show()},ws=js=>js.button===0,eo=js=>js.buttons===void 0?!0:(js.buttons&1)!==0,Ms=js=>{Zt.clearstate()},ec=js=>{ws(js)&&b0(js)&&Zt.mousedown(oc(js))},Al=js=>{eo(js)&&b0(js)&&Zt.mouseover(oc(js))},ph=js=>{ws(js)&&b0(js)&&Zt.mouseup(oc(js))},Gf=(()=>{const js=Wo(Pt.fromDom(ke)),gi=Wo(0);return{touchEnd:sl=>{const Ri=Pt.fromDom(sl.target);if(Ci("td")(Ri)||Ci("th")(Ri)){const qf=js.get(),Ma=gi.get();Dn(qf,Ri)&&sl.timeStamp-Ma<300&&(sl.preventDefault(),bt(Ri,Ri))}js.set(Ri),gi.set(sl.timeStamp)}}})();l.on("dragstart",Ms),l.on("mousedown",ec),l.on("mouseover",Al),l.on("mouseup",ph),l.on("touchend",Gf.touchEnd),l.on("keyup",go),l.on("keydown",rn),l.on("NodeChange",Gt)}),l.on("PreInit",()=>{l.serializer.addTempAttr(ra.firstSelected),l.serializer.addTempAttr(ra.lastSelected)}),{getSelectedCells:()=>Rx(b.get(),re([]),Y=>ln(Y,de=>de.dom),Y=>[Y.dom]),clearSelectedCells:Y=>_.clear(Pt.fromDom(Y))}},$3=(l,m)=>{const b=Pt.fromDom(l.getBody());return P4.body(b,m)},lE=l=>Fn(l)&&l.nodeName==="TABLE",gh="bar-",TC=l=>Si(l,"data-mce-resize")!=="false",I3=l=>{const m=_o.fromTable(l);_o.hasColumns(m)||He(Of(l),b=>{const y=Wd(b,"width");Hc(b,"width",y),Es(b,"width")})},uE=l=>Te(l,"corner-"),L3=l=>me(l,"corner-"),dE=l=>{const m=wr(),b=wr(),y=wr();let T,_,P,z;const Y=rn=>vC(l,rn),de=()=>t0(l)?Og():Qh(),ke=rn=>Vf(rn).columns,ft=rn=>Vf(rn).rows,Gt=(rn,ws,eo,Ms)=>{const ec=L3(ws),Al=Tt(ec,"e"),ph=Te(ec,"n");if(_===""&&Hf(rn),z===""&&El(rn),eo!==T&&_!==""){Hc(rn,"width",_);const cf=de(),Gf=Y(rn),js=t0(l)||Al?ke(rn)-1:0;Vg(rn,eo-T,js,cf,Gf)}else if(l3(_)){const cf=parseFloat(_.replace("%","")),Gf=eo*cf/T;Hc(rn,"width",Gf+"%")}if(Dx(_)&&I3(rn),Ms!==P&&z!==""){Hc(rn,"height",z);const cf=ph?0:ft(rn)-1;A2(rn,Ms-P,cf)}},Zt=()=>{b.on(rn=>{rn.destroy()})};l.on("init",()=>{const rn=$3(l,TC);if(y.set(rn),Cx(l)&&aC(l)){const ws=de(),eo=c3.create(rn,ws,Y);l.mode.isReadOnly()||eo.on(),eo.events.startDrag.bind(Ms=>{m.set(l.selection.getRng())}),eo.events.beforeResize.bind(Ms=>{const ec=Ms.table.dom;Ap(l,ec,Ex(ec),Tx(ec),gh+Ms.type)}),eo.events.afterResize.bind(Ms=>{const ec=Ms.table,Al=ec.dom;rh(ec),m.on(ph=>{l.selection.setRng(ph),l.focus()}),sE(l,Al,Ex(Al),Tx(Al),gh+Ms.type),l.undoManager.add()}),b.set(eo)}}),l.on("ObjectResizeStart",rn=>{const ws=rn.target;if(lE(ws)&&!l.mode.isReadOnly()){const eo=Pt.fromDom(ws);He(l.dom.select(".mce-clonedresizable"),Ms=>{l.dom.addClass(Ms,"mce-"+e0(l)+"-columns")}),!Mu(eo)&&of(l)?B2(eo):!FS(eo)&&n0(l)&&Hf(eo),Ra(eo)&&Te(rn.origin,gh)&&Hf(eo),T=rn.width,_=o0(l)?"":Sv(l,ws).getOr(""),P=rn.height,z=kx(l,ws).getOr("")}}),l.on("ObjectResized",rn=>{const ws=rn.target;if(lE(ws)){const eo=Pt.fromDom(ws),Ms=rn.origin;uE(Ms)&&Gt(eo,Ms,rn.width,rn.height),rh(eo),Dd(l,eo.dom,Iv)}});const ut=()=>{b.on(rn=>{rn.on(),rn.showBars()})},bt=()=>{b.on(rn=>{rn.off(),rn.hideBars()})};return l.on("DisabledStateChange",rn=>{rn.state?bt():ut()}),l.on("SwitchMode",()=>{l.mode.isReadOnly()?bt():ut()}),l.on("dragstart dragend",rn=>{rn.type==="dragstart"?bt():ut()}),l.on("remove",()=>{Zt()}),{refresh:rn=>{b.on(ws=>ws.refreshBars(Pt.fromDom(rn)))},hide:()=>{b.on(rn=>rn.hideBars())},show:()=>{b.on(rn=>rn.showBars())}}},nr=l=>{L5(l);const m=dE(l),b=P3(l,m),y=M3(l,m,b);return EC(l,y),iE(l,y),tE(l,y),{getSelectedCells:b.getSelectedCells,clearSelectedCells:b.clearSelectedCells}},hh=l=>({table:nr(l)});var AC=()=>{Ko.add("dom",hh)};AC()})();(function(){var Ko=tinymce.util.Tools.resolve("tinymce.PluginManager");const Yo=(Je,Bt,Be)=>{const xt=Bt==="UL"?"InsertUnorderedList":"InsertOrderedList";Je.execCommand(xt,!1,Be===!1?null:{"list-style-type":Be})},bs=Je=>{Je.addCommand("ApplyUnorderedListStyle",(Bt,Be)=>{Yo(Je,"UL",Be["list-style-type"])}),Je.addCommand("ApplyOrderedListStyle",(Bt,Be)=>{Yo(Je,"OL",Be["list-style-type"])})},jo=Je=>Bt=>Bt.options.get(Je),as=Je=>{const Bt=Je.options.register;Bt("advlist_number_styles",{processor:"string[]",default:"default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman".split(",")}),Bt("advlist_bullet_styles",{processor:"string[]",default:"default,disc,circle,square".split(",")})},ds=jo("advlist_number_styles"),ls=jo("advlist_bullet_styles"),Nt=Je=>Je==null,vn=Je=>!Nt(Je),He=class He{constructor(Bt,Be){Xe(this,"tag");Xe(this,"value");this.tag=Bt,this.value=Be}static some(Bt){return new He(!0,Bt)}static none(){return He.singletonNone}fold(Bt,Be){return this.tag?Be(this.value):Bt()}isSome(){return this.tag}isNone(){return!this.tag}map(Bt){return this.tag?He.some(Bt(this.value)):He.none()}bind(Bt){return this.tag?Bt(this.value):He.none()}exists(Bt){return this.tag&&Bt(this.value)}forall(Bt){return!this.tag||Bt(this.value)}filter(Bt){return!this.tag||Bt(this.value)?this:He.none()}getOr(Bt){return this.tag?this.value:Bt}or(Bt){return this.tag?this:Bt}getOrThunk(Bt){return this.tag?this.value:Bt()}orThunk(Bt){return this.tag?this:Bt()}getOrDie(Bt){if(this.tag)return this.value;throw new Error(Bt??"Called getOrDie on None")}static from(Bt){return vn(Bt)?He.some(Bt):He.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Bt){this.tag&&Bt(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};Xe(He,"singletonNone",new He(!1));let zt=He;const ts=Array.prototype.indexOf,Go=(Je,Bt)=>ts.call(Je,Bt),cn=(Je,Bt)=>Go(Je,Bt)>-1,Fn=(Je,Bt,Be)=>{for(let xt=0,Ae=Je.length;xt<Ae;xt++){const Ve=Je[xt];if(Bt(Ve,xt))return zt.some(Ve);if(Be(Ve,xt))break}return zt.none()},Eo=Object.keys,qn=(Je,Bt)=>{const Be=Eo(Je);for(let xt=0,Ae=Be.length;xt<Ae;xt++){const Ve=Be[xt],F=Je[Ve];Bt(F,Ve)}},dt=(Je,Bt)=>Fo(Je,(Be,xt)=>({k:xt,v:Bt(Be,xt)})),Fo=(Je,Bt)=>{const Be={};return qn(Je,(xt,Ae)=>{const Ve=Bt(xt,Ae);Be[Ve.k]=Ve.v}),Be};var nn=tinymce.util.Tools.resolve("tinymce.util.Tools");const re=Je=>/\btox\-/.test(Je.className),En=(Je,Bt)=>Je.dom.isChildOf(Bt,Je.getBody()),Vo=Je=>Bt=>vn(Bt)&&Je.test(Bt.nodeName),je=Vo(/^(OL|UL|DL)$/),G=Vo(/^(TH|TD)$/),St=(Je,Bt,Be)=>Fn(Bt,xt=>je(xt)&&!re(xt),G).exists(xt=>xt.nodeName===Be&&En(Je,xt)),ro=Je=>{const Bt=Je.dom.getParent(Je.selection.getNode(),"ol,ul"),Be=Je.dom.getStyle(Bt,"listStyleType");return zt.from(Be)},pn=(Je,Bt)=>Bt!==null&&!Je.dom.isEditable(Bt),xe=(Je,Bt)=>{const Be=Je.dom.getParent(Bt,"ol,ul,dl");return pn(Je,Be)||!Je.selection.isEditable()},le=(Je,Bt)=>{const Be=Je.selection.getNode();return Bt({parents:Je.dom.getParents(Be),element:Be}),Je.on("NodeChange",Bt),()=>Je.off("NodeChange",Bt)},vs=Je=>Je.replace(/\-/g," ").replace(/\b\w/g,Bt=>Bt.toUpperCase()),qe=Je=>Nt(Je)||Je==="default"?"":Je,rt=(Je,Bt)=>Be=>{const xt=(Ve,F)=>{const Fs=Ve.selection.getStart(!0);Be.setActive(St(Ve,F,Bt)),Be.setEnabled(!xe(Ve,Fs))};return le(Je,Ve=>xt(Je,Ve.parents))},k=(Je,Bt,Be,xt,Ae,Ve)=>{const F={"lower-latin":"lower-alpha","upper-latin":"upper-alpha","lower-alpha":"lower-latin","upper-alpha":"upper-latin"},Fs=dt(F,jn=>cn(Ve,jn));Je.ui.registry.addSplitButton(Bt,{tooltip:Be,chevronTooltip:`${Be} menu`,icon:Ae==="OL"?"ordered-list":"unordered-list",presets:"listpreview",columns:Ae==="OL"?3:4,fetch:jn=>{const Xn=nn.map(Ve,co=>{const ms=Ae==="OL"?"num":"bull",De=co==="decimal"?"default":co,ve=qe(co),ae=vs(co);return{type:"choiceitem",value:ve,icon:"list-"+ms+"-"+De,text:ae}});jn(Xn)},onAction:()=>Je.execCommand(xt),onItemAction:(jn,Xn)=>{Yo(Je,Ae,Xn)},select:jn=>ro(Je).exists(co=>jn===co||F[co]===jn&&!Fs[jn]),onSetup:rt(Je,Ae)})},ho=(Je,Bt,Be,xt,Ae,Ve)=>{Je.ui.registry.addToggleButton(Bt,{active:!1,tooltip:Be,icon:Ae==="OL"?"ordered-list":"unordered-list",onSetup:rt(Je,Ae),onAction:()=>Je.queryCommandState(xt)||Ve===""?Je.execCommand(xt):Yo(Je,Ae,Ve)})},tt=(Je,Bt,Be,xt,Ae,Ve)=>{Ve.length>1?k(Je,Bt,Be,xt,Ae,Ve):ho(Je,Bt,Be,xt,Ae,qe(Ve[0]))},No=Je=>{tt(Je,"numlist","Numbered list","InsertOrderedList","OL",ds(Je)),tt(Je,"bullist","Bullet list","InsertUnorderedList","UL",ls(Je))};var ln=()=>{Ko.add("advlist",Je=>{Je.hasPlugin("lists")?(as(Je),No(Je),bs(Je)):console.error("Please use the Lists plugin together with the List Styles plugin.")})};ln()})();(function(){var Ko=tinymce.util.Tools.resolve("tinymce.PluginManager");const Yo=(Be,xt,Ae)=>{var Ve;return Ae(Be,xt.prototype)?!0:((Ve=Be.constructor)==null?void 0:Ve.name)===xt.name},bs=Be=>{const xt=typeof Be;return Be===null?"null":xt==="object"&&Array.isArray(Be)?"array":xt==="object"&&Yo(Be,String,(Ae,Ve)=>Ve.isPrototypeOf(Ae))?"string":xt},jo=Be=>xt=>bs(xt)===Be,as=Be=>xt=>Be===xt,ds=jo("string"),ls=as(void 0),Nt=Be=>Be==null,vn=Be=>!Nt(Be),zt=Be=>xt=>!Be(xt),ts=Object.hasOwnProperty,Go=(Be,xt)=>ts.call(Be,xt),cn=(Be,xt,Ae)=>Be.length>=xt.length&&Be.substr(Ae,Ae+xt.length)===xt,Fn=(Be,xt,Ae=0,Ve)=>{const F=Be.indexOf(xt,Ae);return F!==-1?ls(Ve)?!0:F+xt.length<=Ve:!1},Eo=(Be,xt)=>cn(Be,xt,0),qn="\uFEFF",dt=Be=>Be===qn,Fo=Be=>Be.replace(/\uFEFF/g,""),nn=()=>/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g,re=Be=>xt=>xt.options.get(Be),En=Be=>{const xt=Be.options.register;xt("autolink_pattern",{processor:"regexp",default:new RegExp("^"+nn().source+"$","i")}),xt("link_default_target",{processor:"string"}),xt("link_default_protocol",{processor:"string",default:"https"})},Vo=re("autolink_pattern"),je=re("link_default_target"),G=re("link_default_protocol"),St=re("allow_unsafe_link_target");var ro=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker");const pn=Be=>Be.nodeType===3,xe=Be=>Be.nodeType===1,le=Be=>/^[(\[{ \u00a0]$/.test(Be),vs=Be=>/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(Be),qe=Be=>/[?!,.;:]/.test(Be),rt=(Be,xt,Ae)=>{for(let Ve=xt-1;Ve>=0;Ve--){const F=Be.charAt(Ve);if(!dt(F)&&Ae(F))return Ve}return-1},k=(Be,xt)=>{let Ae=Be,Ve=xt;for(;xe(Ae)&&Ae.childNodes[Ve];)Ae=Ae.childNodes[Ve],Ve=pn(Ae)?Ae.data.length:Ae.childNodes.length;return{container:Ae,offset:Ve}},ho=(Be,xt)=>{const Ae=Be.schema.getVoidElements(),Ve=Vo(Be),{dom:F,selection:Fs}=Be;if(F.getParent(Fs.getNode(),"a[href]")!==null||Be.mode.isReadOnly())return null;const jn=Fs.getRng(),Xn=ro(F,_t=>F.isBlock(_t)||Go(Ae,_t.nodeName.toLowerCase())||F.getContentEditable(_t)==="false"||F.getParent(_t,"a[href]")!==null),{container:co,offset:ms}=k(jn.endContainer,jn.endOffset),De=F.getParent(co,F.isBlock)??F.getRoot(),ve=Xn.backwards(co,ms+xt,(_t,bn)=>{const $e=_t.data,et=rt($e,bn,zt(le));return et===-1||qe($e[et])?et:et+1},De);if(!ve)return null;let ae=ve.container;const te=Xn.backwards(ve.container,ve.offset,(_t,bn)=>{ae=_t;const $e=rt(_t.data,bn,le);return $e===-1?$e:$e+1},De),Dt=F.createRng();te?Dt.setStart(te.container,te.offset):Dt.setStart(ae,0),Dt.setEnd(ve.container,ve.offset);const Ce=Fo(Dt.toString()).match(Ve);if(Ce){let _t=Ce[0];return Eo(_t,"www.")?_t=G(Be)+"://"+_t:Fn(_t,"@")&&!vs(_t)&&(_t="mailto:"+_t),{rng:Dt,url:_t}}else return null},tt=(Be,xt)=>{const{dom:Ae,selection:Ve}=Be,{rng:F,url:Fs}=xt,jn=Ve.getBookmark();Ve.setRng(F);const Xn="createlink",co={command:Xn,ui:!1,value:Fs};if(!Be.dispatch("BeforeExecCommand",co).isDefaultPrevented()){Be.getDoc().execCommand(Xn,!1,Fs),Be.dispatch("ExecCommand",co);const De=je(Be);if(ds(De)){const ve=Ve.getNode();Ae.setAttrib(ve,"target",De),De==="_blank"&&!St(Be)&&Ae.setAttrib(ve,"rel","noopener")}}Ve.moveToBookmark(jn),Be.nodeChanged()},No=Be=>{const xt=ho(Be,-1);vn(xt)&&tt(Be,xt)},ln=No,He=Be=>{const xt=ho(Be,0);vn(xt)&&tt(Be,xt)},Je=Be=>{Be.on("keydown",xt=>{xt.keyCode===13&&!xt.isDefaultPrevented()&&He(Be)}),Be.on("keyup",xt=>{xt.keyCode===32?No(Be):(xt.keyCode===48&&xt.shiftKey||xt.keyCode===221)&&ln(Be)})};var Bt=()=>{Ko.add("autolink",Be=>{En(Be),Je(Be)})};Bt()})();(function(){var Ko=tinymce.util.Tools.resolve("tinymce.PluginManager");const Yo=Ee=>({backspaceDelete:Ce=>{Ee.execCommand("mceListBackspaceDelete",!1,Ce)}}),bs=Ee=>Ee==null,jo=Ee=>!bs(Ee),as=Ee=>()=>Ee,ds=(Ee,Ce)=>Ee===Ce,ls=as(!1),Dt=class Dt{constructor(Ce,_t){Xe(this,"tag");Xe(this,"value");this.tag=Ce,this.value=_t}static some(Ce){return new Dt(!0,Ce)}static none(){return Dt.singletonNone}fold(Ce,_t){return this.tag?_t(this.value):Ce()}isSome(){return this.tag}isNone(){return!this.tag}map(Ce){return this.tag?Dt.some(Ce(this.value)):Dt.none()}bind(Ce){return this.tag?Ce(this.value):Dt.none()}exists(Ce){return this.tag&&Ce(this.value)}forall(Ce){return!this.tag||Ce(this.value)}filter(Ce){return!this.tag||Ce(this.value)?this:Dt.none()}getOr(Ce){return this.tag?this.value:Ce}or(Ce){return this.tag?this:Ce}getOrThunk(Ce){return this.tag?this.value:Ce()}orThunk(Ce){return this.tag?this:Ce()}getOrDie(Ce){if(this.tag)return this.value;throw new Error(Ce??"Called getOrDie on None")}static from(Ce){return jo(Ce)?Dt.some(Ce):Dt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Ce){this.tag&&Ce(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};Xe(Dt,"singletonNone",new Dt(!1));let Nt=Dt;const vn=Array.prototype.slice,zt=(Ee,Ce)=>{for(let _t=0,bn=Ee.length;_t<bn;_t++){const $e=Ee[_t];if(Ce($e,_t))return!0}return!1},ts=(Ee,Ce)=>{const _t=Ee.length,bn=new Array(_t);for(let $e=0;$e<_t;$e++){const et=Ee[$e];bn[$e]=Ce(et,$e)}return bn},Go=(Ee,Ce)=>{for(let _t=0,bn=Ee.length;_t<bn;_t++){const $e=Ee[_t];Ce($e,_t)}},cn=(Ee,Ce,_t)=>(Go(Ee,(bn,$e)=>{_t=Ce(_t,bn,$e)}),_t),Fn=(Ee,Ce,_t)=>{for(let bn=0,$e=Ee.length;bn<$e;bn++){const et=Ee[bn];if(Ce(et,bn))return Nt.some(et);if(_t(et,bn))break}return Nt.none()},Eo=(Ee,Ce)=>Fn(Ee,Ce,ls),qn=Ee=>{const Ce=vn.call(Ee,0);return Ce.reverse(),Ce},dt=(Ee,Ce,_t=ds)=>Ee.exists(bn=>_t(bn,Ce)),nn=(Ee=>Ce=>Ce.replace(Ee,""))(/^\s+|\s+$/g),re=Ee=>Ee.length>0,En=Ee=>!re(Ee),Vo=Ee=>{const Ce=qn(nn(Ee).split("")),_t=ts(Ce,(bn,$e)=>{const et=bn.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,$e)*et});return cn(_t,(bn,$e)=>bn+$e,0)},je=Ee=>{if(Ee--,Ee<0)return"";{const Ce=Ee%26,_t=Math.floor(Ee/26),bn=je(_t),$e=String.fromCharCode(65+Ce);return bn+$e}},G=Ee=>/^[A-Z]+$/.test(Ee),St=Ee=>/^[a-z]+$/.test(Ee),ro=Ee=>/^[0-9]+$/.test(Ee),pn=Ee=>ro(Ee)?2:G(Ee)?0:St(Ee)?1:En(Ee)?3:4,xe=Ee=>{switch(pn(Ee)){case 2:return Nt.some({listStyleType:Nt.none(),start:Ee});case 0:return Nt.some({listStyleType:Nt.some("upper-alpha"),start:Vo(Ee).toString()});case 1:return Nt.some({listStyleType:Nt.some("lower-alpha"),start:Vo(Ee).toString()});case 3:return Nt.some({listStyleType:Nt.none(),start:""});case 4:return Nt.none()}},le=Ee=>{const Ce=parseInt(Ee.start,10);return dt(Ee.listStyleType,"upper-alpha")?je(Ce):dt(Ee.listStyleType,"lower-alpha")?je(Ce).toLowerCase():Ee.start},qe=(Ee=>Ce=>Ce.options.get(Ee))("forced_root_block"),rt=Ee=>/\btox\-/.test(Ee.className),k=Ee=>Ce=>jo(Ce)&&Ee.test(Ce.nodeName),ho=Ee=>Ce=>jo(Ce)&&Ce.nodeName.toLowerCase()===Ee,tt=k(/^(OL|UL|DL)$/),No=k(/^(TH|TD)$/),ln=k(/^(LI|DT|DD)$/),He=(Ee,Ce)=>Fn(Ee,tt,No).exists(_t=>_t.nodeName===Ce&&!rt(_t)),Je=(Ee,Ce)=>{const _t=Ee.selection.getNode();return Ce({parents:Ee.dom.getParents(_t),element:_t}),Ee.on("NodeChange",Ce),()=>Ee.off("NodeChange",Ce)},Bt=(Ee,Ce)=>Ce!==null&&!Ee.dom.isEditable(Ce),Be=(Ee,Ce)=>{const _t=Ee.dom.getParent(Ce,"ol,ul,dl");return Bt(Ee,_t)||!Ee.selection.isEditable()},xt=ho("ol"),Ae=["OL","UL","DL"],Ve=Ae.join(","),F=(Ee,Ce)=>{const _t=Ce||Ee.selection.getStart(!0);return Ee.dom.getParent(_t,Ve,Fs(Ee,_t))},Fs=(Ee,Ce)=>{const _t=Ee.dom.getParents(Ce,Ee.dom.isBlock),bn=et=>et.nodeName.toLowerCase()!==qe(Ee);return Eo(_t,et=>bn(et)&&jn(Ee.schema,et)).getOr(Ee.getBody())},jn=(Ee,Ce)=>!tt(Ce)&&!ln(Ce)&&zt(Ae,_t=>Ee.isValidChild(Ce.nodeName,_t)),Xn=Ee=>{const Ce=F(Ee);!xt(Ce)||Be(Ee,Ce)||Ee.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:le({start:Ee.dom.getAttrib(Ce,"start","1"),listStyleType:Nt.from(Ee.dom.getStyle(Ce,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:_t=>{const bn=_t.getData();xe(bn.start).each($e=>{Ee.execCommand("mceListUpdate",!1,{attrs:{start:$e.start==="1"?"":$e.start},styles:{"list-style-type":$e.listStyleType.getOr("")}})}),_t.close()}})},co=Ee=>{Ee.addCommand("mceListProps",()=>{Xn(Ee)})},ms=(Ee,Ce)=>_t=>{const bn=$e=>{_t.setActive(He($e.parents,Ce)),_t.setEnabled(!Be(Ee,$e.element)&&Ee.selection.isEditable())};return _t.setEnabled(Ee.selection.isEditable()),Je(Ee,bn)},De=Ee=>{const Ce=_t=>()=>Ee.execCommand(_t);Ee.hasPlugin("advlist")||(Ee.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:Ce("InsertOrderedList"),onSetup:ms(Ee,"OL")}),Ee.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:Ce("InsertUnorderedList"),onSetup:ms(Ee,"UL")}))},ve=(Ee,Ce)=>_t=>Je(Ee,$e=>_t.setEnabled(He($e.parents,Ce)&&!Be(Ee,$e.element))),ae=Ee=>{const Ce={text:"List properties...",icon:"ordered-list",onAction:()=>Ee.execCommand("mceListProps"),onSetup:ve(Ee,"OL")};Ee.ui.registry.addMenuItem("listprops",Ce),Ee.ui.registry.addContextMenu("lists",{update:_t=>{const bn=F(Ee,_t);return xt(bn)?["listprops"]:[]}})};var te=()=>{Ko.add("lists",Ee=>(co(Ee),De(Ee),ae(Ee),Yo(Ee)))};te()})();(function(){var Ko=tinymce.util.Tools.resolve("tinymce.PluginManager");const Yo=(H,ce,ye)=>{var Ke;return ye(H,ce.prototype)?!0:((Ke=H.constructor)==null?void 0:Ke.name)===ce.name},bs=H=>{const ce=typeof H;return H===null?"null":ce==="object"&&Array.isArray(H)?"array":ce==="object"&&Yo(H,String,(ye,Ke)=>Ke.isPrototypeOf(ye))?"string":ce},jo=H=>ce=>bs(ce)===H,as=H=>ce=>typeof ce===H,ds=H=>ce=>H===ce,ls=jo("string"),Nt=jo("object"),vn=jo("array"),zt=ds(null),ts=as("boolean"),Go=H=>H==null,cn=H=>!Go(H),Fn=as("function"),Eo=(H,ce)=>{if(vn(H)){for(let ye=0,Ke=H.length;ye<Ke;++ye)if(!ce(H[ye]))return!1;return!0}return!1},qn=()=>{},dt=H=>()=>H,Fo=(H,ce)=>H===ce,Nr=class Nr{constructor(ce,ye){Xe(this,"tag");Xe(this,"value");this.tag=ce,this.value=ye}static some(ce){return new Nr(!0,ce)}static none(){return Nr.singletonNone}fold(ce,ye){return this.tag?ye(this.value):ce()}isSome(){return this.tag}isNone(){return!this.tag}map(ce){return this.tag?Nr.some(ce(this.value)):Nr.none()}bind(ce){return this.tag?ce(this.value):Nr.none()}exists(ce){return this.tag&&ce(this.value)}forall(ce){return!this.tag||ce(this.value)}filter(ce){return!this.tag||ce(this.value)?this:Nr.none()}getOr(ce){return this.tag?this.value:ce}or(ce){return this.tag?this:ce}getOrThunk(ce){return this.tag?this.value:ce()}orThunk(ce){return this.tag?this:ce()}getOrDie(ce){if(this.tag)return this.value;throw new Error(ce??"Called getOrDie on None")}static from(ce){return cn(ce)?Nr.some(ce):Nr.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ce){this.tag&&ce(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};Xe(Nr,"singletonNone",new Nr(!1));let nn=Nr;const re=Array.prototype.indexOf,En=Array.prototype.push,Vo=(H,ce)=>re.call(H,ce),je=(H,ce)=>Vo(H,ce)>-1,G=(H,ce)=>{const ye=H.length,Ke=new Array(ye);for(let kt=0;kt<ye;kt++){const en=H[kt];Ke[kt]=ce(en,kt)}return Ke},St=(H,ce)=>{for(let ye=0,Ke=H.length;ye<Ke;ye++){const kt=H[ye];ce(kt,ye)}},ro=(H,ce,ye)=>(St(H,(Ke,kt)=>{ye=ce(ye,Ke,kt)}),ye),pn=H=>{const ce=[];for(let ye=0,Ke=H.length;ye<Ke;++ye){if(!vn(H[ye]))throw new Error("Arr.flatten item "+ye+" was not an array, input: "+H);En.apply(ce,H[ye])}return ce},xe=(H,ce)=>pn(G(H,ce)),le=(H,ce)=>{for(let ye=0;ye<H.length;ye++){const Ke=ce(H[ye],ye);if(Ke.isSome())return Ke}return nn.none()},vs=Object.keys,qe=Object.hasOwnProperty,rt=(H,ce)=>{const ye=vs(H);for(let Ke=0,kt=ye.length;Ke<kt;Ke++){const en=ye[Ke],Dn=H[en];ce(Dn,en)}},k=H=>(ce,ye)=>{H[ye]=ce},ho=(H,ce,ye,Ke)=>{rt(H,(kt,en)=>{(ce(kt,en)?ye:Ke)(kt,en)})},tt=(H,ce)=>{const ye={};return ho(H,ce,k(ye),qn),ye},No=(H,ce)=>qe.call(H,ce),ln=(H,ce)=>No(H,ce)&&H[ce]!==void 0&&H[ce]!==null,He=H=>{let ce=H;return{get:()=>ce,set:kt=>{ce=kt}}},Je=(H,ce,ye=Fo)=>H.exists(Ke=>ye(Ke,ce)),Bt=H=>{const ce=[],ye=Ke=>{ce.push(Ke)};for(let Ke=0;Ke<H.length;Ke++)H[Ke].each(ye);return ce},Be=(H,ce)=>H?nn.some(ce):nn.none(),xt=H=>{const ce=He(nn.none()),ye=()=>ce.get().each(H);return{clear:()=>{ye(),ce.set(nn.none())},isSet:()=>ce.get().isSome(),get:()=>ce.get(),set:ar=>{ye(),ce.set(nn.some(ar))}}},Ae=()=>{const H=xt(qn);return{...H,on:ye=>H.get().each(ye)}},Ve=(H,ce)=>H.substring(ce),F=(H,ce,ye)=>ce===""||H.length>=ce.length&&H.substr(ye,ye+ce.length)===ce,Fs=(H,ce)=>jn(H,ce)?Ve(H,ce.length):H,jn=(H,ce)=>F(H,ce,0),Xn=H=>ce=>ce.options.get(H),co=H=>{const ce=H.options.register;ce("link_assume_external_targets",{processor:ye=>{const Ke=ls(ye)||ts(ye);return Ke?ye===!0?{value:1,valid:Ke}:ye==="http"||ye==="https"?{value:ye,valid:Ke}:{value:0,valid:Ke}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),ce("link_context_toolbar",{processor:"boolean",default:!1}),ce("link_list",{processor:ye=>ls(ye)||Fn(ye)||Eo(ye,Nt)}),ce("link_default_target",{processor:"string"}),ce("link_default_protocol",{processor:"string",default:"https"}),ce("link_target_list",{processor:ye=>ts(ye)||Eo(ye,Nt),default:!0}),ce("link_rel_list",{processor:"object[]",default:[]}),ce("link_class_list",{processor:"object[]",default:[]}),ce("link_title",{processor:"boolean",default:!0}),ce("allow_unsafe_link_target",{processor:"boolean",default:!1}),ce("link_quicklink",{processor:"boolean",default:!1}),ce("link_attributes_postprocess",{processor:"function"})},ms=Xn("link_assume_external_targets"),De=Xn("link_context_toolbar"),ve=Xn("link_list"),ae=Xn("link_default_target"),te=Xn("link_default_protocol"),Dt=Xn("link_target_list"),Ee=Xn("link_rel_list"),Ce=Xn("link_class_list"),_t=Xn("link_title"),bn=Xn("allow_unsafe_link_target"),$e=Xn("link_quicklink"),et=Xn("link_attributes_postprocess");var Xt=tinymce.util.Tools.resolve("tinymce.util.URI"),oo=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),vo=tinymce.util.Tools.resolve("tinymce.util.Tools");const Lo=H=>cn(H)&&H.nodeName.toLowerCase()==="a",zn=H=>Lo(H)&&!!mo(H),ns=(H,ce)=>{if(H.collapsed)return[];{const ye=H.cloneContents(),Ke=ye.firstChild,kt=new oo(Ke,ye),en=[];let Dn=Ke;do ce(Dn)&&en.push(Dn);while(Dn=kt.next());return en}},ko=H=>/^\w+:/i.test(H),mo=H=>H.getAttribute("data-mce-href")??H.getAttribute("href")??"",Ns=(H,ce)=>{const ye=["noopener"],Ke=H?H.split(/\s+/):[],kt=Ao=>vo.trim(Ao.sort().join(" ")),en=Ao=>(Ao=Dn(Ao),Ao.length>0?Ao.concat(ye):ye),Dn=Ao=>Ao.filter(N=>vo.inArray(ye,N)===-1),ar=ce?en(Ke):Dn(Ke);return ar.length>0?kt(ar):""},Ls=H=>H.replace(/\uFEFF/g,""),Uo=(H,ce)=>(ce=ce||Xo(H.selection.getRng())[0]||H.selection.getNode(),yo(ce)?nn.from(H.dom.select("a[href]",ce)[0]):nn.from(H.dom.getParent(ce,"a[href]"))),Wo=(H,ce)=>Uo(H,ce).isSome(),Js=(H,ce)=>{const ye=ce.fold(()=>H.getContent({format:"text"}),Ke=>Ke.innerText||Ke.textContent||"");return Ls(ye)},Xo=H=>ns(H,zn),Os=H=>vo.grep(H,zn),Hr=H=>Os(H).length>0,on=H=>Xo(H).length>0,So=H=>{const ce=H.schema.getTextInlineElements(),ye=en=>en.nodeType===1&&!Lo(en)&&!No(ce,en.nodeName.toLowerCase());if(Uo(H).exists(en=>en.hasAttribute("data-mce-block")))return!1;const kt=H.selection.getRng();return kt.collapsed?!0:ns(kt,ye).length===0},yo=H=>cn(H)&&H.nodeName==="FIGURE"&&/\bimage\b/i.test(H.className),Nc=H=>ro(["title","rel","class","target"],(ye,Ke)=>(H[Ke].each(kt=>{ye[Ke]=kt.length>0?kt:null}),ye),{href:H.href}),nc=(H,ce)=>(ce==="http"||ce==="https")&&!ko(H)?ce+"://"+H:H,qt=(H,ce)=>{const ye={...ce};if(Ee(H).length===0&&!bn(H)){const Ke=Ns(ye.rel,ye.target==="_blank");ye.rel=Ke||null}return nn.from(ye.target).isNone()&&Dt(H)===!1&&(ye.target=ae(H)),ye.href=nc(ye.href,ms(H)),ye},Dr=(H,ce,ye,Ke)=>{ye.each(en=>{No(ce,"innerText")?ce.innerText=en:ce.textContent=en}),H.dom.setAttribs(ce,Ke);const kt=H.dom.createRng();kt.setStartAfter(ce),kt.setEndAfter(ce),H.selection.setRng(kt)},Ue=(H,ce,ye,Ke)=>{const kt=H.dom;yo(ce)?dc(kt,ce,Ke):ye.fold(()=>{H.execCommand("mceInsertLink",!1,Ke);const en=H.selection.getEnd(),Dn=kt.createRng();Dn.setStartAfter(en),Dn.setEndAfter(en),H.selection.setRng(Dn)},en=>{H.insertContent(kt.createHTML("a",Ke,kt.encode(en)))})},Ot=(H,ce,ye)=>{const Ke=H.selection.getNode(),kt=Uo(H,Ke),en=qt(H,Nc(ye)),Dn=et(H);cn(Dn)&&Dn(en),H.undoManager.transact(()=>{ye.href===ce.href&&ce.attach(),kt.fold(()=>{Ue(H,Ke,ye.text,en)},ar=>{H.focus(),Dr(H,ar,ye.text,en)})})},an=H=>{const ce=H.dom,ye=H.selection,Ke=ye.getBookmark(),kt=ye.getRng().cloneRange(),en=ce.getParent(kt.startContainer,"a[href]",H.getBody()),Dn=ce.getParent(kt.endContainer,"a[href]",H.getBody());en&&kt.setStartBefore(en),Dn&&kt.setEndAfter(Dn),ye.setRng(kt),H.execCommand("unlink"),ye.moveToBookmark(Ke)},tn=H=>{H.undoManager.transact(()=>{const ce=H.selection.getNode();yo(ce)?Vr(H,ce):an(H),H.focus()})},dn=H=>{const{class:ce,href:ye,rel:Ke,target:kt,text:en,title:Dn}=H;return tt({class:ce.getOrNull(),href:ye,rel:Ke.getOrNull(),target:kt.getOrNull(),text:en.getOrNull(),title:Dn.getOrNull()},(ar,Ao)=>zt(ar)===!1)},Jt=(H,ce)=>{const ye=H.options.get,Ke={allow_html_data_urls:ye("allow_html_data_urls"),allow_script_urls:ye("allow_script_urls"),allow_svg_data_urls:ye("allow_svg_data_urls")},kt=ce.href;return{...ce,href:Xt.isDomSafe(kt,"a",Ke)?kt:""}},lo=(H,ce,ye)=>{const Ke=Jt(H,ye);H.hasPlugin("rtc",!0)?H.execCommand("createlink",!1,dn(Ke)):Ot(H,ce,Ke)},zr=H=>{H.hasPlugin("rtc",!0)?H.execCommand("unlink"):tn(H)},Vr=(H,ce)=>{var Ke;const ye=H.dom.select("img",ce)[0];if(ye){const kt=H.dom.getParents(ye,"a[href]",ce)[0];kt&&((Ke=kt.parentNode)==null||Ke.insertBefore(ye,kt),H.dom.remove(kt))}},dc=(H,ce,ye)=>{var kt;const Ke=H.select("img",ce)[0];if(Ke){const en=H.create("a",ye);(kt=Ke.parentNode)==null||kt.insertBefore(en,Ke),en.appendChild(Ke)}},Yt=H=>ls(H.value)?H.value:"",Or=H=>ls(H.text)?H.text:ls(H.title)?H.title:"",wr=(H,ce)=>{const ye=[];return vo.each(H,Ke=>{const kt=Or(Ke);if(Ke.menu!==void 0){const en=wr(Ke.menu,ce);ye.push({text:kt,items:en})}else{const en=ce(Ke);ye.push({text:kt,value:en})}}),ye},pi=(H=Yt)=>ce=>nn.from(ce).map(ye=>wr(ye,H)),ne={sanitize:H=>pi(Yt)(H),sanitizeWith:pi,createUi:(H,ce)=>ye=>({name:H,type:"listbox",label:ce,items:ye}),getValue:Yt},Te=H=>ln(H,"items"),Tt=(H,ce)=>le(ce,ye=>Te(ye)?Tt(H,ye.items):Be(ye.value===H,ye)),Wn=(H,ce,ye,Ke)=>{const kt=Ke[ce],en=H.length>0;return kt!==void 0?Tt(kt,ye).map(Dn=>({url:{value:Dn.value,meta:{text:en?H:Dn.text,attach:qn}},text:en?H:Dn.text})):nn.none()},kn=(H,ce)=>ce==="link"?H.link:ce==="anchor"?H.anchor:nn.none(),cr={init:(H,ce)=>{const ye={text:H.text,title:H.title},Ke=Ao=>{var N;return Be(ye.title.length<=0,nn.from((N=Ao.meta)==null?void 0:N.title).getOr(""))},kt=Ao=>{var N;return Be(ye.text.length<=0,nn.from((N=Ao.meta)==null?void 0:N.text).getOr(Ao.value))},en=Ao=>{const N=kt(Ao.url),V=Ke(Ao.url);return N.isSome()||V.isSome()?nn.some({...N.map(se=>({text:se})).getOr({}),...V.map(se=>({title:se})).getOr({})}):nn.none()},Dn=(Ao,N)=>{const V=kn(ce,N).getOr([]);return Wn(ye.text,N,V,Ao)};return{onChange:(Ao,N)=>{const V=N.name;return V==="url"?en(Ao()):je(["anchor","link"],V)?Dn(Ao(),V):((V==="text"||V==="title")&&(ye[V]=Ao()[V]),nn.none())}}},getDelta:Wn};var Kn=tinymce.util.Tools.resolve("tinymce.util.Delay");const nt=(H,ce,ye)=>{const Ke=H.selection.getRng();Kn.setEditorTimeout(H,()=>{H.windowManager.confirm(ce,kt=>{H.selection.setRng(Ke),ye(kt)})})},ue=H=>{const ce=H.href;return ce.indexOf("@")>0&&ce.indexOf("/")===-1&&ce.indexOf("mailto:")===-1?nn.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:Ke=>({...Ke,href:"mailto:"+ce})}):nn.none()},fe=(H,ce)=>ye=>{const Ke=ye.href;return H===1&&!ko(Ke)||H===0&&/^\s*www(\.|\d\.)/i.test(Ke)?nn.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${ce}:// prefix?`,preprocess:en=>({...en,href:ce+"://"+Ke})}):nn.none()},ht={preprocess:(H,ce)=>le([ue,fe(ms(H),te(H))],ye=>ye(ce)).fold(()=>Promise.resolve(ce),ye=>new Promise(Ke=>{nt(H,ye.message,kt=>{Ke(kt?ye.preprocess(ce):ce)})}))},An={getAnchors:H=>{const ce=H.dom.select("a:not([href])"),ye=xe(ce,Ke=>{const kt=Ke.name||Ke.id;return kt?[{text:kt,value:"#"+kt}]:[]});return ye.length>0?nn.some([{text:"None",value:""}].concat(ye)):nn.none()}},Cn={getClasses:H=>{const ce=Ce(H);return ce.length>0?ne.sanitize(ce):nn.none()}},Co=H=>{try{return nn.some(JSON.parse(H))}catch{return nn.none()}},Po={getLinks:H=>{const ce=Ke=>H.convertURL(Ke.value||Ke.url||"","href"),ye=ve(H);return new Promise(Ke=>{ls(ye)?fetch(ye).then(kt=>kt.ok?kt.text().then(Co):Promise.reject()).then(Ke,()=>Ke(nn.none())):Fn(ye)?ye(kt=>Ke(nn.some(kt))):Ke(nn.from(ye))}).then(Ke=>Ke.bind(ne.sanitizeWith(ce)).map(kt=>kt.length>0?[{text:"None",value:""}].concat(kt):kt))}},_r={getRels:(H,ce)=>{const ye=Ee(H);if(ye.length>0){const Ke=Je(ce,"_blank"),kt=bn(H)===!1,en=ar=>Ns(ne.getValue(ar),Ke);return(kt?ne.sanitizeWith(en):ne.sanitize)(ye)}return nn.none()}},bi=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],fs={getTargets:H=>{const ce=Dt(H);return vn(ce)?ne.sanitize(ce).orThunk(()=>nn.some(bi)):ce===!1?nn.none():nn.some(bi)}},gs=(H,ce,ye)=>{const Ke=H.getAttrib(ce,ye);return Ke!==null&&Ke.length>0?nn.some(Ke):nn.none()},Hs=(H,ce)=>{const ye=H.dom,kt=So(H)?nn.some(Js(H.selection,ce)):nn.none(),en=ce.bind(V=>nn.from(ye.getAttrib(V,"href"))),Dn=ce.bind(V=>nn.from(ye.getAttrib(V,"target"))),ar=ce.bind(V=>gs(ye,V,"rel")),Ao=ce.bind(V=>gs(ye,V,"class")),N=ce.bind(V=>gs(ye,V,"title"));return{url:en,text:kt,title:N,target:Dn,rel:ar,linkClass:Ao}},zs={collect:(H,ce)=>Po.getLinks(H).then(ye=>{const Ke=Hs(H,ce);return{anchor:Ke,catalogs:{targets:fs.getTargets(H),rels:_r.getRels(H,Ke.target),classes:Cn.getClasses(H),anchor:An.getAnchors(H),link:ye},optNode:ce,flags:{titleEnabled:_t(H)}}})},Ln=(H,ce)=>ye=>{const Ke=ye.getData();if(!Ke.url.value){zr(H),ye.close();return}const kt=ar=>nn.from(Ke[ar]).filter(Ao=>!Je(ce.anchor[ar],Ao)),en={href:Ke.url.value,text:kt("text"),target:kt("target"),rel:kt("rel"),class:kt("linkClass"),title:kt("title")},Dn={href:Ke.url.value,attach:Ke.url.meta!==void 0&&Ke.url.meta.attach?Ke.url.meta.attach:qn};ht.preprocess(H,en).then(ar=>{lo(H,Dn,ar)}),ye.close()},vc=H=>{const ce=Uo(H);return zs.collect(H,ce)},Ac=(H,ce)=>{const ye=H.anchor,Ke=ye.url.getOr("");return{url:{value:Ke,meta:{original:{value:Ke}}},text:ye.text.getOr(""),title:ye.title.getOr(""),anchor:Ke,link:Ke,rel:ye.rel.getOr(""),target:ye.target.or(ce).getOr(""),linkClass:ye.linkClass.getOr("")}},dr=(H,ce,ye)=>{const Ke=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],kt=H.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),en=H.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],Dn=nn.from(ae(ye)),ar=Ac(H,Dn),Ao=H.catalogs,N=cr.init(ar,Ao);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:pn([Ke,kt,en,Bt([Ao.anchor.map(ne.createUi("anchor","Anchors")),Ao.rels.map(ne.createUi("rel","Rel")),Ao.targets.map(ne.createUi("target","Open link in...")),Ao.link.map(ne.createUi("link","Link list")),Ao.classes.map(ne.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:ar,onChange:(se,{name:Pe})=>{N.onChange(se.getData,{name:Pe}).each(fn=>{se.setData(fn)})},onSubmit:ce}},ed=H=>{vc(H).then(ye=>{const Ke=Ln(H,ye);return dr(ye,Ke,H)}).then(ye=>{H.windowManager.open(ye)})},mu=H=>{H.addCommand("mceLink",(ce,ye)=>{(ye==null?void 0:ye.dialog)===!0||!$e(H)?ed(H):H.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})},Qs=H=>{H.addShortcut("Meta+K","",()=>{H.execCommand("mceLink")})};var vi=tinymce.util.Tools.resolve("tinymce.util.VK");const ei=(H,ce)=>{document.body.appendChild(H),H.dispatchEvent(ce),document.body.removeChild(H)},td=H=>{const ce=document.createElement("a");ce.target="_blank",ce.href=H,ce.rel="noreferrer noopener";const ye=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});document.dispatchEvent(ye),ei(ce,ye)},Pt=H=>H.altKey===!0&&H.shiftKey===!1&&H.ctrlKey===!1&&H.metaKey===!1,La=(H,ce)=>{if(ce){const ye=mo(ce);if(/^#/.test(ye)){const Ke=H.dom.select(`${ye},[name="${Fs(ye,"#")}"]`);Ke.length&&H.selection.scrollIntoView(Ke[0],!0)}else td(ce.href)}},Pc=H=>{const ce=H.selection.getRng(),ye=ce.startContainer;return zn(ye)&&ce.startContainer===ce.endContainer&&H.dom.select("img",ye).length===1},Yc=(H,ce)=>{const ye=Os(H.dom.getParents(ce));return Be(ye.length===1,ye[0])},mr=H=>{const ce=Xo(H.selection.getRng());return Be(ce.length>0,ce[0]).or(Yc(H,H.selection.getNode()))},fu=H=>H.selection.isCollapsed()||Pc(H)?Yc(H,H.selection.getStart()):mr(H),Xc=H=>{const ce=Ae(),ye=()=>ce.get().or(fu(H)),Ke=()=>ye().each(kt=>La(H,kt));return H.on("contextmenu",kt=>{Yc(H,kt.target).each(ce.set)}),H.on("SelectionChange",()=>{ce.isSet()||fu(H).each(ce.set)}),H.on("click",kt=>{ce.clear();const en=Os(H.dom.getParents(kt.target));en.length===1&&vi.metaKeyPressed(kt)&&(kt.preventDefault(),La(H,en[0]))}),H.on("keydown",kt=>{ce.clear(),!kt.isDefaultPrevented()&&kt.keyCode===13&&Pt(kt)&&ye().each(en=>{kt.preventDefault(),La(H,en)})}),{gotoSelectedLink:Ke}},ka=H=>()=>{H.execCommand("mceLink",!1,{dialog:!0})},Pl=(H,ce)=>(H.on("NodeChange",ce),()=>H.off("NodeChange",ce)),nd=H=>ce=>{const ye=()=>{ce.setActive(!H.mode.isReadOnly()&&Wo(H,H.selection.getNode())),ce.setEnabled(H.selection.isEditable())};return ye(),Pl(H,ye)},Ii=H=>ce=>{const ye=()=>{ce.setEnabled(H.selection.isEditable())};return ye(),Pl(H,ye)},gu=H=>ce=>{const ye=en=>Hr(en)||on(H.selection.getRng()),Ke=H.dom.getParents(H.selection.getStart()),kt=en=>{ce.setEnabled(ye(en)&&H.selection.isEditable())};return kt(Ke),Pl(H,en=>kt(en.parents))},$l=(H,ce)=>{H.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onAction:ka(H),onSetup:nd(H)}),H.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:ce.gotoSelectedLink,onSetup:gu(H)}),H.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>zr(H),onSetup:gu(H)})},Li=(H,ce)=>{H.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:ce.gotoSelectedLink,onSetup:gu(H)}),H.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:ka(H),onSetup:Ii(H)}),H.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>zr(H),onSetup:gu(H)})},Il=H=>{const ce="link unlink openlink",ye="link";H.ui.registry.addContextMenu("link",{update:Ke=>H.dom.isEditable(Ke)?Hr(H.dom.getParents(Ke,"a"))?ce:ye:""})},At=(H,ce)=>{const ye=en=>{en.selection.collapse(!1)},Ke=en=>{const Dn=H.selection.getNode();return en.setEnabled(Wo(H,Dn)&&H.selection.isEditable()),qn},kt=en=>{const Dn=Uo(H),ar=So(H);if(Dn.isNone()&&ar){const Ao=Js(H.selection,Dn);return Be(Ao.length===0,en)}else return nn.none()};H.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:nd(H)},label:"Link",predicate:en=>De(H)&&Wo(H,en),initValue:()=>Uo(H).fold(dt(""),mo),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:en=>{const Dn=H.selection.getNode();return en.setActive(Wo(H,Dn)),nd(H)(en)},onAction:en=>{const Dn=en.getValue(),ar=kt(Dn);lo(H,{href:Dn,attach:qn},{href:Dn,text:ar,title:nn.none(),rel:nn.none(),target:nn.from(ae(H)),class:nn.none()}),ye(H),en.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:Ke,onAction:en=>{zr(H),en.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:Ke,onAction:en=>{ce.gotoSelectedLink(),en.hide()}}]})},dl=H=>{const ce=Xc(H);$l(H,ce),Li(H,ce),Il(H),At(H,ce)};var od=()=>{Ko.add("link",H=>{co(H),mu(H),dl(H),Qs(H)})};od()})();(function(){var Ko=tinymce.util.Tools.resolve("tinymce.PluginManager");const Yo=Object.getPrototypeOf,bs=(N,V,se)=>{var Pe;return se(N,V.prototype)?!0:((Pe=N.constructor)==null?void 0:Pe.name)===V.name},jo=N=>{const V=typeof N;return N===null?"null":V==="object"&&Array.isArray(N)?"array":V==="object"&&bs(N,String,(se,Pe)=>Pe.isPrototypeOf(se))?"string":V},as=N=>V=>jo(V)===N,ds=N=>V=>typeof V===N,ls=N=>V=>N===V,Nt=(N,V)=>zt(N)&&bs(N,V,(se,Pe)=>Yo(se)===Pe),vn=as("string"),zt=as("object"),ts=N=>Nt(N,Object),Go=as("array"),cn=ls(null),Fn=ds("boolean"),Eo=N=>N==null,qn=N=>!Eo(N),dt=ds("function"),Fo=ds("number"),nn=(N,V)=>{if(Go(N)){for(let se=0,Pe=N.length;se<Pe;++se)if(!V(N[se]))return!1;return!0}return!1},re=()=>{},Ao=class Ao{constructor(V,se){Xe(this,"tag");Xe(this,"value");this.tag=V,this.value=se}static some(V){return new Ao(!0,V)}static none(){return Ao.singletonNone}fold(V,se){return this.tag?se(this.value):V()}isSome(){return this.tag}isNone(){return!this.tag}map(V){return this.tag?Ao.some(V(this.value)):Ao.none()}bind(V){return this.tag?V(this.value):Ao.none()}exists(V){return this.tag&&V(this.value)}forall(V){return!this.tag||V(this.value)}filter(V){return!this.tag||V(this.value)?this:Ao.none()}getOr(V){return this.tag?this.value:V}or(V){return this.tag?this:V}getOrThunk(V){return this.tag?this.value:V()}orThunk(V){return this.tag?this:V()}getOrDie(V){if(this.tag)return this.value;throw new Error(V??"Called getOrDie on None")}static from(V){return qn(V)?Ao.some(V):Ao.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(V){this.tag&&V(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};Xe(Ao,"singletonNone",new Ao(!1));let En=Ao;const Vo=Array.prototype.push,je=N=>{const V=[];for(let se=0,Pe=N.length;se<Pe;++se){if(!Go(N[se]))throw new Error("Arr.flatten item "+se+" was not an array, input: "+N);Vo.apply(V,N[se])}return V},G=(N,V)=>V>=0&&V<N.length?En.some(N[V]):En.none(),St=N=>G(N,0),ro=(N,V)=>{for(let se=0;se<N.length;se++){const Pe=V(N[se],se);if(Pe.isSome())return Pe}return En.none()},pn=Object.keys,xe=Object.hasOwnProperty,le=(N,V)=>{const se=pn(N);for(let Pe=0,fn=se.length;Pe<fn;Pe++){const po=se[Pe],Us=N[po];V(Us,po)}},vs=N=>(V,se)=>{N[se]=V},qe=(N,V,se,Pe)=>{le(N,(fn,po)=>{(V(fn,po)?se:Pe)(fn,po)})},rt=(N,V)=>{const se={};return qe(N,V,vs(se),re),se},k=(N,V)=>xe.call(N,V),ho=(N,V)=>k(N,V)&&N[V]!==void 0&&N[V]!==null,ln=(N=>(...V)=>{if(V.length===0)throw new Error("Can't merge zero objects");const se={};for(let Pe=0;Pe<V.length;Pe++){const fn=V[Pe];for(const po in fn)k(fn,po)&&(se[po]=N(se[po],fn[po]))}return se})((N,V)=>ts(N)&&ts(V)?ln(N,V):V),He=N=>N.length>0,Je=(N,V)=>{const Pe=(V||document).createElement("div");if(Pe.innerHTML=N,!Pe.hasChildNodes()||Pe.childNodes.length>1){const fn="HTML does not have a single root node";throw console.error(fn,N),new Error(fn)}return xt(Pe.childNodes[0])},Bt=(N,V)=>{const Pe=(V||document).createElement(N);return xt(Pe)},Be=(N,V)=>{const Pe=(V||document).createTextNode(N);return xt(Pe)},xt=N=>{if(N==null)throw new Error("Node cannot be null or undefined");return{dom:N}},Ve={fromHtml:Je,fromTag:Bt,fromText:Be,fromDom:xt,fromPoint:(N,V,se)=>En.from(N.dom.elementFromPoint(V,se)).map(xt)},F=(N,V,se)=>{if(vn(se)||Fn(se)||Fo(se))N.setAttribute(V,se+"");else throw console.error("Invalid call to Attribute.set. Key ",V,":: Value ",se,":: Element ",N),new Error("Attribute value was not simple")},Fs=(N,V,se)=>{F(N.dom,V,se)},jn=(N,V)=>{N.dom.removeAttribute(V)};var Xn=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),co=tinymce.util.Tools.resolve("tinymce.util.URI");const ms=N=>V=>V.options.get(N),De=N=>{const V=N.options.register;V("image_dimensions",{processor:"boolean",default:!0}),V("image_advtab",{processor:"boolean",default:!1}),V("image_uploadtab",{processor:"boolean",default:!0}),V("image_prepend_url",{processor:"string",default:""}),V("image_class_list",{processor:"object[]"}),V("image_description",{processor:"boolean",default:!0}),V("image_title",{processor:"boolean",default:!1}),V("image_caption",{processor:"boolean",default:!1}),V("image_list",{processor:se=>{const Pe=se===!1||vn(se)||nn(se,zt)||dt(se);return Pe?{value:se,valid:Pe}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},ve=ms("image_dimensions"),ae=ms("image_advtab"),te=ms("image_uploadtab"),Dt=ms("image_prepend_url"),Ee=ms("image_class_list"),Ce=ms("image_description"),_t=ms("image_title"),bn=ms("image_caption"),$e=ms("image_list"),et=ms("a11y_advanced_options"),Xt=ms("automatic_uploads"),oo=N=>He(N.options.get("images_upload_url")),vo=N=>qn(N.options.get("images_upload_handler")),Lo=(N,V)=>Math.max(parseInt(N,10),parseInt(V,10)),zn=N=>new Promise(V=>{const se=document.createElement("img"),Pe=po=>{se.parentNode&&se.parentNode.removeChild(se),V(po)};se.addEventListener("load",()=>{const po=Lo(se.width,se.clientWidth),Us=Lo(se.height,se.clientHeight),qr={width:po,height:Us};Pe(Promise.resolve(qr))}),se.addEventListener("error",()=>{Pe(Promise.reject(`Failed to get image dimensions for: ${N}`))});const fn=se.style;fn.visibility="hidden",fn.position="fixed",fn.bottom=fn.left="0px",fn.width=fn.height="auto",document.body.appendChild(se),se.src=N}),ns=N=>(N&&(N=N.replace(/px$/,"")),N),ko=N=>(N.length>0&&/^[0-9]+$/.test(N)&&(N+="px"),N),mo=N=>{if(N.margin){const V=String(N.margin).split(" ");switch(V.length){case 1:N["margin-top"]=N["margin-top"]||V[0],N["margin-right"]=N["margin-right"]||V[0],N["margin-bottom"]=N["margin-bottom"]||V[0],N["margin-left"]=N["margin-left"]||V[0];break;case 2:N["margin-top"]=N["margin-top"]||V[0],N["margin-right"]=N["margin-right"]||V[1],N["margin-bottom"]=N["margin-bottom"]||V[0],N["margin-left"]=N["margin-left"]||V[1];break;case 3:N["margin-top"]=N["margin-top"]||V[0],N["margin-right"]=N["margin-right"]||V[1],N["margin-bottom"]=N["margin-bottom"]||V[2],N["margin-left"]=N["margin-left"]||V[1];break;case 4:N["margin-top"]=N["margin-top"]||V[0],N["margin-right"]=N["margin-right"]||V[1],N["margin-bottom"]=N["margin-bottom"]||V[2],N["margin-left"]=N["margin-left"]||V[3]}delete N.margin}return N},Ns=(N,V)=>{const se=$e(N);vn(se)?fetch(se).then(Pe=>{Pe.ok&&Pe.json().then(V)}):dt(se)?se(V):V(se)},Ls=(N,V,se)=>{const Pe=()=>{se.onload=se.onerror=null,N.selection&&(N.selection.select(se),N.nodeChanged())};se.onload=()=>{!V.width&&!V.height&&ve(N)&&N.dom.setAttribs(se,{width:String(se.clientWidth),height:String(se.clientHeight)}),Pe()},se.onerror=Pe},Uo=N=>new Promise((V,se)=>{const Pe=new FileReader;Pe.onload=()=>{V(Pe.result)},Pe.onerror=()=>{var fn;se((fn=Pe.error)==null?void 0:fn.message)},Pe.readAsDataURL(N)}),Wo=N=>N.nodeName==="IMG"&&(N.hasAttribute("data-mce-object")||N.hasAttribute("data-mce-placeholder")),Js=(N,V)=>{const se=N.options.get;return co.isDomSafe(V,"img",{allow_html_data_urls:se("allow_html_data_urls"),allow_script_urls:se("allow_script_urls"),allow_svg_data_urls:se("allow_svg_data_urls")})},Xo=Xn.DOM,Os=N=>N.style.marginLeft&&N.style.marginRight&&N.style.marginLeft===N.style.marginRight?ns(N.style.marginLeft):"",Hr=N=>N.style.marginTop&&N.style.marginBottom&&N.style.marginTop===N.style.marginBottom?ns(N.style.marginTop):"",on=N=>N.style.borderWidth?ns(N.style.borderWidth):"",So=(N,V)=>N.hasAttribute(V)?N.getAttribute(V)??"":"",yo=N=>N.parentNode!==null&&N.parentNode.nodeName==="FIGURE",Nc=(N,V,se)=>{se===""||se===null?N.removeAttribute(V):N.setAttribute(V,se)},nc=N=>{const V=Xo.create("figure",{class:"image"});Xo.insertAfter(V,N),V.appendChild(N),V.appendChild(Xo.create("figcaption",{contentEditable:"true"},"Caption")),V.contentEditable="false"},qt=N=>{const V=N.parentNode;qn(V)&&(Xo.insertAfter(N,V),Xo.remove(V))},Dr=N=>{yo(N)?qt(N):nc(N)},Ue=(N,V)=>{const se=N.getAttribute("style"),Pe=V(se!==null?se:"");Pe.length>0?(N.setAttribute("style",Pe),N.setAttribute("data-mce-style",Pe)):N.removeAttribute("style")},Ot=(N,V)=>(se,Pe,fn)=>{const po=se.style;po[Pe]?(po[Pe]=ko(fn),Ue(se,V)):Nc(se,Pe,fn)},an=(N,V)=>N.style[V]?ns(N.style[V]):So(N,V),tn=(N,V)=>{const se=ko(V);N.style.marginLeft=se,N.style.marginRight=se},dn=(N,V)=>{const se=ko(V);N.style.marginTop=se,N.style.marginBottom=se},Jt=(N,V)=>{const se=ko(V);N.style.borderWidth=se},lo=(N,V)=>{N.style.borderStyle=V},zr=N=>N.style.borderStyle??"",Vr=N=>qn(N)&&N.nodeName==="FIGURE",dc=N=>N.nodeName==="IMG",Yt=N=>{const V=Xo.getAttrib(N,"alt"),se=Xo.getAttrib(N,"role");return N.hasAttribute("alt")&&V.length===0||se==="presentation"||se==="none"},Or=N=>Yt(N)?"":So(N,"alt"),wr=()=>({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),pi=(N,V)=>{const se=document.createElement("img");return Nc(se,"style",V.style),(Os(se)||V.hspace!=="")&&tn(se,V.hspace),(Hr(se)||V.vspace!=="")&&dn(se,V.vspace),(on(se)||V.border!=="")&&Jt(se,V.border),(zr(se)||V.borderStyle!=="")&&lo(se,V.borderStyle),N(se.getAttribute("style")??"")},_s=(N,V)=>{const se=document.createElement("img");if(kn(N,{...V,caption:!1},se),Te(se,V.alt,V.isDecorative),V.caption){const Pe=Xo.create("figure",{class:"image"});return Pe.appendChild(se),Pe.appendChild(Xo.create("figcaption",{contentEditable:"true"},"Caption")),Pe.contentEditable="false",Pe}else return se},me=(N,V)=>({src:So(V,"src"),alt:Or(V),title:So(V,"title"),width:an(V,"width"),height:an(V,"height"),class:So(V,"class"),style:N(So(V,"style")),caption:yo(V),hspace:Os(V),vspace:Hr(V),border:on(V),borderStyle:zr(V),isDecorative:Yt(V)}),ne=(N,V,se,Pe,fn)=>{se[Pe]!==V[Pe]&&fn(N,Pe,String(se[Pe]))},Te=(N,V,se)=>{if(se){Xo.setAttrib(N,"role","presentation");const Pe=Ve.fromDom(N);Fs(Pe,"alt","")}else{if(cn(V)){const Pe=Ve.fromDom(N);jn(Pe,"alt")}else{const Pe=Ve.fromDom(N);Fs(Pe,"alt",V)}Xo.getAttrib(N,"role")==="presentation"&&Xo.setAttrib(N,"role","")}},Tt=(N,V,se)=>{(se.alt!==V.alt||se.isDecorative!==V.isDecorative)&&Te(N,se.alt,se.isDecorative)},Wn=(N,V)=>(se,Pe,fn)=>{N(se,fn),Ue(se,V)},kn=(N,V,se)=>{const Pe=me(N,se);ne(se,Pe,V,"caption",(fn,po,Us)=>Dr(fn)),ne(se,Pe,V,"src",Nc),ne(se,Pe,V,"title",Nc),ne(se,Pe,V,"width",Ot("width",N)),ne(se,Pe,V,"height",Ot("height",N)),ne(se,Pe,V,"class",Nc),ne(se,Pe,V,"style",Wn((fn,po)=>Nc(fn,"style",po),N)),ne(se,Pe,V,"hspace",Wn(tn,N)),ne(se,Pe,V,"vspace",Wn(dn,N)),ne(se,Pe,V,"border",Wn(Jt,N)),ne(se,Pe,V,"borderStyle",Wn(lo,N)),Tt(se,Pe,V)},Jn=(N,V)=>{const se=N.dom.styles.parse(V),Pe=mo(se),fn=N.dom.styles.parse(N.dom.styles.serialize(Pe));return N.dom.styles.serialize(fn)},cr=N=>{const V=N.selection.getNode(),se=N.dom.getParent(V,"figure.image");return se?N.dom.select("img",se)[0]:V&&(V.nodeName!=="IMG"||Wo(V))?null:V},Kn=(N,V)=>{const se=N.dom,Pe=rt(N.schema.getTextBlockElements(),(po,Us)=>!N.schema.isValidChild(Us,"figure")),fn=se.getParent(V.parentNode,po=>ho(Pe,po.nodeName),N.getBody());return fn?se.split(fn,V)??V:V},nt=N=>{const V=cr(N);return V?me(se=>Jn(N,se),V):wr()},ue=(N,V)=>{const se=_s(fn=>Jn(N,fn),V);N.dom.setAttrib(se,"data-mce-id","__mcenew"),N.focus(),N.insertContent(se.outerHTML);const Pe=N.dom.select('*[data-mce-id="__mcenew"]')[0];if(N.dom.setAttrib(Pe,"data-mce-id",null),Vr(Pe)){const fn=Kn(N,Pe);N.selection.select(fn)}else N.selection.select(Pe)},fe=(N,V)=>{N.dom.setAttrib(V,"src",V.getAttribute("src"))},Qe=(N,V)=>{if(V){const se=N.dom.is(V.parentNode,"figure.image")?V.parentNode:V;N.dom.remove(se),N.focus(),N.nodeChanged(),N.dom.isEmpty(N.getBody())&&(N.setContent(""),N.selection.setCursorLocation())}},ht=(N,V)=>{const se=cr(N);if(se)if(kn(Pe=>Jn(N,Pe),V,se),fe(N,se),Vr(se.parentNode)){N.dom.setStyle(se,"float","");const Pe=se.parentNode;Kn(N,Pe),N.selection.select(se.parentNode)}else N.selection.select(se),Ls(N,V,se)},It=(N,V)=>{const se=V.src;return{...V,src:Js(N,se)?se:""}},An=(N,V)=>{const se=cr(N);if(se){const fn={...me(Us=>Jn(N,Us),se),...V},po=It(N,fn);fn.src?ht(N,po):Qe(N,se)}else V.src&&ue(N,{...wr(),...V})};var Qt=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),Cn=tinymce.util.Tools.resolve("tinymce.util.Tools");const Co=N=>vn(N.value)?N.value:"",To=N=>vn(N.text)?N.text:vn(N.title)?N.title:"",Po=(N,V)=>{const se=[];return Cn.each(N,Pe=>{const fn=To(Pe);if(Pe.menu!==void 0){const po=Po(Pe.menu,V);se.push({text:fn,items:po})}else{const po=V(Pe);se.push({text:fn,value:po})}}),se},qs=(N=Co)=>V=>V?En.from(V).map(se=>Po(se,N)):En.none(),_r=N=>qs(Co)(N),bi=N=>k(N,"items"),$i=(N,V)=>ro(N,se=>bi(se)?$i(se.items,V):se.value===V?En.some(se):En.none()),gs={sanitizer:qs,sanitize:_r,findEntry:(N,V)=>N.bind(se=>$i(se,V))},Aa={makeTab:N=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]})},zs=N=>{const V=gs.sanitizer(Da=>N.convertURL(Da.value||Da.url||"","src")),se=new Promise(Da=>{Ns(N,rd=>{Da(V(rd).map(vf=>je([[{text:"None",value:""}],vf])))})}),Pe=gs.sanitize(Ee(N)),fn=ae(N),po=te(N),Us=oo(N),qr=vo(N),la=nt(N),Jo=Ce(N),ua=_t(N),Ll=ve(N),Hi=bn(N),gg=et(N),Pm=Xt(N),sd=En.some(Dt(N)).filter(Da=>vn(Da)&&Da.length>0);return se.then(Da=>({image:la,imageList:Da,classList:Pe,hasAdvTab:fn,hasUploadTab:po,hasUploadUrl:Us,hasUploadHandler:qr,hasDescription:Jo,hasImageTitle:ua,hasDimensions:Ll,hasImageCaption:Hi,prependURL:sd,hasAccessibilityOptions:gg,automaticUploads:Pm}))},Ln=N=>{const V={name:"src",type:"urlinput",filetype:"image",label:"Source",picker_text:"Browse files"},se=N.imageList.map(ua=>({name:"images",type:"listbox",label:"Image list",items:ua})),Pe={name:"alt",type:"input",label:"Alternative description",enabled:!(N.hasAccessibilityOptions&&N.image.isDecorative)},fn={name:"title",type:"input",label:"Image title"},po={name:"dimensions",type:"sizeinput"},Us={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},qr=N.classList.map(ua=>({name:"classes",type:"listbox",label:"Class",items:ua})),la={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},Jo=ua=>ua?{type:"grid",columns:2}:{type:"panel"};return je([[V],se.toArray(),N.hasAccessibilityOptions&&N.hasDescription?[Us]:[],N.hasDescription?[Pe]:[],N.hasImageTitle?[fn]:[],N.hasDimensions?[po]:[],[{...Jo(N.classList.isSome()&&N.hasImageCaption),items:je([qr.toArray(),N.hasImageCaption?[la]:[]])}]])},Ac={makeTab:N=>({title:"General",name:"general",items:Ln(N)}),makeItems:Ln},ed={makeTab:N=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]})},mu=N=>({prevImage:gs.findEntry(N.imageList,N.image.src),prevAlt:N.image.alt,open:!0}),Qs=N=>({src:{value:N.src,meta:{}},images:N.src,alt:N.alt,title:N.title,dimensions:{width:N.width,height:N.height},classes:N.class,caption:N.caption,style:N.style,vspace:N.vspace,border:N.border,hspace:N.hspace,borderstyle:N.borderStyle,fileinput:[],isDecorative:N.isDecorative}),vi=(N,V)=>({src:N.src.value,alt:(N.alt===null||N.alt.length===0)&&V?null:N.alt,title:N.title,width:N.dimensions.width,height:N.dimensions.height,class:N.classes,style:N.style,caption:N.caption,hspace:N.hspace,vspace:N.vspace,border:N.border,borderStyle:N.borderstyle,isDecorative:N.isDecorative}),ei=(N,V)=>/^(?:[a-zA-Z]+:)?\/\//.test(V)?En.none():N.prependURL.bind(se=>V.substring(0,se.length)!==se?En.some(se+V):En.none()),td=(N,V)=>{const se=V.getData();ei(N,se.src.value).each(Pe=>{V.setData({src:{value:Pe,meta:se.src.meta}})})},Pt=(N,V,se)=>{N.hasDescription&&vn(se.alt)&&(V.alt=se.alt),N.hasAccessibilityOptions&&(V.isDecorative=se.isDecorative||V.isDecorative||!1),N.hasImageTitle&&vn(se.title)&&(V.title=se.title),N.hasDimensions&&(vn(se.width)&&(V.dimensions.width=se.width),vn(se.height)&&(V.dimensions.height=se.height)),vn(se.class)&&gs.findEntry(N.classList,se.class).each(Pe=>{V.classes=Pe.value}),N.hasImageCaption&&Fn(se.caption)&&(V.caption=se.caption),N.hasAdvTab&&(vn(se.style)&&(V.style=se.style),vn(se.vspace)&&(V.vspace=se.vspace),vn(se.border)&&(V.border=se.border),vn(se.hspace)&&(V.hspace=se.hspace),vn(se.borderstyle)&&(V.borderstyle=se.borderstyle))},La=(N,V)=>{const se=V.getData(),Pe=se.src.meta;if(Pe!==void 0){const fn=ln({},se);Pt(N,fn,Pe),V.setData(fn)}},Pc=(N,V,se,Pe)=>{const fn=Pe.getData(),po=fn.src.value,Us=fn.src.meta||{};!Us.width&&!Us.height&&V.hasDimensions&&(He(po)?N.imageSize(po).then(qr=>{se.open&&Pe.setData({dimensions:qr})}).catch(qr=>console.error(qr)):Pe.setData({dimensions:{width:"",height:""}}))},Yc=(N,V,se)=>{const Pe=se.getData(),fn=gs.findEntry(N.imageList,Pe.src.value);V.prevImage=fn,se.setData({images:fn.map(po=>po.value).getOr("")})},mr=(N,V,se,Pe)=>{td(V,Pe),La(V,Pe),Pc(N,V,se,Pe),Yc(V,se,Pe)},fu=(N,V,se,Pe)=>{const fn=Pe.getData(),po=gs.findEntry(V.imageList,fn.images);po.each(Us=>{fn.alt===""||se.prevImage.map(la=>la.text===fn.alt).getOr(!1)?Us.value===""?Pe.setData({src:Us,alt:se.prevAlt}):Pe.setData({src:Us,alt:Us.text}):Pe.setData({src:Us})}),se.prevImage=po,mr(N,V,se,Pe)},Xc=(N,V,se,Pe)=>{const fn=Pe.getData();Pe.block("Uploading image"),St(fn.fileinput).fold(()=>{Pe.unblock()},po=>{const Us=URL.createObjectURL(po),qr=()=>{Pe.unblock(),URL.revokeObjectURL(Us)},la=Jo=>{Pe.setData({src:{value:Jo,meta:{}}}),Pe.showTab("general"),mr(N,V,se,Pe),Pe.focus("src")};Uo(po).then(Jo=>{const ua=N.createBlobCache(po,Us,Jo);V.automaticUploads?N.uploadImage(ua).then(Ll=>{la(Ll.url),qr()}).catch(Ll=>{qr(),N.alertErr(Ll,()=>{Pe.focus("fileinput")})}):(N.addToBlobCache(ua),la(ua.blobUri()),Pe.unblock())})})},ka=(N,V,se)=>(Pe,fn)=>{fn.name==="src"?mr(N,V,se,Pe):fn.name==="images"?fu(N,V,se,Pe):fn.name==="alt"?se.prevAlt=Pe.getData().alt:fn.name==="fileinput"?Xc(N,V,se,Pe):fn.name==="isDecorative"&&Pe.setEnabled("alt",!Pe.getData().isDecorative)},Pl=N=>()=>{N.open=!1},nd=N=>N.hasAdvTab||N.hasUploadUrl||N.hasUploadHandler?{type:"tabpanel",tabs:je([[Ac.makeTab(N)],N.hasAdvTab?[Aa.makeTab(N)]:[],N.hasUploadTab&&(N.hasUploadUrl||N.hasUploadHandler)?[ed.makeTab(N)]:[]])}:{type:"panel",items:Ac.makeItems(N)},Ii=(N,V,se)=>Pe=>{const fn=ln(Qs(V.image),Pe.getData()),po={...fn,style:pi(se.normalizeCss,vi(fn,!1))};N.execCommand("mceUpdateImage",!1,vi(po,V.hasAccessibilityOptions)),N.editorUpload.uploadImagesAuto(),Pe.close()},gu=N=>V=>Js(N,V)?zn(N.documentBaseURI.toAbsolute(V)).then(se=>({width:String(se.width),height:String(se.height)})):Promise.resolve({width:"",height:""}),$l=N=>(V,se,Pe)=>{var fn;return N.editorUpload.blobCache.create({blob:V,blobUri:se,name:(fn=V.name)==null?void 0:fn.replace(/\.[^\.]+$/,""),filename:V.name,base64:Pe.split(",")[1]})},Li=N=>V=>{N.editorUpload.blobCache.add(V)},Il=N=>(V,se)=>{N.windowManager.alert(V,se)},At=N=>V=>Jn(N,V),dl=N=>V=>N.dom.parseStyle(V),od=N=>(V,se)=>N.dom.serializeStyle(V,se),Nr=N=>V=>Qt(N).upload([V],!1).then(se=>{var Pe;return se.length===0?Promise.reject("Failed to upload image"):se[0].status===!1?Promise.reject((Pe=se[0].error)==null?void 0:Pe.message):se[0]}),H=N=>{const V={imageSize:gu(N),addToBlobCache:Li(N),createBlobCache:$l(N),alertErr:Il(N),normalizeCss:At(N),parseStyle:dl(N),serializeStyle:od(N),uploadImage:Nr(N)};return{open:()=>{zs(N).then(Pe=>{const fn=mu(Pe);return{title:"Insert/Edit Image",size:"normal",body:nd(Pe),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Qs(Pe.image),onSubmit:Ii(N,Pe,V),onChange:ka(V,Pe,fn),onClose:Pl(fn)}}).then(N.windowManager.open)}}},ce=N=>{N.addCommand("mceImage",H(N).open),N.addCommand("mceUpdateImage",(V,se)=>{N.undoManager.transact(()=>An(N,se))})},ye=N=>{const V=N.attr("class");return qn(V)&&/\bimage\b/.test(V)},Ke=N=>V=>{let se=V.length;const Pe=fn=>{fn.attr("contenteditable",N?"true":null)};for(;se--;){const fn=V[se];ye(fn)&&(fn.attr("contenteditable",N?"false":null),Cn.each(fn.getAll("figcaption"),Pe))}},kt=N=>{N.on("PreInit",()=>{N.parser.addNodeFilter("figure",Ke(!0)),N.serializer.addNodeFilter("figure",Ke(!1))})},en=N=>V=>{const se=()=>{V.setEnabled(N.selection.isEditable())};return N.on("NodeChange",se),se(),()=>{N.off("NodeChange",se)}},Dn=N=>{N.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:H(N).open,onSetup:V=>{V.setActive(qn(cr(N)));const se=N.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",V.setActive).unbind,Pe=en(N)(V);return()=>{se(),Pe()}}}),N.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:H(N).open,onSetup:en(N)}),N.ui.registry.addContextMenu("image",{update:V=>N.selection.isEditable()&&(Vr(V)||dc(V)&&!Wo(V))?["image"]:[]})};var ar=()=>{Ko.add("image",N=>{De(N),kt(N),Dn(N),ce(N)})};ar()})();(function(){var Ko=tinymce.util.Tools.resolve("tinymce.PluginManager");const Yo=(ve,ae)=>ve.dispatch("insertCustomChar",{chr:ae}),bs=(ve,ae)=>{const te=Yo(ve,ae).chr;ve.execCommand("mceInsertContent",!1,te)},jo=(ve,ae,te)=>{var Dt;return te(ve,ae.prototype)?!0:((Dt=ve.constructor)==null?void 0:Dt.name)===ae.name},as=ve=>{const ae=typeof ve;return ve===null?"null":ae==="object"&&Array.isArray(ve)?"array":ae==="object"&&jo(ve,String,(te,Dt)=>Dt.isPrototypeOf(te))?"string":ae},ds=ve=>ae=>as(ae)===ve,ls=ve=>ae=>typeof ae===ve,Nt=ve=>ae=>ve===ae,vn=ds("array"),zt=Nt(null),ts=Nt(void 0),Go=ve=>ve==null,cn=ve=>!Go(ve),Fn=ls("function"),qn=(ve=>()=>ve)(!1),De=class De{constructor(ae,te){Xe(this,"tag");Xe(this,"value");this.tag=ae,this.value=te}static some(ae){return new De(!0,ae)}static none(){return De.singletonNone}fold(ae,te){return this.tag?te(this.value):ae()}isSome(){return this.tag}isNone(){return!this.tag}map(ae){return this.tag?De.some(ae(this.value)):De.none()}bind(ae){return this.tag?ae(this.value):De.none()}exists(ae){return this.tag&&ae(this.value)}forall(ae){return!this.tag||ae(this.value)}filter(ae){return!this.tag||ae(this.value)?this:De.none()}getOr(ae){return this.tag?this.value:ae}or(ae){return this.tag?this:ae}getOrThunk(ae){return this.tag?this.value:ae()}orThunk(ae){return this.tag?this:ae()}getOrDie(ae){if(this.tag)return this.value;throw new Error(ae??"Called getOrDie on None")}static from(ae){return cn(ae)?De.some(ae):De.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ae){this.tag&&ae(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};Xe(De,"singletonNone",new De(!1));let dt=De;const Fo=Array.prototype.push,nn=(ve,ae)=>{const te=ve.length,Dt=new Array(te);for(let Ee=0;Ee<te;Ee++){const Ce=ve[Ee];Dt[Ee]=ae(Ce,Ee)}return Dt},re=(ve,ae)=>{for(let te=0,Dt=ve.length;te<Dt;te++){const Ee=ve[te];ae(Ee,te)}},En=(ve,ae,te)=>{for(let Dt=0,Ee=ve.length;Dt<Ee;Dt++){const Ce=ve[Dt];if(ae(Ce,Dt))return dt.some(Ce);if(te(Ce,Dt))break}return dt.none()},Vo=(ve,ae)=>En(ve,ae,qn),je=ve=>{const ae=[];for(let te=0,Dt=ve.length;te<Dt;++te){if(!vn(ve[te]))throw new Error("Arr.flatten item "+te+" was not an array, input: "+ve);Fo.apply(ae,ve[te])}return ae},G=(ve,ae)=>je(nn(ve,ae)),St=ve=>{let ae=ve;return{get:()=>ae,set:Ee=>{ae=Ee}}},ro=(ve,ae,te=0,Dt)=>{const Ee=ve.indexOf(ae,te);return Ee!==-1?ts(Dt)?!0:Ee+ae.length<=Dt:!1},pn=String.fromCodePoint,xe=(ve,ae)=>{let te=null;const Dt=()=>{zt(te)||(clearTimeout(te),te=null)};return{cancel:Dt,throttle:(...Ce)=>{Dt(),te=setTimeout(()=>{te=null,ve.apply(null,Ce)},ae)}}};var le=tinymce.util.Tools.resolve("tinymce.util.Tools");const vs=ve=>ae=>ae.options.get(ve),qe=ve=>{const ae=ve.options.register,te=Dt=>Fn(Dt)||vn(Dt);ae("charmap",{processor:te}),ae("charmap_append",{processor:te})},rt=vs("charmap"),k=vs("charmap_append"),ho=le.isArray,tt="User Defined",No=()=>[{name:"Currency",characters:[[36,"dollar sign"],[162,"cent sign"],[8364,"euro sign"],[163,"pound sign"],[165,"yen sign"],[164,"currency sign"],[8352,"euro-currency sign"],[8353,"colon sign"],[8354,"cruzeiro sign"],[8355,"french franc sign"],[8356,"lira sign"],[8357,"mill sign"],[8358,"naira sign"],[8359,"peseta sign"],[8360,"rupee sign"],[8361,"won sign"],[8362,"new sheqel sign"],[8363,"dong sign"],[8365,"kip sign"],[8366,"tugrik sign"],[8367,"drachma sign"],[8368,"german penny symbol"],[8369,"peso sign"],[8370,"guarani sign"],[8371,"austral sign"],[8372,"hryvnia sign"],[8373,"cedi sign"],[8374,"livre tournois sign"],[8375,"spesmilo sign"],[8376,"tenge sign"],[8377,"indian rupee sign"],[8378,"turkish lira sign"],[8379,"nordic mark sign"],[8380,"manat sign"],[8381,"ruble sign"],[20870,"yen character"],[20803,"yuan character"],[22291,"yuan character, in hong kong and taiwan"],[22278,"yen/yuan character variant one"]]},{name:"Text",characters:[[169,"copyright sign"],[174,"registered sign"],[8482,"trade mark sign"],[8240,"per mille sign"],[181,"micro sign"],[183,"middle dot"],[8226,"bullet"],[8230,"three dot leader"],[8242,"minutes / feet"],[8243,"seconds / inches"],[167,"section sign"],[182,"paragraph sign"],[223,"sharp s / ess-zed"]]},{name:"Quotations",characters:[[8249,"single left-pointing angle quotation mark"],[8250,"single right-pointing angle quotation mark"],[171,"left pointing guillemet"],[187,"right pointing guillemet"],[8216,"left single quotation mark"],[8217,"right single quotation mark"],[8220,"left double quotation mark"],[8221,"right double quotation mark"],[8218,"single low-9 quotation mark"],[8222,"double low-9 quotation mark"],[60,"less-than sign"],[62,"greater-than sign"],[8804,"less-than or equal to"],[8805,"greater-than or equal to"],[8211,"en dash"],[8212,"em dash"],[175,"macron"],[8254,"overline"],[164,"currency sign"],[166,"broken bar"],[168,"diaeresis"],[161,"inverted exclamation mark"],[191,"turned question mark"],[710,"circumflex accent"],[732,"small tilde"],[176,"degree sign"],[8722,"minus sign"],[177,"plus-minus sign"],[247,"division sign"],[8260,"fraction slash"],[215,"multiplication sign"],[185,"superscript one"],[178,"superscript two"],[179,"superscript three"],[188,"fraction one quarter"],[189,"fraction one half"],[190,"fraction three quarters"]]},{name:"Mathematical",characters:[[402,"function / florin"],[8747,"integral"],[8721,"n-ary sumation"],[8734,"infinity"],[8730,"square root"],[8764,"similar to"],[8773,"approximately equal to"],[8776,"almost equal to"],[8800,"not equal to"],[8801,"identical to"],[8712,"element of"],[8713,"not an element of"],[8715,"contains as member"],[8719,"n-ary product"],[8743,"logical and"],[8744,"logical or"],[172,"not sign"],[8745,"intersection"],[8746,"union"],[8706,"partial differential"],[8704,"for all"],[8707,"there exists"],[8709,"diameter"],[8711,"backward difference"],[8727,"asterisk operator"],[8733,"proportional to"],[8736,"angle"]]},{name:"Extended Latin",characters:[[192,"A - grave"],[193,"A - acute"],[194,"A - circumflex"],[195,"A - tilde"],[196,"A - diaeresis"],[197,"A - ring above"],[256,"A - macron"],[198,"ligature AE"],[199,"C - cedilla"],[200,"E - grave"],[201,"E - acute"],[202,"E - circumflex"],[203,"E - diaeresis"],[274,"E - macron"],[204,"I - grave"],[205,"I - acute"],[206,"I - circumflex"],[207,"I - diaeresis"],[298,"I - macron"],[208,"ETH"],[209,"N - tilde"],[210,"O - grave"],[211,"O - acute"],[212,"O - circumflex"],[213,"O - tilde"],[214,"O - diaeresis"],[216,"O - slash"],[332,"O - macron"],[338,"ligature OE"],[352,"S - caron"],[217,"U - grave"],[218,"U - acute"],[219,"U - circumflex"],[220,"U - diaeresis"],[362,"U - macron"],[221,"Y - acute"],[376,"Y - diaeresis"],[562,"Y - macron"],[222,"THORN"],[224,"a - grave"],[225,"a - acute"],[226,"a - circumflex"],[227,"a - tilde"],[228,"a - diaeresis"],[229,"a - ring above"],[257,"a - macron"],[230,"ligature ae"],[231,"c - cedilla"],[232,"e - grave"],[233,"e - acute"],[234,"e - circumflex"],[235,"e - diaeresis"],[275,"e - macron"],[236,"i - grave"],[237,"i - acute"],[238,"i - circumflex"],[239,"i - diaeresis"],[299,"i - macron"],[240,"eth"],[241,"n - tilde"],[242,"o - grave"],[243,"o - acute"],[244,"o - circumflex"],[245,"o - tilde"],[246,"o - diaeresis"],[248,"o slash"],[333,"o macron"],[339,"ligature oe"],[353,"s - caron"],[249,"u - grave"],[250,"u - acute"],[251,"u - circumflex"],[252,"u - diaeresis"],[363,"u - macron"],[253,"y - acute"],[254,"thorn"],[255,"y - diaeresis"],[563,"y - macron"],[913,"Alpha"],[914,"Beta"],[915,"Gamma"],[916,"Delta"],[917,"Epsilon"],[918,"Zeta"],[919,"Eta"],[920,"Theta"],[921,"Iota"],[922,"Kappa"],[923,"Lambda"],[924,"Mu"],[925,"Nu"],[926,"Xi"],[927,"Omicron"],[928,"Pi"],[929,"Rho"],[931,"Sigma"],[932,"Tau"],[933,"Upsilon"],[934,"Phi"],[935,"Chi"],[936,"Psi"],[937,"Omega"],[945,"alpha"],[946,"beta"],[947,"gamma"],[948,"delta"],[949,"epsilon"],[950,"zeta"],[951,"eta"],[952,"theta"],[953,"iota"],[954,"kappa"],[955,"lambda"],[956,"mu"],[957,"nu"],[958,"xi"],[959,"omicron"],[960,"pi"],[961,"rho"],[962,"final sigma"],[963,"sigma"],[964,"tau"],[965,"upsilon"],[966,"phi"],[967,"chi"],[968,"psi"],[969,"omega"]]},{name:"Symbols",characters:[[8501,"alef symbol"],[982,"pi symbol"],[8476,"real part symbol"],[978,"upsilon - hook symbol"],[8472,"Weierstrass p"],[8465,"imaginary part"]]},{name:"Arrows",characters:[[8592,"leftwards arrow"],[8593,"upwards arrow"],[8594,"rightwards arrow"],[8595,"downwards arrow"],[8596,"left right arrow"],[8629,"carriage return"],[8656,"leftwards double arrow"],[8657,"upwards double arrow"],[8658,"rightwards double arrow"],[8659,"downwards double arrow"],[8660,"left right double arrow"],[8756,"therefore"],[8834,"subset of"],[8835,"superset of"],[8836,"not a subset of"],[8838,"subset of or equal to"],[8839,"superset of or equal to"],[8853,"circled plus"],[8855,"circled times"],[8869,"perpendicular"],[8901,"dot operator"],[8968,"left ceiling"],[8969,"right ceiling"],[8970,"left floor"],[8971,"right floor"],[9001,"left-pointing angle bracket"],[9002,"right-pointing angle bracket"],[9674,"lozenge"],[9824,"black spade suit"],[9827,"black club suit"],[9829,"black heart suit"],[9830,"black diamond suit"],[8194,"en space"],[8195,"em space"],[8201,"thin space"],[8204,"zero width non-joiner"],[8205,"zero width joiner"],[8206,"left-to-right mark"],[8207,"right-to-left mark"]]}],ln=ve=>le.grep(ve,ae=>ho(ae)&&ae.length===2),He=ve=>ho(ve)?ln(ve):typeof ve=="function"?ve():[],Je=(ve,ae)=>{const te=rt(ve);te&&(ae=[{name:tt,characters:He(te)}]);const Dt=k(ve);if(Dt){const Ee=le.grep(ae,Ce=>Ce.name===tt);return Ee.length?(Ee[0].characters=[...Ee[0].characters,...He(Dt)],ae):ae.concat({name:tt,characters:He(Dt)})}return ae},Bt=ve=>{const ae=Je(ve,No());return ae.length>1?[{name:"All",characters:G(ae,te=>te.characters)}].concat(ae):ae},Be=ve=>({getCharMap:()=>Bt(ve),insertChar:Dt=>{bs(ve,Dt)}}),xt=(ve,ae,te)=>ro(pn(ve).toLowerCase(),te)?!0:ro(ae.toLowerCase(),te)||ro(ae.toLowerCase().replace(/\s+/g,""),te),Ae=(ve,ae)=>{const te=[],Dt=ae.toLowerCase();return re(ve.characters,Ee=>{xt(Ee[0],Ee[1],Dt)&&te.push(Ee)}),nn(te,Ee=>({text:Ee[1],value:pn(Ee[0]),icon:pn(Ee[0])}))},Ve="pattern",F=(ve,ae)=>{const te=()=>[{label:"Search",type:"input",name:Ve},{type:"collection",name:"results"}],Dt=()=>nn(ae,zn=>({title:zn.name,name:zn.name,items:te()})),Ee=()=>({type:"panel",items:te()}),Ce=()=>({type:"tabpanel",tabs:Dt()}),_t=ae.length===1?St(tt):St("All"),bn=(zn,ns)=>{Vo(ae,ko=>ko.name===_t.get()).each(ko=>{const mo=Ae(ko,ns);zn.setData({results:mo})})},et=xe(zn=>{const ns=zn.getData().pattern;bn(zn,ns)},40),Xt=ae.length===1?Ee():Ce(),oo={pattern:"",results:Ae(ae[0],"")},vo={title:"Special Character",size:"normal",body:Xt,buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:oo,onAction:(zn,ns)=>{ns.name==="results"&&(bs(ve,ns.value),zn.close())},onTabChange:(zn,ns)=>{_t.set(ns.newTabName),et.throttle(zn)},onChange:(zn,ns)=>{ns.name===Ve&&et.throttle(zn)}};ve.windowManager.open(vo).focus(Ve)},Fs=(ve,ae)=>{ve.addCommand("mceShowCharmap",()=>{F(ve,ae)})},jn=(ve,ae)=>{ve.ui.registry.addAutocompleter("charmap",{trigger:":",columns:"auto",minChars:2,fetch:(te,Dt)=>new Promise((Ee,Ce)=>{Ee(Ae(ae,te))}),onAction:(te,Dt,Ee)=>{ve.selection.setRng(Dt),ve.insertContent(Ee),te.hide()}})},Xn=ve=>ae=>{const te=()=>{ae.setEnabled(ve.selection.isEditable())};return ve.on("NodeChange",te),te(),()=>{ve.off("NodeChange",te)}},co=ve=>{const ae=()=>ve.execCommand("mceShowCharmap");ve.ui.registry.addButton("charmap",{icon:"insert-character",tooltip:"Special character",onAction:ae,onSetup:Xn(ve)}),ve.ui.registry.addMenuItem("charmap",{icon:"insert-character",text:"Special character...",onAction:ae,onSetup:Xn(ve)})};var ms=()=>{Ko.add("charmap",ve=>{qe(ve);const ae=Bt(ve);return Fs(ve,ae),co(ve),jn(ve,ae[0]),Be(ve)})};ms()})();(function(){var Ko=tinymce.util.Tools.resolve("tinymce.PluginManager");const Yo=Ue=>Ot=>typeof Ot===Ue,jo=(Ue=>Ot=>Ue===Ot)(void 0),as=Ue=>Ue==null,ds=Ue=>!as(Ue),ls=Yo("function"),Nt=Ue=>()=>Ue,vn=Ue=>Ue,zt=Nt(!1),Dr=class Dr{constructor(Ot,an){Xe(this,"tag");Xe(this,"value");this.tag=Ot,this.value=an}static some(Ot){return new Dr(!0,Ot)}static none(){return Dr.singletonNone}fold(Ot,an){return this.tag?an(this.value):Ot()}isSome(){return this.tag}isNone(){return!this.tag}map(Ot){return this.tag?Dr.some(Ot(this.value)):Dr.none()}bind(Ot){return this.tag?Ot(this.value):Dr.none()}exists(Ot){return this.tag&&Ot(this.value)}forall(Ot){return!this.tag||Ot(this.value)}filter(Ot){return!this.tag||Ot(this.value)?this:Dr.none()}getOr(Ot){return this.tag?this.value:Ot}or(Ot){return this.tag?this:Ot}getOrThunk(Ot){return this.tag?this.value:Ot()}orThunk(Ot){return this.tag?this:Ot()}getOrDie(Ot){if(this.tag)return this.value;throw new Error(Ot??"Called getOrDie on None")}static from(Ot){return ds(Ot)?Dr.some(Ot):Dr.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Ot){this.tag&&Ot(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};Xe(Dr,"singletonNone",new Dr(!1));let ts=Dr;const Go=Array.prototype.indexOf,cn=(Ue,Ot)=>Go.call(Ue,Ot),Fn=(Ue,Ot)=>cn(Ue,Ot)>-1,Eo=(Ue,Ot)=>{for(let an=0,tn=Ue.length;an<tn;an++){const dn=Ue[an];if(Ot(dn,an))return!0}return!1},qn=(Ue,Ot)=>{const an=Ue.length,tn=new Array(an);for(let dn=0;dn<an;dn++){const Jt=Ue[dn];tn[dn]=Ot(Jt,dn)}return tn},dt=(Ue,Ot,an)=>{for(let tn=0,dn=Ue.length;tn<dn;tn++){const Jt=Ue[tn];if(Ot(Jt,tn))return ts.some(Jt);if(an(Jt,tn))break}return ts.none()},Fo=(Ue,Ot)=>dt(Ue,Ot,zt),nn=(Ue,Ot)=>{for(let an=0;an<Ue.length;an++){const tn=Ot(Ue[an],an);if(tn.isSome())return tn}return ts.none()},re=(Ue,Ot)=>{const an=[],tn=ls(Ot)?dn=>Eo(an,Jt=>Ot(Jt,dn)):dn=>Fn(an,dn);for(let dn=0,Jt=Ue.length;dn<Jt;dn++){const lo=Ue[dn];tn(lo)||an.push(lo)}return an},En=Object.keys,Vo=(Ue,Ot)=>{const an=En(Ue);for(let tn=0,dn=an.length;tn<dn;tn++){const Jt=an[tn],lo=Ue[Jt];Ot(lo,Jt)}},je=(Ue,Ot)=>{const an=[];return Vo(Ue,(tn,dn)=>{an.push(Ot(tn,dn))}),an},G=Ue=>je(Ue,vn),St=(Ue,Ot,an=0,tn)=>{const dn=Ue.indexOf(Ot,an);return dn!==-1?jo(tn)?!0:dn+Ot.length<=tn:!1},ro=Ue=>{let Ot=!1,an;return(...tn)=>(Ot||(Ot=!0,an=Ue.apply(null,tn)),an)},pn=(Ue,Ot,an,tn)=>{const dn=Ue.isiOS()&&/ipad/i.test(an)===!0,Jt=Ue.isiOS()&&!dn,lo=Ue.isiOS()||Ue.isAndroid(),zr=lo||tn("(pointer:coarse)"),Vr=dn||!Jt&&lo&&tn("(min-device-width:768px)"),dc=Jt||lo&&!Vr,Yt=Ot.isSafari()&&Ue.isiOS()&&/safari/i.test(an)===!1,Or=!dc&&!Vr&&!Yt;return{isiPad:Nt(dn),isiPhone:Nt(Jt),isTablet:Nt(Vr),isPhone:Nt(dc),isTouch:Nt(zr),isAndroid:Ue.isAndroid,isiOS:Ue.isiOS,isWebView:Nt(Yt),isDesktop:Nt(Or)}},xe=(Ue,Ot)=>{for(let an=0;an<Ue.length;an++){const tn=Ue[an];if(tn.test(Ot))return tn}},le=(Ue,Ot)=>{const an=xe(Ue,Ot);if(!an)return{major:0,minor:0};const tn=dn=>Number(Ot.replace(an,"$"+dn));return rt(tn(1),tn(2))},vs=(Ue,Ot)=>{const an=String(Ot).toLowerCase();return Ue.length===0?qe():le(Ue,an)},qe=()=>rt(0,0),rt=(Ue,Ot)=>({major:Ue,minor:Ot}),k={nu:rt,detect:vs,unknown:qe},ho=(Ue,Ot)=>nn(Ot.brands,an=>{const tn=an.brand.toLowerCase();return Fo(Ue,dn=>{var Jt;return tn===((Jt=dn.brand)==null?void 0:Jt.toLowerCase())}).map(dn=>({current:dn.name,version:k.nu(parseInt(an.version,10),0)}))}),tt=(Ue,Ot)=>{const an=String(Ot).toLowerCase();return Fo(Ue,tn=>tn.search(an))},No=(Ue,Ot)=>tt(Ue,Ot).map(an=>{const tn=k.detect(an.versionRegexes,Ot);return{current:an.name,version:tn}}),ln=(Ue,Ot)=>tt(Ue,Ot).map(an=>{const tn=k.detect(an.versionRegexes,Ot);return{current:an.name,version:tn}}),He=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Je=Ue=>Ot=>St(Ot,Ue),Bt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:Ue=>St(Ue,"edge/")&&St(Ue,"chrome")&&St(Ue,"safari")&&St(Ue,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,He],search:Ue=>St(Ue,"chrome")&&!St(Ue,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:Ue=>St(Ue,"msie")||St(Ue,"trident")},{name:"Opera",versionRegexes:[He,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Je("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Je("firefox")},{name:"Safari",versionRegexes:[He,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:Ue=>(St(Ue,"safari")||St(Ue,"mobile/"))&&St(Ue,"applewebkit")}],Be=[{name:"Windows",search:Je("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:Ue=>St(Ue,"iphone")||St(Ue,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Je("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Je("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Je("linux"),versionRegexes:[]},{name:"Solaris",search:Je("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Je("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Je("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],xt={browsers:Nt(Bt),oses:Nt(Be)},Ae="Edge",Ve="Chromium",F="IE",Fs="Opera",jn="Firefox",Xn="Safari",co=()=>ms({current:void 0,version:k.unknown()}),ms=Ue=>{const Ot=Ue.current,an=Ue.version,tn=dn=>()=>Ot===dn;return{current:Ot,version:an,isEdge:tn(Ae),isChromium:tn(Ve),isIE:tn(F),isOpera:tn(Fs),isFirefox:tn(jn),isSafari:tn(Xn)}},De={unknown:co,nu:ms},ve="Windows",ae="iOS",te="Android",Dt="Linux",Ee="macOS",Ce="Solaris",_t="FreeBSD",bn="ChromeOS",$e=()=>et({current:void 0,version:k.unknown()}),et=Ue=>{const Ot=Ue.current,an=Ue.version,tn=dn=>()=>Ot===dn;return{current:Ot,version:an,isWindows:tn(ve),isiOS:tn(ae),isAndroid:tn(te),isMacOS:tn(Ee),isLinux:tn(Dt),isSolaris:tn(Ce),isFreeBSD:tn(_t),isChromeOS:tn(bn)}},Xt={unknown:$e,nu:et},vo={detect:(Ue,Ot,an)=>{const tn=xt.browsers(),dn=xt.oses(),Jt=Ot.bind(Vr=>ho(tn,Vr)).orThunk(()=>No(tn,Ue)).fold(De.unknown,De.nu),lo=ln(dn,Ue).fold(Xt.unknown,Xt.nu),zr=pn(lo,Jt,Ue,an);return{browser:Jt,os:lo,deviceType:zr}}},Lo=Ue=>window.matchMedia(Ue).matches;let zn=ro(()=>vo.detect(window.navigator.userAgent,ts.from(window.navigator.userAgentData),Lo));const ns=()=>zn(),ko=()=>ns().os.isMacOS(),mo=()=>ns().os.isiOS(),Ns=()=>{const Ue=ko()||mo();return`<script>(${(an=>{document.addEventListener("click",tn=>{for(let dn=tn.target;dn;dn=dn.parentNode)if(dn.nodeName==="A"){const lo=dn.getAttribute("href");if(lo&&lo.startsWith("#")){tn.preventDefault();const Vr=document.getElementById(lo.substring(1));Vr&&Vr.scrollIntoView({behavior:"smooth"});return}(an?tn.metaKey:tn.ctrlKey&&!tn.altKey)||tn.preventDefault()}},!1)}).toString()})(${Ue})<\/script>`};var Ls=tinymce.util.Tools.resolve("tinymce.dom.ScriptLoader"),Uo=tinymce.util.Tools.resolve("tinymce.util.Tools");const Wo=Ue=>Ot=>Ot.options.get(Ue),Js=Wo("content_style"),Xo=Wo("content_css_cors"),Os=Wo("body_class"),Hr=Wo("body_id"),on=Ue=>{const Ot=re(G(Ue.schema.getComponentUrls()));return qn(Ot,an=>{const tn=je(Ls.ScriptLoader.getScriptAttributes(an),(dn,Jt)=>` ${Ue.dom.encode(Jt)}="${Ue.dom.encode(dn)}"`);return`<script src="${Ue.dom.encode(an)}"${tn.join("")}><\/script>`}).join("")},So=Ue=>{let Ot="";const an=Ue.dom.encode,tn=Js(Ue)??"";Ot+=`<base href="${an(Ue.documentBaseURI.getURI())}">`;const dn=Xo(Ue)?' crossorigin="anonymous"':"";Uo.each(Ue.contentCSS,Yt=>{Ot+='<link type="text/css" rel="stylesheet" href="'+an(Ue.documentBaseURI.toAbsolute(Yt))+'"'+dn+">"}),tn&&(Ot+='<style type="text/css">'+tn+"</style>"),Ot+=on(Ue);const Jt=Hr(Ue),lo=Os(Ue),zr=Ue.getBody().dir,Vr=zr?' dir="'+an(zr)+'"':"";return"<!DOCTYPE html><html><head>"+Ot+'</head><body id="'+an(Jt)+'" class="mce-content-body '+an(lo)+'"'+Vr+">"+Ue.getContent()+Ns()+"</body></html>"},yo=Ue=>{const Ot=So(Ue);Ue.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0,transparent:!1}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:Ot}}).focus("close")},Nc=Ue=>{Ue.addCommand("mcePreview",()=>{yo(Ue)})},nc=Ue=>{const Ot=()=>Ue.execCommand("mcePreview");Ue.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:Ot,context:"any"}),Ue.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:Ot,context:"any"})};var qt=()=>{Ko.add("preview",Ue=>{Nc(Ue),nc(Ue)})};qt()})();(function(){var Ko=tinymce.util.Tools.resolve("tinymce.PluginManager"),Yo=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),bs=tinymce.util.Tools.resolve("tinymce.util.Tools");const jo=qe=>rt=>rt.options.get(qe),as=qe=>{const rt=qe.options.register;rt("allow_html_in_named_anchor",{processor:"boolean",default:!1})},ds=jo("allow_html_in_named_anchor"),ls="a:not([href])",Nt=qe=>!qe,vn=qe=>qe.getAttribute("id")||qe.getAttribute("name")||"",zt=qe=>qe.nodeName.toLowerCase()==="a",ts=qe=>zt(qe)&&!qe.getAttribute("href")&&vn(qe)!=="",Go=qe=>ts(qe)&&!qe.firstChild,cn=qe=>{const rt=qe.dom;Yo(rt).walk(qe.selection.getRng(),k=>{bs.each(k,ho=>{Go(ho)&&rt.remove(ho,!1)})})},Fn=qe=>/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(qe),Eo=qe=>qe.dom.getParent(qe.selection.getStart(),ls),qn=qe=>{const rt=Eo(qe);return rt?vn(rt):""},dt=(qe,rt)=>{qe.undoManager.transact(()=>{ds(qe)||qe.selection.collapse(!0),qe.selection.isCollapsed()?qe.insertContent(qe.dom.createHTML("a",{id:rt})):(cn(qe),qe.formatter.remove("namedAnchor",void 0,void 0,!0),qe.formatter.apply("namedAnchor",{value:rt}),qe.addVisual())})},Fo=(qe,rt,k)=>{k.removeAttribute("name"),k.id=rt,qe.addVisual(),qe.undoManager.add()},nn=(qe,rt)=>{const k=Eo(qe);k?Fo(qe,rt,k):dt(qe,rt),qe.focus()},re=(qe,rt)=>Fn(rt)?(nn(qe,rt),!0):(qe.windowManager.alert("ID should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),!1),En=qe=>{const rt=qn(qe);qe.windowManager.open({title:"Anchor",size:"normal",body:{type:"panel",items:[{name:"id",type:"input",label:"ID",placeholder:"example"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{id:rt},onSubmit:k=>{re(qe,k.getData().id)&&k.close()}})},Vo=qe=>{qe.addCommand("mceAnchor",()=>{En(qe)})},je=qe=>Nt(qe.attr("href"))&&!Nt(qe.attr("id")||qe.attr("name")),G=qe=>je(qe)&&!qe.firstChild,St=qe=>rt=>{for(let k=0;k<rt.length;k++){const ho=rt[k];G(ho)&&ho.attr("contenteditable",qe)}},ro=qe=>{qe.on("PreInit",()=>{qe.parser.addNodeFilter("a",St("false")),qe.serializer.addNodeFilter("a",St(null))})},pn=qe=>{qe.formatter.register("namedAnchor",{inline:"a",selector:ls,remove:"all",split:!0,deep:!0,attributes:{id:"%value"},onmatch:(rt,k,ho)=>ts(rt)})},xe=qe=>rt=>{const k=()=>{rt.setEnabled(qe.selection.isEditable())};return qe.on("NodeChange",k),k(),()=>{qe.off("NodeChange",k)}},le=qe=>{const rt=()=>qe.execCommand("mceAnchor");qe.ui.registry.addToggleButton("anchor",{icon:"bookmark",tooltip:"Anchor",onAction:rt,onSetup:k=>{const ho=qe.selection.selectorChangedWithUnbind("a:not([href])",k.setActive).unbind,tt=xe(qe)(k);return()=>{ho(),tt()}}}),qe.ui.registry.addMenuItem("anchor",{icon:"bookmark",text:"Anchor...",onAction:rt,onSetup:xe(qe)})};var vs=()=>{Ko.add("anchor",qe=>{as(qe),ro(qe),Vo(qe),le(qe),qe.on("PreInit",()=>{pn(qe)})})};vs()})();(function(){const Ko=(ue,fe,Qe)=>{var ht;return Qe(ue,fe.prototype)?!0:((ht=ue.constructor)==null?void 0:ht.name)===fe.name},Yo=ue=>{const fe=typeof ue;return ue===null?"null":fe==="object"&&Array.isArray(ue)?"array":fe==="object"&&Ko(ue,String,(Qe,ht)=>ht.isPrototypeOf(Qe))?"string":fe},bs=ue=>fe=>Yo(fe)===ue,jo=ue=>fe=>typeof fe===ue,as=bs("string"),ds=bs("array"),ls=jo("boolean"),Nt=ue=>ue==null,vn=ue=>!Nt(ue),zt=jo("number"),ts=()=>{},Go=ue=>()=>ue,cn=Go(!0),nt=class nt{constructor(fe,Qe){Xe(this,"tag");Xe(this,"value");this.tag=fe,this.value=Qe}static some(fe){return new nt(!0,fe)}static none(){return nt.singletonNone}fold(fe,Qe){return this.tag?Qe(this.value):fe()}isSome(){return this.tag}isNone(){return!this.tag}map(fe){return this.tag?nt.some(fe(this.value)):nt.none()}bind(fe){return this.tag?fe(this.value):nt.none()}exists(fe){return this.tag&&fe(this.value)}forall(fe){return!this.tag||fe(this.value)}filter(fe){return!this.tag||fe(this.value)?this:nt.none()}getOr(fe){return this.tag?this.value:fe}or(fe){return this.tag?this:fe}getOrThunk(fe){return this.tag?this.value:fe()}orThunk(fe){return this.tag?this:fe()}getOrDie(fe){if(this.tag)return this.value;throw new Error(fe??"Called getOrDie on None")}static from(fe){return vn(fe)?nt.some(fe):nt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(fe){this.tag&&fe(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};Xe(nt,"singletonNone",new nt(!1));let Fn=nt;const Eo=Array.prototype.slice,qn=Array.prototype.push,dt=(ue,fe)=>{const Qe=ue.length,ht=new Array(Qe);for(let It=0;It<Qe;It++){const An=ue[It];ht[It]=fe(An,It)}return ht},Fo=(ue,fe)=>{for(let Qe=0,ht=ue.length;Qe<ht;Qe++){const It=ue[Qe];fe(It,Qe)}},nn=(ue,fe)=>{for(let Qe=ue.length-1;Qe>=0;Qe--){const ht=ue[Qe];fe(ht,Qe)}},re=(ue,fe)=>{if(ue.length===0)return[];{let Qe=fe(ue[0]);const ht=[];let It=[];for(let An=0,Qt=ue.length;An<Qt;An++){const Cn=ue[An],Co=fe(Cn);Co!==Qe&&(ht.push(It),It=[]),Qe=Co,It.push(Cn)}return It.length!==0&&ht.push(It),ht}},En=(ue,fe,Qe)=>(Fo(ue,(ht,It)=>{Qe=fe(Qe,ht,It)}),Qe),Vo=ue=>{const fe=[];for(let Qe=0,ht=ue.length;Qe<ht;++Qe){if(!ds(ue[Qe]))throw new Error("Arr.flatten item "+Qe+" was not an array, input: "+ue);qn.apply(fe,ue[Qe])}return fe},je=(ue,fe)=>Vo(dt(ue,fe)),G=(ue,fe)=>{const Qe=Eo.call(ue,0);return Qe.sort(fe),Qe},St=Object.hasOwnProperty,ro=(ue,fe)=>St.call(ue,fe),pn=ue=>{let fe=ue;return{get:()=>fe,set:It=>{fe=It}}},xe=ue=>{const fe=pn(Fn.none()),Qe=()=>fe.get().each(ue);return{clear:()=>{Qe(),fe.set(Fn.none())},isSet:()=>fe.get().isSome(),get:()=>fe.get(),set:Cn=>{Qe(),fe.set(Fn.some(Cn))}}},le=()=>{const ue=xe(ts);return{...ue,on:Qe=>ue.get().each(Qe)}};var vs=tinymce.util.Tools.resolve("tinymce.PluginManager");const k=Go("[~№|!-*+-\\/:;?@\\[-`{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]");var ho=tinymce.util.Tools.resolve("tinymce.Env"),tt=tinymce.util.Tools.resolve("tinymce.util.Tools");const No=(ue,fe)=>{const ht=(fe||document).createElement("div");if(ht.innerHTML=ue,!ht.hasChildNodes()||ht.childNodes.length>1){const It="HTML does not have a single root node";throw console.error(It,ue),new Error(It)}return Je(ht.childNodes[0])},ln=(ue,fe)=>{const ht=(fe||document).createElement(ue);return Je(ht)},He=(ue,fe)=>{const ht=(fe||document).createTextNode(ue);return Je(ht)},Je=ue=>{if(ue==null)throw new Error("Node cannot be null or undefined");return{dom:ue}},Be={fromHtml:No,fromTag:ln,fromText:He,fromDom:Je,fromPoint:(ue,fe,Qe)=>Fn.from(ue.dom.elementFromPoint(fe,Qe)).map(Je)},xt=9,Ae=11,Ve=1,F=3,Fs=ue=>ue.nodeType!==Ve&&ue.nodeType!==xt&&ue.nodeType!==Ae||ue.childElementCount===0,jn=(ue,fe)=>{const Qe=fe===void 0?document:fe.dom;return Fs(Qe)?[]:dt(Qe.querySelectorAll(ue),Be.fromDom)},Xn=(ue,fe,Qe)=>(ue.compareDocumentPosition(fe)&Qe)!==0,co=(ue,fe)=>Xn(ue,fe,Node.DOCUMENT_POSITION_PRECEDING),ms=ue=>ue.dom.nodeType,ve=(ue=>fe=>ms(fe)===ue)(F),ae=ue=>Fn.from(ue.dom.parentNode).map(Be.fromDom),te=ue=>dt(ue.dom.childNodes,Be.fromDom),Dt=(ue,fe)=>({element:ue,offset:fe}),Ee=(ue,fe)=>{const Qe=te(ue);return Qe.length>0&&fe<Qe.length?Dt(Qe[fe],0):Dt(ue,fe)},Ce=(ue,fe)=>{ae(ue).each(ht=>{ht.dom.insertBefore(fe.dom,ue.dom)})},_t=(ue,fe)=>{ue.dom.appendChild(fe.dom)},bn=(ue,fe)=>{Ce(ue,fe),_t(fe,ue)},$e=(ue,fe,Qe)=>{if(as(Qe)||ls(Qe)||zt(Qe))ue.setAttribute(fe,Qe+"");else throw console.error("Invalid call to Attribute.set. Key ",fe,":: Value ",Qe,":: Element ",ue),new Error("Attribute value was not simple")},et=(ue,fe,Qe)=>{$e(ue.dom,fe,Qe)},oo=((ue,fe)=>{const Qe=An=>{if(!ue(An))throw new Error("Can only get "+fe+" value of a "+fe+" node");return ht(An).getOr("")},ht=An=>ue(An)?Fn.from(An.dom.nodeValue):Fn.none();return{get:Qe,getOption:ht,set:(An,Qt)=>{if(!ue(An))throw new Error("Can only set raw "+fe+" value of a "+fe+" node");An.dom.nodeValue=Qt}}})(ve,"text"),vo=ue=>oo.get(ue),Lo=(ue,fe)=>jn(fe,ue);var zn=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const ns=(ue,fe)=>ue.isBlock(fe)||ro(ue.schema.getVoidElements(),fe.nodeName),ko=(ue,fe)=>!ue.isEditable(fe),mo=(ue,fe)=>ue.getContentEditable(fe)==="true"&&fe.parentNode&&!ue.isEditable(fe.parentNode),Ns=(ue,fe)=>!ue.isBlock(fe)&&ro(ue.schema.getWhitespaceElements(),fe.nodeName),Ls=(ue,fe)=>ns(ue,fe)||ko(ue,fe)||Ns(ue,fe)||mo(ue,fe),Uo=ue=>ue.nodeType===3,Wo=()=>({sOffset:0,fOffset:0,elements:[]}),Js=(ue,fe)=>Ee(Be.fromDom(ue),fe),Xo=(ue,fe,Qe,ht,It,An=!0)=>{let Qt=An?fe(!1):Qe;for(;Qt;){const Cn=ko(ue,Qt);if(Cn||Ns(ue,Qt)){if(Cn?ht.cef(Qt):ht.boundary(Qt))break;Qt=fe(!0);continue}else if(ns(ue,Qt)){if(ht.boundary(Qt))break}else Uo(Qt)&&ht.text(Qt);if(Qt===It)break;Qt=fe(!1)}},Os=(ue,fe,Qe,ht,It)=>{if(Ls(ue,Qe))return;const An=ue.getParent(ht,ue.isBlock)??ue.getRoot(),Qt=new zn(Qe,An),Cn=It?Qt.next.bind(Qt):Qt.prev.bind(Qt);Xo(ue,Cn,Qe,{boundary:cn,cef:cn,text:Co=>{It?fe.fOffset+=Co.length:fe.sOffset+=Co.length,fe.elements.push(Be.fromDom(Co))}})},Hr=(ue,fe,Qe,ht,It,An=!0)=>{const Qt=new zn(Qe,fe),Cn=[];let Co=Wo();Os(ue,Co,Qe,fe,!1);const To=()=>(Co.elements.length>0&&(Cn.push(Co),Co=Wo()),!1);return Xo(ue,Qt.next.bind(Qt),Qe,{boundary:To,cef:Po=>(To(),It&&Cn.push(...It.cef(Po)),!1),text:Po=>{Co.elements.push(Be.fromDom(Po)),It&&It.text(Po,Co)}},ht,An),ht&&Os(ue,Co,ht,fe,!0),To(),Cn},on=(ue,fe)=>{const Qe=Js(fe.startContainer,fe.startOffset),ht=Qe.element.dom,It=Js(fe.endContainer,fe.endOffset),An=It.element.dom;return Hr(ue,fe.commonAncestorContainer,ht,An,{text:(Qt,Cn)=>{Qt===An?Cn.fOffset+=Qt.length-It.offset:Qt===ht&&(Cn.sOffset+=Qe.offset)},cef:Qt=>{const Cn=je(Lo(Be.fromDom(Qt),"*[contenteditable=true]"),Co=>{const To=Co.dom;return Hr(ue,To,To)});return G(Cn,(Co,To)=>co(Co.elements[0].dom,To.elements[0].dom)?1:-1)}},!1)},So=(ue,fe)=>fe.collapsed?[]:on(ue,fe),yo=(ue,fe)=>{const Qe=ue.createRng();return Qe.selectNode(fe),So(ue,Qe)},Nc=(ue,fe)=>je(fe,Qe=>yo(ue,Qe)),nc=(ue,fe,Qe=0,ht=ue.length)=>{const It=fe.regex;It.lastIndex=Qe;const An=[];let Qt;for(;Qt=It.exec(ue);){const Cn=Qt[fe.matchIndex],Co=Qt.index+Qt[0].indexOf(Cn),To=Co+Cn.length;if(To>ht)break;An.push({start:Co,finish:To}),It.lastIndex=To}return An},qt=(ue,fe)=>{const Qe=En(ue,(ht,It)=>{const An=vo(It),Qt=ht.last,Cn=Qt+An.length,Co=je(fe,(To,Po)=>To.start<Cn&&To.finish>Qt?[{element:It,start:Math.max(Qt,To.start)-Qt,finish:Math.min(Cn,To.finish)-Qt,matchId:Po}]:[]);return{results:ht.results.concat(Co),last:Cn}},{results:[],last:0}).results;return re(Qe,ht=>ht.matchId)},Dr=(ue,fe)=>je(fe,Qe=>{const ht=Qe.elements,It=dt(ht,vo).join(""),An=nc(It,ue,Qe.sOffset,It.length-Qe.fOffset);return qt(ht,An)}),Ue=(ue,fe)=>{nn(ue,(Qe,ht)=>{nn(Qe,It=>{const An=Be.fromDom(fe.cloneNode(!1));et(An,"data-mce-index",ht);const Qt=It.element.dom;if(Qt.length===It.finish&&It.start===0)bn(It.element,An);else{Qt.length!==It.finish&&Qt.splitText(It.finish);const Cn=Qt.splitText(It.start);bn(Be.fromDom(Cn),An)}})})},Ot=(ue,fe,Qe,ht)=>{const It=yo(ue,Qe),An=Dr(fe,It);return Ue(An,ht),An.length},an=(ue,fe,Qe,ht)=>{const It=Qe.getBookmark(),An=ue.select("td[data-mce-selected],th[data-mce-selected]"),Qt=An.length>0?Nc(ue,An):So(ue,Qe.getRng()),Cn=Dr(fe,Qt);return Ue(Cn,ht),Qe.moveToBookmark(It),Cn.length},tn=ue=>ue.getAttribute("data-mce-index"),dn=(ue,fe,Qe,ht)=>{const It=ue.dom.create("span",{"data-mce-bogus":1});It.className="mce-match-marker";const An=ue.getBody();return me(ue,fe,!1),ht?an(ue.dom,Qe,ue.selection,It):Ot(ue.dom,Qe,An,It)},Jt=ue=>{var Qe;const fe=ue.parentNode;ue.firstChild&&fe.insertBefore(ue.firstChild,ue),(Qe=ue.parentNode)==null||Qe.removeChild(ue)},lo=(ue,fe)=>{const Qe=[],ht=tt.toArray(ue.getBody().getElementsByTagName("span"));if(ht.length)for(let It=0;It<ht.length;It++){const An=tn(ht[It]);An===null||!An.length||An===fe.toString()&&Qe.push(ht[It])}return Qe},zr=(ue,fe,Qe)=>{const ht=fe.get();let It=ht.index;const An=ue.dom;Qe?It+1===ht.count?It=0:It++:It-1===-1?It=ht.count-1:It--,An.removeClass(lo(ue,ht.index),"mce-match-marker-selected");const Qt=lo(ue,It);return Qt.length?(An.addClass(lo(ue,It),"mce-match-marker-selected"),ue.selection.scrollIntoView(Qt[0]),It):-1},Vr=(ue,fe)=>{const Qe=fe.parentNode;ue.remove(fe),Qe&&ue.isEmpty(Qe)&&ue.remove(Qe)},dc=(ue,fe)=>{const ht="("+ue.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").replace(/\s/g,"[^\\S\\r\\n\\uFEFF]")+")";return fe?`(?:^|\\s|${k()})`+ht+`(?=$|\\s|${k()})`:ht},Yt=(ue,fe,Qe,ht,It,An)=>{const Qt=ue.selection,Cn=dc(Qe,It),Co=Qt.isForward(),To={regex:new RegExp(Cn,ht?"g":"gi"),matchIndex:1},Po=dn(ue,fe,To,An);if(ho.browser.isSafari()&&Qt.setRng(Qt.getRng(),Co),Po){const qs=zr(ue,fe,!0);fe.set({index:qs,count:Po,text:Qe,matchCase:ht,wholeWord:It,inSelection:An})}return Po},Or=(ue,fe)=>{const Qe=zr(ue,fe,!0);fe.set({...fe.get(),index:Qe})},wr=(ue,fe)=>{const Qe=zr(ue,fe,!1);fe.set({...fe.get(),index:Qe})},pi=ue=>{const fe=tn(ue);return fe!==null&&fe.length>0},_s=(ue,fe,Qe,ht,It)=>{const An=fe.get(),Qt=An.index;let Cn,Co=Qt;ht=ht!==!1;const To=ue.getBody(),Po=tt.grep(tt.toArray(To.getElementsByTagName("span")),pi);for(let qs=0;qs<Po.length;qs++){const _r=tn(Po[qs]);let bi=Cn=parseInt(_r,10);if(It||bi===An.index){for(Qe.length?(Po[qs].innerText=Qe,Jt(Po[qs])):Vr(ue.dom,Po[qs]);Po[++qs];)if(bi=parseInt(tn(Po[qs]),10),bi===Cn)Vr(ue.dom,Po[qs]);else{qs--;break}ht&&Co--}else Cn>Qt&&Po[qs].setAttribute("data-mce-index",String(Cn-1))}return fe.set({...An,count:It?0:An.count-1,index:Co}),ht?Or(ue,fe):wr(ue,fe),!It&&fe.get().count>0},me=(ue,fe,Qe)=>{let ht,It;const An=fe.get(),Qt=tt.toArray(ue.getBody().getElementsByTagName("span"));for(let Cn=0;Cn<Qt.length;Cn++){const Co=tn(Qt[Cn]);Co!==null&&Co.length&&(Co===An.index.toString()&&(ht||(ht=Qt[Cn].firstChild),It=Qt[Cn].firstChild),Jt(Qt[Cn]))}if(fe.set({...An,index:-1,count:0,text:""}),ht&&It){const Cn=ue.dom.createRng();return Cn.setStart(ht,0),Cn.setEnd(It,It.data.length),Qe!==!1&&ue.selection.setRng(Cn),Cn}else return},ne=(ue,fe)=>fe.get().count>1,Te=(ue,fe)=>fe.get().count>1,Tt=(ue,fe)=>({done:Cn=>me(ue,fe,Cn),find:(Cn,Co,To,Po=!1)=>Yt(ue,fe,Cn,Co,To,Po),next:()=>Or(ue,fe),prev:()=>wr(ue,fe),replace:(Cn,Co,To)=>_s(ue,fe,Cn,Co,To)}),Wn=(ue,fe)=>{const Qe=le();ue.undoManager.add();const ht=tt.trim(ue.selection.getContent({format:"text"})),It=fs=>{fs.setEnabled("next",ne(ue,fe)),fs.setEnabled("prev",Te(ue,fe))},An=fs=>{const gs=fs.getData(),Hs=fe.get();fe.set({...Hs,matchCase:gs.matchcase,wholeWord:gs.wholewords,inSelection:gs.inselection})},Qt=(fs,gs)=>{Fo(["replace","replaceall","prev","next"],zs=>fs.setEnabled(zs,!gs))},Cn=(fs,gs)=>{gs.redial($i(fs,gs.getData()))},Co=(fs,gs)=>{ho.browser.isSafari()&&ho.deviceType.isTouch()&&(gs==="find"||gs==="replace"||gs==="replaceall")&&fs.focus(gs)},To=fs=>{me(ue,fe,!1),Qt(fs,!0),It(fs)},Po=fs=>{const gs=fs.getData(),Hs=fe.get();if(!gs.findtext.length){To(fs);return}if(Hs.text===gs.findtext&&Hs.matchCase===gs.matchcase&&Hs.wholeWord===gs.wholewords)Or(ue,fe);else{const Aa=Yt(ue,fe,gs.findtext,gs.matchcase,gs.wholewords,gs.inselection);Aa<=0&&Cn(!0,fs),Qt(fs,Aa===0)}It(fs)},qs=fe.get(),_r={findtext:ht,replacetext:"",wholewords:qs.wholeWord,matchcase:qs.matchCase,inselection:qs.inSelection},bi=fs=>{const gs=[{type:"label",label:"Find",for:"findtext",items:[{type:"bar",items:[{type:"input",name:"findtext",maximized:!0,inputMode:"search"},{type:"button",name:"prev",text:"Previous",icon:"action-prev",enabled:!1,borderless:!0},{type:"button",name:"next",text:"Next",icon:"action-next",enabled:!1,borderless:!0}]}]},{type:"input",name:"replacetext",label:"Replace with",inputMode:"search"}];return fs&&gs.push({type:"alertbanner",level:"error",text:"Could not find the specified string.",icon:"warning"}),gs},$i=(fs,gs)=>({title:"Find and Replace",size:"normal",body:{type:"panel",items:bi(fs)},buttons:[{type:"menu",name:"options",icon:"preferences",tooltip:"Preferences",align:"start",items:[{type:"togglemenuitem",name:"matchcase",text:"Match case"},{type:"togglemenuitem",name:"wholewords",text:"Find whole words only"},{type:"togglemenuitem",name:"inselection",text:"Find in selection"}]},{type:"custom",name:"find",text:"Find",primary:!0},{type:"custom",name:"replace",text:"Replace",enabled:!1},{type:"custom",name:"replaceall",text:"Replace all",enabled:!1}],initialData:gs,onChange:(Hs,Aa)=>{fs&&Cn(!1,Hs),Aa.name==="findtext"&&fe.get().count>0&&To(Hs)},onAction:(Hs,Aa)=>{const zs=Hs.getData();switch(Aa.name){case"find":Po(Hs);break;case"replace":_s(ue,fe,zs.replacetext)?It(Hs):To(Hs);break;case"replaceall":_s(ue,fe,zs.replacetext,!0,!0),To(Hs);break;case"prev":wr(ue,fe),It(Hs);break;case"next":Or(ue,fe),It(Hs);break;case"matchcase":case"wholewords":case"inselection":Cn(!1,Hs),An(Hs),To(Hs);break}Co(Hs,Aa.name)},onSubmit:Hs=>{Po(Hs),Co(Hs,"find")},onClose:()=>{ue.focus(),me(ue,fe),ue.undoManager.add()}});Qe.set(ue.windowManager.open($i(!1,_r),{inline:"toolbar"}))},kn=(ue,fe)=>{ue.addCommand("SearchReplace",()=>{Wn(ue,fe)})},Jn=(ue,fe)=>()=>{Wn(ue,fe)},cr=(ue,fe)=>{ue.ui.registry.addMenuItem("searchreplace",{text:"Find and replace...",shortcut:"Meta+F",onAction:Jn(ue,fe),icon:"search"}),ue.ui.registry.addButton("searchreplace",{tooltip:"Find and replace",onAction:Jn(ue,fe),icon:"search",shortcut:"Meta+F"}),ue.shortcuts.add("Meta+F","",Jn(ue,fe))};var Kn=()=>{vs.add("searchreplace",ue=>{const fe=pn({index:-1,count:0,text:"",matchCase:!1,wholeWord:!1,inSelection:!1});return kn(ue,fe),cr(ue,fe),Tt(ue,fe)})};Kn()})();(function(){const Ko=cn=>{let Fn=cn;return{get:()=>Fn,set:dt=>{Fn=dt}}};var Yo=tinymce.util.Tools.resolve("tinymce.PluginManager");const bs=(cn,Fn)=>{cn.dispatch("VisualBlocks",{state:Fn})},jo=(cn,Fn,Eo)=>{cn.dom.toggleClass(cn.getBody(),"mce-visualblocks"),Eo.set(!Eo.get()),bs(cn,Eo.get())},as=(cn,Fn,Eo)=>{cn.addCommand("mceVisualBlocks",()=>{jo(cn,Fn,Eo)})},ds=cn=>Fn=>Fn.options.get(cn),ls=cn=>{const Fn=cn.options.register;Fn("visualblocks_default_state",{processor:"boolean",default:!1})},Nt=ds("visualblocks_default_state"),vn=(cn,Fn,Eo)=>{cn.on("PreviewFormats AfterPreviewFormats",qn=>{Eo.get()&&cn.dom.toggleClass(cn.getBody(),"mce-visualblocks",qn.type==="afterpreviewformats")}),cn.on("init",()=>{Nt(cn)&&jo(cn,Fn,Eo)})},zt=(cn,Fn)=>Eo=>{Eo.setActive(Fn.get());const qn=dt=>Eo.setActive(dt.state);return cn.on("VisualBlocks",qn),()=>cn.off("VisualBlocks",qn)},ts=(cn,Fn)=>{const Eo=()=>cn.execCommand("mceVisualBlocks");cn.ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:Eo,onSetup:zt(cn,Fn),context:"any"}),cn.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:Eo,onSetup:zt(cn,Fn),context:"any"})};var Go=()=>{Yo.add("visualblocks",(cn,Fn)=>{ls(cn);const Eo=Ko(!1);as(cn,Fn,Eo),ts(cn,Eo),vn(cn,Fn,Eo)})};Go()})();(function(){var Ko=tinymce.util.Tools.resolve("tinymce.PluginManager");const Yo=(Nt,vn)=>{Nt.focus(),Nt.undoManager.transact(()=>{Nt.setContent(vn)}),Nt.selection.setCursorLocation(),Nt.nodeChanged()},bs=Nt=>Nt.getContent({source_view:!0}),jo=Nt=>{const vn=bs(Nt);Nt.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code",spellcheck:!1}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:vn},onSubmit:zt=>{Yo(Nt,zt.getData().code),zt.close()}})},as=Nt=>{Nt.addCommand("mceCodeEditor",()=>{jo(Nt)})},ds=Nt=>{const vn=()=>Nt.execCommand("mceCodeEditor");Nt.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:vn}),Nt.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:vn})};var ls=()=>{Ko.add("code",Nt=>(as(Nt),ds(Nt),{}))};ls()})();(function(){const Ko=(Z,oe,Oe)=>{var st;return Oe(Z,oe.prototype)?!0:((st=Z.constructor)==null?void 0:st.name)===oe.name},Yo=Z=>{const oe=typeof Z;return Z===null?"null":oe==="object"&&Array.isArray(Z)?"array":oe==="object"&&Ko(Z,String,(Oe,st)=>st.isPrototypeOf(Oe))?"string":oe},bs=Z=>oe=>Yo(oe)===Z,jo=Z=>oe=>typeof oe===Z,as=Z=>oe=>Z===oe,ds=bs("string"),ls=bs("object"),Nt=bs("array"),vn=as(null),zt=jo("boolean"),ts=as(void 0),Go=Z=>Z==null,cn=Z=>!Go(Z),Fn=jo("function"),Eo=jo("number"),qn=()=>{},dt=(Z,oe)=>(...Oe)=>Z(oe.apply(null,Oe)),Fo=(Z,oe)=>Oe=>Z(oe(Oe)),nn=Z=>()=>Z;function re(Z,...oe){return(...Oe)=>{const st=oe.concat(Oe);return Z.apply(null,st)}}const En=nn(!1),Vo=nn(!0),Ha=class Ha{constructor(oe,Oe){Xe(this,"tag");Xe(this,"value");this.tag=oe,this.value=Oe}static some(oe){return new Ha(!0,oe)}static none(){return Ha.singletonNone}fold(oe,Oe){return this.tag?Oe(this.value):oe()}isSome(){return this.tag}isNone(){return!this.tag}map(oe){return this.tag?Ha.some(oe(this.value)):Ha.none()}bind(oe){return this.tag?oe(this.value):Ha.none()}exists(oe){return this.tag&&oe(this.value)}forall(oe){return!this.tag||oe(this.value)}filter(oe){return!this.tag||oe(this.value)?this:Ha.none()}getOr(oe){return this.tag?this.value:oe}or(oe){return this.tag?this:oe}getOrThunk(oe){return this.tag?this.value:oe()}orThunk(oe){return this.tag?this:oe()}getOrDie(oe){if(this.tag)return this.value;throw new Error(oe??"Called getOrDie on None")}static from(oe){return cn(oe)?Ha.some(oe):Ha.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(oe){this.tag&&oe(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};Xe(Ha,"singletonNone",new Ha(!1));let je=Ha;const G=Array.prototype.push,St=(Z,oe)=>{const Oe=Z.length,st=new Array(Oe);for(let wn=0;wn<Oe;wn++){const Qo=Z[wn];st[wn]=oe(Qo,wn)}return st},ro=(Z,oe)=>{for(let Oe=0,st=Z.length;Oe<st;Oe++){const wn=Z[Oe];oe(wn,Oe)}},pn=(Z,oe)=>{const Oe=[];for(let st=0,wn=Z.length;st<wn;st++){const Qo=Z[st];oe(Qo,st)&&Oe.push(Qo)}return Oe},xe=(Z,oe,Oe)=>{for(let st=0,wn=Z.length;st<wn;st++){const Qo=Z[st];if(oe(Qo,st))return je.some(Qo);if(Oe(Qo,st))break}return je.none()},le=(Z,oe)=>xe(Z,oe,En),vs=Z=>{const oe=[];for(let Oe=0,st=Z.length;Oe<st;++Oe){if(!Nt(Z[Oe]))throw new Error("Arr.flatten item "+Oe+" was not an array, input: "+Z);G.apply(oe,Z[Oe])}return oe},qe=(Z,oe)=>vs(St(Z,oe)),rt=(Z,oe)=>oe>=0&&oe<Z.length?je.some(Z[oe]):je.none(),k=Z=>rt(Z,0),ho=(Z,oe)=>{for(let Oe=0;Oe<Z.length;Oe++){const st=oe(Z[Oe],Oe);if(st.isSome())return st}return je.none()},tt=Object.keys,No=(Z,oe)=>{const Oe=tt(Z);for(let st=0,wn=Oe.length;st<wn;st++){const Qo=Oe[st],Pr=Z[Qo];oe(Pr,Qo)}},ln=Z=>{let oe=Z;return{get:()=>oe,set:wn=>{oe=wn}}},He=typeof window<"u"?window:Function("return this;")(),Je=(Z,oe,Oe)=>Z.isSome()&&oe.isSome()?je.some(Oe(Z.getOrDie(),oe.getOrDie())):je.none(),Bt=(Z,oe)=>{let Oe=oe??He;for(let st=0;st<Z.length&&Oe!==void 0&&Oe!==null;++st)Oe=Oe[Z[st]];return Oe},Be=(Z,oe)=>{const Oe=Z.split(".");return Bt(Oe,oe)},xt=Z=>{const oe=ln(je.none()),Oe=()=>oe.get().each(Z);return{clear:()=>{Oe(),oe.set(je.none())},isSet:()=>oe.get().isSome(),get:()=>oe.get(),set:Jc=>{Oe(),oe.set(je.some(Jc))}}},Ae=()=>xt(Z=>Z.unbind()),Ve=()=>{const Z=xt(qn);return{...Z,on:Oe=>Z.get().each(Oe)}},F=(Z,oe,Oe=0,st)=>{const wn=Z.indexOf(oe,Oe);return wn!==-1?ts(st)?!0:wn+oe.length<=st:!1},Fs=(Z,oe)=>{let Oe=null;return{cancel:()=>{vn(Oe)||(clearTimeout(Oe),Oe=null)},throttle:(...Qo)=>{vn(Oe)&&(Oe=setTimeout(()=>{Oe=null,Z.apply(null,Qo)},oe))}}},jn=Z=>{let oe=!1,Oe;return(...st)=>(oe||(oe=!0,Oe=Z.apply(null,st)),Oe)};var Xn=tinymce.util.Tools.resolve("tinymce.PluginManager");const co=Z=>({isFullscreen:()=>Z.get()!==null}),ms=(Z,oe)=>{const st=(oe||document).createElement("div");if(st.innerHTML=Z,!st.hasChildNodes()||st.childNodes.length>1){const wn="HTML does not have a single root node";throw console.error(wn,Z),new Error(wn)}return ae(st.childNodes[0])},De=(Z,oe)=>{const st=(oe||document).createElement(Z);return ae(st)},ve=(Z,oe)=>{const st=(oe||document).createTextNode(Z);return ae(st)},ae=Z=>{if(Z==null)throw new Error("Node cannot be null or undefined");return{dom:Z}},Dt={fromHtml:ms,fromTag:De,fromText:ve,fromDom:ae,fromPoint:(Z,oe,Oe)=>je.from(Z.dom.elementFromPoint(oe,Oe)).map(ae)},Ee=9,Ce=11,_t=1,bn=3,$e=(Z,oe)=>{const Oe=Z.dom;if(Oe.nodeType!==_t)return!1;{const st=Oe;if(st.matches!==void 0)return st.matches(oe);if(st.msMatchesSelector!==void 0)return st.msMatchesSelector(oe);if(st.webkitMatchesSelector!==void 0)return st.webkitMatchesSelector(oe);if(st.mozMatchesSelector!==void 0)return st.mozMatchesSelector(oe);throw new Error("Browser lacks native selectors")}},et=Z=>Z.nodeType!==_t&&Z.nodeType!==Ee&&Z.nodeType!==Ce||Z.childElementCount===0,Xt=(Z,oe)=>{const Oe=document;return et(Oe)?[]:St(Oe.querySelectorAll(Z),Dt.fromDom)},oo=(Z,oe)=>Z.dom===oe.dom,vo=(Z,oe,Oe,st)=>{const wn=Z.isiOS()&&/ipad/i.test(Oe)===!0,Qo=Z.isiOS()&&!wn,Pr=Z.isiOS()||Z.isAndroid(),Jc=Pr||st("(pointer:coarse)"),yc=wn||!Qo&&Pr&&st("(min-device-width:768px)"),yi=Qo||Pr&&!yc,Hl=oe.isSafari()&&Z.isiOS()&&/safari/i.test(Oe)===!1,Qc=!yi&&!yc&&!Hl;return{isiPad:nn(wn),isiPhone:nn(Qo),isTablet:nn(yc),isPhone:nn(yi),isTouch:nn(Jc),isAndroid:Z.isAndroid,isiOS:Z.isiOS,isWebView:nn(Hl),isDesktop:nn(Qc)}},Lo=(Z,oe)=>{for(let Oe=0;Oe<Z.length;Oe++){const st=Z[Oe];if(st.test(oe))return st}},zn=(Z,oe)=>{const Oe=Lo(Z,oe);if(!Oe)return{major:0,minor:0};const st=wn=>Number(oe.replace(Oe,"$"+wn));return mo(st(1),st(2))},ns=(Z,oe)=>{const Oe=String(oe).toLowerCase();return Z.length===0?ko():zn(Z,Oe)},ko=()=>mo(0,0),mo=(Z,oe)=>({major:Z,minor:oe}),Ns={nu:mo,detect:ns,unknown:ko},Ls=(Z,oe)=>ho(oe.brands,Oe=>{const st=Oe.brand.toLowerCase();return le(Z,wn=>{var Qo;return st===((Qo=wn.brand)==null?void 0:Qo.toLowerCase())}).map(wn=>({current:wn.name,version:Ns.nu(parseInt(Oe.version,10),0)}))}),Uo=(Z,oe)=>{const Oe=String(oe).toLowerCase();return le(Z,st=>st.search(Oe))},Wo=(Z,oe)=>Uo(Z,oe).map(Oe=>{const st=Ns.detect(Oe.versionRegexes,oe);return{current:Oe.name,version:st}}),Js=(Z,oe)=>Uo(Z,oe).map(Oe=>{const st=Ns.detect(Oe.versionRegexes,oe);return{current:Oe.name,version:st}}),Xo=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Os=Z=>oe=>F(oe,Z),Hr=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:Z=>F(Z,"edge/")&&F(Z,"chrome")&&F(Z,"safari")&&F(Z,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Xo],search:Z=>F(Z,"chrome")&&!F(Z,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:Z=>F(Z,"msie")||F(Z,"trident")},{name:"Opera",versionRegexes:[Xo,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Os("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Os("firefox")},{name:"Safari",versionRegexes:[Xo,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:Z=>(F(Z,"safari")||F(Z,"mobile/"))&&F(Z,"applewebkit")}],on=[{name:"Windows",search:Os("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:Z=>F(Z,"iphone")||F(Z,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Os("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Os("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Os("linux"),versionRegexes:[]},{name:"Solaris",search:Os("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Os("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Os("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],So={browsers:nn(Hr),oses:nn(on)},yo="Edge",Nc="Chromium",nc="IE",qt="Opera",Dr="Firefox",Ue="Safari",Ot=()=>an({current:void 0,version:Ns.unknown()}),an=Z=>{const oe=Z.current,Oe=Z.version,st=wn=>()=>oe===wn;return{current:oe,version:Oe,isEdge:st(yo),isChromium:st(Nc),isIE:st(nc),isOpera:st(qt),isFirefox:st(Dr),isSafari:st(Ue)}},tn={unknown:Ot,nu:an},dn="Windows",Jt="iOS",lo="Android",zr="Linux",Vr="macOS",dc="Solaris",Yt="FreeBSD",Or="ChromeOS",wr=()=>pi({current:void 0,version:Ns.unknown()}),pi=Z=>{const oe=Z.current,Oe=Z.version,st=wn=>()=>oe===wn;return{current:oe,version:Oe,isWindows:st(dn),isiOS:st(Jt),isAndroid:st(lo),isMacOS:st(Vr),isLinux:st(zr),isSolaris:st(dc),isFreeBSD:st(Yt),isChromeOS:st(Or)}},_s={unknown:wr,nu:pi},ne={detect:(Z,oe,Oe)=>{const st=So.browsers(),wn=So.oses(),Qo=oe.bind(yc=>Ls(st,yc)).orThunk(()=>Wo(st,Z)).fold(tn.unknown,tn.nu),Pr=Js(wn,Z).fold(_s.unknown,_s.nu),Jc=vo(Pr,Qo,Z,Oe);return{browser:Qo,os:Pr,deviceType:Jc}}},Te=Z=>window.matchMedia(Z).matches;let Tt=jn(()=>ne.detect(window.navigator.userAgent,je.from(window.navigator.userAgentData),Te));const Wn=()=>Tt(),kn=(Z,oe)=>Be(Z,oe),Jn=(Z,oe)=>{const Oe=kn(Z,oe);if(Oe==null)throw new Error(Z+" not available on this browser");return Oe},cr=Object.getPrototypeOf,Kn=Z=>Jn("HTMLElement",Z),nt=Z=>{const oe=Be("ownerDocument.defaultView",Z);return ls(Z)&&(Kn(oe).prototype.isPrototypeOf(Z)||/^HTML\w*Element$/.test(cr(Z).constructor.name))},ue=Z=>Z.dom.nodeType,fe=Z=>oe=>ue(oe)===Z,Qe=Z=>ht(Z)&&nt(Z.dom),ht=fe(_t),It=fe(bn),An=fe(Ce),Qt=Z=>Dt.fromDom(Z.dom.ownerDocument),Cn=Z=>je.from(Z.dom.parentNode).map(Dt.fromDom),Co=(Z,oe)=>{const Oe=Fn(oe)?oe:En;let st=Z.dom;const wn=[];for(;st.parentNode!==null&&st.parentNode!==void 0;){const Qo=st.parentNode,Pr=Dt.fromDom(Qo);if(wn.push(Pr),Oe(Pr)===!0)break;st=Qo}return wn},To=Z=>{const oe=Oe=>pn(Oe,st=>!oo(Z,st));return Cn(Z).map(qs).map(oe).getOr([])},Po=Z=>je.from(Z.dom.nextSibling).map(Dt.fromDom),qs=Z=>St(Z.dom.childNodes,Dt.fromDom),_r=Z=>An(Z)&&cn(Z.dom.host),bi=Z=>Dt.fromDom(Z.dom.getRootNode()),$i=Z=>{const oe=bi(Z);return _r(oe)?je.some(oe):je.none()},fs=Z=>Dt.fromDom(Z.dom.host),gs=Z=>{if(cn(Z.target)){const oe=Dt.fromDom(Z.target);if(ht(oe)&&Hs(oe)&&Z.composed&&Z.composedPath){const Oe=Z.composedPath();if(Oe)return k(Oe)}}return je.from(Z.target)},Hs=Z=>cn(Z.dom.shadowRoot),Aa=(Z,oe,Oe,st,wn,Qo,Pr)=>({target:Z,x:oe,y:Oe,stop:st,prevent:wn,kill:Qo,raw:Pr}),zs=Z=>{const oe=Dt.fromDom(gs(Z).getOr(Z.target)),Oe=()=>Z.stopPropagation(),st=()=>Z.preventDefault(),wn=dt(st,Oe);return Aa(oe,Z.clientX,Z.clientY,Oe,st,wn,Z)},Ln=(Z,oe)=>Oe=>{Z(Oe)&&oe(zs(Oe))},vc=(Z,oe,Oe,st,wn)=>{const Qo=Ln(Oe,st);return Z.dom.addEventListener(oe,Qo,wn),{unbind:re(dr,Z,oe,Qo,wn)}},Ac=(Z,oe,Oe,st)=>vc(Z,oe,Oe,st,!1),dr=(Z,oe,Oe,st)=>{Z.dom.removeEventListener(oe,Oe,st)},ed=Vo,mu=(Z,oe,Oe)=>Ac(Z,oe,ed,Oe),Qs=(Z,oe,Oe)=>{if(ds(Oe)||zt(Oe)||Eo(Oe))Z.setAttribute(oe,Oe+"");else throw console.error("Invalid call to Attribute.set. Key ",oe,":: Value ",Oe,":: Element ",Z),new Error("Attribute value was not simple")},vi=(Z,oe,Oe)=>{Qs(Z.dom,oe,Oe)},ei=(Z,oe)=>{const Oe=Z.dom.getAttribute(oe);return Oe===null?void 0:Oe},td=(Z,oe)=>{Z.dom.removeAttribute(oe)},Pt=Z=>Z.style!==void 0&&Fn(Z.style.getPropertyValue),La=Z=>{const oe=It(Z)?Z.dom.parentNode:Z.dom;if(oe==null||oe.ownerDocument===null)return!1;const Oe=oe.ownerDocument;return $i(Dt.fromDom(oe)).fold(()=>Oe.body.contains(oe),Fo(La,fs))},Pc=Z=>{const oe=Z.dom.body;if(oe==null)throw new Error("Body is not available yet");return Dt.fromDom(oe)},Yc=(Z,oe,Oe)=>{if(!ds(Oe))throw console.error("Invalid call to CSS.set. Property ",oe,":: Value ",Oe,":: Element ",Z),new Error("CSS value must be a string: "+Oe);Pt(Z)&&Z.style.setProperty(oe,Oe)},mr=(Z,oe,Oe)=>{const st=Z.dom;Yc(st,oe,Oe)},fu=(Z,oe)=>{const Oe=Z.dom;No(oe,(st,wn)=>{Yc(Oe,wn,st)})},Xc=(Z,oe)=>{const Oe=Z.dom,wn=window.getComputedStyle(Oe).getPropertyValue(oe);return wn===""&&!La(Z)?ka(Oe,oe):wn},ka=(Z,oe)=>Pt(Z)?Z.style.getPropertyValue(oe):"",Pl=(Z,oe)=>({left:Z,top:oe,translate:(st,wn)=>Pl(Z+st,oe+wn)}),nd=Pl,Ii=Z=>{const oe=Z!==void 0?Z.dom:document,Oe=oe.body.scrollLeft||oe.documentElement.scrollLeft,st=oe.body.scrollTop||oe.documentElement.scrollTop;return nd(Oe,st)},gu=Z=>Z.dom.classList!==void 0,$l=(Z,oe)=>gu(Z)&&Z.dom.classList.contains(oe),Li=(Z,oe,Oe)=>pn(Co(Z,Oe),oe),Il=(Z,oe)=>pn(To(Z),oe),At=Z=>Xt(Z),dl=(Z,oe,Oe)=>Li(Z,st=>$e(st,oe),Oe),od=(Z,oe)=>Il(Z,Oe=>$e(Oe,oe)),Nr=Z=>{const oe=Z===void 0?window:Z;return Wn().browser.isFirefox()?je.none():je.from(oe.visualViewport)},H=(Z,oe,Oe,st)=>({x:Z,y:oe,width:Oe,height:st,right:Z+Oe,bottom:oe+st}),ce=Z=>{const oe=Z===void 0?window:Z,Oe=oe.document,st=Ii(Dt.fromDom(Oe));return Nr(oe).fold(()=>{const wn=oe.document.documentElement,Qo=wn.clientWidth,Pr=wn.clientHeight;return H(st.left,st.top,Qo,Pr)},wn=>H(Math.max(wn.pageLeft,st.left),Math.max(wn.pageTop,st.top),wn.width,wn.height))},ye=(Z,oe,Oe)=>Nr(Oe).map(st=>{const wn=Qo=>oe(zs(Qo));return st.addEventListener(Z,wn),{unbind:()=>st.removeEventListener(Z,wn)}}).getOrThunk(()=>({unbind:qn}));var Ke=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),kt=tinymce.util.Tools.resolve("tinymce.Env");const en=(Z,oe)=>{Z.dispatch("FullscreenStateChanged",{state:oe}),Z.dispatch("ResizeEditor")},Dn=Z=>oe=>oe.options.get(Z),ar=Z=>{const oe=Z.options.register;oe("fullscreen_native",{processor:"boolean",default:!1})},Ao=Dn("fullscreen_native"),N=Z=>{const oe=Dt.fromDom(Z.getElement());return $i(oe).map(fs).getOrThunk(()=>Pc(Qt(oe)))},V=Z=>Z.fullscreenElement!==void 0?Z.fullscreenElement:Z.msFullscreenElement!==void 0?Z.msFullscreenElement:Z.webkitFullscreenElement!==void 0?Z.webkitFullscreenElement:null,se=()=>document.fullscreenElement!==void 0?"fullscreenchange":document.msFullscreenElement!==void 0?"MSFullscreenChange":document.webkitFullscreenElement!==void 0?"webkitfullscreenchange":"fullscreenchange",Pe=Z=>{const oe=Z.dom;oe.requestFullscreen?oe.requestFullscreen():oe.msRequestFullscreen?oe.msRequestFullscreen():oe.webkitRequestFullScreen&&oe.webkitRequestFullScreen()},fn=Z=>{const oe=Z.dom;oe.exitFullscreen?oe.exitFullscreen():oe.msExitFullscreen?oe.msExitFullscreen():oe.webkitCancelFullScreen&&oe.webkitCancelFullScreen()},po=Z=>Z.dom===V(Qt(Z).dom),Us="data-ephox-mobile-fullscreen-style",qr="display:none!important;",la="position:absolute!important;",Jo="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",ua="background-color:rgb(255,255,255)!important;",Ll=kt.os.isAndroid(),Hi=Z=>{const oe=Xc(Z,"background-color");return oe!==void 0&&oe!==""?"background-color:"+oe+"!important":ua},gg=(Z,oe,Oe)=>{const st=yi=>od(yi,"*:not(.tox-silver-sink)"),wn=yi=>Hl=>{const Qc=ei(Hl,"style"),Oa=Qc===void 0?"no-styles":Qc.trim();Oa!==yi&&(vi(Hl,Us,Oa),fu(Hl,Z.parseStyle(yi)))},Qo=dl(oe,"*"),Pr=qe(Qo,st),Jc=Hi(Oe);ro(Pr,wn(qr)),ro(Qo,wn(la+Jo+Jc)),wn((Ll===!0?"":la)+Jo+Jc)(oe)},Pm=Z=>{const oe=At("["+Us+"]");ro(oe,Oe=>{const st=ei(Oe,Us);st&&st!=="no-styles"?fu(Oe,Z.parseStyle(st)):td(Oe,"style"),td(Oe,Us)})},sd=Ke.DOM,Da=()=>ce(window),rd=Z=>window.scrollTo(Z.x,Z.y),vf=Nr().fold(()=>({bind:qn,unbind:qn}),Z=>{const oe=Ve(),Oe=Ae(),st=Ae(),wn=()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0},Qo=()=>{window.requestAnimationFrame(()=>{oe.on(yi=>fu(yi,{top:Z.offsetTop+"px",left:Z.offsetLeft+"px",height:Z.height+"px",width:Z.width+"px"}))})},Pr=Fs(()=>{wn(),Qo()},50);return{bind:yi=>{oe.set(yi),Pr.throttle(),Oe.set(ye("resize",Pr.throttle)),st.set(ye("scroll",Pr.throttle))},unbind:()=>{oe.on(()=>{Oe.clear(),st.clear()}),oe.clear()}}}),hg=(Z,oe)=>{const Oe=document.body,st=document.documentElement,wn=Z.getContainer(),Qo=Dt.fromDom(wn),Pr=Po(Qo).filter(wo=>Qe(wo)&&$l(wo,"tox-silver-sink")),Jc=N(Z),yc=oe.get(),yi=Dt.fromDom(Z.getBody()),Hl=kt.deviceType.isTouch(),Qc=wn.style,Oa=Z.iframeElement,$c=Oa==null?void 0:Oa.style,hu=wo=>{wo(Oe,"tox-fullscreen"),wo(st,"tox-fullscreen"),wo(wn,"tox-fullscreen"),$i(Qo).map(pu=>fs(pu).dom).each(pu=>{wo(pu,"tox-fullscreen"),wo(pu,"tox-shadowhost")})},bg=()=>{Hl&&Pm(Z.dom),hu(sd.removeClass),vf.unbind(),je.from(oe.get()).each(wo=>wo.fullscreenChangeHandler.unbind())};if(yc)yc.fullscreenChangeHandler.unbind(),Ao(Z)&&po(Jc)&&fn(Qt(Jc)),$c.width=yc.iframeWidth,$c.height=yc.iframeHeight,Qc.width=yc.containerWidth,Qc.height=yc.containerHeight,Qc.top=yc.containerTop,Qc.left=yc.containerLeft,Je(Pr,yc.sinkCssPosition,(wo,pu)=>{mr(wo,"position",pu)}),bg(),rd(yc.scrollPos),oe.set(null),en(Z,!1),Z.off("remove",bg);else{const wo=mu(Qt(Jc),se(),cd=>{Ao(Z)&&!po(Jc)&&oe.get()!==null&&hg(Z,oe)}),pu={scrollPos:Da(),containerWidth:Qc.width,containerHeight:Qc.height,containerTop:Qc.top,containerLeft:Qc.left,iframeWidth:$c.width,iframeHeight:$c.height,fullscreenChangeHandler:wo,sinkCssPosition:Pr.map(cd=>Xc(cd,"position"))};Hl&&gg(Z.dom,Qo,yi),$c.width=$c.height="100%",Qc.width=Qc.height="",hu(sd.addClass),Pr.each(cd=>{mr(cd,"position","fixed")}),vf.bind(Qo),Z.on("remove",bg),oe.set(pu),Ao(Z)&&Pe(Jc),en(Z,!0)}},pg=(Z,oe)=>{Z.addCommand("mceFullScreen",()=>{hg(Z,oe)})};var Hh=tinymce.util.Tools.resolve("tinymce.util.VK");const yf=(Z,oe)=>{Z.on("init",()=>{Z.on("keydown",Oe=>{Oe.keyCode===Hh.TAB&&!(Oe.metaKey||Oe.ctrlKey)&&oe.get()&&Oe.preventDefault()})})},zi=(Z,oe)=>Oe=>{Oe.setActive(oe.get()!==null);const st=wn=>Oe.setActive(wn.state);return Z.on("FullscreenStateChanged",st),()=>Z.off("FullscreenStateChanged",st)},zh=(Z,oe)=>{const Oe=()=>Z.execCommand("mceFullScreen");Z.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:Oe,onSetup:zi(Z,oe),context:"any"}),Z.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:Oe,onSetup:zi(Z,oe),shortcut:"Meta+Shift+F",context:"any"})};var Vh=()=>{Xn.add("fullscreen",Z=>{const oe=ln(null);return Z.inline||(ar(Z),pg(Z,oe),zh(Z,oe),yf(Z,oe),Z.addShortcut("Meta+Shift+F","","mceFullScreen")),co(oe)})};Vh()})();(function(){var Ko=tinymce.util.Tools.resolve("tinymce.PluginManager");const Yo=je=>G=>G.options.get(je),bs=je=>{const G=je.options.register;G("insertdatetime_dateformat",{processor:"string",default:je.translate("%Y-%m-%d")}),G("insertdatetime_timeformat",{processor:"string",default:je.translate("%H:%M:%S")}),G("insertdatetime_formats",{processor:"string[]",default:["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"]}),G("insertdatetime_element",{processor:"boolean",default:!1})},jo=Yo("insertdatetime_dateformat"),as=Yo("insertdatetime_timeformat"),ds=Yo("insertdatetime_formats"),ls=Yo("insertdatetime_element"),Nt=je=>{const G=ds(je);return G.length>0?G[0]:as(je)},vn="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),zt="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),ts="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Go="January February March April May June July August September October November December".split(" "),cn=(je,G)=>{if(je=""+je,je.length<G)for(let St=0;St<G-je.length;St++)je="0"+je;return je},Fn=(je,G,St=new Date)=>(G=G.replace("%D","%m/%d/%Y"),G=G.replace("%r","%I:%M:%S %p"),G=G.replace("%Y",""+St.getFullYear()),G=G.replace("%y",""+St.getYear()),G=G.replace("%m",cn(St.getMonth()+1,2)),G=G.replace("%d",cn(St.getDate(),2)),G=G.replace("%H",""+cn(St.getHours(),2)),G=G.replace("%M",""+cn(St.getMinutes(),2)),G=G.replace("%S",""+cn(St.getSeconds(),2)),G=G.replace("%I",""+((St.getHours()+11)%12+1)),G=G.replace("%p",St.getHours()<12?"AM":"PM"),G=G.replace("%B",""+je.translate(Go[St.getMonth()])),G=G.replace("%b",""+je.translate(ts[St.getMonth()])),G=G.replace("%A",""+je.translate(zt[St.getDay()])),G=G.replace("%a",""+je.translate(vn[St.getDay()])),G=G.replace("%%","%"),G),Eo=(je,G,St,ro)=>{const pn=je.dom.create("time",{datetime:St},ro);je.dom.replace(pn,G),je.selection.select(pn,!0),je.selection.collapse(!1)},qn=(je,G)=>{if(ls(je)&&je.selection.isEditable()){const St=Fn(je,G);let ro;/%[HMSIp]/.test(G)?ro=Fn(je,"%Y-%m-%dT%H:%M"):ro=Fn(je,"%Y-%m-%d");const pn=je.dom.getParent(je.selection.getStart(),"time");pn?Eo(je,pn,ro,St):je.insertContent('<time datetime="'+ro+'">'+St+"</time>")}else je.insertContent(Fn(je,G))},dt=je=>{je.addCommand("mceInsertDate",(G,St)=>{qn(je,St??jo(je))}),je.addCommand("mceInsertTime",(G,St)=>{qn(je,St??as(je))})},Fo=je=>{let G=je;return{get:()=>G,set:pn=>{G=pn}}};var nn=tinymce.util.Tools.resolve("tinymce.util.Tools");const re=je=>G=>{const St=()=>{G.setEnabled(je.selection.isEditable())};return je.on("NodeChange",St),St(),()=>{je.off("NodeChange",St)}},En=je=>{const G=ds(je),St=Fo(Nt(je)),ro=xe=>je.execCommand("mceInsertDate",!1,xe);je.ui.registry.addSplitButton("insertdatetime",{icon:"insert-time",tooltip:"Insert date/time",chevronTooltip:"Insert date/time menu",select:xe=>xe===St.get(),fetch:xe=>{xe(nn.map(G,le=>({type:"choiceitem",text:Fn(je,le),value:le})))},onAction:xe=>{ro(St.get())},onItemAction:(xe,le)=>{St.set(le),ro(le)},onSetup:re(je)});const pn=xe=>()=>{St.set(xe),ro(xe)};je.ui.registry.addNestedMenuItem("insertdatetime",{icon:"insert-time",text:"Date/time",getSubmenuItems:()=>nn.map(G,xe=>({type:"menuitem",text:Fn(je,xe),onAction:pn(xe)})),onSetup:re(je)})};var Vo=()=>{Ko.add("insertdatetime",je=>{bs(je),dt(je),En(je)})};Vo()})();(function(){var Ko=tinymce.util.Tools.resolve("tinymce.PluginManager");const Yo=(me,ne,Te)=>{var Tt;return Te(me,ne.prototype)?!0:((Tt=me.constructor)==null?void 0:Tt.name)===ne.name},bs=me=>{const ne=typeof me;return me===null?"null":ne==="object"&&Array.isArray(me)?"array":ne==="object"&&Yo(me,String,(Te,Tt)=>Tt.isPrototypeOf(Te))?"string":ne},jo=me=>ne=>bs(ne)===me,as=jo("string"),ds=jo("object"),ls=jo("array"),Nt=me=>me==null,vn=me=>!Nt(me),_s=class _s{constructor(ne,Te){Xe(this,"tag");Xe(this,"value");this.tag=ne,this.value=Te}static some(ne){return new _s(!0,ne)}static none(){return _s.singletonNone}fold(ne,Te){return this.tag?Te(this.value):ne()}isSome(){return this.tag}isNone(){return!this.tag}map(ne){return this.tag?_s.some(ne(this.value)):_s.none()}bind(ne){return this.tag?ne(this.value):_s.none()}exists(ne){return this.tag&&ne(this.value)}forall(ne){return!this.tag||ne(this.value)}filter(ne){return!this.tag||ne(this.value)?this:_s.none()}getOr(ne){return this.tag?this.value:ne}or(ne){return this.tag?this:ne}getOrThunk(ne){return this.tag?this.value:ne()}orThunk(ne){return this.tag?this:ne()}getOrDie(ne){if(this.tag)return this.value;throw new Error(ne??"Called getOrDie on None")}static from(ne){return vn(ne)?_s.some(ne):_s.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ne){this.tag&&ne(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};Xe(_s,"singletonNone",new _s(!1));let zt=_s;const ts=Array.prototype.push,Go=(me,ne)=>{for(let Te=0,Tt=me.length;Te<Tt;Te++){const Wn=me[Te];ne(Wn,Te)}},cn=me=>{const ne=[];for(let Te=0,Tt=me.length;Te<Tt;++Te){if(!ls(me[Te]))throw new Error("Arr.flatten item "+Te+" was not an array, input: "+me);ts.apply(ne,me[Te])}return ne},Fn=Object.keys,Eo=Object.hasOwnProperty,qn=(me,ne)=>{const Te=Fn(me);for(let Tt=0,Wn=Te.length;Tt<Wn;Tt++){const kn=Te[Tt],Jn=me[kn];ne(Jn,kn)}},dt=(me,ne)=>Fo(me,ne)?zt.from(me[ne]):zt.none(),Fo=(me,ne)=>Eo.call(me,ne),nn=me=>{let ne=me;return{get:()=>ne,set:Wn=>{ne=Wn}}},re=(me,ne,Te)=>me.length>=ne.length&&me.substr(Te,Te+ne.length)===ne,En=(me,ne)=>re(me,ne,0),Vo=me=>ne=>ne.options.get(me),je=me=>{const ne=me.options.register;ne("audio_template_callback",{processor:"function"}),ne("video_template_callback",{processor:"function"}),ne("iframe_template_callback",{processor:"function"}),ne("media_live_embeds",{processor:"boolean",default:!0}),ne("media_filter_html",{processor:"boolean",default:!0}),ne("media_url_resolver",{processor:"function"}),ne("media_alt_source",{processor:"boolean",default:!0}),ne("media_poster",{processor:"boolean",default:!0}),ne("media_dimensions",{processor:"boolean",default:!0})},G=Vo("audio_template_callback"),St=Vo("video_template_callback"),ro=Vo("iframe_template_callback"),pn=Vo("media_live_embeds"),xe=Vo("media_filter_html"),le=Vo("media_url_resolver"),vs=Vo("media_alt_source"),qe=Vo("media_poster"),rt=Vo("media_dimensions");var k=tinymce.util.Tools.resolve("tinymce.util.Tools"),ho=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),tt=tinymce.util.Tools.resolve("tinymce.html.DomParser");const No=ho.DOM,ln=me=>me.replace(/px$/,""),He=me=>{const ne=me.attr("style"),Te=ne?No.parseStyle(ne):{};return{type:"ephox-embed-iri",source:me.attr("data-ephox-embed-iri"),altsource:"",poster:"",width:dt(Te,"max-width").map(ln).getOr(""),height:dt(Te,"max-height").map(ln).getOr("")}},Je=(me,ne)=>{let Te={};const Wn=tt({validate:!1,forced_root_block:!1},ne).parse(me);for(let kn=Wn;kn;kn=kn.walk())if(kn.type===1){const Jn=kn.name;if(kn.attr("data-ephox-embed-iri")){Te=He(kn);break}else!Te.source&&Jn==="param"&&(Te.source=kn.attr("movie")),(Jn==="iframe"||Jn==="object"||Jn==="embed"||Jn==="video"||Jn==="audio")&&(Te.type||(Te.type=Jn),Te=k.extend(kn.attributes.map,Te)),Jn==="source"&&(Te.source?Te.altsource||(Te.altsource=kn.attr("src")):Te.source=kn.attr("src")),Jn==="img"&&!Te.poster&&(Te.poster=kn.attr("src"))}return Te.source=Te.source||Te.src||"",Te.altsource=Te.altsource||"",Te.poster=Te.poster||"",Te},Bt=me=>{const ne={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},Te=me.toLowerCase().split(".").pop()??"";return dt(ne,Te).getOr("")};var Be=tinymce.util.Tools.resolve("tinymce.html.Node"),xt=tinymce.util.Tools.resolve("tinymce.html.Serializer");const Ae=(me,ne={})=>tt({forced_root_block:!1,validate:!1,allow_conditional_comments:!0,...ne},me),Ve=ho.DOM,F=me=>/^[0-9.]+$/.test(me)?me+"px":me,Fs=(me,ne)=>{const Te=ne.attr("style"),Tt=Te?Ve.parseStyle(Te):{};vn(me.width)&&(Tt["max-width"]=F(me.width)),vn(me.height)&&(Tt["max-height"]=F(me.height)),ne.attr("style",Ve.serializeStyle(Tt))},jn=["source","altsource"],Xn=(me,ne,Te,Tt)=>{let Wn=0,kn=0;const Jn=Ae(Tt);Jn.addNodeFilter("source",Kn=>Wn=Kn.length);const cr=Jn.parse(me);for(let Kn=cr;Kn;Kn=Kn.walk())if(Kn.type===1){const nt=Kn.name;if(Kn.attr("data-ephox-embed-iri")){Fs(ne,Kn);break}else{switch(nt){case"video":case"object":case"embed":case"img":case"iframe":ne.height!==void 0&&ne.width!==void 0&&(Kn.attr("width",ne.width),Kn.attr("height",ne.height));break}if(Te)switch(nt){case"video":Kn.attr("poster",ne.poster),Kn.attr("src",null);for(let fe=Wn;fe<2;fe++)if(ne[jn[fe]]){const Qe=new Be("source",1);Qe.attr("src",ne[jn[fe]]),Qe.attr("type",ne[jn[fe]+"mime"]||null),Kn.append(Qe)}break;case"iframe":Kn.attr("src",ne.source);break;case"object":const ue=Kn.getAll("img").length>0;if(ne.poster&&!ue){Kn.attr("src",ne.poster);const fe=new Be("img",1);fe.attr("src",ne.poster),fe.attr("width",ne.width),fe.attr("height",ne.height),Kn.append(fe)}break;case"source":if(kn<2&&(Kn.attr("src",ne[jn[kn]]),Kn.attr("type",ne[jn[kn]+"mime"]||null),!ne[jn[kn]])){Kn.remove();continue}kn++;break;case"img":ne.poster||Kn.remove();break}}}return xt({},Tt).serialize(cr)},co=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?h=$2&title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?h=$3&title=0&amp;byline=0",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],ms=me=>{const ne=me.match(/^(https?:\/\/|www\.)(.+)$/i);return ne&&ne.length>1?ne[1]==="www."?"https://":ne[1]:"https://"},De=(me,ne)=>{const Te=ms(ne),Tt=me.regex.exec(ne);let Wn=Te+me.url;if(vn(Tt))for(let kn=0;kn<Tt.length;kn++)Wn=Wn.replace("$"+kn,()=>Tt[kn]?Tt[kn]:"");return Wn.replace(/\?$/,"")},ve=me=>{const ne=co.filter(Te=>Te.regex.test(me));return ne.length>0?k.extend({},ne[0],{url:De(ne[0],me)}):null},ae=(me,ne)=>{if(ne)return ne(me);{const Te=me.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+me.source+'" width="'+me.width+'" height="'+me.height+'"'+Te+"></iframe>"}},te=me=>{let ne='<object data="'+me.source+'" width="'+me.width+'" height="'+me.height+'" type="application/x-shockwave-flash">';return me.poster&&(ne+='<img src="'+me.poster+'" width="'+me.width+'" height="'+me.height+'" />'),ne+="</object>",ne},Dt=(me,ne)=>ne?ne(me):'<audio controls="controls" src="'+me.source+'">'+(me.altsource?`
<source src="`+me.altsource+'"'+(me.altsourcemime?' type="'+me.altsourcemime+'"':"")+` />
`:"")+"</audio>",Ee=(me,ne)=>ne?ne(me):'<video width="'+me.width+'" height="'+me.height+'"'+(me.poster?' poster="'+me.poster+'"':"")+` controls="controls">
<source src="`+me.source+'"'+(me.sourcemime?' type="'+me.sourcemime+'"':"")+` />
`+(me.altsource?'<source src="'+me.altsource+'"'+(me.altsourcemime?' type="'+me.altsourcemime+'"':"")+` />
`:"")+"</video>",Ce=(me,ne)=>{const Te=k.extend({},ne);if(!Te.source&&(k.extend(Te,Je(Te.embed??"",me.schema)),!Te.source))return"";Te.altsource||(Te.altsource=""),Te.poster||(Te.poster=""),Te.source=me.convertURL(Te.source,"source"),Te.altsource=me.convertURL(Te.altsource,"source"),Te.sourcemime=Bt(Te.source),Te.altsourcemime=Bt(Te.altsource),Te.poster=me.convertURL(Te.poster,"poster");const Tt=ve(Te.source);if(Tt&&(Te.source=Tt.url,Te.type=Tt.type,Te.allowfullscreen=Tt.allowFullscreen,Te.width=Te.width||String(Tt.w),Te.height=Te.height||String(Tt.h)),Te.embed)return Xn(Te.embed,Te,!0,me.schema);{const Wn=G(me),kn=St(me),Jn=ro(me);return Te.width=Te.width||"300",Te.height=Te.height||"150",k.each(Te,(cr,Kn)=>{Te[Kn]=me.dom.encode(""+cr)}),Te.type==="iframe"?ae(Te,Jn):Te.sourcemime==="application/x-shockwave-flash"?te(Te):Te.sourcemime.indexOf("audio")!==-1?Dt(Te,Wn):Ee(Te,kn)}},_t=me=>me.hasAttribute("data-mce-object")||me.hasAttribute("data-ephox-embed-iri"),bn=me=>{me.on("mousedown",ne=>{const Te=me.dom.getParent(ne.target,".mce-preview-object");Te&&me.dom.getAttrib(Te,"data-mce-selected")==="2"&&ne.stopImmediatePropagation()}),me.on("click keyup touchend",()=>{const ne=me.selection.getNode();ne&&me.dom.hasClass(ne,"mce-preview-object")&&me.dom.getAttrib(ne,"data-mce-selected")&&ne.setAttribute("data-mce-selected","2")}),me.on("ObjectResized",ne=>{const Te=ne.target;if(Te.getAttribute("data-mce-object")){let Tt=Te.getAttribute("data-mce-html");Tt&&(Tt=unescape(Tt),Te.setAttribute("data-mce-html",escape(Xn(Tt,{width:String(ne.width),height:String(ne.height)},!1,me.schema))))}})},$e={},et=(me,ne,Te)=>new Promise((Tt,Wn)=>{const kn=Jn=>(Jn.html&&($e[me.source]=Jn),Tt({url:me.source,html:Jn.html?Jn.html:ne(me)}));$e[me.source]?kn($e[me.source]):Te({url:me.source}).then(kn).catch(Wn)}),Xt=(me,ne)=>Promise.resolve({html:ne(me),url:me.source}),oo=me=>ne=>Ce(me,ne),vo=(me,ne)=>{const Te=le(me);return Te?et(ne,oo(me),Te):Xt(ne,oo(me))},Lo=me=>Fo($e,me),zn=(me,ne)=>dt(ne,me).bind(Te=>dt(Te,"meta")),ns=(me,ne,Te)=>Tt=>{const Wn=()=>dt(me,Tt),kn=()=>dt(ne,Tt),Jn=nt=>dt(nt,"value").bind(ue=>ue.length>0?zt.some(ue):zt.none()),cr=()=>Wn().bind(nt=>ds(nt)?Jn(nt).orThunk(kn):kn().orThunk(()=>zt.from(nt))),Kn=()=>kn().orThunk(()=>Wn().bind(nt=>ds(nt)?Jn(nt):zt.from(nt)));return{[Tt]:(Tt===Te?cr():Kn()).getOr("")}},ko=(me,ne)=>{const Te={};return dt(me,"dimensions").each(Tt=>{Go(["width","height"],Wn=>{dt(ne,Wn).orThunk(()=>dt(Tt,Wn)).each(kn=>Te[Wn]=kn)})}),Te},mo=(me,ne)=>{const Te=ne&&ne!=="dimensions"?zn(ne,me).getOr({}):{},Tt=ns(me,Te,ne);return{...Tt("source"),...Tt("altsource"),...Tt("poster"),...Tt("embed"),...ko(me,Te)}},Ns=me=>{const ne={...me,source:{value:dt(me,"source").getOr("")},altsource:{value:dt(me,"altsource").getOr("")},poster:{value:dt(me,"poster").getOr("")}};return Go(["width","height"],Te=>{dt(me,Te).each(Tt=>{const Wn=ne.dimensions||{};Wn[Te]=Tt,ne.dimensions=Wn})}),ne},Ls=me=>ne=>{const Te=ne&&ne.msg?"Media embed handler error: "+ne.msg:"Media embed handler threw unknown error.";me.notificationManager.open({type:"error",text:Te})},Uo=me=>{const ne=me.selection.getNode(),Te=_t(ne)?me.serializer.serialize(ne,{selection:!0}):"",Tt=Je(Te,me.schema),kn=(()=>{if(Os(Tt.source,Tt.type)){const Jn=me.dom.getRect(ne);return{width:Jn.w.toString().replace(/px$/,""),height:Jn.h.toString().replace(/px$/,"")}}else return{}})();return{embed:Te,...Tt,...kn}},Wo=(me,ne)=>Te=>{if(as(Te.url)&&Te.url.trim().length>0){const Tt=Te.html,kn={...Je(Tt,ne.schema),source:Te.url,embed:Tt};me.setData(Ns(kn))}},Js=(me,ne)=>{const Te=me.dom.select("*[data-mce-object]");for(let Tt=0;Tt<ne.length;Tt++)for(let Wn=Te.length-1;Wn>=0;Wn--)ne[Tt]===Te[Wn]&&Te.splice(Wn,1);me.selection.select(Te[0])},Xo=(me,ne)=>{const Te=me.dom.select("*[data-mce-object]");me.insertContent(ne),Js(me,Te),me.nodeChanged()},Os=(me,ne)=>vn(ne)&&ne==="ephox-embed-iri"&&vn(ve(me)),Hr=(me,ne)=>((Tt,Wn)=>Tt.width!==Wn.width||Tt.height!==Wn.height)(me,ne)&&Os(ne.source,me.type),on=(me,ne,Te)=>{ne.embed=Hr(me,ne)&&rt(Te)?Ce(Te,{...ne,embed:""}):Xn(ne.embed??"",ne,!1,Te.schema),ne.embed&&(me.source===ne.source||Lo(ne.source))?Xo(Te,ne.embed):vo(Te,ne).then(Tt=>{Xo(Te,Tt.html)}).catch(Ls(Te))},So=me=>{const ne=Uo(me),Te=nn(ne),Tt=Ns(ne),Wn=(Cn,Co)=>{const To=mo(Co.getData(),"source");Cn.source!==To.source&&(Wo(Qt,me)({url:To.source,html:""}),vo(me,To).then(Wo(Qt,me)).catch(Ls(me)))},kn=Cn=>{const Co=mo(Cn.getData()),To=Je(Co.embed??"",me.schema);Cn.setData(Ns(To))},Jn=(Cn,Co,To)=>{const Po=mo(Cn.getData(),Co),qs=Hr(To,Po)&&rt(me)?{...Po,embed:""}:Po,_r=Ce(me,qs);Cn.setData(Ns({...qs,embed:_r}))},cr=[{name:"source",type:"urlinput",filetype:"media",label:"Source",picker_text:"Browse files"}],Kn=rt(me)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],nt={title:"General",name:"general",items:cn([cr,Kn])},fe={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},Qe=[];vs(me)&&Qe.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),qe(me)&&Qe.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});const ht={title:"Advanced",name:"advanced",items:Qe},It=[nt,fe];Qe.length>0&&It.push(ht);const An={type:"tabpanel",tabs:It},Qt=me.windowManager.open({title:"Insert/Edit Media",size:"normal",body:An,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:Cn=>{const Co=mo(Cn.getData());on(Te.get(),Co,me),Cn.close()},onChange:(Cn,Co)=>{switch(Co.name){case"source":Wn(Te.get(),Cn);break;case"embed":kn(Cn);break;case"dimensions":case"altsource":case"poster":Jn(Cn,Co.name,Te.get());break}Te.set(mo(Cn.getData()))},initialData:Tt})},yo=me=>({showDialog:()=>{So(me)}}),Nc=me=>{const ne=()=>{So(me)};me.addCommand("mceMedia",ne)};var nc=tinymce.util.Tools.resolve("tinymce.Env");const qt=me=>{const ne=me.name;return ne==="iframe"||ne==="video"||ne==="audio"},Dr=(me,ne,Te,Tt=null)=>{const Wn=me.attr(Te);return vn(Wn)?Wn:Fo(ne,Te)?null:Tt},Ue=(me,ne,Te)=>{const Tt=ne.name==="img"||me.name==="video",Wn=Tt?"300":null,kn=me.name==="audio"?"30":"150",Jn=Tt?kn:null;ne.attr({width:Dr(me,Te,"width",Wn),height:Dr(me,Te,"height",Jn)})},Ot=(me,ne,Te,Tt)=>{const Wn=Ae(me.schema).parse(Tt,{context:ne});for(;Wn.firstChild;)Te.append(Wn.firstChild)},an=(me,ne)=>{const Te=ne.name,Tt=new Be("img",1);return dn(me,ne,Tt),Ue(ne,Tt,{}),Tt.attr({style:ne.attr("style"),src:nc.transparentSrc,"data-mce-object":Te,class:"mce-object mce-object-"+Te}),Tt},tn=(me,ne)=>{const Te=ne.name,Tt=new Be("span",1);Tt.attr({contentEditable:"false",style:ne.attr("style"),"data-mce-object":Te,class:"mce-preview-object mce-object-"+Te}),dn(me,ne,Tt);const Wn=me.dom.parseStyle(ne.attr("style")??""),kn=new Be(Te,1);if(Ue(ne,kn,Wn),kn.attr({src:ne.attr("src"),style:ne.attr("style"),class:ne.attr("class")}),Te==="iframe")kn.attr({allowfullscreen:ne.attr("allowfullscreen"),frameborder:"0",sandbox:ne.attr("sandbox"),referrerpolicy:ne.attr("referrerpolicy")});else{Go(["controls","crossorigin","currentTime","loop","muted","poster","preload"],nt=>{kn.attr(nt,ne.attr(nt))});const Kn=Tt.attr("data-mce-html");vn(Kn)&&Ot(me,Te,kn,unescape(Kn))}const Jn=new Be("span",1);return Jn.attr("class","mce-shim"),Tt.append(kn),Tt.append(Jn),Tt},dn=(me,ne,Te)=>{const Tt=ne.attributes??[];let Wn=Tt.length;for(;Wn--;){const Kn=Tt[Wn].name;let nt=Tt[Wn].value;Kn!=="width"&&Kn!=="height"&&Kn!=="style"&&!En(Kn,"data-mce-")&&((Kn==="data"||Kn==="src")&&(nt=me.convertURL(nt,Kn)),Te.attr("data-mce-p-"+Kn,nt))}const kn=xt({inner:!0},me.schema),Jn=new Be("div",1);Go(ne.children(),Kn=>Jn.append(Kn));const cr=kn.serialize(Jn);cr&&(Te.attr("data-mce-html",escape(cr)),Te.empty())},Jt=me=>{const ne=me.attr("class");return as(ne)&&/\btiny-pageembed\b/.test(ne)},lo=me=>{let ne=me;for(;ne=ne.parent;)if(ne.attr("data-ephox-embed-iri")||Jt(ne))return!0;return!1},zr=me=>ne=>{let Te=ne.length,Tt;for(;Te--;)Tt=ne[Te],Tt.parent&&(Tt.parent.attr("data-mce-object")||(qt(Tt)&&pn(me)?lo(Tt)||Tt.replace(tn(me,Tt)):lo(Tt)||Tt.replace(an(me,Tt))))},Vr=(me,ne,Te)=>{const Tt=me.options.get,Wn=Tt("xss_sanitization"),kn=xe(me);return Ae(me.schema,{sanitize:Wn,validate:kn}).parse(Te,{context:ne})},dc=me=>{me.on("PreInit",()=>{const{schema:ne,serializer:Te,parser:Tt}=me,Wn=ne.getBoolAttrs();Go("webkitallowfullscreen mozallowfullscreen".split(" "),kn=>{Wn[kn]={}}),qn({embed:["wmode"]},(kn,Jn)=>{const cr=ne.getElementRule(Jn);cr&&Go(kn,Kn=>{cr.attributes[Kn]={},cr.attributesOrder.push(Kn)})}),Tt.addNodeFilter("iframe,video,audio,object,embed",zr(me)),Te.addAttributeFilter("data-mce-object",(kn,Jn)=>{let cr=kn.length;for(;cr--;){const Kn=kn[cr];if(!Kn.parent)continue;const nt=Kn.attr(Jn),ue=new Be(nt,1);if(nt!=="audio"){const It=Kn.attr("class");It&&It.indexOf("mce-preview-object")!==-1&&Kn.firstChild?ue.attr({width:Kn.firstChild.attr("width"),height:Kn.firstChild.attr("height")}):ue.attr({width:Kn.attr("width"),height:Kn.attr("height")})}ue.attr({style:Kn.attr("style")});const fe=Kn.attributes??[];let Qe=fe.length;for(;Qe--;){const It=fe[Qe].name;It.indexOf("data-mce-p-")===0&&ue.attr(It.substr(11),fe[Qe].value)}const ht=Kn.attr("data-mce-html");if(ht){const It=Vr(me,nt,unescape(ht));Go(It.children(),An=>ue.append(An))}Kn.replace(ue)}})}),me.on("SetContent",()=>{const ne=me.dom;Go(ne.select("span.mce-preview-object"),Te=>{ne.select("span.mce-shim",Te).length===0&&ne.add(Te,"span",{class:"mce-shim"})})})},Yt=me=>{me.on("ResolveName",ne=>{let Te;ne.target.nodeType===1&&(Te=ne.target.getAttribute("data-mce-object"))&&(ne.name=Te)})},Or=me=>ne=>{const Te=()=>{ne.setEnabled(me.selection.isEditable())};return me.on("NodeChange",Te),Te(),()=>{me.off("NodeChange",Te)}},wr=me=>{const ne=()=>me.execCommand("mceMedia");me.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:ne,onSetup:Te=>{const Tt=me.selection;Te.setActive(_t(Tt.getNode()));const Wn=Tt.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",Te.setActive).unbind,kn=Or(me)(Te);return()=>{Wn(),kn()}}}),me.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:ne,onSetup:Or(me)})};var pi=()=>{Ko.add("media",me=>(je(me),Nc(me),wr(me),Yt(me),dc(me),bn(me),yo(me)))};pi()})();(function(){var Ko=tinymce.util.Tools.resolve("tinymce.PluginManager");const Yo=(x,A,$)=>{var q;return $(x,A.prototype)?!0:((q=x.constructor)==null?void 0:q.name)===A.name},bs=x=>{const A=typeof x;return x===null?"null":A==="object"&&Array.isArray(x)?"array":A==="object"&&Yo(x,String,($,q)=>q.isPrototypeOf($))?"string":A},jo=x=>A=>bs(A)===x,as=x=>A=>typeof A===x,ds=x=>A=>x===A,ls=jo("string"),Nt=jo("array"),vn=as("boolean"),zt=ds(void 0),ts=x=>x==null,Go=x=>!ts(x),cn=as("function"),Fn=as("number"),Eo=()=>{},qn=(x,A)=>$=>x(A($)),dt=x=>()=>x,Fo=x=>x,nn=(x,A)=>x===A;function re(x,...A){return(...$)=>{const q=A.concat($);return x.apply(null,q)}}const En=x=>{x()},Vo=dt(!1),je=dt(!0),pa=class pa{constructor(A,$){Xe(this,"tag");Xe(this,"value");this.tag=A,this.value=$}static some(A){return new pa(!0,A)}static none(){return pa.singletonNone}fold(A,$){return this.tag?$(this.value):A()}isSome(){return this.tag}isNone(){return!this.tag}map(A){return this.tag?pa.some(A(this.value)):pa.none()}bind(A){return this.tag?A(this.value):pa.none()}exists(A){return this.tag&&A(this.value)}forall(A){return!this.tag||A(this.value)}filter(A){return!this.tag||A(this.value)?this:pa.none()}getOr(A){return this.tag?this.value:A}or(A){return this.tag?this:A}getOrThunk(A){return this.tag?this.value:A()}orThunk(A){return this.tag?this:A()}getOrDie(A){if(this.tag)return this.value;throw new Error(A??"Called getOrDie on None")}static from(A){return Go(A)?pa.some(A):pa.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(A){this.tag&&A(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};Xe(pa,"singletonNone",new pa(!1));let G=pa;const St=Array.prototype.indexOf,ro=Array.prototype.push,pn=(x,A)=>St.call(x,A),xe=(x,A)=>pn(x,A)>-1,le=(x,A)=>{for(let $=0,q=x.length;$<q;$++){const ge=x[$];if(A(ge,$))return!0}return!1},vs=(x,A)=>{const $=[];for(let q=0;q<x;q++)$.push(A(q));return $},qe=(x,A)=>{const $=x.length,q=new Array($);for(let ge=0;ge<$;ge++){const Ye=x[ge];q[ge]=A(Ye,ge)}return q},rt=(x,A)=>{for(let $=0,q=x.length;$<q;$++){const ge=x[$];A(ge,$)}},k=(x,A)=>{for(let $=x.length-1;$>=0;$--){const q=x[$];A(q,$)}},ho=(x,A)=>{const $=[],q=[];for(let ge=0,Ye=x.length;ge<Ye;ge++){const Ht=x[ge];(A(Ht,ge)?$:q).push(Ht)}return{pass:$,fail:q}},tt=(x,A)=>{const $=[];for(let q=0,ge=x.length;q<ge;q++){const Ye=x[q];A(Ye,q)&&$.push(Ye)}return $},No=(x,A,$)=>(k(x,(q,ge)=>{$=A($,q,ge)}),$),ln=(x,A,$)=>(rt(x,(q,ge)=>{$=A($,q,ge)}),$),He=(x,A,$)=>{for(let q=0,ge=x.length;q<ge;q++){const Ye=x[q];if(A(Ye,q))return G.some(Ye);if($(Ye,q))break}return G.none()},Je=(x,A)=>He(x,A,Vo),Bt=x=>{const A=[];for(let $=0,q=x.length;$<q;++$){if(!Nt(x[$]))throw new Error("Arr.flatten item "+$+" was not an array, input: "+x);ro.apply(A,x[$])}return A},Be=(x,A)=>Bt(qe(x,A)),xt=(x,A)=>{for(let $=0,q=x.length;$<q;++$){const ge=x[$];if(A(ge,$)!==!0)return!1}return!0},Ae=(x,A)=>{const $={};for(let q=0,ge=x.length;q<ge;q++){const Ye=x[q];$[String(Ye)]=A(Ye,q)}return $},Ve=(x,A)=>A>=0&&A<x.length?G.some(x[A]):G.none(),F=x=>Ve(x,0),Fs=x=>Ve(x,x.length-1),jn=(x,A)=>{for(let $=0;$<x.length;$++){const q=A(x[$],$);if(q.isSome())return q}return G.none()},Xn=Object.keys,co=Object.hasOwnProperty,ms=(x,A)=>{const $=Xn(x);for(let q=0,ge=$.length;q<ge;q++){const Ye=$[q],Ht=x[Ye];A(Ht,Ye)}},De=x=>(A,$)=>{x[$]=A},ve=(x,A,$,q)=>{ms(x,(ge,Ye)=>{(A(ge,Ye)?$:q)(ge,Ye)})},ae=(x,A)=>{const $={};return ve(x,A,De($),Eo),$},te=(x,A)=>{const $=[];return ms(x,(q,ge)=>{$.push(A(q,ge))}),$},Dt=x=>te(x,Fo),Ee=x=>Xn(x).length,Ce=(x,A)=>_t(x,A)?G.from(x[A]):G.none(),_t=(x,A)=>co.call(x,A),bn=(x,A)=>_t(x,A)&&x[A]!==void 0&&x[A]!==null,$e=x=>{for(const A in x)if(co.call(x,A))return!1;return!0},et=x=>{let A=x;return{get:()=>A,set:ge=>{A=ge}}},Xt=(x,A,$=nn)=>x.exists(q=>$(q,A)),oo=x=>{const A=[],$=q=>{A.push(q)};for(let q=0;q<x.length;q++)x[q].each($);return A},vo=(x,A,$)=>x.isSome()&&A.isSome()?G.some($(x.getOrDie(),A.getOrDie())):G.none(),Lo=x=>x.bind(Fo),zn=(x,A)=>x?G.some(A):G.none(),ns=x=>{const A=et(G.none()),$=()=>A.get().each(x);return{clear:()=>{$(),A.set(G.none())},isSet:()=>A.get().isSome(),get:()=>A.get(),set:un=>{$(),A.set(G.some(un))}}},ko=()=>ns(x=>x.unbind()),mo=(x,A)=>x.substring(A),Ns=(x,A,$)=>A===""||x.length>=A.length&&x.substr($,$+A.length)===A,Ls=(x,A)=>Uo(x,A)?mo(x,A.length):x,Uo=(x,A)=>Ns(x,A,0),Js=(x=>A=>A.replace(x,""))(/^\s+|\s+$/g),Xo=x=>x.length>0,Os=x=>!Xo(x),Hr=(x,A=10)=>{const $=parseInt(x,A);return isNaN($)?G.none():G.some($)},on=x=>{const A=parseFloat(x);return isNaN(A)?G.none():G.some(A)},So=x=>{let A=!1,$;return(...q)=>(A||(A=!0,$=x.apply(null,q)),$)},yo=(x,A)=>{const q=(A||document).createElement("div");if(q.innerHTML=x,!q.hasChildNodes()||q.childNodes.length>1){const ge="HTML does not have a single root node";throw console.error(ge,x),new Error(ge)}return qt(q.childNodes[0])},Nc=(x,A)=>{const q=(A||document).createElement(x);return qt(q)},nc=(x,A)=>{const q=(A||document).createTextNode(x);return qt(q)},qt=x=>{if(x==null)throw new Error("Node cannot be null or undefined");return{dom:x}},Ue={fromHtml:yo,fromTag:Nc,fromText:nc,fromDom:qt,fromPoint:(x,A,$)=>G.from(x.dom.elementFromPoint(A,$)).map(qt)},Ot=8,an=9,tn=11,dn=1,Jt=3,lo=(x,A)=>{const $=x.dom;if($.nodeType!==dn)return!1;{const q=$;if(q.matches!==void 0)return q.matches(A);if(q.msMatchesSelector!==void 0)return q.msMatchesSelector(A);if(q.webkitMatchesSelector!==void 0)return q.webkitMatchesSelector(A);if(q.mozMatchesSelector!==void 0)return q.mozMatchesSelector(A);throw new Error("Browser lacks native selectors")}},zr=x=>x.nodeType!==dn&&x.nodeType!==an&&x.nodeType!==tn||x.childElementCount===0,Vr=(x,A)=>{const $=A===void 0?document:A.dom;return zr($)?[]:qe($.querySelectorAll(x),Ue.fromDom)},dc=(x,A)=>{const $=A===void 0?document:A.dom;return zr($)?G.none():G.from($.querySelector(x)).map(Ue.fromDom)},Yt=(x,A)=>x.dom===A.dom,Or=lo,wr=x=>x.dom.nodeName.toLowerCase(),pi=x=>x.dom.nodeType,_s=x=>A=>pi(A)===x,me=x=>pi(x)===Ot||wr(x)==="#comment",ne=_s(dn),Te=_s(Jt),Tt=_s(an),Wn=_s(tn),kn=x=>A=>ne(A)&&wr(A)===x,Jn=x=>Ue.fromDom(x.dom.ownerDocument),cr=x=>Tt(x)?x:Jn(x),Kn=x=>G.from(x.dom.parentNode).map(Ue.fromDom),nt=(x,A)=>{const $=cn(A)?A:Vo;let q=x.dom;const ge=[];for(;q.parentNode!==null&&q.parentNode!==void 0;){const Ye=q.parentNode,Ht=Ue.fromDom(Ye);if(ge.push(Ht),$(Ht)===!0)break;q=Ye}return ge},ue=x=>G.from(x.dom.previousSibling).map(Ue.fromDom),fe=x=>G.from(x.dom.nextSibling).map(Ue.fromDom),Qe=x=>qe(x.dom.childNodes,Ue.fromDom),ht=(x,A)=>{const $=x.dom.childNodes;return G.from($[A]).map(Ue.fromDom)},It=x=>ht(x,0),An=x=>Wn(x)&&Go(x.dom.host),Qt=x=>Ue.fromDom(x.dom.getRootNode()),Cn=x=>{const A=Qt(x);return An(A)?G.some(A):G.none()},Co=x=>Ue.fromDom(x.dom.host),To=(x,A)=>{Kn(x).each(q=>{q.dom.insertBefore(A.dom,x.dom)})},Po=(x,A)=>{fe(x).fold(()=>{Kn(x).each(ge=>{_r(ge,A)})},q=>{To(q,A)})},qs=(x,A)=>{It(x).fold(()=>{_r(x,A)},q=>{x.dom.insertBefore(A.dom,q.dom)})},_r=(x,A)=>{x.dom.appendChild(A.dom)},bi=(x,A)=>{To(x,A),_r(A,x)},$i=(x,A)=>{rt(A,($,q)=>{const ge=q===0?x:A[q-1];Po(ge,$)})},fs=(x,A)=>{rt(A,$=>{_r(x,$)})},gs=(x,A,$)=>{if(ls($)||vn($)||Fn($))x.setAttribute(A,$+"");else throw console.error("Invalid call to Attribute.set. Key ",A,":: Value ",$,":: Element ",x),new Error("Attribute value was not simple")},Hs=(x,A,$)=>{gs(x.dom,A,$)},Aa=(x,A)=>{const $=x.dom;ms(A,(q,ge)=>{gs($,ge,q)})},zs=(x,A)=>{const $=x.dom.getAttribute(A);return $===null?void 0:$},Ln=(x,A)=>G.from(zs(x,A)),vc=(x,A)=>{x.dom.removeAttribute(A)},Ac=x=>ln(x.dom.attributes,(A,$)=>(A[$.name]=$.value,A),{}),dr=x=>{const A=x.dom;A.parentNode!==null&&A.parentNode.removeChild(A)},ed=x=>{const A=Qe(x);A.length>0&&$i(x,A),dr(x)},mu=x=>qe(x,Ue.fromDom),Qs=x=>x.style!==void 0&&cn(x.style.getPropertyValue),vi=x=>{const A=Te(x)?x.dom.parentNode:x.dom;if(A==null||A.ownerDocument===null)return!1;const $=A.ownerDocument;return Cn(Ue.fromDom(A)).fold(()=>$.body.contains(A),qn(vi,Co))},ei=(x,A,$)=>{if(!ls($))throw console.error("Invalid call to CSS.set. Property ",A,":: Value ",$,":: Element ",x),new Error("CSS value must be a string: "+$);Qs(x)&&x.style.setProperty(A,$)},td=(x,A)=>{Qs(x)&&x.style.removeProperty(A)},Pt=(x,A,$)=>{const q=x.dom;ei(q,A,$)},La=(x,A)=>{const $=x.dom,ge=window.getComputedStyle($).getPropertyValue(A);return ge===""&&!vi(x)?Pc($,A):ge},Pc=(x,A)=>Qs(x)?x.style.getPropertyValue(A):"",Yc=(x,A)=>{const $=x.dom,q=Pc($,A);return G.from(q).filter(ge=>ge.length>0)},mr=(x,A)=>{const $=x.dom;td($,A),Xt(Ln(x,"style").map(Js),"")&&vc(x,"style")},fu=(x,A)=>on(x).getOr(A),Xc=(x,A,$)=>fu(La(x,A),$),ka=(x,A,$,q)=>{const ge=Xc(x,`padding-${$}`,0),Ye=Xc(x,`padding-${q}`,0),Ht=Xc(x,`border-${$}-width`,0),un=Xc(x,`border-${q}-width`,0);return A-ge-Ye-Ht-un},Pl=(x,A)=>{const $=x.dom,q=$.getBoundingClientRect().width||$.offsetWidth;return ka(x,q,"left","right")},Ii=x=>Pl(x),$l=((x,A)=>{const $=Ye=>{if(!x(Ye))throw new Error("Can only get "+A+" value of a "+A+" node");return q(Ye).getOr("")},q=Ye=>x(Ye)?G.from(Ye.dom.nodeValue):G.none();return{get:$,getOption:q,set:(Ye,Ht)=>{if(!x(Ye))throw new Error("Can only set raw "+A+" value of a "+A+" node");Ye.dom.nodeValue=Ht}}})(Te,"text"),Li=x=>$l.get(x),Il=(x,A)=>$l.set(x,A);var At=(x,A,$,q,ge)=>x($,q)?G.some($):cn(ge)&&ge($)?G.none():A($,q,ge);const dl=(x,A,$)=>{let q=x.dom;const ge=cn($)?$:Vo;for(;q.parentNode;){q=q.parentNode;const Ye=Ue.fromDom(q);if(A(Ye))return G.some(Ye);if(ge(Ye))break}return G.none()},od=(x,A,$)=>At((ge,Ye)=>Ye(ge),dl,x,A,$),Nr=(x,A)=>{const $=ge=>A(Ue.fromDom(ge));return Je(x.dom.childNodes,$).map(Ue.fromDom)},H=(x,A,$)=>dl(x,q=>lo(q,A),$),ce=(x,A)=>Nr(x,$=>lo($,A)),ye=(x,A)=>dc(A,x),Ke=(x,A,$)=>At((ge,Ye)=>lo(ge,Ye),H,x,A,$),kt=x=>Ke(x,"[contenteditable]"),en=(x,A=!1)=>vi(x)?x.dom.isContentEditable:kt(x).fold(dt(A),$=>Dn($)==="true"),Dn=x=>x.dom.contentEditable,ar=(x,A)=>tt(Qe(x),A),Ao=(x,A)=>{let $=[];return rt(Qe(x),q=>{A(q)&&($=$.concat([q])),$=$.concat(Ao(q,A))}),$},N=(x,A)=>ar(x,$=>lo($,A)),V=(x,A)=>Vr(A,x),se=(x,A)=>ce(x,A).isSome(),Pe=x=>x.nodeName.toLowerCase(),fn=x=>Ue.fromDom(x.getBody()),po=x=>A=>Yt(A,fn(x)),Us=x=>x?x.replace(/px$/,""):"",qr=x=>/^\d+(\.\d+)?$/.test(x)?x+"px":x,la=x=>Ue.fromDom(x.selection.getStart()),Jo=x=>Ue.fromDom(x.selection.getEnd()),ua=x=>od(x,kn("table")).forall(en),Ll=["tfoot","thead","tbody","colgroup"],Hi=x=>xe(Ll,x),gg=(x,A)=>({rows:x,columns:A}),Pm=(x,A,$)=>({element:x,rowspan:A,colspan:$}),sd=(x,A,$,q,ge,Ye)=>({element:x,rowspan:A,colspan:$,row:q,column:ge,isLocked:Ye}),Da=(x,A,$)=>({element:x,cells:A,section:$}),rd=(x,A,$,q)=>({startRow:x,startCol:A,finishRow:$,finishCol:q}),vf=(x,A,$)=>({element:x,colspan:A,column:$}),hg=(x,A)=>({element:x,columns:A}),pg=(x,A,$=0)=>Ln(x,A).map(q=>parseInt(q,10)).getOr($),Hh=(x,A)=>yf(x,A,je),yf=(x,A,$)=>Be(Qe(x),q=>lo(q,A)?$(q)?[q]:[]:yf(q,A,$)),zi=(x,A,$=Vo)=>{if($(A))return G.none();if(xe(x,wr(A)))return G.some(A);const q=ge=>lo(ge,"table")||$(ge);return H(A,x.join(","),q)},zh=(x,A)=>zi(["td","th"],x,A),Vh=x=>Hh(x,"th,td"),Ha=x=>lo(x,"colgroup")?N(x,"col"):Be(Oe(x),A=>N(A,"col")),Z=(x,A)=>Ke(x,"table",A),oe=x=>Hh(x,"tr"),Oe=x=>Z(x).fold(dt([]),A=>N(A,"colgroup")),st=kn("th"),wn=(x,A)=>x&&A?"sectionCells":x?"section":"cells",Qo=x=>{const A=x.section==="thead",$=Xt(Pr(x.cells),"th");return x.section==="tfoot"?{type:"footer"}:A||$?{type:"header",subType:wn(A,$)}:{type:"body"}},Pr=x=>{const A=tt(x,$=>st($.element));return A.length===0?G.some("td"):A.length===x.length?G.some("th"):G.none()},Jc=x=>{const A=qe(x,ge=>Qo(ge).type),$=xe(A,"header"),q=xe(A,"footer");if(!$&&!q)return G.some("body");{const ge=xe(A,"body");return $&&!ge&&!q?G.some("header"):!$&&!ge&&q?G.some("footer"):G.none()}},yc=(x,A)=>qe(x,$=>{if(wr($)==="colgroup"){const q=qe(Ha($),ge=>{const Ye=pg(ge,"span",1);return Pm(ge,1,Ye)});return Da($,q,"colgroup")}else{const q=qe(Vh($),ge=>{const Ye=pg(ge,"rowspan",1),Ht=pg(ge,"colspan",1);return Pm(ge,Ye,Ht)});return Da($,q,A($))}}),yi=x=>Kn(x).map(A=>{const $=wr(A);return Hi($)?$:"tbody"}).getOr("tbody"),Hl=x=>{const A=oe(x),q=[...Oe(x),...A];return yc(q,yi)},Qc="data-snooker-locked-cols",Oa=x=>Ln(x,Qc).bind(A=>G.from(A.match(/\d+/g))).map(A=>Ae(A,je)),$c=(x,A)=>x+","+A,hu=(x,A,$)=>G.from(x.access[$c(A,$)]),bg=(x,A,$)=>{const q=wo(x,ge=>$(A,ge.element));return q.length>0?G.some(q[0]):G.none()},wo=(x,A)=>{const $=Be(x.all,q=>q.cells);return tt($,A)},pu=x=>{const A={};let $=0;return rt(x.cells,q=>{const ge=q.colspan;vs(ge,Ye=>{const Ht=$+Ye;A[Ht]=vf(q.element,ge,Ht)}),$+=ge}),A},cd=x=>{const A={},$=[],ge=F(x).map(Ei=>Ei.element).bind(Z).bind(Oa).getOr({});let Ye=0,Ht=0,un=0;const{pass:fo,fail:Oo}=ho(x,Ei=>Ei.section==="colgroup");rt(Oo,Ei=>{const md=[];rt(Ei.cells,Gi=>{let Lm=0;for(;A[$c(un,Lm)]!==void 0;)Lm++;const kg=bn(ge,Lm.toString()),w1=sd(Gi.element,Gi.rowspan,Gi.colspan,un,Lm,kg);for(let Hm=0;Hm<Gi.colspan;Hm++)for(let Yd=0;Yd<Gi.rowspan;Yd++){const S1=un+Yd,Yh=Lm+Hm,Xh=$c(S1,Yh);A[Xh]=w1,Ht=Math.max(Ht,Yh+1)}md.push(w1)}),Ye++,$.push(Da(Ei.element,md,Ei.section)),un++});const{columns:Zs,colgroups:Br}=Fs(fo).map(Ei=>{const md=pu(Ei);return{colgroups:[hg(Ei.element,Dt(md))],columns:md}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:gg(Ye,Ht),access:A,all:$,columns:Zs,colgroups:Br}},Ur={fromTable:x=>{const A=Hl(x);return cd(A)},generate:cd,getAt:hu,findItem:bg,filterItems:wo,justCells:x=>Be(x.all,A=>A.cells),justColumns:x=>Dt(x.columns),hasColumns:x=>Xn(x.columns).length>0,getColumnAt:(x,A)=>G.from(x.columns[A])},$m=(x,A)=>jn(x.all,$=>Je($.cells,q=>Yt(A,q.element))),Xy=(x,A,$)=>{const q=qe(A.selection,Ye=>zh(Ye).bind(Ht=>$m(x,Ht)).filter($)),ge=oo(q);return zn(ge.length>0,ge)},Ct=(x,A)=>A.mergable,Ci=(x,A)=>A.unmergable,vg=(x,A)=>Xy(x,A,je),ml=(x,A)=>$m(x,A).exists($=>!$.isLocked),Cf=(x,A)=>xt(A,$=>ml(x,$)),n1=(x,A)=>Ct(x,A).filter($=>Cf(x,$.cells)),ee=(x,A)=>Ci(x,A).filter($=>Cf(x,$));var ti=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],zd=()=>{const x=Oo=>Ue.fromDom(Oo.dom.cloneNode(!1)),A=Oo=>cr(Oo).dom,$=Oo=>ne(Oo)?wr(Oo)==="body"?!0:xe(ti,wr(Oo)):!1,q=Oo=>ne(Oo)?xe(["br","img","hr","input"],wr(Oo)):!1,ge=Oo=>ne(Oo)&&zs(Oo,"contenteditable")==="false",Ye=(Oo,Zs)=>Oo.dom.compareDocumentPosition(Zs.dom),Ht=(Oo,Zs)=>{const Br=Ac(Oo);Aa(Zs,Br)},un=Oo=>{const Zs=wr(Oo);return xe(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],Zs)},fo=Oo=>ne(Oo)?Ln(Oo,"lang"):G.none();return{up:dt({selector:H,closest:Ke,predicate:dl,all:nt}),down:dt({selector:V,predicate:Ao}),styles:dt({get:La,getRaw:Yc,set:Pt,remove:mr}),attrs:dt({get:zs,set:Hs,remove:vc,copyTo:Ht}),insert:dt({before:To,after:Po,afterAll:$i,append:_r,appendAll:fs,prepend:qs,wrap:bi}),remove:dt({unwrap:ed,remove:dr}),create:dt({nu:Ue.fromTag,clone:x,text:Ue.fromText}),query:dt({comparePosition:Ye,prevSibling:ue,nextSibling:fe}),property:dt({children:Qe,name:wr,parent:Kn,document:A,isText:Te,isComment:me,isElement:ne,isSpecial:un,getLanguage:fo,getText:Li,setText:Il,isBoundary:$,isEmptyTag:q,isNonEditable:ge}),eq:Yt,is:Or}};const o1=(x,A,$,q)=>{const ge=$[0],Ye=$.slice(1);return q(x,A,ge,Ye)},wf=(x,A,$)=>$.length>0?o1(x,A,$,da):G.none(),da=(x,A,$,q)=>{const ge=A(x,$);return No(q,(Ye,Ht)=>{const un=A(x,Ht);return ni(x,Ye,un)},ge)},ni=(x,A,$)=>A.bind(q=>$.filter(re(x.eq,q))),s1=wf,r1=zd(),yg=(x,A)=>s1(r1,($,q)=>x(q),A),c1=(x,A)=>{const $=Ur.fromTable(x);return vg($,A).bind(ge=>{const Ye=ge[ge.length-1],Ht=ge[0].row,un=Ye.row+Ye.rowspan,fo=$.all.slice(Ht,un);return Jc(fo)}).getOr("")},bu=(x,A)=>A.column>=x.startCol&&A.column+A.colspan-1<=x.finishCol&&A.row>=x.startRow&&A.row+A.rowspan-1<=x.finishRow,Cg=(x,A)=>{let $=!0;const q=re(bu,A);for(let ge=A.startRow;ge<=A.finishRow;ge++)for(let Ye=A.startCol;Ye<=A.finishCol;Ye++)$=$&&Ur.getAt(x,ge,Ye).exists(q);return $?G.some(A):G.none()},a1=(x,A)=>rd(Math.min(x.row,A.row),Math.min(x.column,A.column),Math.max(x.row+x.rowspan-1,A.row+A.rowspan-1),Math.max(x.column+x.colspan-1,A.column+A.colspan-1)),wi=(x,A,$)=>{const q=Ur.findItem(x,A,Yt),ge=Ur.findItem(x,$,Yt);return q.bind(Ye=>ge.map(Ht=>a1(Ye,Ht)))},i1=(x,A,$)=>wi(x,A,$).bind(q=>Cg(x,q)),zl=(x,A,$)=>{const q=Vd(x);return i1(q,A,$)},Vd=Ur.fromTable;var Io=tinymce.util.Tools.resolve("tinymce.util.Tools");const za=(x,A,$)=>{const q=x.select("td,th",A);let ge;for(let Ye=0;Ye<q.length;Ye++){const Ht=x.getStyle(q[Ye],$);if(zt(ge)&&(ge=Ht),ge!==Ht)return""}return ge},Sf=(x,A,$)=>{Io.each("left center right".split(" "),q=>{q!==$&&x.formatter.remove("align"+q,{},A)}),$&&x.formatter.apply("align"+$,{},A)},hb=(x,A,$)=>{Io.each("top middle bottom".split(" "),q=>{q!==$&&x.formatter.remove("valign"+q,{},A)}),$&&x.formatter.apply("valign"+$,{},A)},xo=(x,A,$)=>{x.dispatch("TableModified",{...$,table:A})};var ad=tinymce.util.Tools.resolve("tinymce.Env");const oc="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",Vl=vs(5,x=>{const A=`${x+1}px`;return{title:A,value:A}}),Ul=qe(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],x=>({title:x,value:x.toLowerCase()})),Rr="100%",ys=x=>{const A=x.dom,$=A.getParent(x.selection.getStart(),A.isBlock)??x.getBody();return Ii(Ue.fromDom($))+"px"},Jy=(x,A)=>l1(x)||!Ua(x)?A:Ud(x)?{...A,width:ys(x)}:{...A,width:Rr},Qy=(x,A)=>l1(x)||Ua(x)?A:Ud(x)?{...A,width:ys(x)}:{...A,width:Rr},sc=x=>A=>A.options.get(x),fl=x=>{const A=x.options.register;A("table_border_widths",{processor:"object[]",default:Vl}),A("table_border_styles",{processor:"object[]",default:Ul}),A("table_cell_advtab",{processor:"boolean",default:!0}),A("table_row_advtab",{processor:"boolean",default:!0}),A("table_advtab",{processor:"boolean",default:!0}),A("table_appearance_options",{processor:"boolean",default:!0}),A("table_grid",{processor:"boolean",default:!ad.deviceType.isTouch()}),A("table_cell_class_list",{processor:"object[]",default:[]}),A("table_row_class_list",{processor:"object[]",default:[]}),A("table_class_list",{processor:"object[]",default:[]}),A("table_toolbar",{processor:"string",default:oc}),A("table_background_color_map",{processor:"object[]",default:[]}),A("table_border_color_map",{processor:"object[]",default:[]})},gl=sc("table_sizing_mode"),rc=sc("table_border_widths"),Wl=sc("table_border_styles"),Va=sc("table_cell_advtab"),Si=sc("table_row_advtab"),ma=sc("table_advtab"),Es=sc("table_appearance_options"),Vi=sc("table_grid"),Ua=sc("table_style_by_css"),Ic=sc("table_cell_class_list"),kc=sc("table_row_class_list"),Er=sc("table_class_list"),hl=sc("table_toolbar"),Dc=sc("table_background_color_map"),Kr=sc("table_border_color_map"),Ud=x=>gl(x)==="fixed",l1=x=>gl(x)==="responsive",Uh=x=>{const A=x.options,$=A.get("table_default_styles");return A.isSet("table_default_styles")?$:Jy(x,$)},Oc=x=>{const A=x.options,$=A.get("table_default_attributes");return A.isSet("table_default_attributes")?$:Qy(x,$)},u1=x=>H(x,"table"),pb=(x,A)=>{const $=V(x,A);return $.length>0?G.some($):G.none()},Im=(x,A,$)=>ye(x,A).bind(q=>ye(x,$).bind(ge=>yg(u1,[q,ge]).map(Ye=>({first:q,last:ge,table:Ye})))),$n=(x,A)=>pb(x,A),d1=(x,A,$)=>Im(x,A,$).bind(q=>{const ge=fo=>Yt(x,fo),Ye="thead,tfoot,tbody,table",Ht=H(q.first,Ye,ge),un=H(q.last,Ye,ge);return Ht.bind(fo=>un.bind(Oo=>Yt(fo,Oo)?zl(q.table,q.first,q.last):G.none()))}),Cc=Fo,Lc=x=>{const A=(q,ge)=>Ln(q,ge).exists(Ye=>parseInt(Ye,10)>1),$=q=>A(q,"rowspan")||A(q,"colspan");return x.length>0&&xt(x,$)?G.some(x):G.none()},Hc=(x,A,$)=>A.length<=1?G.none():d1(x,$.firstSelectedSelector,$.lastSelectedSelector).map(q=>({bounds:q,cells:A})),ir="data-mce-selected",Wd="data-mce-first-selected",Wh="td["+Wd+"],th["+Wd+"]",Ui="data-mce-last-selected",Zl="td["+Ui+"],th["+Ui+"]",wg={selected:ir,firstSelectedSelector:Wh,lastSelectedSelector:Zl},Zh=x=>Z(x).bind(A=>$n(A,wg.firstSelectedSelector)).fold(dt(x),A=>A[0]),Sg=x=>(A,$)=>{const q=wr(A),ge=q==="col"||q==="colgroup"?Zh(A):A;return Ke(ge,x,$)},vu=Sg("th,td,caption"),pl=Sg("th,td"),m1=x=>mu(x.model.table.getSelectedCells()),ea=(x,A)=>{const $=pl(x),q=$.bind(ge=>Z(ge)).map(ge=>oe(ge));return vo($,q,(ge,Ye)=>tt(Ye,Ht=>le(mu(Ht.dom.cells),un=>zs(un,A)==="1"||Yt(un,ge)))).getOr([])},Wi=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],yu=x=>({value:xg(x)}),is=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,xi=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,bb=x=>is.test(x)||xi.test(x),xg=x=>Ls(x,"#").toUpperCase(),Zi=x=>bb(x)?G.some({value:xg(x)}):G.none(),Vn=x=>{const A=x.toString(16);return(A.length===1?"0"+A:A).toUpperCase()},Sr=x=>{const A=Vn(x.red)+Vn(x.green)+Vn(x.blue);return yu(A)},zc=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,lr=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,ji=(x,A,$,q)=>({red:x,green:A,blue:$,alpha:q}),fr=(x,A,$,q)=>{const ge=parseInt(x,10),Ye=parseInt(A,10),Ht=parseInt($,10),un=parseFloat(q);return ji(ge,Ye,Ht,un)},cc=x=>{const A=zc.exec(x);if(A!==null)return G.some(fr(A[1],A[2],A[3],"1"));const $=lr.exec(x);return $!==null?G.some(fr($[1],$[2],$[3],$[4])):G.none()},xf=x=>Zi(x).orThunk(()=>cc(x).map(Sr)).getOrThunk(()=>{const A=document.createElement("canvas");A.height=1,A.width=1;const $=A.getContext("2d");$.clearRect(0,0,A.width,A.height),$.fillStyle="#FFFFFF",$.fillStyle=x,$.fillRect(0,0,1,1);const q=$.getImageData(0,0,1,1).data,ge=q[0],Ye=q[1],Ht=q[2],un=q[3];return Sr(ji(ge,Ye,Ht,un))}),Ro=x=>cc(x).map(Sr).map(A=>"#"+A.value).getOr(x),bl=(x,A,$)=>q=>{const ge=ko(),Ye=Os($),Ht=()=>{const un=m1(x),fo=Oo=>x.formatter.match(A,{value:$},Oo.dom,Ye);Ye?(q.setActive(!le(un,fo)),ge.set(x.formatter.formatChanged(A,Oo=>q.setActive(!Oo),!0))):(q.setActive(xt(un,fo)),ge.set(x.formatter.formatChanged(A,q.setActive,!1,{value:$})))};return x.initialized?Ht():x.on("init",Ht),ge.clear},Ws=x=>bn(x,"menu"),si=x=>qe(x,A=>{const $=A.text||A.title||"";return Ws(A)?{text:$,items:si(A.menu)}:{text:$,value:A.value}}),ac=x=>x.length?G.some(si([{text:"Select...",value:"mce-no-match"},...x])):G.none(),ic=(x,A,$,q)=>qe(A,ge=>{const Ye=ge.text||ge.title;return Ws(ge)?{type:"nestedmenuitem",text:Ye,getSubmenuItems:()=>ic(x,ge.menu,$,q)}:{text:Ye,type:"togglemenuitem",onAction:()=>q(ge.value),onSetup:bl(x,$,ge.value)}}),Cu=(x,A)=>$=>{x.execCommand("mceTableApplyCellStyle",!1,{[A]:$})},Ef=x=>Be(x,A=>Ws(A)?[{...A,menu:Ef(A.menu)}]:Xo(A.value)?[A]:[]),id=(x,A,$,q)=>ge=>ge(ic(x,A,$,q)),Zd=(x,A,$)=>{const q=qe(A,ge=>({text:ge.title,value:"#"+xf(ge.value).value,type:"choiceitem"}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:q.length>0?q:void 0,allowCustomColors:!1},onAction:ge=>{const Ye=ge.value==="remove"?"":ge.value;x.execCommand("mceTableApplyCellStyle",!1,{[$]:Ye})}}]},jd=x=>()=>{const $=x.queryCommandValue("mceTableRowType")==="header"?"body":"header";x.execCommand("mceTableRowType",!1,{type:$})},ta=x=>()=>{const $=x.queryCommandValue("mceTableColType")==="th"?"td":"th";x.execCommand("mceTableColType",!1,{type:$})},ld=x=>ac(Ic(x)).map(A=>({name:"class",type:"listbox",label:"Class",items:A})),e2=[{name:"width",type:"input",label:"Width"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:Wi}],Gd=x=>e2.concat(ld(x).toArray()),Ts=(x,A)=>{const q=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(si(Wl(x)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:A==="cell"?[{name:"borderwidth",type:"input",label:"Border width"}].concat(q):q}},Tf={normal:(x,A)=>{const $=x.dom;return{setAttrib:(Ht,un)=>{$.setAttrib(A,Ht,un)},setStyle:(Ht,un)=>{$.setStyle(A,Ht,un)},setFormat:(Ht,un)=>{un===""?x.formatter.remove(Ht,{value:null},A,!0):x.formatter.apply(Ht,{value:un},A)}}}},fa=x=>Uo(x,"rgb")?Ro(x):x,ri=x=>{const A=Ue.fromDom(x);return{borderwidth:Yc(A,"border-width").getOr(""),borderstyle:Yc(A,"border-style").getOr(""),bordercolor:Yc(A,"border-color").map(fa).getOr(""),backgroundcolor:Yc(A,"background-color").map(fa).getOr("")}},$r=x=>{const A=x[0],$=x.slice(1);return rt($,q=>{rt(Xn(A),ge=>{ms(q,(Ye,Ht)=>{const un=A[ge];un!==""&&ge===Ht&&un!==Ye&&(A[ge]=ge==="class"?"mce-no-match":"")})})}),A},ud=(x,A,$,q)=>Je(x,ge=>!zt($.formatter.matchNode(q,A+ge))).getOr(""),Yr=re(ud,["left","center","right"],"align"),Af=re(ud,["top","middle","bottom"],"valign"),jh=(x,A)=>{const $=Uh(x),q=Oc(x),ge=()=>({borderstyle:Ce($,"border-style").getOr(""),bordercolor:fa(Ce($,"border-color").getOr("")),backgroundcolor:fa(Ce($,"background-color").getOr(""))}),Ye={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},Ht=()=>{const Zs=$["border-width"];return Ua(x)&&Zs?{border:Zs}:Ce(q,"border").fold(()=>({}),Br=>({border:Br}))},un=A?ge():{},fo=()=>{const Zs=Ce($,"border-spacing").or(Ce(q,"cellspacing")).fold(()=>({}),Wr=>({cellspacing:Wr})),Br=Ce($,"border-padding").or(Ce(q,"cellpadding")).fold(()=>({}),Wr=>({cellpadding:Wr}));return{...Zs,...Br}};return{...Ye,...$,...q,...un,...Ht(),...fo()}},g1=x=>Z(Ue.fromDom(x)).map(A=>{const $={selection:mu(x.cells)};return c1(A,$)}).getOr(""),sS=(x,A,$)=>{const q=(un,fo)=>{const Oo=Yc(Ue.fromDom(fo),"border-width");return Ua(x)&&Oo.isSome()?Oo.getOr(""):un.getAttrib(fo,"border")||za(x.dom,fo,"border-width")||za(x.dom,fo,"border")||""},ge=x.dom,Ye=Ua(x)?ge.getStyle(A,"border-spacing")||ge.getAttrib(A,"cellspacing"):ge.getAttrib(A,"cellspacing")||ge.getStyle(A,"border-spacing"),Ht=Ua(x)?za(ge,A,"padding")||ge.getAttrib(A,"cellpadding"):ge.getAttrib(A,"cellpadding")||za(ge,A,"padding");return{width:ge.getStyle(A,"width")||ge.getAttrib(A,"width"),height:ge.getStyle(A,"height")||ge.getAttrib(A,"height"),cellspacing:Ye??"",cellpadding:Ht??"",border:q(ge,A),caption:!!ge.select("caption",A)[0],class:ge.getAttrib(A,"class",""),align:Yr(x,A),...$?ri(A):{}}},jl=(x,A,$)=>{const q=x.dom;return{height:q.getStyle(A,"height")||q.getAttrib(A,"height"),class:q.getAttrib(A,"class",""),type:g1(A),align:Yr(x,A),...$?ri(A):{}}},t2=(x,A,$,q)=>{const ge=x.dom,Ye=q.getOr(A);return{width:((un,fo)=>ge.getStyle(un,fo)||ge.getAttrib(un,fo))(Ye,"width"),scope:ge.getAttrib(A,"scope"),celltype:Pe(A),class:ge.getAttrib(A,"class",""),halign:Yr(x,A),valign:Af(x,A),...$?ri(A):{}}},h1=(x,A)=>{const $=Ur.fromTable(x),q=Ur.justCells($),ge=tt(q,Ye=>le(A,Ht=>Yt(Ye.element,Ht)));return qe(ge,Ye=>({element:Ye.element.dom,column:Ur.getColumnAt($,Ye.column).map(Ht=>Ht.element.dom)}))},Gl=(x,A,$,q)=>{q("scope")&&x.setAttrib("scope",$.scope),q("class")&&$.class!=="mce-no-match"&&x.setAttrib("class",$.class),q("width")&&A.setStyle("width",qr($.width))},vb=(x,A,$)=>{$("backgroundcolor")&&x.setFormat("tablecellbackgroundcolor",A.backgroundcolor),$("bordercolor")&&x.setFormat("tablecellbordercolor",A.bordercolor),$("borderstyle")&&x.setFormat("tablecellborderstyle",A.borderstyle),$("borderwidth")&&x.setFormat("tablecellborderwidth",qr(A.borderwidth))},kf=(x,A,$,q)=>{const ge=A.length===1;rt(A,Ye=>{const Ht=Ye.element,un=ge?je:q,fo=Tf.normal(x,Ht),Oo=Ye.column.map(Zs=>Tf.normal(x,Zs)).getOr(fo);Gl(fo,Oo,$,un),Va(x)&&vb(fo,$,un),q("halign")&&Sf(x,Ht,$.halign),q("valign")&&hb(x,Ht,$.valign)})},Eg=(x,A)=>{x.execCommand("mceTableCellType",!1,{type:A.celltype,no_events:!0})},Tg=(x,A,$,q)=>{const ge=ae(q,(Ye,Ht)=>$[Ht]!==Ye);Ee(ge)>0&&A.length>=1&&Z(A[0]).each(Ye=>{const Ht=h1(Ye,A),un=Ee(ae(ge,(Oo,Zs)=>Zs!=="scope"&&Zs!=="celltype"))>0,fo=_t(ge,"celltype");(un||_t(ge,"scope"))&&kf(x,Ht,q,re(_t,ge)),fo&&Eg(x,q),xo(x,Ye.dom,{structure:fo,style:un})})},p1=(x,A,$,q)=>{const ge=q.getData();q.close(),x.undoManager.transact(()=>{Tg(x,A,$,ge),x.focus()})},yb=(x,A)=>{const $=Z(A[0]).map(q=>qe(h1(q,A),ge=>t2(x,ge.element,Va(x),ge.column)));return $r($.getOrDie())},vl=x=>{const A=m1(x);if(A.length===0)return;const $=yb(x,A),q={type:"tabpanel",tabs:[{title:"General",name:"general",items:Gd(x)},Ts(x,"cell")]},ge={type:"panel",items:[{type:"grid",columns:2,items:Gd(x)}]};x.windowManager.open({title:"Cell Properties",size:"normal",body:Va(x)?q:ge,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:$,onSubmit:re(p1,x,A,$)})},n2=x=>ac(kc(x)).map(A=>({name:"class",type:"listbox",label:"Class",items:A})),qd=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],As=x=>qd.concat(n2(x).toArray()),ga=(x,A,$)=>{$("class")&&A.class!=="mce-no-match"&&x.setAttrib("class",A.class),$("height")&&x.setStyle("height",qr(A.height))},wu=(x,A,$)=>{$("backgroundcolor")&&x.setStyle("background-color",A.backgroundcolor),$("bordercolor")&&x.setStyle("border-color",A.bordercolor),$("borderstyle")&&x.setStyle("border-style",A.borderstyle)},b1=(x,A,$,q)=>{const Ye=A.length===1?je:q;rt(A,Ht=>{const un=N(Ue.fromDom(Ht),"td,th"),fo=Tf.normal(x,Ht);ga(fo,$,Ye),Si(x)&&wu(fo,$,Ye),q("height")&&rt(un,Oo=>{x.dom.setStyle(Oo.dom,"height",null)}),q("align")&&Sf(x,Ht,$.align)})},Kd=(x,A)=>{x.execCommand("mceTableRowType",!1,{type:A.type,no_events:!0})},v1=(x,A,$,q)=>{const ge=ae(q,(Ye,Ht)=>$[Ht]!==Ye);if(Ee(ge)>0){const Ye=_t(ge,"type"),Ht=Ye?Ee(ge)>1:!0;Ht&&b1(x,A,q,re(_t,ge)),Ye&&Kd(x,q),Z(Ue.fromDom(A[0])).each(un=>xo(x,un.dom,{structure:Ye,style:Ht}))}},Cb=(x,A,$,q)=>{const ge=q.getData();q.close(),x.undoManager.transact(()=>{v1(x,A,$,ge),x.focus()})},Su=x=>{const A=ea(la(x),wg.selected);if(A.length===0)return;const $=qe(A,Ht=>jl(x,Ht.dom,Si(x))),q=$r($),ge={type:"tabpanel",tabs:[{title:"General",name:"general",items:As(x)},Ts(x,"row")]},Ye={type:"panel",items:[{type:"grid",columns:2,items:As(x)}]};x.windowManager.open({title:"Row Properties",size:"normal",body:Si(x)?ge:Ye,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:q,onSubmit:re(Cb,x,qe(A,Ht=>Ht.dom),q)})},xu=(x,A,$)=>{const q=$?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],ge=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],Ye=Es(x)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],Ht=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],un=A.length>0?[{name:"class",type:"listbox",label:"Class",items:A}]:[];return q.concat(ge).concat(Ye).concat(Ht).concat(un)},Ps=(x,A,$,q)=>{if(A.tagName==="TD"||A.tagName==="TH")ls($)&&Go(q)?x.setStyle(A,$,q):x.setStyles(A,$);else if(A.children)for(let ge=0;ge<A.children.length;ge++)Ps(x,A.children[ge],$,q)},wb=(x,A,$,q)=>{const ge=x.dom,Ye={},Ht={},un=Ua(x),fo=ma(x),Oo=parseFloat($.border)===0;if(!zt($.class)&&$.class!=="mce-no-match"&&(Ye.class=$.class),Ht.height=qr($.height),un?Ht.width=qr($.width):ge.getAttrib(A,"width")&&(Ye.width=Us($.width)),un?(Oo?(Ye.border=0,Ht["border-width"]=""):(Ht["border-width"]=qr($.border),Ye.border=1),Ht["border-spacing"]=qr($.cellspacing)):(Ye.border=Oo?0:$.border,Ye.cellpadding=$.cellpadding,Ye.cellspacing=$.cellspacing),un&&A.children){const Zs={};if(Oo?Zs["border-width"]="":q.border&&(Zs["border-width"]=qr($.border)),q.cellpadding&&(Zs.padding=qr($.cellpadding)),fo&&q.bordercolor&&(Zs["border-color"]=$.bordercolor),!$e(Zs))for(let Br=0;Br<A.children.length;Br++)Ps(ge,A.children[Br],Zs)}if(fo){const Zs=$;Ht["background-color"]=Zs.backgroundcolor,Ht["border-color"]=Zs.bordercolor,Ht["border-style"]=Zs.borderstyle}ge.setStyles(A,{...Uh(x),...Ht}),ge.setAttribs(A,{...Oc(x),...Ye})},Tr=(x,A,$,q)=>{const ge=x.dom,Ye=q.getData(),Ht=ae(Ye,(un,fo)=>$[fo]!==un);q.close(),x.undoManager.transact(()=>{if(!A){const un=Hr(Ye.cols).getOr(1),fo=Hr(Ye.rows).getOr(1);x.execCommand("mceInsertTable",!1,{rows:fo,columns:un}),A=pl(la(x),po(x)).bind(Oo=>Z(Oo,po(x))).map(Oo=>Oo.dom).getOrDie()}if(Ee(Ht)>0){const un={border:_t(Ht,"border"),bordercolor:_t(Ht,"bordercolor"),cellpadding:_t(Ht,"cellpadding")};wb(x,A,Ye,un);const fo=ge.select("caption",A)[0];(fo&&!Ye.caption||!fo&&Ye.caption)&&x.execCommand("mceTableToggleCaption"),Sf(x,A,Ye.align)}if(x.focus(),x.addVisual(),Ee(Ht)>0){const un=_t(Ht,"caption"),fo=un?Ee(Ht)>1:!0;xo(x,A,{structure:un,style:fo})}})},Df=(x,A)=>{const $=x.dom;let q,ge=jh(x,ma(x));A?(ge.cols="1",ge.rows="1",ma(x)&&(ge.borderstyle="",ge.bordercolor="",ge.backgroundcolor="")):(q=$.getParent(x.selection.getStart(),"table",x.getBody()),q?ge=sS(x,q,ma(x)):ma(x)&&(ge.borderstyle="",ge.bordercolor="",ge.backgroundcolor=""));const Ye=ac(Er(x));Ye.isSome()&&ge.class&&(ge.class=ge.class.replace(/\s*mce\-item\-table\s*/g,""));const Ht={type:"grid",columns:2,items:xu(x,Ye.getOr([]),A)},un=()=>({type:"panel",items:[Ht]}),fo=()=>({type:"tabpanel",tabs:[{title:"General",name:"general",items:[Ht]},Ts(x,"table")]}),Oo=ma(x)?fo():un();x.windowManager.open({title:"Table Properties",size:"normal",body:Oo,onSubmit:re(Tr,x,q,ge),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:ge})},Xr=x=>{const A=$=>{ua(la(x))&&$()};ms({mceTableProps:re(Df,x,!1),mceTableRowProps:re(Su,x),mceTableCellProps:re(vl,x),mceInsertTableDialog:re(Df,x,!0)},($,q)=>x.addCommand(q,()=>A($)))},Eu=x=>({element:x,mergable:G.none(),unmergable:G.none(),selection:[x]}),ha=(x,A,$)=>({element:$,mergable:Hc(A,x,wg),unmergable:Lc(x),selection:Cc(x)}),dd=x=>{const A=et(G.none()),$=et([]);let q=G.none();const ge=kn("caption"),Ye=Ho=>q.forall(er=>!er[Ho]),Ht=()=>vu(la(x),po(x)),un=()=>vu(Jo(x),po(x)),fo=()=>Ht().bind(Ho=>Lo(vo(Z(Ho),un().bind(Z),(er,ba)=>Yt(er,ba)?ge(Ho)?G.some(Eu(Ho)):G.some(ha(m1(x),er,Ho)):G.none()))),Oo=Ho=>Z(Ho.element).map(ba=>{const Wa=Ur.fromTable(ba),Dg=vg(Wa,Ho).getOr([]),r2=ln(Dg,(Qh,Og)=>(Og.isLocked&&(Qh.onAny=!0,Og.column===0?Qh.onFirst=!0:Og.column+Og.colspan>=Wa.grid.columns&&(Qh.onLast=!0)),Qh),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:n1(Wa,Ho).isSome(),unmergeable:ee(Wa,Ho).isSome(),locked:r2}}),Zs=()=>{A.set(So(fo)()),q=A.get().bind(Oo),rt($.get(),En)},Br=Ho=>(Ho(),$.set($.get().concat([Ho])),()=>{$.set(tt($.get(),er=>er!==Ho))}),Wr=(Ho,er)=>Br(()=>A.get().fold(()=>{Ho.setEnabled(!1)},ba=>{Ho.setEnabled(!er(ba)&&x.selection.isEditable())})),Ei=(Ho,er,ba)=>Br(()=>A.get().fold(()=>{Ho.setEnabled(!1),Ho.setActive(!1)},Wa=>{Ho.setEnabled(!er(Wa)&&x.selection.isEditable()),Ho.setActive(ba(Wa))})),md=Ho=>q.exists(er=>er.locked[Ho]),Gi=Ho=>Wr(Ho,er=>!1),Lm=Ho=>Wr(Ho,er=>ge(er.element)),kg=Ho=>er=>Wr(er,ba=>ge(ba.element)||md(Ho)),w1=Ho=>er=>Wr(er,ba=>ge(ba.element)||Ho().isNone()),Hm=(Ho,er)=>ba=>Wr(ba,Wa=>ge(Wa.element)||Ho().isNone()||md(er)),Yd=Ho=>Wr(Ho,er=>Ye("mergeable")),S1=Ho=>Wr(Ho,er=>Ye("unmergeable")),Yh=Ho=>Ei(Ho,Vo,er=>Z(er.element,po(x)).exists(Wa=>se(Wa,"caption"))),Xh=(Ho,er)=>ba=>Ei(ba,Wa=>ge(Wa.element),()=>x.queryCommandValue(Ho)===er),s2=Xh("mceTableRowType","header"),Jh=Xh("mceTableColType","th");return x.on("NodeChange ExecCommand TableSelectorChange",Zs),{onSetupTable:Gi,onSetupCellOrRow:Lm,onSetupColumn:kg,onSetupPasteable:w1,onSetupPasteableColumn:Hm,onSetupMergeable:Yd,onSetupUnmergeable:S1,resetTargets:Zs,onSetupTableWithCaption:Yh,onSetupTableRowHeaders:s2,onSetupTableColumnHeaders:Jh,targets:A.get}};var Gh=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const y1="x-tinymce/dom-table-",C1=y1+"rows",o2=y1+"columns",ci=x=>{const A=Gh.read()??[];return jn(A,$=>G.from($.getType(x)))},ql=()=>ci(C1),Jr=()=>ci(o2),_c=x=>A=>{const $=()=>{A.setEnabled(x.selection.isEditable())};return x.on("NodeChange",$),$(),()=>{x.off("NodeChange",$)}},qh=(x,A)=>{x.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:_c(x),fetch:un=>un("inserttable | cell row column | advtablesort | tableprops deletetable")});const $=un=>()=>x.execCommand(un),q=(un,fo)=>{x.queryCommandSupported(fo.command)&&x.ui.registry.addButton(un,{...fo,onAction:cn(fo.onAction)?fo.onAction:$(fo.command)})},ge=(un,fo)=>{x.queryCommandSupported(fo.command)&&x.ui.registry.addToggleButton(un,{...fo,onAction:cn(fo.onAction)?fo.onAction:$(fo.command)})};q("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:A.onSetupTable}),q("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:A.onSetupTable}),q("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:A.onSetupCellOrRow}),q("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:A.onSetupMergeable}),q("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:A.onSetupUnmergeable}),q("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:A.onSetupCellOrRow}),q("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:A.onSetupCellOrRow}),q("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:A.onSetupCellOrRow}),q("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:A.onSetupCellOrRow}),q("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:A.onSetupColumn("onFirst")}),q("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:A.onSetupColumn("onLast")}),q("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:A.onSetupColumn("onAny")}),q("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:A.onSetupCellOrRow}),q("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:A.onSetupCellOrRow}),q("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:A.onSetupPasteable(ql)}),q("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:A.onSetupPasteable(ql)}),q("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:A.onSetupColumn("onAny")}),q("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:A.onSetupColumn("onAny")}),q("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:A.onSetupPasteableColumn(Jr,"onFirst")}),q("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:A.onSetupPasteableColumn(Jr,"onLast")}),q("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:_c(x)});const Ye=Ef(Er(x));Ye.length!==0&&x.queryCommandSupported("mceTableToggleClass")&&x.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:id(x,Ye,"tableclass",un=>x.execCommand("mceTableToggleClass",!1,un)),onSetup:A.onSetupTable});const Ht=Ef(Ic(x));Ht.length!==0&&x.queryCommandSupported("mceTableCellToggleClass")&&x.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:id(x,Ht,"tablecellclass",un=>x.execCommand("mceTableCellToggleClass",!1,un)),onSetup:A.onSetupCellOrRow}),x.queryCommandSupported("mceTableApplyCellStyle")&&(x.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:id(x,Wi,"tablecellverticalalign",Cu(x,"vertical-align")),onSetup:A.onSetupCellOrRow}),x.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:id(x,rc(x),"tablecellborderwidth",Cu(x,"border-width")),onSetup:A.onSetupCellOrRow}),x.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:id(x,Wl(x),"tablecellborderstyle",Cu(x,"border-style")),onSetup:A.onSetupCellOrRow}),x.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:un=>un(Zd(x,Dc(x),"background-color")),onSetup:A.onSetupCellOrRow}),x.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:un=>un(Zd(x,Kr(x),"border-color")),onSetup:A.onSetupCellOrRow})),ge("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:A.onSetupTableWithCaption}),ge("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:jd(x),onSetup:A.onSetupTableRowHeaders}),ge("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:ta(x),onSetup:A.onSetupTableColumnHeaders})},Ag=x=>{const A=q=>x.dom.is(q,"table")&&x.getBody().contains(q)&&x.dom.isEditable(q.parentNode),$=hl(x);$.length>0&&x.ui.registry.addContextToolbar("table",{predicate:A,items:$,scope:"node",position:"node"})},Kh=x=>A=>{const $=()=>{A.setEnabled(x.selection.isEditable())};return x.on("NodeChange",$),$(),()=>{x.off("NodeChange",$)}},Sb=(x,A)=>{const $=Br=>()=>x.execCommand(Br),q=(Br,Wr)=>x.queryCommandSupported(Wr.command)?(x.ui.registry.addMenuItem(Br,{...Wr,onAction:cn(Wr.onAction)?Wr.onAction:$(Wr.command)}),!0):!1,ge=(Br,Wr)=>{x.queryCommandSupported(Wr.command)&&x.ui.registry.addToggleMenuItem(Br,{...Wr,onAction:cn(Wr.onAction)?Wr.onAction:$(Wr.command)})},Ye=Br=>{x.execCommand("mceInsertTable",!1,{rows:Br.numRows,columns:Br.numColumns})},Ht=[q("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:A.onSetupCellOrRow}),q("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:A.onSetupCellOrRow}),q("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:A.onSetupCellOrRow}),q("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:A.onSetupCellOrRow}),q("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:A.onSetupCellOrRow}),q("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:A.onSetupCellOrRow}),q("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:A.onSetupPasteable(ql)}),q("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:A.onSetupPasteable(ql)})],un=[q("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:A.onSetupColumn("onFirst")}),q("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:A.onSetupColumn("onLast")}),q("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:A.onSetupColumn("onAny")}),q("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:A.onSetupColumn("onAny")}),q("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:A.onSetupColumn("onAny")}),q("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:A.onSetupPasteableColumn(Jr,"onFirst")}),q("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:A.onSetupPasteableColumn(Jr,"onLast")})],fo=[q("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:A.onSetupCellOrRow}),q("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:A.onSetupMergeable}),q("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:A.onSetupUnmergeable})];Vi(x)?x.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:Ye}],onSetup:Kh(x)}):x.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:$("mceInsertTableDialog"),onSetup:Kh(x)}),x.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:$("mceInsertTableDialog"),onSetup:Kh(x)}),q("tableprops",{text:"Table properties",onSetup:A.onSetupTable,command:"mceTableProps"}),q("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:A.onSetupTable,command:"mceTableDelete"}),xe(Ht,!0)&&x.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:dt("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),xe(un,!0)&&x.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:dt("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),xe(fo,!0)&&x.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:dt("tablecellprops tablemergecells tablesplitcells")}),x.ui.registry.addContextMenu("table",{update:()=>(A.resetTargets(),A.targets().fold(dt(""),Br=>wr(Br.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const Oo=Ef(Er(x));Oo.length!==0&&x.queryCommandSupported("mceTableToggleClass")&&x.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>ic(x,Oo,"tableclass",Br=>x.execCommand("mceTableToggleClass",!1,Br)),onSetup:A.onSetupTable});const Zs=Ef(Ic(x));Zs.length!==0&&x.queryCommandSupported("mceTableCellToggleClass")&&x.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>ic(x,Zs,"tablecellclass",Br=>x.execCommand("mceTableCellToggleClass",!1,Br)),onSetup:A.onSetupCellOrRow}),x.queryCommandSupported("mceTableApplyCellStyle")&&(x.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>ic(x,Wi,"tablecellverticalalign",Cu(x,"vertical-align")),onSetup:A.onSetupCellOrRow}),x.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>ic(x,rc(x),"tablecellborderwidth",Cu(x,"border-width")),onSetup:A.onSetupCellOrRow}),x.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>ic(x,Wl(x),"tablecellborderstyle",Cu(x,"border-style")),onSetup:A.onSetupCellOrRow}),x.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>Zd(x,Dc(x),"background-color"),onSetup:A.onSetupCellOrRow}),x.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>Zd(x,Kr(x),"border-color"),onSetup:A.onSetupCellOrRow})),ge("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:A.onSetupTableWithCaption}),ge("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:jd(x),onSetup:A.onSetupTableRowHeaders}),ge("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:ta(x),onSetup:A.onSetupTableRowHeaders})},yl=x=>{const A=dd(x);fl(x),Xr(x),Sb(x,A),qh(x,A),Ag(x)};var rS=()=>{Ko.add("table",yl)};rS()})();(function(){const Ko=($e,et,Xt)=>{var oo;return Xt($e,et.prototype)?!0:((oo=$e.constructor)==null?void 0:oo.name)===et.name},Yo=$e=>{const et=typeof $e;return $e===null?"null":et==="object"&&Array.isArray($e)?"array":et==="object"&&Ko($e,String,(Xt,oo)=>oo.isPrototypeOf(Xt))?"string":et},bs=$e=>et=>Yo(et)===$e,jo=$e=>et=>typeof et===$e,as=$e=>et=>$e===et,ds=bs("string"),ls=as(void 0),Nt=$e=>$e==null,vn=$e=>!Nt($e),zt=jo("function"),Go=($e=>()=>$e)(!1),bn=class bn{constructor(et,Xt){Xe(this,"tag");Xe(this,"value");this.tag=et,this.value=Xt}static some(et){return new bn(!0,et)}static none(){return bn.singletonNone}fold(et,Xt){return this.tag?Xt(this.value):et()}isSome(){return this.tag}isNone(){return!this.tag}map(et){return this.tag?bn.some(et(this.value)):bn.none()}bind(et){return this.tag?et(this.value):bn.none()}exists(et){return this.tag&&et(this.value)}forall(et){return!this.tag||et(this.value)}filter(et){return!this.tag||et(this.value)?this:bn.none()}getOr(et){return this.tag?this.value:et}or(et){return this.tag?this:et}getOrThunk(et){return this.tag?this.value:et()}orThunk(et){return this.tag?this:et()}getOrDie(et){if(this.tag)return this.value;throw new Error(et??"Called getOrDie on None")}static from(et){return vn(et)?bn.some(et):bn.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(et){this.tag&&et(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};Xe(bn,"singletonNone",new bn(!1));let cn=bn;const Fn=Array.prototype.slice,Eo=Array.prototype.indexOf,qn=($e,et)=>Eo.call($e,et),dt=($e,et)=>qn($e,et)>-1,Fo=($e,et)=>{const Xt=$e.length,oo=new Array(Xt);for(let vo=0;vo<Xt;vo++){const Lo=$e[vo];oo[vo]=et(Lo,vo)}return oo},nn=($e,et)=>{const Xt=[];for(let oo=0,vo=$e.length;oo<vo;oo++){const Lo=$e[oo];et(Lo,oo)&&Xt.push(Lo)}return Xt},re=($e,et,Xt)=>{for(let oo=0,vo=$e.length;oo<vo;oo++){const Lo=$e[oo];if(et(Lo,oo))return cn.some(Lo);if(Xt(Lo,oo))break}return cn.none()},En=($e,et)=>re($e,et,Go),Vo=($e,et)=>{const Xt=Fn.call($e,0);return Xt.sort(et),Xt},je=Object.keys,G=Object.hasOwnProperty,St=($e,et)=>ro($e,et)?cn.from($e[et]):cn.none(),ro=($e,et)=>G.call($e,et),pn=$e=>{let et=$e;return{get:()=>et,set:vo=>{et=vo}}},xe=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let le=0;const vs=$e=>{const Xt=new Date().getTime(),oo=Math.floor(xe()*1e9);return le++,$e+"_"+oo+le+String(Xt)},qe=$e=>{const et=[],Xt=oo=>{et.push(oo)};for(let oo=0;oo<$e.length;oo++)$e[oo].each(Xt);return et};var rt=tinymce.util.Tools.resolve("tinymce.PluginManager");const k=$e=>({addTab:Xt=>{const oo=Xt.name??vs("tab-name"),vo=$e.get();vo[oo]=Xt,$e.set(vo)}}),ho=($e,et)=>{$e.addCommand("mceHelp",et)},tt=$e=>et=>et.options.get($e),No=$e=>{const et=$e.options.register;et("help_tabs",{processor:"array"})},ln=tt("help_tabs"),He=tt("forced_plugins"),Je=($e,et)=>{$e.ui.registry.addButton("help",{icon:"help",tooltip:"Help",onAction:et,context:"any"}),$e.ui.registry.addMenuItem("help",{text:"Help",icon:"help",shortcut:"Alt+0",onAction:et,context:"any"})};var Bt=tinymce.util.Tools.resolve("tinymce.Resource"),Be=tinymce.util.Tools.resolve("tinymce.util.I18n");const xt=($e,et)=>Bt.load(`tinymce.html-i18n.help-keynav.${et}`,`${$e}/js/i18n/keynav/${et}.js`),Ae=$e=>xt($e,Be.getCode()).catch(()=>xt($e,"en")),Ve=($e,et)=>{$e.on("init",()=>{Ae(et)})},F=async $e=>({name:"keyboardnav",title:"Keyboard Navigation",items:[{type:"htmlpanel",presets:"document",html:await Ae($e)}]});var Fs=tinymce.util.Tools.resolve("tinymce.Env");const jn=$e=>{const et=Fs.os.isMacOS()||Fs.os.isiOS(),vo=et?{alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"}:{meta:"Ctrl ",access:"Shift + Alt "},Lo=$e.split("+"),zn=Fo(Lo,ns=>{const ko=ns.toLowerCase().trim();return ro(vo,ko)?vo[ko]:ns});return et?zn.join("").replace(/\s/,""):zn.join("+")},Xn=[{shortcuts:["Meta + B"],action:"Bold"},{shortcuts:["Meta + I"],action:"Italic"},{shortcuts:["Meta + U"],action:"Underline"},{shortcuts:["Meta + A"],action:"Select all"},{shortcuts:["Meta + Y","Meta + Shift + Z"],action:"Redo"},{shortcuts:["Meta + Z"],action:"Undo"},{shortcuts:["Access + 1"],action:"Heading 1"},{shortcuts:["Access + 2"],action:"Heading 2"},{shortcuts:["Access + 3"],action:"Heading 3"},{shortcuts:["Access + 4"],action:"Heading 4"},{shortcuts:["Access + 5"],action:"Heading 5"},{shortcuts:["Access + 6"],action:"Heading 6"},{shortcuts:["Access + 7"],action:"Paragraph"},{shortcuts:["Access + 8"],action:"Div"},{shortcuts:["Access + 9"],action:"Address"},{shortcuts:["Alt + 0"],action:"Open help dialog"},{shortcuts:["Alt + F9"],action:"Focus to menubar"},{shortcuts:["Alt + F10"],action:"Focus to toolbar"},{shortcuts:["Alt + F11"],action:"Focus to element path"},{shortcuts:["Alt + F12"],action:"Focus to notification"},{shortcuts:["Ctrl + F9"],action:"Focus to contextual toolbar"},{shortcuts:["Shift + Enter"],action:"Open popup menu for split buttons"},{shortcuts:["Meta + K"],action:"Insert link (if link plugin activated)"},{shortcuts:["Meta + S"],action:"Save (if save plugin activated)"},{shortcuts:["Meta + F"],action:"Find (if searchreplace plugin activated)"},{shortcuts:["Meta + Shift + F"],action:"Switch to or from fullscreen mode"}],co=()=>{const $e=Fo(Xn,Xt=>{const oo=Fo(Xt.shortcuts,jn).join(" or ");return[Xt.action,oo]});return{name:"shortcuts",title:"Handy Shortcuts",items:[{type:"table",header:["Action","Shortcut"],cells:$e}]}},ms=Fo([{key:"accordion",name:"Accordion"},{key:"anchor",name:"Anchor"},{key:"autolink",name:"Autolink"},{key:"autoresize",name:"Autoresize"},{key:"autosave",name:"Autosave"},{key:"charmap",name:"Character Map"},{key:"code",name:"Code"},{key:"codesample",name:"Code Sample"},{key:"colorpicker",name:"Color Picker"},{key:"directionality",name:"Directionality"},{key:"emoticons",name:"Emoticons"},{key:"fullscreen",name:"Full Screen"},{key:"help",name:"Help"},{key:"image",name:"Image"},{key:"importcss",name:"Import CSS"},{key:"insertdatetime",name:"Insert Date/Time"},{key:"link",name:"Link"},{key:"lists",name:"Lists"},{key:"advlist",name:"List Styles"},{key:"media",name:"Media"},{key:"nonbreaking",name:"Nonbreaking"},{key:"pagebreak",name:"Page Break"},{key:"preview",name:"Preview"},{key:"quickbars",name:"Quick Toolbars"},{key:"save",name:"Save"},{key:"searchreplace",name:"Search and Replace"},{key:"table",name:"Table"},{key:"textcolor",name:"Text Color"},{key:"visualblocks",name:"Visual Blocks"},{key:"visualchars",name:"Visual Characters"},{key:"wordcount",name:"Word Count"},{key:"a11ychecker",name:"Accessibility Checker",type:"premium"},{key:"typography",name:"Advanced Typography",type:"premium",slug:"advanced-typography"},{key:"ai",name:"AI Assistant",type:"premium"},{key:"casechange",name:"Case Change",type:"premium"},{key:"checklist",name:"Checklist",type:"premium"},{key:"advcode",name:"Enhanced Code Editor",type:"premium"},{key:"mediaembed",name:"Enhanced Media Embed",type:"premium",slug:"introduction-to-mediaembed"},{key:"advtable",name:"Enhanced Tables",type:"premium"},{key:"exportpdf",name:"Export to PDF",type:"premium"},{key:"exportword",name:"Export to Word",type:"premium"},{key:"footnotes",name:"Footnotes",type:"premium"},{key:"formatpainter",name:"Format Painter",type:"premium"},{key:"editimage",name:"Image Editing",type:"premium"},{key:"uploadcare",name:"Image Optimizer Powered by Uploadcare",type:"premium"},{key:"importword",name:"Import from Word",type:"premium"},{key:"inlinecss",name:"Inline CSS",type:"premium",slug:"inline-css"},{key:"linkchecker",name:"Link Checker",type:"premium"},{key:"math",name:"Math",type:"premium"},{key:"markdown",name:"Markdown",type:"premium"},{key:"mentions",name:"Mentions",type:"premium"},{key:"mergetags",name:"Merge Tags",type:"premium"},{key:"pageembed",name:"Page Embed",type:"premium"},{key:"permanentpen",name:"Permanent Pen",type:"premium"},{key:"powerpaste",name:"PowerPaste",type:"premium",slug:"introduction-to-powerpaste"},{key:"revisionhistory",name:"Revision History",type:"premium"},{key:"tinymcespellchecker",name:"Spell Checker",type:"premium",slug:"introduction-to-tiny-spellchecker"},{key:"suggestededits",name:"Suggested Edits",type:"premium"},{key:"autocorrect",name:"Spelling Autocorrect",type:"premium"},{key:"tableofcontents",name:"Table of Contents",type:"premium"},{key:"advtemplate",name:"Templates",type:"premium",slug:"advanced-templates"},{key:"tinycomments",name:"Tiny Comments",type:"premium",slug:"introduction-to-tiny-comments"},{key:"tinydrive",name:"Tiny Drive",type:"premium",slug:"tinydrive-introduction"}],$e=>({...$e,type:$e.type||"opensource",slug:$e.slug||$e.key})),De=$e=>{const et=()=>{const mo=nn(ms,({type:Uo})=>Uo==="premium"),Ns=Vo(Fo(mo,Uo=>Uo.name),(Uo,Wo)=>Uo.localeCompare(Wo)),Ls=Fo(Ns,Uo=>`<li>${Uo}</li>`).join("");return"<div><p><b>"+Be.translate("Premium plugins:")+"</b></p><ul>"+Ls+'<li class="tox-help__more-link" "><a href="https://www.tiny.cloud/pricing/?utm_campaign=help_dialog_plugin_tab&utm_source=tiny&utm_medium=referral&utm_term=read_more&utm_content=premium_plugin_heading" rel="noopener" target="_blank" data-alloy-tabstop="true" tabindex="-1">'+Be.translate("Learn more...")+"</a></li></ul></div>"},Xt=mo=>`<a data-alloy-tabstop="true" tabindex="-1" href="${mo.url}" target="_blank" rel="noopener">${mo.name}</a>`,oo=(mo,Ns)=>{const Ls=mo.plugins[Ns].getMetadata;if(zt(Ls)){const Uo=Ls();return{name:Uo.name,html:Xt(Uo)}}else return{name:Ns,html:Ns}},vo=(mo,Ns)=>En(ms,Ls=>Ls.key===Ns).fold(()=>oo(mo,Ns),Ls=>{const Uo=Ls.type==="premium"?`${Ls.name}*`:Ls.name,Wo=Xt({name:Uo,url:`https://www.tiny.cloud/docs/tinymce/${tinymce.majorVersion}/${Ls.slug}/`});return{name:Uo,html:Wo}}),Lo=mo=>{const Ns=je(mo.plugins),Ls=He(mo),Uo=ls(Ls)?["onboarding"]:Ls.concat(["onboarding"]);return nn(Ns,Wo=>!dt(Uo,Wo))},zn=mo=>{const Ns=Lo(mo),Ls=Vo(Fo(Ns,Os=>vo(mo,Os)),(Os,Hr)=>Os.name.localeCompare(Hr.name)),Uo=Fo(Ls,Os=>"<li>"+Os.html+"</li>"),Wo=Uo.length,Js=Uo.join("");return"<p><b>"+Be.translate(["Plugins installed ({0}):",Wo])+"</b></p><ul>"+Js+"</ul>"};return{name:"plugins",title:"Plugins",items:[{type:"htmlpanel",presets:"document",html:[(mo=>mo==null?"":"<div>"+zn(mo)+"</div>")($e),et()].join("")}]}};var ve=tinymce.util.Tools.resolve("tinymce.EditorManager");const ae=()=>{const Xt='<a data-alloy-tabstop="true" tabindex="-1" href="https://www.tiny.cloud/docs/tinymce/8/changelog/?utm_campaign=help_dialog_version_tab&utm_source=tiny&utm_medium=referral" rel="noopener" target="_blank">TinyMCE '+((vo,Lo)=>vo.indexOf("@")===0?"X.X.X":vo+"."+Lo)(ve.majorVersion,ve.minorVersion)+"</a>";return{name:"versions",title:"Version",items:[{type:"htmlpanel",html:"<p>"+Be.translate(["You are using {0}",Xt])+"</p>",presets:"document"}]}},te=($e,et)=>{const Xt={},oo=Fo($e,vo=>{if(ds(vo))return ro(et,vo)&&(Xt[vo]=et[vo]),vo;{const Lo=vo.name??vs("tab-name");return Xt[Lo]=vo,Lo}});return{tabs:Xt,names:oo}},Dt=$e=>{const et=je($e),Xt=et.indexOf("versions");return Xt!==-1&&(et.splice(Xt,1),et.push("versions")),{tabs:$e,names:et}},Ee=async($e,et,Xt)=>{const oo=co(),vo=await F(Xt),Lo=De($e),zn=ae(),ns={[oo.name]:oo,[vo.name]:vo,[Lo.name]:Lo,[zn.name]:zn,...et.get()};return cn.from(ln($e)).fold(()=>Dt(ns),ko=>te(ko,ns))},Ce=($e,et,Xt)=>()=>{Ee($e,et,Xt).then(({tabs:oo,names:vo})=>{const Lo=Fo(vo,ko=>St(oo,ko)),ns={type:"tabpanel",tabs:qe(Lo)};$e.windowManager.open({title:"Help",size:"medium",body:ns,buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{}})})};var _t=()=>{rt.add("help",($e,et)=>{const Xt=pn({}),oo=k(Xt);No($e);const vo=Ce($e,Xt,et);return Je($e,vo),ho($e,vo),$e.shortcuts.add("Alt+0","Open help dialog","mceHelp"),Ve($e,et),oo})};_t()})();(function(){var Ko=tinymce.util.Tools.resolve("tinymce.PluginManager");const bs=(De=>ve=>De===ve)(null),jo=De=>De,as=(De,ve)=>{const ae=De.length,te=new Array(ae);for(let Dt=0;Dt<ae;Dt++){const Ee=De[Dt];te[Dt]=ve(Ee,Dt)}return te},ds=(De,ve)=>{let ae=null;return{cancel:()=>{bs(ae)||(clearTimeout(ae),ae=null)},throttle:(...Ee)=>{bs(ae)&&(ae=setTimeout(()=>{ae=null,De.apply(null,Ee)},ve))}}},ls=De=>De.replace(/\uFEFF/g,""),vn={aletter:"[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-׳ؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆༀཀ-ཇཉ-ཬྈ-ྌႠ-Ⴥა-ჺჼᄀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᨀ-ᨖᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᯀ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⒶ-ⓩⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⴀ-ⴥⴰ-ⵥⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〻〼ㄅ-ㄭㄱ-ㆎㆠ-ㆺꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐꞑꞠ-ꞩꟺ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]",midnumlet:"[-'\\.‘’․﹒＇．]",midletter:"[:··״‧︓﹕：]",midnum:"[±+*/,;;։،؍٬߸⁄︐︔﹐﹔，；]",numeric:"[0-9٠-٩٫۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹]",cr:"\\r",lf:"\\n",newline:"[\v\f\u2028\u2029]",extend:"[̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ऀ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఁ-ఃా-ౄె-ైొ-్ౕౖౢౣಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣംഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳា-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᦰ-ᧀᧈᧉᨗ-ᨛᩕ-ᩞ᩠-᩿᩼ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-᯦᮪-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ᷀-ᷦ᷼-᷿‌‍⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲꙼꙽꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꨩ-ꨶꩃꩌꩍꩻꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︦ﾞﾟ]",format:"[­؀-؃۝܏឴឵‎‏‪-‮⁠-⁤⁪-⁯\uFEFF￹-￻]",katakana:"[〱-〵゛゜゠-ヺー-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ﾝ]",extendnumlet:"[=_‿⁀⁔︳︴﹍-﹏＿∀-⋿<>]",punctuation:"[~№|!-*+-\\/:;?@\\[-`{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]"},zt={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},ts=[new RegExp(vn.aletter),new RegExp(vn.midnumlet),new RegExp(vn.midletter),new RegExp(vn.midnum),new RegExp(vn.numeric),new RegExp(vn.cr),new RegExp(vn.lf),new RegExp(vn.newline),new RegExp(vn.extend),new RegExp(vn.format),new RegExp(vn.katakana),new RegExp(vn.extendnumlet),new RegExp("@")],Go="",cn=new RegExp("^"+vn.punctuation+"$"),Fn=/^\s+$/,Eo=ts,qn=zt.OTHER,dt=De=>{let ve=qn;const ae=Eo.length;for(let te=0;te<ae;++te){const Dt=Eo[te];if(Dt&&Dt.test(De)){ve=te;break}}return ve},Fo=De=>{const ve={};return ae=>{if(ve[ae])return ve[ae];{const te=De(ae);return ve[ae]=te,te}}},nn=De=>{const ve=Fo(dt);return as(De,ve)},re=(De,ve)=>{const ae=De[ve],te=De[ve+1];if(ve<0||ve>De.length-1&&ve!==0||ae===zt.ALETTER&&te===zt.ALETTER)return!1;const Dt=De[ve+2];if(ae===zt.ALETTER&&(te===zt.MIDLETTER||te===zt.MIDNUMLET||te===zt.AT)&&Dt===zt.ALETTER)return!1;const Ee=De[ve-1];return(ae===zt.MIDLETTER||ae===zt.MIDNUMLET||te===zt.AT)&&te===zt.ALETTER&&Ee===zt.ALETTER||(ae===zt.NUMERIC||ae===zt.ALETTER)&&(te===zt.NUMERIC||te===zt.ALETTER)||(ae===zt.MIDNUM||ae===zt.MIDNUMLET)&&te===zt.NUMERIC&&Ee===zt.NUMERIC||ae===zt.NUMERIC&&(te===zt.MIDNUM||te===zt.MIDNUMLET)&&Dt===zt.NUMERIC||(ae===zt.EXTEND||ae===zt.FORMAT)&&(te===zt.ALETTER||te===zt.NUMERIC||te===zt.KATAKANA||te===zt.EXTEND||te===zt.FORMAT)||(te===zt.EXTEND||te===zt.FORMAT&&(Dt===zt.ALETTER||Dt===zt.NUMERIC||Dt===zt.KATAKANA||Dt===zt.EXTEND||Dt===zt.FORMAT))&&(ae===zt.ALETTER||ae===zt.NUMERIC||ae===zt.KATAKANA||ae===zt.EXTEND||ae===zt.FORMAT)||ae===zt.CR&&te===zt.LF?!1:ae===zt.NEWLINE||ae===zt.CR||ae===zt.LF||te===zt.NEWLINE||te===zt.CR||te===zt.LF?!0:!(ae===zt.KATAKANA&&te===zt.KATAKANA||te===zt.EXTENDNUMLET&&(ae===zt.ALETTER||ae===zt.NUMERIC||ae===zt.KATAKANA||ae===zt.EXTENDNUMLET)||ae===zt.EXTENDNUMLET&&(te===zt.ALETTER||te===zt.NUMERIC||te===zt.KATAKANA)||ae===zt.AT)},En=Go,Vo=Fn,je=cn,G=De=>De==="http"||De==="https",St=(De,ve)=>{let ae;for(ae=ve;ae<De.length&&!Vo.test(De[ae]);ae++);return ae},ro=(De,ve)=>{const ae=St(De,ve+1);return De.slice(ve+1,ae).join(En).substr(0,3)==="://"?ae:ve},pn=(De,ve,ae,te)=>{const Dt=[],Ee=[];let Ce=[];for(let _t=0;_t<ae.length;++_t)if(Ce.push(De[_t]),re(ae,_t)){const bn=ve[_t];if((te.includeWhitespace||!Vo.test(bn))&&(te.includePunctuation||!je.test(bn))){const $e=_t-Ce.length+1,et=_t+1,Xt=ve.slice($e,et).join(En);if(G(Xt)){const oo=ro(ve,_t),vo=De.slice(et,oo);Array.prototype.push.apply(Ce,vo),_t=oo}ve[_t+1]==="."&&/^([a-zA-Z]\.)+$/.test(Xt+".")?(Ce.push(De[_t+1]),Ee.push({start:$e,end:et+1})):Ee.push({start:$e,end:et}),Dt.push(Ce)}Ce=[]}return{words:Dt,indices:Ee}},xe=()=>({includeWhitespace:!1,includePunctuation:!1}),le=(De,ve,ae)=>{ae={...xe(),...ae};const te=as(De,ve),Dt=nn(te);return pn(De,te,Dt,ae)},qe=(De,ve,ae)=>le(De,ve,ae).words;var rt=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const k=(De,ve)=>{const ae=ve.getBlockElements(),te=ve.getVoidElements(),Dt=$e=>ae[$e.nodeName]||te[$e.nodeName],Ee=[];let Ce="";const _t=new rt(De,De);let bn;for(;bn=_t.next();)bn.nodeType===3?Ce+=ls(bn.data):Dt(bn)&&Ce.length&&(Ee.push(Ce),Ce="");return Ce.length&&Ee.push(Ce),Ee},ho=De=>De.replace(/\u200B/g,""),tt=De=>De.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length,No=(De,ve)=>{const ae=ho(k(De,ve).join(`
`));return qe(ae.split(""),jo).length},ln=(De,ve)=>{const ae=k(De,ve).join("");return tt(ae)},He=(De,ve)=>{const ae=k(De,ve).join("").replace(/\s/g,"");return tt(ae)},Je=(De,ve)=>()=>ve(De.getBody(),De.schema),Bt=(De,ve)=>()=>ve(De.selection.getRng().cloneContents(),De.schema),Be=De=>Je(De,No),xt=De=>({body:{getWordCount:Be(De),getCharacterCount:Je(De,ln),getCharacterCountWithoutSpaces:Je(De,He)},selection:{getWordCount:Bt(De,No),getCharacterCount:Bt(De,ln),getCharacterCountWithoutSpaces:Bt(De,He)},getCount:Be(De)}),Ae=(De,ve)=>{De.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(ve.body.getWordCount()),String(ve.selection.getWordCount())],["Characters (no spaces)",String(ve.body.getCharacterCountWithoutSpaces()),String(ve.selection.getCharacterCountWithoutSpaces())],["Characters",String(ve.body.getCharacterCount()),String(ve.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})},Ve=(De,ve)=>{De.addCommand("mceWordCount",()=>Ae(De,ve))};var F=tinymce.util.Tools.resolve("tinymce.util.Delay");const Fs=(De,ve)=>{De.dispatch("wordCountUpdate",{wordCount:{words:ve.body.getWordCount(),characters:ve.body.getCharacterCount(),charactersWithoutSpaces:ve.body.getCharacterCountWithoutSpaces()}})},jn=(De,ve)=>{Fs(De,ve)},Xn=(De,ve,ae)=>{const te=ds(()=>jn(De,ve),ae);De.on("init",()=>{jn(De,ve),F.setEditorTimeout(De,()=>{De.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",te.throttle)},0),De.on("remove",te.cancel)})},co=De=>{const ve=()=>De.execCommand("mceWordCount");De.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:ve,context:"any"}),De.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:ve,context:"any"})};var ms=(De=300)=>{Ko.add("wordcount",ve=>{const ae=xt(ve);return Ve(ve,ae),co(ve),Xn(ve,ae,De),ae})};ms()})();document.addEventListener("DOMContentLoaded",function(){document.querySelector(".tinymce-editor")&&vX.init({selector:".tinymce-editor",height:400,menubar:!1,license_key:"gpl",plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","help","wordcount"],toolbar:"undo redo | blocks | bold italic forecolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | link image | code | help",content_style:'body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; font-size: 14px; }',branding:!1,promotion:!1,skin:!1,content_css:!1,setup:function(Ko){Ko.on("change",function(){Ko.save()})}})});
